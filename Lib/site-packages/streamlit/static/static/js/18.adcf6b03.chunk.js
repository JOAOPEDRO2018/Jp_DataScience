/*! For license information please see 18.adcf6b03.chunk.js.LICENSE.txt */
(this["webpackJsonpstreamlit-browser"]=this["webpackJsonpstreamlit-browser"]||[]).push([[18],{1553:function(t,e){},1558:function(t,e){},1863:function(t,e){},1879:function(t,e){},1881:function(t,e){},1908:function(t,e){},3997:function(t,e,i){"use strict";i.r(e),i.d(e,"default",(function(){return q}));var n=i(6),a=i(0),r=i(2260),s=i.n(r),o=i(1795),c=i.n(o),h=i(1818),l=i(1193),p=i(2251),d=i(1649),b=i(1644),u=i(2238),m=i(1194),w=i(218),j=i(16),x=i.n(j),g=i(25),S=i(125),k=i(38),O=i(142),f=i.n(O),v=i(24);class V extends Error{}class T extends Error{}class y{static get(){var t=this;return Object(g.a)(x.a.mark((function e(){var i,n,a;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=v.a.current,n=i.commandLine,a=i.userMapboxToken,y.token&&y.commandLine===n.toLowerCase()){e.next=10;break}if(""===a){e.next=6;break}y.token=a,e.next=9;break;case 6:return e.next=8,t.fetchToken("https://data.streamlit.io/tokens.json","mapbox");case 8:y.token=e.sent;case 9:y.commandLine=n.toLowerCase();case 10:return e.abrupt("return",y.token);case 11:case"end":return e.stop()}}),e)})))()}static fetchToken(t,e){return Object(g.a)(x.a.mark((function i(){var n,a;return x.a.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.prev=0,i.next=3,f.a.get(t);case 3:if(n=i.sent,null!=(a=n.data[e])&&""!==a){i.next=7;break}throw new Error('Missing token "'.concat(e,'"'));case 7:return i.abrupt("return",a);case 10:throw i.prev=10,i.t0=i.catch(0),new T("".concat(i.t0.message," (").concat(t,")"));case 13:case"end":return i.stop()}}),i,null,[[0,10]])})))()}}y.token=void 0,y.commandLine=void 0,y.isRunningLocal=()=>{const t=window.location.hostname;return"localhost"===t||"127.0.0.1"===t};var C=i(77),M=i.n(C),L=i(126),E=i(1);var F=({error:t,width:e,deltaType:i})=>t instanceof V?Object(E.jsx)(L.a,{width:e,name:"No Mapbox token provided",message:Object(E.jsxs)(E.Fragment,{children:[Object(E.jsxs)("p",{children:["To use ",Object(E.jsxs)("code",{children:["st.",i]})," or ",Object(E.jsx)("code",{children:"st.map"})," you need to set up a Mapbox access token."]}),Object(E.jsxs)("p",{children:["To get a token, create an account at"," ",Object(E.jsx)("a",{href:"https://mapbox.com",children:"https://mapbox.com"}),". It's free for moderate usage levels!"]}),Object(E.jsxs)("p",{children:["Once you have a token, just set it using the Streamlit config option ",Object(E.jsx)("code",{children:"mapbox.token"})," and don't forget to restart your Streamlit server at this point if it's still running, then reload this tab."]}),Object(E.jsxs)("p",{children:["See"," ",Object(E.jsx)("a",{href:"https://docs.streamlit.io/cli.html#view-all-config-options",children:"our documentation"})," ","for more info on how to set config options."]})]})}):t instanceof T?Object(E.jsx)(L.a,{width:e,name:"Error fetching Streamlit Mapbox token",message:Object(E.jsxs)(E.Fragment,{children:[Object(E.jsx)("p",{children:"This app requires an internet connection."}),Object(E.jsx)("p",{children:"Please check your connection and try again."}),Object(E.jsxs)("p",{children:["If you think this is a bug, please file bug report"," ",Object(E.jsx)("a",{href:"https://github.com/streamlit/streamlit/issues/new/choose",children:"here"}),"."]})]})}):Object(E.jsx)(L.a,{width:e,name:"Error fetching Streamlit Mapbox token",message:t.message});var N=t=>e=>{class i extends a.PureComponent{constructor(i){var a;super(i),a=this,this.initMapboxToken=Object(g.a)(x.a.mark((function t(){var e;return x.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,y.get();case 3:e=t.sent,a.setState({mapboxToken:e,isFetching:!1}),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),a.setState({mapboxTokenError:t.t0,isFetching:!1});case 10:case"end":return t.stop()}}),t,null,[[0,7]])}))),this.render=()=>{const i=this.state,a=i.mapboxToken,r=i.mapboxTokenError,s=i.isFetching,o=this.props.width;return r?Object(E.jsx)(F,{width:o,error:r,deltaType:t}):s?Object(E.jsx)(S.a,{body:"Loading...",kind:k.a.INFO,width:o}):Object(E.jsx)(e,Object(n.a)({mapboxToken:a},this.props))},this.state={isFetching:!0,mapboxToken:void 0,mapboxTokenError:void 0},this.initMapboxToken()}}return i.displayName="withMapboxToken(".concat(e.displayName||e.name,")"),M()(i,e)},D=i(7);const J=i.n(D)()("div",{target:"e1q4dr930"})((({width:t,height:e})=>({position:"relative",height:e,width:t})),"");i(1855);const P={classes:Object(n.a)(Object(n.a)(Object(n.a)({},l),b),d)};Object(m.registerLoaders)([u.CSVLoader]);const z=new p.JSONConverter({configuration:P});class I extends a.PureComponent{constructor(...t){super(...t),this.state={viewState:{bearing:0,pitch:0,zoom:11},initialized:!1,initialViewState:{}},this.componentDidMount=()=>{this.setState({initialized:!0})},this.createTooltip=t=>{const e=this.props.element;if(!t||!t.object||null==e.tooltip)return!1;const i=JSON.parse(e.tooltip);return i.html?i.html=this.interpolate(t,i.html):i.text=this.interpolate(t,i.text),i},this.interpolate=(t,e)=>{const i=e.match(/{(.*?)}/g);return i&&i.forEach((i=>{const n=i.substring(1,i.length-1);t.object.hasOwnProperty(n)&&(e=e.replace(i,t.object[n]))})),e},this.onViewStateChange=({viewState:t})=>{this.setState({viewState:t})}}static getDerivedStateFromProps(t,e){const i=I.getDeckObject(t);if(!c()(i.initialViewState,e.initialViewState)){const t=Object.keys(i.initialViewState).reduce(((t,a)=>i.initialViewState[a]===e.initialViewState[a]?t:Object(n.a)(Object(n.a)({},t),{},{[a]:i.initialViewState[a]})),{});return{viewState:Object(n.a)(Object(n.a)({},e.viewState),t),initialViewState:i.initialViewState}}return null}render(){const t=I.getDeckObject(this.props),e=this.state.viewState;return Object(E.jsx)(J,{className:"stDeckGlJsonChart",width:t.initialViewState.width,height:t.initialViewState.height,children:Object(E.jsx)(s.a,{viewState:e,onViewStateChange:this.onViewStateChange,height:t.initialViewState.height,width:t.initialViewState.width,layers:this.state.initialized?t.layers:[],getTooltip:this.createTooltip,controller:!0,children:Object(E.jsx)(h.StaticMap,{height:t.initialViewState.height,width:t.initialViewState.width,mapStyle:t.mapStyle&&("string"===typeof t.mapStyle?t.mapStyle:t.mapStyle[0]),mapboxApiAccessToken:this.props.mapboxToken})})})}}I.getDeckObject=t=>{const e=t.element,i=t.width,n=t.height,a=JSON.parse(e.json);return n?(a.initialViewState.height=n,a.initialViewState.width=i):(a.initialViewState.height||(a.initialViewState.height=500),e.useContainerWidth&&(a.initialViewState.width=i)),delete a.views,z.convert(a)};var q=N("st.pydeck_chart")(Object(w.a)(I))}}]);
//# sourceMappingURL=18.adcf6b03.chunk.js.map