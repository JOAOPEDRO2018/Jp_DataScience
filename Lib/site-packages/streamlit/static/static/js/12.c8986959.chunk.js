/*! For license information please see 12.c8986959.chunk.js.LICENSE.txt */
(this["webpackJsonpstreamlit-browser"]=this["webpackJsonpstreamlit-browser"]||[]).push([[12],{1176:function(e,t,n){!function(e){"use strict";function t(e,t,n){return e.fields=t||[],e.fname=n,e}function n(e){return null==e?null:e.fname}function r(e){return null==e?null:e.fields}function i(e){return 1===e.length?o(e[0]):a(e)}const o=e=>function(t){return t[e]},a=e=>{const t=e.length;return function(n){for(let r=0;r<t;++r)n=n[e[r]];return n}};function s(e){throw Error(e)}function u(e){const t=[],n=e.length;let r,i,o,a=null,u=0,c="";function l(){t.push(c+e.substring(r,i)),c="",r=i+1}for(e+="",r=i=0;i<n;++i)if(o=e[i],"\\"===o)c+=e.substring(r,i),c+=e.substring(++i,++i),r=i;else if(o===a)l(),a=null,u=-1;else{if(a)continue;r===u&&'"'===o||r===u&&"'"===o?(r=i+1,a=o):"."!==o||u?"["===o?(i>r&&l(),u=r=i+1):"]"===o&&(u||s("Access path missing open bracket: "+e),u>0&&l(),u=0,r=i+1):i>r?l():r=i+1}return u&&s("Access path missing closing bracket: "+e),a&&s("Access path missing closing quote: "+e),i>r&&(i++,l()),t}function c(e,n,r){const o=u(e);return e=1===o.length?o[0]:e,t((r&&r.get||i)(o),[e],n||e)}const l=c("id"),f=t((e=>e),[],"identity"),d=t((()=>0),[],"zero"),h=t((()=>1),[],"one"),p=t((()=>!0),[],"true"),g=t((()=>!1),[],"false");function m(e,t,n){const r=[t].concat([].slice.call(n));console[e].apply(console,r)}const v=0,y=1,b=2,x=3,w=4;function _(e,t){let n=e||v;return{level(e){return arguments.length?(n=+e,this):n},error(){return n>=y&&m(t||"error","ERROR",arguments),this},warn(){return n>=b&&m(t||"warn","WARN",arguments),this},info(){return n>=x&&m(t||"log","INFO",arguments),this},debug(){return n>=w&&m(t||"log","DEBUG",arguments),this}}}var A=Array.isArray;function k(e){return e===Object(e)}const E=e=>"__proto__"!==e;function D(...e){return e.reduce(((e,t)=>{for(const n in t)if("signals"===n)e.signals=M(e.signals,t.signals);else{const r="legend"===n?{layout:1}:"style"===n||null;C(e,n,t[n],r)}return e}),{})}function C(e,t,n,r){if(!E(t))return;let i,o;if(k(n)&&!A(n))for(i in o=k(e[t])?e[t]:e[t]={},n)r&&(!0===r||r[i])?C(o,i,n[i]):E(i)&&(o[i]=n[i]);else e[t]=n}function M(e,t){if(null==e)return t;const n={},r=[];function i(e){n[e.name]||(n[e.name]=1,r.push(e))}return t.forEach(i),e.forEach(i),r}function F(e){return e[e.length-1]}function S(e){return null==e||""===e?null:+e}const T=e=>t=>e*Math.exp(t),O=e=>t=>Math.log(e*t),N=e=>t=>Math.sign(t)*Math.log1p(Math.abs(t/e)),P=e=>t=>Math.sign(t)*Math.expm1(Math.abs(t))*e,R=e=>t=>t<0?-Math.pow(-t,e):Math.pow(t,e);function B(e,t,n,r){const i=n(e[0]),o=n(F(e)),a=(o-i)*t;return[r(i-a),r(o-a)]}function z(e,t){return B(e,t,S,f)}function j(e,t){var n=Math.sign(e[0]);return B(e,t,O(n),T(n))}function L(e,t,n){return B(e,t,R(n),R(1/n))}function I(e,t,n){return B(e,t,N(n),P(n))}function U(e,t,n,r,i){const o=r(e[0]),a=r(F(e)),s=null!=t?r(t):(o+a)/2;return[i(s+(o-s)*n),i(s+(a-s)*n)]}function q(e,t,n){return U(e,t,n,S,f)}function W(e,t,n){const r=Math.sign(e[0]);return U(e,t,n,O(r),T(r))}function H(e,t,n,r){return U(e,t,n,R(r),R(1/r))}function Y(e,t,n,r){return U(e,t,n,N(r),P(r))}function V(e){return 1+~~(new Date(e).getMonth()/3)}function G(e){return 1+~~(new Date(e).getUTCMonth()/3)}function $(e){return null!=e?A(e)?e:[e]:[]}function X(e,t,n){let r,i=e[0],o=e[1];return o<i&&(r=o,o=i,i=r),r=o-i,r>=n-t?[t,n]:[i=Math.min(Math.max(i,t),n-r),i+r]}function J(e){return"function"===typeof e}const Q="descending";function Z(e,n,i){i=i||{},n=$(n)||[];const o=[],a=[],s={},u=i.comparator||ee;return $(e).forEach(((e,t)=>{null!=e&&(o.push(n[t]===Q?-1:1),a.push(e=J(e)?e:c(e,null,i)),(r(e)||[]).forEach((e=>s[e]=1)))})),0===a.length?null:t(u(a,o),Object.keys(s))}const K=(e,t)=>(e<t||null==e)&&null!=t?-1:(e>t||null==t)&&null!=e?1:(t=t instanceof Date?+t:t,(e=e instanceof Date?+e:e)!==e&&t===t?-1:t!==t&&e===e?1:0),ee=(e,t)=>1===e.length?te(e[0],t[0]):ne(e,t,e.length),te=(e,t)=>function(n,r){return K(e(n),e(r))*t},ne=(e,t,n)=>(t.push(0),function(r,i){let o,a=0,s=-1;for(;0===a&&++s<n;)o=e[s],a=K(o(r),o(i));return a*t[s]});function re(e){return J(e)?e:()=>e}function ie(e,t){let n;return r=>{n&&clearTimeout(n),n=setTimeout((()=>(t(r),n=null)),e)}}function oe(e){for(let t,n,r=1,i=arguments.length;r<i;++r)for(n in t=arguments[r],t)e[n]=t[n];return e}function ae(e,t){let n,r,i,o,a=0;if(e&&(n=e.length))if(null==t){for(r=e[a];a<n&&(null==r||r!==r);r=e[++a]);for(i=o=r;a<n;++a)r=e[a],null!=r&&(r<i&&(i=r),r>o&&(o=r))}else{for(r=t(e[a]);a<n&&(null==r||r!==r);r=t(e[++a]));for(i=o=r;a<n;++a)r=t(e[a]),null!=r&&(r<i&&(i=r),r>o&&(o=r))}return[i,o]}function se(e,t){const n=e.length;let r,i,o,a,s,u=-1;if(null==t){for(;++u<n;)if(i=e[u],null!=i&&i>=i){r=o=i;break}if(u===n)return[-1,-1];for(a=s=u;++u<n;)i=e[u],null!=i&&(r>i&&(r=i,a=u),o<i&&(o=i,s=u))}else{for(;++u<n;)if(i=t(e[u],u,e),null!=i&&i>=i){r=o=i;break}if(u===n)return[-1,-1];for(a=s=u;++u<n;)i=t(e[u],u,e),null!=i&&(r>i&&(r=i,a=u),o<i&&(o=i,s=u))}return[a,s]}const ue=Object.prototype.hasOwnProperty;function ce(e,t){return ue.call(e,t)}const le={};function fe(e){let t,n={};function r(e){return ce(n,e)&&n[e]!==le}const i={size:0,empty:0,object:n,has:r,get:e=>r(e)?n[e]:void 0,set(e,t){return r(e)||(++i.size,n[e]===le&&--i.empty),n[e]=t,this},delete(e){return r(e)&&(--i.size,++i.empty,n[e]=le),this},clear(){i.size=i.empty=0,i.object=n={}},test(e){return arguments.length?(t=e,i):t},clean(){const e={};let r=0;for(const i in n){const o=n[i];o===le||t&&t(o)||(e[i]=o,++r)}i.size=r,i.empty=0,i.object=n=e}};return e&&Object.keys(e).forEach((t=>{i.set(t,e[t])})),i}function de(e,t,n,r,i,o){if(!n&&0!==n)return o;const a=+n;let s,u=e[0],c=F(e);c<u&&(s=u,u=c,c=s),s=Math.abs(t-u);const l=Math.abs(c-t);return s<l&&s<=a?r:l<=a?i:o}function he(e,t,n){const r=e.prototype=Object.create(t.prototype);return r.constructor=e,oe(r,n)}function pe(e,t,n,r){let i,o=t[0],a=t[t.length-1];return o>a&&(i=o,o=a,a=i),r=void 0===r||r,((n=void 0===n||n)?o<=e:o<e)&&(r?e<=a:e<a)}function ge(e){return"boolean"===typeof e}function me(e){return"[object Date]"===Object.prototype.toString.call(e)}function ve(e){return e&&J(e[Symbol.iterator])}function ye(e){return"number"===typeof e}function be(e){return"[object RegExp]"===Object.prototype.toString.call(e)}function xe(e){return"string"===typeof e}function we(e,n,r){e&&(e=n?$(e).map((e=>e.replace(/\\(.)/g,"$1"))):$(e));const o=e&&e.length,a=r&&r.get||i,s=e=>a(n?[e]:u(e));let c;if(o)if(1===o){const t=s(e[0]);c=function(e){return""+t(e)}}else{const t=e.map(s);c=function(e){let n=""+t[0](e),r=0;for(;++r<o;)n+="|"+t[r](e);return n}}else c=function(){return""};return t(c,e,"key")}function _e(e,t){const n=e[0],r=F(e),i=+t;return i?1===i?r:n+i*(r-n):n}const Ae=1e4;function ke(e){let t,n,r;e=+e||Ae;const i=()=>{t={},n={},r=0},o=(i,o)=>(++r>e&&(n=t,t={},r=1),t[i]=o);return i(),{clear:i,has:e=>ce(t,e)||ce(n,e),get:e=>ce(t,e)?t[e]:ce(n,e)?o(e,n[e]):void 0,set:(e,n)=>ce(t,e)?t[e]=n:o(e,n)}}function Ee(e,t,n,r){const i=t.length,o=n.length;if(!o)return t;if(!i)return n;const a=r||new t.constructor(i+o);let s=0,u=0,c=0;for(;s<i&&u<o;++c)a[c]=e(t[s],n[u])>0?n[u++]:t[s++];for(;s<i;++s,++c)a[c]=t[s];for(;u<o;++u,++c)a[c]=n[u];return a}function De(e,t){let n="";for(;--t>=0;)n+=e;return n}function Ce(e,t,n,r){const i=n||" ",o=e+"",a=t-o.length;return a<=0?o:"left"===r?De(i,a)+o:"center"===r?De(i,~~(a/2))+o+De(i,Math.ceil(a/2)):o+De(i,a)}function Me(e){return e&&F(e)-e[0]||0}function Fe(e){return A(e)?"["+e.map(Fe)+"]":k(e)||xe(e)?JSON.stringify(e).replace("\u2028","\\u2028").replace("\u2029","\\u2029"):e}function Se(e){return null==e||""===e?null:!(!e||"false"===e||"0"===e)&&!!e}const Te=e=>ye(e)||me(e)?e:Date.parse(e);function Oe(e,t){return t=t||Te,null==e||""===e?null:t(e)}function Ne(e){return null==e||""===e?null:e+""}function Pe(e){const t={},n=e.length;for(let r=0;r<n;++r)t[e[r]]=!0;return t}function Re(e,t,n,r){const i=null!=r?r:"\u2026",o=e+"",a=o.length,s=Math.max(0,t-i.length);return a<=t?o:"left"===n?i+o.slice(a-s):"center"===n?o.slice(0,Math.ceil(s/2))+i+o.slice(a-~~(s/2)):o.slice(0,s)+i}function Be(e,t,n){if(e)if(t){const r=e.length;for(let i=0;i<r;++i){const r=t(e[i]);r&&n(r,i,e)}}else e.forEach(n)}e.Debug=w,e.Error=y,e.Info=x,e.None=v,e.Warn=b,e.accessor=t,e.accessorFields=r,e.accessorName=n,e.array=$,e.ascending=K,e.clampRange=X,e.compare=Z,e.constant=re,e.debounce=ie,e.error=s,e.extend=oe,e.extent=ae,e.extentIndex=se,e.falsy=g,e.fastmap=fe,e.field=c,e.flush=de,e.hasOwnProperty=ce,e.id=l,e.identity=f,e.inherits=he,e.inrange=pe,e.isArray=A,e.isBoolean=ge,e.isDate=me,e.isFunction=J,e.isIterable=ve,e.isNumber=ye,e.isObject=k,e.isRegExp=be,e.isString=xe,e.key=we,e.lerp=_e,e.logger=_,e.lruCache=ke,e.merge=Ee,e.mergeConfig=D,e.one=h,e.pad=Ce,e.panLinear=z,e.panLog=j,e.panPow=L,e.panSymlog=I,e.peek=F,e.quarter=V,e.repeat=De,e.span=Me,e.splitAccessPath=u,e.stringValue=Fe,e.toBoolean=Se,e.toDate=Oe,e.toNumber=S,e.toSet=Pe,e.toString=Ne,e.truncate=Re,e.truthy=p,e.utcquarter=G,e.visitArray=Be,e.writeConfig=C,e.zero=d,e.zoomLinear=q,e.zoomLog=W,e.zoomPow=H,e.zoomSymlog=Y,Object.defineProperty(e,"__esModule",{value:!0})}(t)},1183:function(e,t,n){var r=n(16),i=n(1320);!function(e,t,n,o){"use strict";function a(e){const n=e||t.identity,r=[],i={};return r.add=e=>{const t=n(e);return i[t]||(i[t]=1,r.push(e)),r},r.remove=e=>{const t=n(e);if(i[t]){i[t]=0;const n=r.indexOf(e);n>=0&&r.splice(n,1)}return r},r}function s(e,t){return u.apply(this,arguments)}function u(){return(u=i(r.mark((function e(t,n){return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,n(t);case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),t.error(e.t0);case 8:case"end":return e.stop()}}),e,null,[[0,5]])})))).apply(this,arguments)}const c=Symbol("vega_id");let l=1;function f(e){return!(!e||!d(e))}function d(e){return e[c]}function h(e,t){return e[c]=t,e}function p(e){const t=e===Object(e)?e:{data:e};return d(t)?t:h(t,l++)}function g(e){return m(e,p({}))}function m(e,t){for(const n in e)t[n]=e[n];return t}function v(e,t){return h(t,d(e))}function y(e,t){return e?t?(n,r)=>e(n,r)||d(t(n))-d(t(r)):(t,n)=>e(t,n)||d(t)-d(n):null}function b(e){return e&&e.constructor===x}function x(){const e=[],n=[],r=[],i=[],o=[];let a=null,s=!1;return{constructor:x,insert(n){const r=t.array(n),i=r.length;for(let t=0;t<i;++t)e.push(r[t]);return this},remove(e){const r=t.isFunction(e)?i:n,o=t.array(e),a=o.length;for(let t=0;t<a;++t)r.push(o[t]);return this},modify(e,n,i){const a={field:n,value:t.constant(i)};return t.isFunction(e)?(a.filter=e,o.push(a)):(a.tuple=e,r.push(a)),this},encode(e,n){return t.isFunction(e)?o.push({filter:e,field:n}):r.push({tuple:e,field:n}),this},clean(e){return a=e,this},reflow(){return s=!0,this},pulse(t,u){const c={},l={};let f,h,g,m,v,y;for(f=0,h=u.length;f<h;++f)c[d(u[f])]=1;for(f=0,h=n.length;f<h;++f)v=n[f],c[d(v)]=-1;for(f=0,h=i.length;f<h;++f)m=i[f],u.forEach((e=>{m(e)&&(c[d(e)]=-1)}));for(f=0,h=e.length;f<h;++f)v=e[f],y=d(v),c[y]?c[y]=1:t.add.push(p(e[f]));for(f=0,h=u.length;f<h;++f)v=u[f],c[d(v)]<0&&t.rem.push(v);function b(e,n,r){r?e[n]=r(e):t.encode=n,s||(l[d(e)]=e)}for(f=0,h=r.length;f<h;++f)g=r[f],v=g.tuple,m=g.field,y=c[d(v)],y>0&&(b(v,m,g.value),t.modifies(m));for(f=0,h=o.length;f<h;++f)g=o[f],m=g.filter,u.forEach((e=>{m(e)&&c[d(e)]>0&&b(e,g.field,g.value)})),t.modifies(g.field);if(s)t.mod=n.length||i.length?u.filter((e=>c[d(e)]>0)):u.slice();else for(y in l)t.mod.push(l[y]);return(a||null==a&&(n.length||i.length))&&t.clean(!0),t}}}const w="_:mod:_";function _(){Object.defineProperty(this,w,{writable:!0,value:{}})}_.prototype={set(e,n,r,i){const o=this,a=o[e],s=o[w];return null!=n&&n>=0?(a[n]!==r||i)&&(a[n]=r,s[n+":"+e]=-1,s[e]=-1):(a!==r||i)&&(o[e]=r,s[e]=t.isArray(r)?1+r.length:-1),o},modified(e,n){const r=this[w];if(!arguments.length){for(const e in r)if(r[e])return!0;return!1}if(t.isArray(e)){for(let t=0;t<e.length;++t)if(r[e[t]])return!0;return!1}return null!=n&&n>=0?n+1<r[e]||!!r[n+":"+e]:!!r[e]},clear(){return this[w]={},this}};let A=0;const k="pulse",E=new _,D=1,C=2;function M(e,t,n,r){this.id=++A,this.value=e,this.stamp=-1,this.rank=-1,this.qrank=-1,this.flags=0,t&&(this._update=t),n&&this.parameters(n,r)}function F(e){return function(t){const n=this.flags;return 0===arguments.length?!!(n&e):(this.flags=t?n|e:n&~e,this)}}function S(e,n,r,i){let o,a=1;return e instanceof M?o=e:e&&e.prototype instanceof M?o=new e:t.isFunction(e)?o=new M(null,e):(a=0,o=new M(e,n)),this.rank(o),a&&(i=r,r=n),r&&this.connect(o,o.parameters(r,i)),this.touch(o),o}function T(e,t){const n=e.rank,r=t.length;for(let i=0;i<r;++i)if(n<t[i].rank)return void this.rerank(e)}M.prototype={targets(){return this._targets||(this._targets=a(t.id))},set(e){return this.value!==e?(this.value=e,1):0},skip:F(D),modified:F(C),parameters(e,n,r){n=!1!==n;const i=this._argval=this._argval||new _,o=this._argops=this._argops||[],a=[];let s,u,c,l;const f=(e,t,r)=>{r instanceof M?(r!==this&&(n&&r.targets().add(this),a.push(r)),o.push({op:r,name:e,index:t})):i.set(e,t,r)};for(s in e)if(u=e[s],s===k)t.array(u).forEach((e=>{e instanceof M?e!==this&&(e.targets().add(this),a.push(e)):t.error("Pulse parameters must be operator instances.")})),this.source=u;else if(t.isArray(u))for(i.set(s,-1,Array(c=u.length)),l=0;l<c;++l)f(s,l,u[l]);else f(s,-1,u);return this.marshall().clear(),r&&(o.initonly=!0),a},marshall(e){const t=this._argval||E,n=this._argops;let r,i,o,a;if(n){const s=n.length;for(i=0;i<s;++i)r=n[i],o=r.op,a=o.modified()&&o.stamp===e,t.set(r.name,r.index,o.value,a);if(n.initonly){for(i=0;i<s;++i)r=n[i],r.op.targets().remove(this);this._argops=null,this._update=null}}return t},detach(){const e=this._argops;let t,n,r,i;if(e)for(t=0,n=e.length;t<n;++t)r=e[t],i=r.op,i._targets&&i._targets.remove(this)},evaluate(e){const t=this._update;if(t){const n=this.marshall(e.stamp),r=t.call(this,n,e);if(n.clear(),r!==this.value)this.value=r;else if(!this.modified())return e.StopPropagation}},run(e){if(e.stamp<this.stamp)return e.StopPropagation;let t;return this.skip()?(this.skip(!1),t=0):t=this.evaluate(e),this.pulse=t||e}};let O=0;function N(e,t,n){this.id=++O,this.value=null,n&&(this.receive=n),e&&(this._filter=e),t&&(this._apply=t)}function P(e,t,n){return new N(e,t,n)}function R(e,n,r,i){const o=this,a=P(r,i),s=function(e){e.dataflow=o;try{a.receive(e)}catch(t){o.error(t)}finally{o.run()}};let u;u="string"===typeof e&&"undefined"!==typeof document?document.querySelectorAll(e):t.array(e);const c=u.length;for(let t=0;t<c;++t)u[t].addEventListener(n,s);return a}function B(e,t){const r=this.locale();return n.read(e,t,r.timeParse,r.utcParse)}function z(e,t,n){return t=this.parse(t,n),this.pulse(e,this.changeset().insert(t))}function j(e,t){return L.apply(this,arguments)}function L(){return(L=i(r.mark((function e(t,i){var o,a,s;return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=this,a=0,e.prev=2,e.next=5,o.loader().load(t,{context:"dataflow",response:n.responseType(i&&i.type)});case 5:s=e.sent;try{s=o.parse(s,i)}catch(r){a=-2,o.warn("Data ingestion failed",t,r)}e.next=13;break;case 9:e.prev=9,e.t0=e.catch(2),a=-1,o.warn("Loading failed",t,e.t0);case 13:return e.abrupt("return",{data:s,status:a});case 14:case"end":return e.stop()}}),e,this,[[2,9]])})))).apply(this,arguments)}function I(e,t,n){return U.apply(this,arguments)}function U(){return(U=i(r.mark((function e(n,i,o){var a,s,u;return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(s=(a=this)._pending||q(a)).requests+=1,e.next=4,a.request(i,o);case 4:return u=e.sent,a.pulse(n,a.changeset().remove(t.truthy).insert(u.data||[])),s.done(),e.abrupt("return",u);case 8:case"end":return e.stop()}}),e,this)})))).apply(this,arguments)}function q(e){let t;const n=new Promise((e=>t=e));return n.requests=0,n.done=()=>{0===--n.requests&&(e._pending=null,t(e))},e._pending=n}N.prototype={_filter:t.truthy,_apply:t.identity,targets(){return this._targets||(this._targets=a(t.id))},consume(e){return arguments.length?(this._consume=!!e,this):!!this._consume},receive(e){if(this._filter(e)){const t=this.value=this._apply(e),n=this._targets,r=n?n.length:0;for(let e=0;e<r;++e)n[e].receive(t);this._consume&&(e.preventDefault(),e.stopPropagation())}},filter(e){const t=P(e);return this.targets().add(t),t},apply(e){const t=P(null,e);return this.targets().add(t),t},merge(){const e=P();this.targets().add(e);for(let t=0,n=arguments.length;t<n;++t)arguments[t].targets().add(e);return e},throttle(e){let t=-1;return this.filter((()=>{const n=Date.now();return n-t>e?(t=n,1):0}))},debounce(e){const n=P();return this.targets().add(P(null,null,t.debounce(e,(e=>{const t=e.dataflow;n.receive(e),t&&t.run&&t.run()})))),n},between(e,t){let n=!1;return e.targets().add(P(null,null,(()=>n=!0))),t.targets().add(P(null,null,(()=>n=!1))),this.filter((()=>n))},detach(){}};const W={skip:!0};function H(e,t,n,r,i){return(e instanceof M?V:Y)(this,e,t,n,r,i),this}function Y(e,n,r,i,o,a){const s=t.extend({},a,W);let u,c;t.isFunction(r)||(r=t.constant(r)),void 0===i?u=t=>e.touch(r(t)):t.isFunction(i)?(c=new M(null,i,o,!1),u=t=>{c.evaluate(t);const n=r(t),i=c.value;b(i)?e.pulse(n,i,a):e.update(n,i,s)}):u=t=>e.update(r(t),i,s),n.apply(u)}function V(e,t,n,r,i,o){if(void 0===r)t.targets().add(n);else{const a=o||{},s=new M(null,G(n,r),i,!1);s.modified(a.force),s.rank=t.rank,t.targets().add(s),n&&(s.skip(!0),s.value=n.value,s.targets().add(n),e.connect(n,[s]))}}function G(e,n){return n=t.isFunction(n)?n:t.constant(n),e?function(t,r){const i=n(t,r);return e.skip()||(e.skip(i!==this.value).value=i),i}:n}function $(e){e.rank=++this._rank}function X(e){const n=[e];let r,i,o;for(;n.length;)if(this.rank(r=n.pop()),i=r._targets)for(o=i.length;--o>=0;)n.push(r=i[o]),r===e&&t.error("Cycle detected in dataflow graph.")}const J={},Q=1,Z=2,K=4,ee=Q|Z,te=Q|K,ne=Q|Z|K,re=8,ie=16,oe=32,ae=64;function se(e,t,n){this.dataflow=e,this.stamp=null==t?-1:t,this.add=[],this.rem=[],this.mod=[],this.fields=null,this.encode=n||null}function ue(e,n){const r=[];return t.visitArray(e,n,(e=>r.push(e))),r}function ce(e,t){const n={};return e.visit(t,(e=>{n[d(e)]=1})),e=>n[d(e)]?null:e}function le(e,t){return e?(n,r)=>e(n,r)&&t(n,r):t}function fe(e,t,n,r){const i=this,o=n.length;let a=0;this.dataflow=e,this.stamp=t,this.fields=null,this.encode=r||null,this.pulses=n;for(let s=0;s<o;++s){const e=n[s];if(e.stamp===t){if(e.fields){const t=i.fields||(i.fields={});for(const n in e.fields)t[n]=1}e.changed(i.ADD)&&(a|=i.ADD),e.changed(i.REM)&&(a|=i.REM),e.changed(i.MOD)&&(a|=i.MOD)}}this.changes=a}function de(e,t,n){return he.apply(this,arguments)}function he(){return(he=i(r.mark((function e(n,i,o){var u,c,l,f,d,h,p,g,m;return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(c=[],!(u=this)._pulse){e.next=3;break}return e.abrupt("return",ye(u));case 3:if(!u._pending){e.next=6;break}return e.next=6,u._pending;case 6:if(!i){e.next=9;break}return e.next=9,s(u,i);case 9:if(u._touched.length){e.next=12;break}return u.debug("Dataflow invoked, but nothing to do."),e.abrupt("return",u);case 12:l=++u._clock,u._pulse=new se(u,l,n),u._touched.forEach((e=>u._enqueue(e,!0))),u._touched=a(t.id),f=0,e.prev=17;case 18:if(!(u._heap.size()>0)){e.next=35;break}if((d=u._heap.pop()).rank===d.qrank){e.next=23;break}return u._enqueue(d,!0),e.abrupt("continue",18);case 23:if(!(h=d.run(u._getPulse(d,n))).then){e.next=30;break}return e.next=27,h;case 27:h=e.sent,e.next=31;break;case 30:h.async&&(c.push(h.async),h=J);case 31:h!==J&&d._targets&&d._targets.forEach((e=>u._enqueue(e))),++f,e.next=18;break;case 35:e.next=41;break;case 37:e.prev=37,e.t0=e.catch(17),u._heap.clear(),p=e.t0;case 41:if(u._input={},u._pulse=null,u.debug("Pulse ".concat(l,": ").concat(f," operators")),p&&(u._postrun=[],u.error(p)),!u._postrun.length){e.next=55;break}g=u._postrun.sort(((e,t)=>t.priority-e.priority)),u._postrun=[],m=0;case 49:if(!(m<g.length)){e.next=55;break}return e.next=52,s(u,g[m].callback);case 52:++m,e.next=49;break;case 55:if(!o){e.next=58;break}return e.next=58,s(u,o);case 58:return c.length&&Promise.all(c).then((e=>u.runAsync(null,(()=>{e.forEach((e=>{try{e(u)}catch(t){u.error(t)}}))})))),e.abrupt("return",u);case 60:case"end":return e.stop()}}),e,this,[[17,37]])})))).apply(this,arguments)}function pe(e,t,n){return ge.apply(this,arguments)}function ge(){return(ge=i(r.mark((function e(t,n,i){var o;return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._running){e.next=5;break}return e.next=3,this._running;case 3:e.next=0;break;case 5:return o=()=>this._running=null,(this._running=this.evaluate(t,n,i)).then(o,o),e.abrupt("return",this._running);case 8:case"end":return e.stop()}}),e,this)})))).apply(this,arguments)}function me(e,t,n){return this._pulse?ye(this):(this.evaluate(e,t,n),this)}function ve(e,t,n){if(this._pulse||t)this._postrun.push({priority:n||0,callback:e});else try{e(this)}catch(r){this.error(r)}}function ye(e){return e.error("Dataflow already running. Use runAsync() to chain invocations."),e}function be(e,t){const n=e.stamp<this._clock;n&&(e.stamp=this._clock),(n||t)&&(e.qrank=e.rank,this._heap.push(e))}function xe(e,n){const r=e.source,i=this._clock;return r&&t.isArray(r)?new fe(this,i,r.map((e=>e.pulse)),n):this._input[e.id]||we(this._pulse,r&&r.pulse)}function we(e,t){return t&&t.stamp===e.stamp?t:(e=e.fork(),t&&t!==J&&(e.source=t.source),e)}se.prototype={StopPropagation:J,ADD:Q,REM:Z,MOD:K,ADD_REM:ee,ADD_MOD:te,ALL:ne,REFLOW:re,SOURCE:ie,NO_SOURCE:oe,NO_FIELDS:ae,fork(e){return new se(this.dataflow).init(this,e)},clone(){const e=this.fork(ne);return e.add=e.add.slice(),e.rem=e.rem.slice(),e.mod=e.mod.slice(),e.source&&(e.source=e.source.slice()),e.materialize(ne|ie)},addAll(){let e=this;return!e.source||e.add===e.rem||!e.rem.length&&e.source.length===e.add.length||(e=new se(this.dataflow).init(this),e.add=e.source,e.rem=[]),e},init(e,t){const n=this;return n.stamp=e.stamp,n.encode=e.encode,!e.fields||t&ae||(n.fields=e.fields),t&Q?(n.addF=e.addF,n.add=e.add):(n.addF=null,n.add=[]),t&Z?(n.remF=e.remF,n.rem=e.rem):(n.remF=null,n.rem=[]),t&K?(n.modF=e.modF,n.mod=e.mod):(n.modF=null,n.mod=[]),t&oe?(n.srcF=null,n.source=null):(n.srcF=e.srcF,n.source=e.source,e.cleans&&(n.cleans=e.cleans)),n},runAfter(e){this.dataflow.runAfter(e)},changed(e){const t=e||ne;return t&Q&&this.add.length||t&Z&&this.rem.length||t&K&&this.mod.length},reflow(e){if(e)return this.fork(ne).reflow();const t=this.add.length,n=this.source&&this.source.length;return n&&n!==t&&(this.mod=this.source,t&&this.filter(K,ce(this,Q))),this},clean(e){return arguments.length?(this.cleans=!!e,this):this.cleans},modifies(e){const n=this.fields||(this.fields={});return t.isArray(e)?e.forEach((e=>n[e]=!0)):n[e]=!0,this},modified(e,n){const r=this.fields;return!(!n&&!this.mod.length||!r)&&(arguments.length?t.isArray(e)?e.some((e=>r[e])):r[e]:!!r)},filter(e,t){const n=this;return e&Q&&(n.addF=le(n.addF,t)),e&Z&&(n.remF=le(n.remF,t)),e&K&&(n.modF=le(n.modF,t)),e&ie&&(n.srcF=le(n.srcF,t)),n},materialize(e){const t=this;return(e=e||ne)&Q&&t.addF&&(t.add=ue(t.add,t.addF),t.addF=null),e&Z&&t.remF&&(t.rem=ue(t.rem,t.remF),t.remF=null),e&K&&t.modF&&(t.mod=ue(t.mod,t.modF),t.modF=null),e&ie&&t.srcF&&(t.source=t.source.filter(t.srcF),t.srcF=null),t},visit(e,n){const r=this,i=n;if(e&ie)return t.visitArray(r.source,r.srcF,i),r;e&Q&&t.visitArray(r.add,r.addF,i),e&Z&&t.visitArray(r.rem,r.remF,i),e&K&&t.visitArray(r.mod,r.modF,i);const o=r.source;if(e&re&&o){const e=r.add.length+r.mod.length;e===o.length||(e?t.visitArray(o,ce(r,te),i):t.visitArray(o,r.srcF,i))}return r}},t.inherits(fe,se,{fork(e){const t=new se(this.dataflow).init(this,e&this.NO_FIELDS);return void 0!==e&&(e&t.ADD&&this.visit(t.ADD,(e=>t.add.push(e))),e&t.REM&&this.visit(t.REM,(e=>t.rem.push(e))),e&t.MOD&&this.visit(t.MOD,(e=>t.mod.push(e)))),t},changed(e){return this.changes&e},modified(e){const n=this,r=n.fields;return r&&n.changes&n.MOD?t.isArray(e)?e.some((e=>r[e])):r[e]:0},filter(){t.error("MultiPulse does not support filtering.")},materialize(){t.error("MultiPulse does not support materialization.")},visit(e,t){const n=this,r=n.pulses,i=r.length;let o=0;if(e&n.SOURCE)for(;o<i;++o)r[o].visit(e,t);else for(;o<i;++o)r[o].stamp===n.stamp&&r[o].visit(e,t);return n}});const _e={skip:!1,force:!1};function Ae(e,t){const n=t||_e;return this._pulse?this._enqueue(e):this._touched.add(e),n.skip&&e.skip(!0),this}function ke(e,t,n){const r=n||_e;return(e.set(t)||r.force)&&this.touch(e,r),this}function Ee(e,t,n){this.touch(e,n||_e);const r=new se(this,this._clock+(this._pulse?0:1)),i=e.pulse&&e.pulse.source||[];return r.target=e,this._input[e.id]=t.pulse(r,i),this}function De(e){let t=[];return{clear:()=>t=[],size:()=>t.length,peek:()=>t[0],push:n=>(t.push(n),Ce(t,0,t.length-1,e)),pop:()=>{const n=t.pop();let r;return t.length?(r=t[0],t[0]=n,Me(t,0,e)):r=n,r}}}function Ce(e,t,n,r){let i,o;const a=e[n];for(;n>t&&(o=n-1>>1,i=e[o],r(a,i)<0);)e[n]=i,n=o;return e[n]=a}function Me(e,t,n){const r=t,i=e.length,o=e[t];let a,s=1+(t<<1);for(;s<i;)a=s+1,a<i&&n(e[s],e[a])>=0&&(s=a),e[t]=e[s],s=1+((t=s)<<1);return e[t]=o,Ce(e,r,t,n)}function Fe(){this.logger(t.logger()),this.logLevel(t.Error),this._clock=0,this._rank=0,this._locale=o.defaultLocale();try{this._loader=n.loader()}catch(e){}this._touched=a(t.id),this._input={},this._pulse=null,this._heap=De(((e,t)=>e.qrank-t.qrank)),this._postrun=[]}function Se(e){return function(){return this._log[e].apply(this,arguments)}}function Te(e,t){M.call(this,e,null,t)}Fe.prototype={stamp(){return this._clock},loader(e){return arguments.length?(this._loader=e,this):this._loader},locale(e){return arguments.length?(this._locale=e,this):this._locale},logger(e){return arguments.length?(this._log=e,this):this._log},error:Se("error"),warn:Se("warn"),info:Se("info"),debug:Se("debug"),logLevel:Se("level"),cleanThreshold:1e4,add:S,connect:T,rank:$,rerank:X,pulse:Ee,touch:Ae,update:ke,changeset:x,ingest:z,parse:B,preload:I,request:j,events:R,on:H,evaluate:de,run:me,runAsync:pe,runAfter:ve,_enqueue:be,_getPulse:xe},t.inherits(Te,M,{run(e){if(e.stamp<this.stamp)return e.StopPropagation;let t;return this.skip()?this.skip(!1):t=this.evaluate(e),t=t||e,t.then?t=t.then((e=>this.pulse=e)):t!==e.StopPropagation&&(this.pulse=t),t},evaluate(e){const t=this.marshall(e.stamp),n=this.transform(t,e);return t.clear(),n},transform(){}});const Oe={};function Ne(e){const t=Pe(e);return t&&t.Definition||null}function Pe(e){return e=e&&e.toLowerCase(),t.hasOwnProperty(Oe,e)?Oe[e]:null}e.Dataflow=Fe,e.EventStream=N,e.MultiPulse=fe,e.Operator=M,e.Parameters=_,e.Pulse=se,e.Transform=Te,e.UniqueList=a,e.asyncCallback=s,e.changeset=x,e.definition=Ne,e.derive=g,e.ingest=p,e.isChangeSet=b,e.isTuple=f,e.rederive=m,e.replace=v,e.stableCompare=y,e.transform=Pe,e.transforms=Oe,e.tupleid=d,Object.defineProperty(e,"__esModule",{value:!0})}(t,n(1176),n(1487),n(1368))},1190:function(e,t,n){var r=n(163),i=n(16),o=n(108);!function(e){"use strict";var t=i.mark(l),n=i.mark(oe);function a(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function s(e){let t=e,n=e;function r(e,t,r,i){for(null==r&&(r=0),null==i&&(i=e.length);r<i;){const o=r+i>>>1;n(e[o],t)<0?r=o+1:i=o}return r}function i(e,t,r,i){for(null==r&&(r=0),null==i&&(i=e.length);r<i;){const o=r+i>>>1;n(e[o],t)>0?i=o:r=o+1}return r}function o(e,n,i,o){null==i&&(i=0),null==o&&(o=e.length);const a=r(e,n,i,o-1);return a>i&&t(e[a-1],n)>-t(e[a],n)?a-1:a}return 1===e.length&&(t=(t,n)=>e(t)-n,n=u(e)),{left:r,center:o,right:i}}function u(e){return(t,n)=>a(e(t),n)}function c(e){return null===e?NaN:+e}function l(e,n){var r,a,s,u,c,l;return i.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(void 0!==n){t.next=21;break}r=o(e),t.prev=2,r.s();case 4:if((a=r.n()).done){t.next=11;break}if(!(null!=(s=a.value)&&(s=+s)>=s)){t.next=9;break}return t.next=9,s;case 9:t.next=4;break;case 11:t.next=16;break;case 13:t.prev=13,t.t0=t.catch(2),r.e(t.t0);case 16:return t.prev=16,r.f(),t.finish(16);case 19:t.next=40;break;case 21:u=-1,c=o(e),t.prev=23,c.s();case 25:if((l=c.n()).done){t.next=32;break}if(s=l.value,!(null!=(s=n(s,++u,e))&&(s=+s)>=s)){t.next=30;break}return t.next=30,s;case 30:t.next=25;break;case 32:t.next=37;break;case 34:t.prev=34,t.t1=t.catch(23),c.e(t.t1);case 37:return t.prev=37,c.f(),t.finish(37);case 40:case"end":return t.stop()}}),t,null,[[2,13,16,19],[23,34,37,40]])}const f=s(a),d=f.right,h=f.left,p=s(c).center;function g(e,t){let n=0;if(void 0===t){var r,i=o(e);try{for(i.s();!(r=i.n()).done;){let e=r.value;null!=e&&(e=+e)>=e&&++n}}catch(u){i.e(u)}finally{i.f()}}else{let r=-1;var a,s=o(e);try{for(s.s();!(a=s.n()).done;){let i=a.value;null!=(i=t(i,++r,e))&&(i=+i)>=i&&++n}}catch(u){s.e(u)}finally{s.f()}}return n}function m(e){return 0|e.length}function v(e){return!(e>0)}function y(e){return"object"!==typeof e||"length"in e?e:Array.from(e)}function b(e){return t=>e(...t)}function x(...e){const t="function"===typeof e[e.length-1]&&b(e.pop()),n=(e=e.map(y)).map(m),r=e.length-1,i=new Array(r+1).fill(0),o=[];if(r<0||n.some(v))return o;for(;;){o.push(i.map(((t,n)=>e[n][t])));let a=r;for(;++i[a]===n[a];){if(0===a)return t?o.map(t):o;i[a--]=0}}}function w(e,t){var n=0,r=0;return Float64Array.from(e,void 0===t?e=>n+=+e||0:i=>n+=+t(i,r++,e)||0)}function _(e,t){return t<e?-1:t>e?1:t>=e?0:NaN}function A(e,t){let n,r=0,i=0,a=0;if(void 0===t){var s,u=o(e);try{for(u.s();!(s=u.n()).done;){let e=s.value;null!=e&&(e=+e)>=e&&(n=e-i,i+=n/++r,a+=n*(e-i))}}catch(f){u.e(f)}finally{u.f()}}else{let s=-1;var c,l=o(e);try{for(l.s();!(c=l.n()).done;){let o=c.value;null!=(o=t(o,++s,e))&&(o=+o)>=o&&(n=o-i,i+=n/++r,a+=n*(o-i))}}catch(f){l.e(f)}finally{l.f()}}if(r>1)return a/(r-1)}function k(e,t){const n=A(e,t);return n?Math.sqrt(n):n}function E(e,t){let n,r;if(void 0===t){var i,a=o(e);try{for(a.s();!(i=a.n()).done;){const e=i.value;null!=e&&(void 0===n?e>=e&&(n=r=e):(n>e&&(n=e),r<e&&(r=e)))}}catch(c){a.e(c)}finally{a.f()}}else{let i=-1;var s,u=o(e);try{for(u.s();!(s=u.n()).done;){let o=s.value;null!=(o=t(o,++i,e))&&(void 0===n?o>=o&&(n=r=o):(n>o&&(n=o),r<o&&(r=o)))}}catch(c){u.e(c)}finally{u.f()}}return[n,r]}class D{constructor(){this._partials=new Float64Array(32),this._n=0}add(e){const t=this._partials;let n=0;for(let r=0;r<this._n&&r<32;r++){const i=t[r],o=e+i,a=Math.abs(e)<Math.abs(i)?e-(o-i):i-(o-e);a&&(t[n++]=a),e=o}return t[n]=e,this._n=n+1,this}valueOf(){const e=this._partials;let t,n,r,i=this._n,o=0;if(i>0){for(o=e[--i];i>0&&(t=o,n=e[--i],o=t+n,r=n-(o-t),!r););i>0&&(r<0&&e[i-1]<0||r>0&&e[i-1]>0)&&(n=2*r,t=o+n,n==t-o&&(o=t))}return o}}function C(e,t){const n=new D;if(void 0===t){var r,i=o(e);try{for(i.s();!(r=i.n()).done;){let e=r.value;(e=+e)&&n.add(e)}}catch(u){i.e(u)}finally{i.f()}}else{let r=-1;var a,s=o(e);try{for(s.s();!(a=s.n()).done;){let i=a.value;(i=+t(i,++r,e))&&n.add(i)}}catch(u){s.e(u)}finally{s.f()}}return+n}function M(e){return e}function F(e,...t){return B(e,M,M,t)}function S(e,...t){return B(e,Array.from,M,t)}function T(e,t,...n){return B(e,M,t,n)}function O(e,t,...n){return B(e,Array.from,t,n)}function N(e,...t){return B(e,M,R,t)}function P(e,...t){return B(e,Array.from,R,t)}function R(e){if(1!==e.length)throw new Error("duplicate key");return e[0]}function B(e,t,n,i){return function e(a,s){if(s>=i.length)return n(a);const u=new Map,c=i[s++];let l=-1;var f,d=o(a);try{for(d.s();!(f=d.n()).done;){const e=f.value,t=c(e,++l,a),n=u.get(t);n?n.push(e):u.set(t,[e])}}catch(g){d.e(g)}finally{d.f()}var h,p=o(u);try{for(p.s();!(h=p.n()).done;){const t=r(h.value,2),n=t[0],i=t[1];u.set(n,e(i,s))}}catch(g){p.e(g)}finally{p.f()}return t(u)}(e,0)}var z=Array.prototype.slice;function j(e){return function(){return e}}var L=Math.sqrt(50),I=Math.sqrt(10),U=Math.sqrt(2);function q(e,t,n){var r,i,o,a,s=-1;if(n=+n,(e=+e)===(t=+t)&&n>0)return[e];if((r=t<e)&&(i=e,e=t,t=i),0===(a=W(e,t,n))||!isFinite(a))return[];if(a>0)for(e=Math.ceil(e/a),t=Math.floor(t/a),o=new Array(i=Math.ceil(t-e+1));++s<i;)o[s]=(e+s)*a;else for(a=-a,e=Math.ceil(e*a),t=Math.floor(t*a),o=new Array(i=Math.ceil(t-e+1));++s<i;)o[s]=(e+s)/a;return r&&o.reverse(),o}function W(e,t,n){var r=(t-e)/Math.max(0,n),i=Math.floor(Math.log(r)/Math.LN10),o=r/Math.pow(10,i);return i>=0?(o>=L?10:o>=I?5:o>=U?2:1)*Math.pow(10,i):-Math.pow(10,-i)/(o>=L?10:o>=I?5:o>=U?2:1)}function H(e,t,n){var r=Math.abs(t-e)/Math.max(0,n),i=Math.pow(10,Math.floor(Math.log(r)/Math.LN10)),o=r/i;return o>=L?i*=10:o>=I?i*=5:o>=U&&(i*=2),t<e?-i:i}function Y(e,t,n){let r;for(;;){const i=W(e,t,n);if(i===r||0===i||!isFinite(i))return[e,t];i>0?(e=Math.floor(e/i)*i,t=Math.ceil(t/i)*i):i<0&&(e=Math.ceil(e*i)/i,t=Math.floor(t*i)/i),r=i}}function V(e){return Math.ceil(Math.log(g(e))/Math.LN2)+1}function G(){var e=M,t=E,n=V;function i(i){Array.isArray(i)||(i=Array.from(i));var o,a,s=i.length,u=new Array(s);for(o=0;o<s;++o)u[o]=e(i[o],o,i);var c=t(u),l=c[0],f=c[1],h=n(u,l,f);if(!Array.isArray(h)){const e=f,n=+h;if(t===E){var p=Y(l,f,n),g=r(p,2);l=g[0],f=g[1]}if((h=q(l,f,n))[h.length-1]>=f)if(e>=f&&t===E){const e=W(l,f,n);isFinite(e)&&(e>0?f=(Math.floor(f/e)+1)*e:e<0&&(f=(Math.ceil(f*-e)+1)/-e))}else h.pop()}for(var m=h.length;h[0]<=l;)h.shift(),--m;for(;h[m-1]>f;)h.pop(),--m;var v,y=new Array(m+1);for(o=0;o<=m;++o)(v=y[o]=[]).x0=o>0?h[o-1]:l,v.x1=o<m?h[o]:f;for(o=0;o<s;++o)l<=(a=u[o])&&a<=f&&y[d(h,a,0,m)].push(i[o]);return y}return i.value=function(t){return arguments.length?(e="function"===typeof t?t:j(t),i):e},i.domain=function(e){return arguments.length?(t="function"===typeof e?e:j([e[0],e[1]]),i):t},i.thresholds=function(e){return arguments.length?(n="function"===typeof e?e:Array.isArray(e)?j(z.call(e)):j(e),i):n},i}function $(e,t){let n;if(void 0===t){var r,i=o(e);try{for(i.s();!(r=i.n()).done;){const e=r.value;null!=e&&(n<e||void 0===n&&e>=e)&&(n=e)}}catch(u){i.e(u)}finally{i.f()}}else{let r=-1;var a,s=o(e);try{for(s.s();!(a=s.n()).done;){let i=a.value;null!=(i=t(i,++r,e))&&(n<i||void 0===n&&i>=i)&&(n=i)}}catch(u){s.e(u)}finally{s.f()}}return n}function X(e,t){let n;if(void 0===t){var r,i=o(e);try{for(i.s();!(r=i.n()).done;){const e=r.value;null!=e&&(n>e||void 0===n&&e>=e)&&(n=e)}}catch(u){i.e(u)}finally{i.f()}}else{let r=-1;var a,s=o(e);try{for(s.s();!(a=s.n()).done;){let i=a.value;null!=(i=t(i,++r,e))&&(n>i||void 0===n&&i>=i)&&(n=i)}}catch(u){s.e(u)}finally{s.f()}}return n}function J(e,t,n=0,r=e.length-1,i=a){for(;r>n;){if(r-n>600){const o=r-n+1,a=t-n+1,s=Math.log(o),u=.5*Math.exp(2*s/3),c=.5*Math.sqrt(s*u*(o-u)/o)*(a-o/2<0?-1:1);J(e,t,Math.max(n,Math.floor(t-a*u/o+c)),Math.min(r,Math.floor(t+(o-a)*u/o+c)),i)}const o=e[t];let a=n,s=r;for(Q(e,n,t),i(e[r],o)>0&&Q(e,n,r);a<s;){for(Q(e,a,s),++a,--s;i(e[a],o)<0;)++a;for(;i(e[s],o)>0;)--s}0===i(e[n],o)?Q(e,n,s):(++s,Q(e,s,r)),s<=t&&(n=s+1),t<=s&&(r=s-1)}return e}function Q(e,t,n){const r=e[t];e[t]=e[n],e[n]=r}function Z(e,t,n){if(r=(e=Float64Array.from(l(e,n))).length){if((t=+t)<=0||r<2)return X(e);if(t>=1)return $(e);var r,i=(r-1)*t,o=Math.floor(i),a=$(J(e,o).subarray(0,o+1));return a+(X(e.subarray(o+1))-a)*(i-o)}}function K(e,t,n=c){if(r=e.length){if((t=+t)<=0||r<2)return+n(e[0],0,e);if(t>=1)return+n(e[r-1],r-1,e);var r,i=(r-1)*t,o=Math.floor(i),a=+n(e[o],o,e);return a+(+n(e[o+1],o+1,e)-a)*(i-o)}}function ee(e,t,n){return Math.ceil((n-t)/(2*(Z(e,.75)-Z(e,.25))*Math.pow(g(e),-1/3)))}function te(e,t,n){return Math.ceil((n-t)/(3.5*k(e)*Math.pow(g(e),-1/3)))}function ne(e,t){let n,r=-1,i=-1;if(void 0===t){var a,s=o(e);try{for(s.s();!(a=s.n()).done;){const e=a.value;++i,null!=e&&(n<e||void 0===n&&e>=e)&&(n=e,r=i)}}catch(l){s.e(l)}finally{s.f()}}else{var u,c=o(e);try{for(c.s();!(u=c.n()).done;){let o=u.value;null!=(o=t(o,++i,e))&&(n<o||void 0===n&&o>=o)&&(n=o,r=i)}}catch(l){c.e(l)}finally{c.f()}}return r}function re(e,t){let n=0,r=0;if(void 0===t){var i,a=o(e);try{for(a.s();!(i=a.n()).done;){let e=i.value;null!=e&&(e=+e)>=e&&(++n,r+=e)}}catch(c){a.e(c)}finally{a.f()}}else{let i=-1;var s,u=o(e);try{for(u.s();!(s=u.n()).done;){let o=s.value;null!=(o=t(o,++i,e))&&(o=+o)>=o&&(++n,r+=o)}}catch(c){u.e(c)}finally{u.f()}}if(n)return r/n}function ie(e,t){return Z(e,.5,t)}function oe(e){var t,r,a;return i.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:t=o(e),n.prev=1,t.s();case 3:if((r=t.n()).done){n.next=8;break}return a=r.value,n.delegateYield(a,"t0",6);case 6:n.next=3;break;case 8:n.next=13;break;case 10:n.prev=10,n.t1=n.catch(1),t.e(n.t1);case 13:return n.prev=13,t.f(),n.finish(13);case 16:case"end":return n.stop()}}),n,null,[[1,10,13,16]])}function ae(e){return Array.from(oe(e))}function se(e,t){let n,r=-1,i=-1;if(void 0===t){var a,s=o(e);try{for(s.s();!(a=s.n()).done;){const e=a.value;++i,null!=e&&(n>e||void 0===n&&e>=e)&&(n=e,r=i)}}catch(l){s.e(l)}finally{s.f()}}else{var u,c=o(e);try{for(c.s();!(u=c.n()).done;){let o=u.value;null!=(o=t(o,++i,e))&&(n>o||void 0===n&&o>=o)&&(n=o,r=i)}}catch(l){c.e(l)}finally{c.f()}}return r}function ue(e,t=ce){const n=[];let r,i=!1;var a,s=o(e);try{for(s.s();!(a=s.n()).done;){const e=a.value;i&&n.push(t(r,e)),r=e,i=!0}}catch(u){s.e(u)}finally{s.f()}return n}function ce(e,t){return[e,t]}function le(e,t){return Array.from(t,(t=>e[t]))}function fe(e,t,n){e=+e,t=+t,n=(i=arguments.length)<2?(t=e,e=0,1):i<3?1:+n;for(var r=-1,i=0|Math.max(0,Math.ceil((t-e)/n)),o=new Array(i);++r<i;)o[r]=e+r*n;return o}function de(e,t=a){let n,r=!1;if(1===t.length){let u;var i,s=o(e);try{for(s.s();!(i=s.n()).done;){const e=i.value,o=t(e);(r?a(o,u)<0:0===a(o,o))&&(n=e,u=o,r=!0)}}catch(l){s.e(l)}finally{s.f()}}else{var u,c=o(e);try{for(c.s();!(u=c.n()).done;){const e=u.value;(r?t(e,n)<0:0===t(e,e))&&(n=e,r=!0)}}catch(l){c.e(l)}finally{c.f()}}return n}function he(e,t=a){if(1===t.length)return se(e,t);let n,r=-1,i=-1;var s,u=o(e);try{for(u.s();!(s=u.n()).done;){const e=s.value;++i,(r<0?0===t(e,e):t(e,n)<0)&&(n=e,r=i)}}catch(c){u.e(c)}finally{u.f()}return r}function pe(e,t=a){let n,r=!1;if(1===t.length){let u;var i,s=o(e);try{for(s.s();!(i=s.n()).done;){const e=i.value,o=t(e);(r?a(o,u)>0:0===a(o,o))&&(n=e,u=o,r=!0)}}catch(l){s.e(l)}finally{s.f()}}else{var u,c=o(e);try{for(c.s();!(u=c.n()).done;){const e=u.value;(r?t(e,n)>0:0===t(e,e))&&(n=e,r=!0)}}catch(l){c.e(l)}finally{c.f()}}return n}function ge(e,t=a){if(1===t.length)return ne(e,t);let n,r=-1,i=-1;var s,u=o(e);try{for(u.s();!(s=u.n()).done;){const e=s.value;++i,(r<0?0===t(e,e):t(e,n)>0)&&(n=e,r=i)}}catch(c){u.e(c)}finally{u.f()}return r}function me(e,t){const n=he(e,t);return n<0?void 0:n}var ve=ye(Math.random);function ye(e){return function(t,n=0,r=t.length){let i=r-(n=+n);for(;i;){const r=e()*i--|0,o=t[i+n];t[i+n]=t[r+n],t[r+n]=o}return t}}function be(e,t){let n=0;if(void 0===t){var r,i=o(e);try{for(i.s();!(r=i.n()).done;){let e=r.value;(e=+e)&&(n+=e)}}catch(u){i.e(u)}finally{i.f()}}else{let r=-1;var a,s=o(e);try{for(s.s();!(a=s.n()).done;){let i=a.value;(i=+t(i,++r,e))&&(n+=i)}}catch(u){s.e(u)}finally{s.f()}}return n}function xe(e){if(!(i=e.length))return[];for(var t=-1,n=X(e,we),r=new Array(n);++t<n;)for(var i,o=-1,a=r[t]=new Array(i);++o<i;)a[o]=e[o][t];return r}function we(e){return e.length}function _e(){return xe(arguments)}function Ae(e,t){if("function"!==typeof t)throw new TypeError("test is not a function");let n=-1;var r,i=o(e);try{for(i.s();!(r=i.n()).done;)if(!t(r.value,++n,e))return!1}catch(a){i.e(a)}finally{i.f()}return!0}function ke(e,t){if("function"!==typeof t)throw new TypeError("test is not a function");let n=-1;var r,i=o(e);try{for(i.s();!(r=i.n()).done;)if(t(r.value,++n,e))return!0}catch(a){i.e(a)}finally{i.f()}return!1}function Ee(e,t){if("function"!==typeof t)throw new TypeError("test is not a function");const n=[];let r=-1;var i,a=o(e);try{for(a.s();!(i=a.n()).done;){const o=i.value;t(o,++r,e)&&n.push(o)}}catch(s){a.e(s)}finally{a.f()}return n}function De(e,t){if("function"!==typeof e[Symbol.iterator])throw new TypeError("values is not iterable");if("function"!==typeof t)throw new TypeError("mapper is not a function");return Array.from(e,((n,r)=>t(n,r,e)))}function Ce(e,t,n){if("function"!==typeof t)throw new TypeError("reducer is not a function");const r=e[Symbol.iterator]();let i,o,a=-1;if(arguments.length<3){var s=r.next();if(i=s.done,n=s.value,i)return;++a}for(;i=(u=r.next()).done,o=u.value,!i;){var u;n=t(n,o,++a,e)}return n}function Me(e){if("function"!==typeof e[Symbol.iterator])throw new TypeError("values is not iterable");return Array.from(e).reverse()}function Fe(e,t=a){if("function"!==typeof e[Symbol.iterator])throw new TypeError("values is not iterable");return e=Array.from(e),1===t.length?(t=e.map(t),le(e,e.map(((e,t)=>t)).sort(((e,n)=>a(t[e],t[n]))))):e.sort(t)}function Se(e,...t){e=new Set(e);for(var n=0,r=t;n<r.length;n++){const t=r[n];var i,a=o(t);try{for(a.s();!(i=a.n()).done;){const t=i.value;e.delete(t)}}catch(s){a.e(s)}finally{a.f()}}return e}function Te(e,t){const n=t[Symbol.iterator](),r=new Set;var i,a=o(e);try{for(a.s();!(i=a.n()).done;){const e=i.value;if(r.has(e))return!1;let t,o;for(;t=(s=n.next()).value,o=s.done,s;){var s;if(o)break;if(Object.is(e,t))return!1;r.add(t)}}}catch(u){a.e(u)}finally{a.f()}return!0}function Oe(e){return e instanceof Set?e:new Set(e)}function Ne(e,...t){e=new Set(e),t=t.map(Oe);var n,r=o(e);try{e:for(r.s();!(n=r.n()).done;){const r=n.value;var i,a=o(t);try{for(a.s();!(i=a.n()).done;)if(!i.value.has(r)){e.delete(r);continue e}}catch(s){a.e(s)}finally{a.f()}}}catch(s){r.e(s)}finally{r.f()}return e}function Pe(e,t){const n=e[Symbol.iterator](),r=new Set;var i,a=o(t);try{for(a.s();!(i=a.n()).done;){const e=i.value;if(r.has(e))continue;let t,o;for(;t=(s=n.next()).value,o=s.done,s;){var s;if(o)return!1;if(r.add(t),Object.is(e,t))break}}}catch(u){a.e(u)}finally{a.f()}return!0}function Re(e,t){return Pe(t,e)}function Be(...e){const t=new Set;for(var n=0,r=e;n<r.length;n++){const e=r[n];var i,a=o(e);try{for(a.s();!(i=a.n()).done;){const e=i.value;t.add(e)}}catch(s){a.e(s)}finally{a.f()}}return t}e.Adder=D,e.ascending=a,e.bin=G,e.bisect=d,e.bisectCenter=p,e.bisectLeft=h,e.bisectRight=d,e.bisector=s,e.count=g,e.cross=x,e.cumsum=w,e.descending=_,e.deviation=k,e.difference=Se,e.disjoint=Te,e.every=Ae,e.extent=E,e.filter=Ee,e.fsum=C,e.greatest=pe,e.greatestIndex=ge,e.group=F,e.groups=S,e.histogram=G,e.index=N,e.indexes=P,e.intersection=Ne,e.least=de,e.leastIndex=he,e.map=De,e.max=$,e.maxIndex=ne,e.mean=re,e.median=ie,e.merge=ae,e.min=X,e.minIndex=se,e.nice=Y,e.pairs=ue,e.permute=le,e.quantile=Z,e.quantileSorted=K,e.quickselect=J,e.range=fe,e.reduce=Ce,e.reverse=Me,e.rollup=T,e.rollups=O,e.scan=me,e.shuffle=ve,e.shuffler=ye,e.some=ke,e.sort=Fe,e.subset=Re,e.sum=be,e.superset=Pe,e.thresholdFreedmanDiaconis=ee,e.thresholdScott=te,e.thresholdSturges=V,e.tickIncrement=W,e.tickStep=H,e.ticks=q,e.transpose=xe,e.union=Be,e.variance=A,e.zip=_e,Object.defineProperty(e,"__esModule",{value:!0})}(t)},1282:function(e,t,n){var r=n(163),i=n(16),o=n(108);!function(e,t){"use strict";var n=i.mark(a);function a(e,t){var r,a,s,u,c,l;return i.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(null!=t){n.next=21;break}r=o(e),n.prev=2,r.s();case 4:if((a=r.n()).done){n.next=11;break}if(!(null!=(s=a.value)&&""!==s&&(s=+s)>=s)){n.next=9;break}return n.next=9,s;case 9:n.next=4;break;case 11:n.next=16;break;case 13:n.prev=13,n.t0=n.catch(2),r.e(n.t0);case 16:return n.prev=16,r.f(),n.finish(16);case 19:n.next=41;break;case 21:u=-1,c=o(e),n.prev=23,c.s();case 25:if((l=c.n()).done){n.next=33;break}if(s=l.value,!(null!=(s=t(s,++u,e))&&""!==s&&(s=+s)>=s)){n.next=31;break}return n.next=31,s;case 31:n.next=25;break;case 33:n.next=38;break;case 35:n.prev=35,n.t1=n.catch(23),c.e(n.t1);case 38:return n.prev=38,c.f(),n.finish(38);case 41:case"end":return n.stop()}}),n,null,[[2,13,16,19],[23,35,38,41]])}function s(e,n,r){const i=Float64Array.from(a(e,r));return i.sort(t.ascending),n.map((e=>t.quantileSorted(i,e)))}function u(e,t){return s(e,[.25,.5,.75],t)}function c(e,n){const r=e.length,i=t.deviation(e,n),o=u(e,n),a=(o[2]-o[0])/1.34;return 1.06*(Math.min(i,a)||i||Math.abs(o[0])||1)*Math.pow(r,-.2)}function l(e){const t=e.maxbins||20,n=e.base||10,r=Math.log(n),i=e.divide||[5,2];let o,a,s,u,c,l,f=e.extent[0],d=e.extent[1];const h=e.span||d-f||Math.abs(f)||1;if(e.step)o=e.step;else if(e.steps){for(u=h/t,c=0,l=e.steps.length;c<l&&e.steps[c]<u;++c);o=e.steps[Math.max(0,c-1)]}else{for(a=Math.ceil(Math.log(t)/r),s=e.minstep||0,o=Math.max(s,Math.pow(n,Math.round(Math.log(h)/r)-a));Math.ceil(h/o)>t;)o*=n;for(c=0,l=i.length;c<l;++c)u=o/i[c],u>=s&&h/u<=t&&(o=u)}u=Math.log(o);const p=u>=0?0:1+~~(-u/r),g=Math.pow(n,-p-1);return(e.nice||void 0===e.nice)&&(u=Math.floor(f/o+g)*o,f=f<u?u-o:u,d=Math.ceil(d/o)*o),{start:f,stop:d===f?f+o:d,step:o}}function f(t){e.random=t}function d(n,r,i,o){if(!n.length)return[void 0,void 0];const s=Float64Array.from(a(n,o)),u=s.length,c=r;let l,f,d,h;for(d=0,h=Array(c);d<c;++d){for(l=0,f=0;f<u;++f)l+=s[~~(e.random()*u)];h[d]=l/u}return h.sort(t.ascending),[t.quantile(h,i/2),t.quantile(h,1-i/2)]}function h(e,t,n,r){r=r||(e=>e);const i=e.length,o=new Float64Array(i);let a,s=0,u=1,c=r(e[0]),l=c,f=c+t;for(;u<i;++u){if(a=r(e[u]),a>=f){for(l=(c+l)/2;s<u;++s)o[s]=l;f=a+t,c=a}l=a}for(l=(c+l)/2;s<u;++s)o[s]=l;return n?p(o,t+t/4):o}function p(e,t){const n=e.length;let r,i,o=0,a=1;for(;e[o]===e[a];)++a;for(;a<n;){for(r=a+1;e[a]===e[r];)++r;if(e[a]-e[a-1]<t){for(i=a+(o+r-a-a>>1);i<a;)e[i++]=e[a];for(;i>a;)e[i--]=e[o]}o=a,a=r}return e}function g(e){return function(){return(e=(1103515245*e+12345)%2147483647)/2147483647}}function m(t,n){let r,i,o;null==n&&(n=t,t=0);const a={min(e){return arguments.length?(r=e||0,o=i-r,a):r},max(e){return arguments.length?(i=e||0,o=i-r,a):i},sample:()=>r+Math.floor(o*e.random()),pdf:e=>e===Math.floor(e)&&e>=r&&e<i?1/o:0,cdf(e){const t=Math.floor(e);return t<r?0:t>=i?1:(t-r+1)/o},icdf:e=>e>=0&&e<=1?r-1+Math.floor(e*o):NaN};return a.min(t).max(n)}e.random=Math.random;const v=Math.sqrt(2*Math.PI),y=Math.SQRT2;let b=NaN;function x(t,n){t=t||0,n=null==n?1:n;let r,i,o=0,a=0;if(b===b)o=b,b=NaN;else{do{o=2*e.random()-1,a=2*e.random()-1,r=o*o+a*a}while(0===r||r>1);i=Math.sqrt(-2*Math.log(r)/r),o*=i,b=a*i}return t+o*n}function w(e,t,n){const r=(e-(t||0))/(n=null==n?1:n);return Math.exp(-.5*r*r)/(n*v)}function _(e,t,n){const r=(e-(t=t||0))/(n=null==n?1:n),i=Math.abs(r);let o;if(i>37)o=0;else{const e=Math.exp(-i*i/2);let t;i<7.07106781186547?(t=.0352624965998911*i+.700383064443688,t=t*i+6.37396220353165,t=t*i+33.912866078383,t=t*i+112.079291497871,t=t*i+221.213596169931,t=t*i+220.206867912376,o=e*t,t=.0883883476483184*i+1.75566716318264,t=t*i+16.064177579207,t=t*i+86.7807322029461,t=t*i+296.564248779674,t=t*i+637.333633378831,t=t*i+793.826512519948,t=t*i+440.413735824752,o/=t):(t=i+.65,t=i+4/t,t=i+3/t,t=i+2/t,t=i+1/t,o=e/t/2.506628274631)}return r>0?1-o:o}function A(e,t,n){return e<0||e>1?NaN:(t||0)+(null==n?1:n)*y*k(2*e-1)}function k(e){let t,n=-Math.log((1-e)*(1+e));return n<6.25?(n-=3.125,t=-364441206401782e-35,t=t*n-16850591381820166e-35,t=128584807152564e-32+t*n,t=11157877678025181e-33+t*n,t=t*n-1333171662854621e-31,t=20972767875968562e-33+t*n,t=6637638134358324e-30+t*n,t=t*n-4054566272975207e-29,t=t*n-8151934197605472e-29,t=26335093153082323e-28+t*n,t=t*n-12975133253453532e-27,t=t*n-5415412054294628e-26,t=1.0512122733215323e-9+t*n,t=t*n-4.112633980346984e-9,t=t*n-2.9070369957882005e-8,t=4.2347877827932404e-7+t*n,t=t*n-13654692000834679e-22,t=t*n-13882523362786469e-21,t=.00018673420803405714+t*n,t=t*n-.000740702534166267,t=t*n-.006033670871430149,t=.24015818242558962+t*n,t=1.6536545626831027+t*n):n<16?(n=Math.sqrt(n)-3.25,t=2.2137376921775787e-9,t=9.075656193888539e-8+t*n,t=t*n-2.7517406297064545e-7,t=1.8239629214389228e-8+t*n,t=15027403968909828e-22+t*n,t=t*n-4013867526981546e-21,t=29234449089955446e-22+t*n,t=12475304481671779e-21+t*n,t=t*n-47318229009055734e-21,t=6828485145957318e-20+t*n,t=24031110387097894e-21+t*n,t=t*n-.0003550375203628475,t=.0009532893797373805+t*n,t=t*n-.0016882755560235047,t=.002491442096107851+t*n,t=t*n-.003751208507569241,t=.005370914553590064+t*n,t=1.0052589676941592+t*n,t=3.0838856104922208+t*n):Number.isFinite(n)?(n=Math.sqrt(n)-5,t=-27109920616438573e-27,t=t*n-2.555641816996525e-10,t=1.5076572693500548e-9+t*n,t=t*n-3.789465440126737e-9,t=7.61570120807834e-9+t*n,t=t*n-1.496002662714924e-8,t=2.914795345090108e-8+t*n,t=t*n-6.771199775845234e-8,t=2.2900482228026655e-7+t*n,t=t*n-9.9298272942317e-7,t=4526062597223154e-21+t*n,t=t*n-1968177810553167e-20,t=7599527703001776e-20+t*n,t=t*n-.00021503011930044477,t=t*n-.00013871931833623122,t=1.0103004648645344+t*n,t=4.849906401408584+t*n):t=1/0,t*e}function E(e,t){let n,r;const i={mean(e){return arguments.length?(n=e||0,i):n},stdev(e){return arguments.length?(r=null==e?1:e,i):r},sample:()=>x(n,r),pdf:e=>w(e,n,r),cdf:e=>_(e,n,r),icdf:e=>A(e,n,r)};return i.mean(e).stdev(t)}function D(t,n){const r=E();let i=0;const o={data(e){return arguments.length?(t=e,i=e?e.length:0,o.bandwidth(n)):t},bandwidth(e){return arguments.length?(!(n=e)&&t&&(n=c(t)),o):n},sample:()=>t[~~(e.random()*i)]+n*r.sample(),pdf(e){let o=0,a=0;for(;a<i;++a)o+=r.pdf((e-t[a])/n);return o/n/i},cdf(e){let o=0,a=0;for(;a<i;++a)o+=r.cdf((e-t[a])/n);return o/i},icdf(){throw Error("KDE icdf not supported.")}};return o.data(t)}function C(e,t){return e=e||0,t=null==t?1:t,Math.exp(e+x()*t)}function M(e,t,n){if(e<=0)return 0;t=t||0,n=null==n?1:n;const r=(Math.log(e)-t)/n;return Math.exp(-.5*r*r)/(n*v*e)}function F(e,t,n){return _(Math.log(e),t,n)}function S(e,t,n){return Math.exp(A(e,t,n))}function T(e,t){let n,r;const i={mean(e){return arguments.length?(n=e||0,i):n},stdev(e){return arguments.length?(r=null==e?1:e,i):r},sample:()=>C(n,r),pdf:e=>M(e,n,r),cdf:e=>F(e,n,r),icdf:e=>S(e,n,r)};return i.mean(e).stdev(t)}function O(t,n){let r,i=0;function o(e){const t=[];let n,r=0;for(n=0;n<i;++n)r+=t[n]=null==e[n]?1:+e[n];for(n=0;n<i;++n)t[n]/=r;return t}const a={weights(e){return arguments.length?(r=o(n=e||[]),a):n},distributions(e){return arguments.length?(e?(i=e.length,t=e):(i=0,t=[]),a.weights(n)):t},sample(){const n=e.random();let o=t[i-1],a=r[0],s=0;for(;s<i-1;a+=r[++s])if(n<a){o=t[s];break}return o.sample()},pdf(e){let n=0,o=0;for(;o<i;++o)n+=r[o]*t[o].pdf(e);return n},cdf(e){let n=0,o=0;for(;o<i;++o)n+=r[o]*t[o].cdf(e);return n},icdf(){throw Error("Mixture icdf not supported.")}};return a.distributions(t).weights(n)}function N(t,n){return null==n&&(n=null==t?1:t,t=0),t+(n-t)*e.random()}function P(e,t,n){return null==n&&(n=null==t?1:t,t=0),e>=t&&e<=n?1/(n-t):0}function R(e,t,n){return null==n&&(n=null==t?1:t,t=0),e<t?0:e>n?1:(e-t)/(n-t)}function B(e,t,n){return null==n&&(n=null==t?1:t,t=0),e>=0&&e<=1?t+e*(n-t):NaN}function z(e,t){let n,r;const i={min(e){return arguments.length?(n=e||0,i):n},max(e){return arguments.length?(r=null==e?1:e,i):r},sample:()=>N(n,r),pdf:e=>P(e,n,r),cdf:e=>R(e,n,r),icdf:e=>B(e,n,r)};return null==t&&(t=null==e?1:e,e=0),i.min(e).max(t)}function j(e,t,n,r){const i=r-e*e,o=Math.abs(i)<1e-24?0:(n-e*t)/i;return[t-o*e,o]}function L(e,t,n,r){e=e.filter((e=>{let r=t(e),i=n(e);return null!=r&&(r=+r)>=r&&null!=i&&(i=+i)>=i})),r&&e.sort(((e,n)=>t(e)-t(n)));const i=e.length,a=new Float64Array(i),s=new Float64Array(i);let u,c,l,f=0,d=0,h=0;var p,g=o(e);try{for(g.s();!(p=g.n()).done;)l=p.value,a[f]=u=+t(l),s[f]=c=+n(l),++f,d+=(u-d)/f,h+=(c-h)/f}catch(m){g.e(m)}finally{g.f()}for(f=0;f<i;++f)a[f]-=d,s[f]-=h;return[a,s,d,h]}function I(e,t,n,r){let i,a,s=-1;var u,c=o(e);try{for(c.s();!(u=c.n()).done;){const e=u.value;i=t(e),a=n(e),null!=i&&(i=+i)>=i&&null!=a&&(a=+a)>=a&&r(i,a,++s)}}catch(l){c.e(l)}finally{c.f()}}function U(e,t,n,r,i){let o=0,a=0;return I(e,t,n,((e,t)=>{const n=t-i(e),s=t-r;o+=n*n,a+=s*s})),1-o/a}function q(e,t,n){let r=0,i=0,o=0,a=0,s=0;I(e,t,n,((e,t)=>{++s,r+=(e-r)/s,i+=(t-i)/s,o+=(e*t-o)/s,a+=(e*e-a)/s}));const u=j(r,i,o,a),c=e=>u[0]+u[1]*e;return{coef:u,predict:c,rSquared:U(e,t,n,i,c)}}function W(e,t,n){let r=0,i=0,o=0,a=0,s=0;I(e,t,n,((e,t)=>{++s,e=Math.log(e),r+=(e-r)/s,i+=(t-i)/s,o+=(e*t-o)/s,a+=(e*e-a)/s}));const u=j(r,i,o,a),c=e=>u[0]+u[1]*Math.log(e);return{coef:u,predict:c,rSquared:U(e,t,n,i,c)}}function H(e,t,n){const i=L(e,t,n),o=r(i,4),a=o[0],s=(o[1],o[2]),u=o[3];let c,l,f,d=0,h=0,p=0,g=0,m=0;I(e,t,n,((e,t)=>{c=a[m++],l=Math.log(t),f=c*t,d+=(t*l-d)/m,h+=(f-h)/m,p+=(f*l-p)/m,g+=(c*f-g)/m}));const v=j(h/u,d/u,p/u,g/u),y=r(v,2),b=y[0],x=y[1],w=e=>Math.exp(b+x*(e-s));return{coef:[Math.exp(b-x*s),x],predict:w,rSquared:U(e,t,n,u,w)}}function Y(e,t,n){let r=0,i=0,o=0,a=0,s=0,u=0;I(e,t,n,((e,t)=>{const n=Math.log(e),c=Math.log(t);++u,r+=(n-r)/u,i+=(c-i)/u,o+=(n*c-o)/u,a+=(n*n-a)/u,s+=(t-s)/u}));const c=j(r,i,o,a),l=e=>c[0]*Math.pow(e,c[1]);return c[0]=Math.exp(c[0]),{coef:c,predict:l,rSquared:U(e,t,n,s,l)}}function V(e,t,n){const i=L(e,t,n),o=r(i,4),a=o[0],s=o[1],u=o[2],c=o[3],l=a.length;let f,d,h,p,g=0,m=0,v=0,y=0,b=0;for(f=0;f<l;)d=a[f],h=s[f++],p=d*d,g+=(p-g)/f,m+=(p*d-m)/f,v+=(p*p-v)/f,y+=(d*h-y)/f,b+=(p*h-b)/f;const x=v-g*g,w=g*x-m*m,_=(b*g-y*m)/w,A=(y*x-b*m)/w,k=-_*g,E=e=>_*(e-=u)*e+A*e+k+c;return{coef:[k-A*u+_*u*u+c,A-2*_*u,_],predict:E,rSquared:U(e,t,n,c,E)}}function G(e,t,n,i){if(1===i)return q(e,t,n);if(2===i)return V(e,t,n);const o=L(e,t,n),a=r(o,4),s=a[0],u=a[1],c=a[2],l=a[3],f=s.length,d=[],h=[],p=i+1;let g,m,v,y,b;for(g=0;g<p;++g){for(v=0,y=0;v<f;++v)y+=Math.pow(s[v],g)*u[v];for(d.push(y),b=new Float64Array(p),m=0;m<p;++m){for(v=0,y=0;v<f;++v)y+=Math.pow(s[v],g+m);b[m]=y}h.push(b)}h.push(d);const x=X(h),w=e=>{e-=c;let t=l+x[0]+x[1]*e+x[2]*e*e;for(g=3;g<p;++g)t+=x[g]*Math.pow(e,g);return t};return{coef:$(p,x,-c,l),predict:w,rSquared:U(e,t,n,l,w)}}function $(e,t,n,r){const i=Array(e);let o,a,s,u;for(o=0;o<e;++o)i[o]=0;for(o=e-1;o>=0;--o)for(s=t[o],u=1,i[o]+=s,a=1;a<=o;++a)u*=(o+1-a)/a,i[o-a]+=s*Math.pow(n,a)*u;return i[0]+=r,i}function X(e){const t=e.length-1,n=[];let r,i,o,a,s;for(r=0;r<t;++r){for(a=r,i=r+1;i<t;++i)Math.abs(e[r][i])>Math.abs(e[r][a])&&(a=i);for(o=r;o<t+1;++o)s=e[o][r],e[o][r]=e[o][a],e[o][a]=s;for(i=r+1;i<t;++i)for(o=t;o>=r;o--)e[o][i]-=e[o][r]*e[r][i]/e[r][r]}for(i=t-1;i>=0;--i){for(s=0,o=i+1;o<t;++o)s+=e[o][i]*n[o];n[i]=(e[t][i]-s)/e[i][i]}return n}const J=2,Q=1e-12;function Z(e,n,i,o){const a=L(e,n,i,!0),s=r(a,4),u=s[0],c=s[1],l=s[2],f=s[3],d=u.length,h=Math.max(2,~~(o*d)),p=new Float64Array(d),g=new Float64Array(d),m=new Float64Array(d).fill(1);for(let v=-1;++v<=J;){const e=[0,h-1];for(let t=0;t<d;++t){const n=u[t],i=e[0],o=e[1],a=n-u[i]>u[o]-n?i:o;let s=0,l=0,f=0,d=0,h=0;const v=1/Math.abs(u[a]-n||1);for(let e=i;e<=o;++e){const t=u[e],r=c[e],i=K(Math.abs(n-t)*v)*m[e],o=t*i;s+=i,l+=o,f+=r*i,d+=r*o,h+=t*o}const y=j(l/s,f/s,d/s,h/s),b=r(y,2),x=b[0],w=b[1];p[t]=x+w*n,g[t]=Math.abs(c[t]-p[t]),ee(u,t+1,e)}if(v===J)break;const n=t.median(g);if(Math.abs(n)<Q)break;for(let t,r,i=0;i<d;++i)t=g[i]/(6*n),m[i]=t>=1?Q:(r=1-t*t)*r}return te(u,p,l,f)}function K(e){return(e=1-e*e*e)*e*e}function ee(e,t,n){const r=e[t];let i=n[0],o=n[1]+1;if(!(o>=e.length))for(;t>i&&e[o]-r<=r-e[i];)n[0]=++i,n[1]=o,++o}function te(e,t,n,r){const i=e.length,o=[];let a,s=0,u=0,c=[];for(;s<i;++s)a=e[s]+n,c[0]===a?c[1]+=(t[s]-c[1])/++u:(u=0,c[1]+=r,c=[a,t[s]],o.push(c));return c[1]+=r,o}const ne=.1*Math.PI/180;function re(e,t,n,r){n=n||25,r=Math.max(n,r||200);const i=t=>[t,e(t)],o=t[0],a=t[1],s=a-o,u=s/r,c=[i(o)],l=[];if(n===r){for(let e=1;e<r;++e)c.push(i(o+e/n*s));return c.push(i(a)),c}l.push(i(a));for(let h=n;--h>0;)l.push(i(o+h/n*s));let f=c[0],d=l[l.length-1];for(;d;){const e=i((f[0]+d[0])/2);e[0]-f[0]>=u&&ie(f,e,d)>ne?l.push(e):(f=d,c.push(d),l.pop()),d=l[l.length-1]}return c}function ie(e,t,n){const r=Math.atan2(n[1]-e[1],n[0]-e[0]),i=Math.atan2(t[1]-e[1],t[0]-e[0]);return Math.abs(r-i)}e.bandwidthNRD=c,e.bin=l,e.bootstrapCI=d,e.cumulativeLogNormal=F,e.cumulativeNormal=_,e.cumulativeUniform=R,e.densityLogNormal=M,e.densityNormal=w,e.densityUniform=P,e.dotbin=h,e.quantileLogNormal=S,e.quantileNormal=A,e.quantileUniform=B,e.quantiles=s,e.quartiles=u,e.randomInteger=m,e.randomKDE=D,e.randomLCG=g,e.randomLogNormal=T,e.randomMixture=O,e.randomNormal=E,e.randomUniform=z,e.regressionExp=H,e.regressionLinear=q,e.regressionLoess=Z,e.regressionLog=W,e.regressionPoly=G,e.regressionPow=Y,e.regressionQuad=V,e.sampleCurve=re,e.sampleLogNormal=C,e.sampleNormal=x,e.sampleUniform=N,e.setRandom=f,Object.defineProperty(e,"__esModule",{value:!0})}(t,n(1190))},1283:function(e,t,n){!function(e,t,n,r,i,o){"use strict";function a(e){if(e&&e.__esModule)return e;var t=Object.create(null);return e&&Object.keys(e).forEach((function(n){if("default"!==n){var r=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(t,n,r.get?r:{enumerable:!0,get:function(){return e[n]}})}})),t.default=e,Object.freeze(t)}var s=a(i);function u(e,t,n){const r=e-t+2*n;return e?r>0?r:1:0}const c="identity",l="linear",f="log",d="pow",h="sqrt",p="symlog",g="time",m="utc",v="sequential",y="diverging",b="quantile",x="quantize",w="threshold",_="ordinal",A="point",k="band",E="bin-ordinal",D="continuous",C="discrete",M="discretizing",F="interpolating",S="temporal";function T(e){return function(t){let n,r=t[0],i=t[1];return i<r&&(n=r,r=i,i=n),[e.invert(r),e.invert(i)]}}function O(e){return function(t){const n=e.range();let r,i,o,a,s=t[0],u=t[1],c=-1;for(u<s&&(i=s,s=u,u=i),o=0,a=n.length;o<a;++o)n[o]>=s&&n[o]<=u&&(c<0&&(c=o),r=o);if(!(c<0))return s=e.invertExtent(n[c]),u=e.invertExtent(n[r]),[void 0===s[0]?s[1]:s[0],void 0===u[1]?u[0]:u[1]]}}function N(){const e=r.scaleOrdinal().unknown(void 0),t=e.domain,i=e.range;let o,a,s=[0,1],c=!1,l=0,f=0,d=.5;function h(){const e=t().length,r=s[1]<s[0],h=s[1-r],p=u(e,l,f);let g=s[r-0];o=(h-g)/(p||1),c&&(o=Math.floor(o)),g+=(h-g-o*(e-l))*d,a=o*(1-l),c&&(g=Math.round(g),a=Math.round(a));const m=n.range(e).map((e=>g+o*e));return i(r?m.reverse():m)}return delete e.unknown,e.domain=function(e){return arguments.length?(t(e),h()):t()},e.range=function(e){return arguments.length?(s=[+e[0],+e[1]],h()):s.slice()},e.rangeRound=function(e){return s=[+e[0],+e[1]],c=!0,h()},e.bandwidth=function(){return a},e.step=function(){return o},e.round=function(e){return arguments.length?(c=!!e,h()):c},e.padding=function(e){return arguments.length?(f=Math.max(0,Math.min(1,e)),l=f,h()):l},e.paddingInner=function(e){return arguments.length?(l=Math.max(0,Math.min(1,e)),h()):l},e.paddingOuter=function(e){return arguments.length?(f=Math.max(0,Math.min(1,e)),h()):f},e.align=function(e){return arguments.length?(d=Math.max(0,Math.min(1,e)),h()):d},e.invertRange=function(e){if(null==e[0]||null==e[1])return;const r=s[1]<s[0],o=r?i().reverse():i(),u=o.length-1;let c,l,f,d=+e[0],h=+e[1];return d!==d||h!==h||(h<d&&(f=d,d=h,h=f),h<o[0]||d>s[1-r])?void 0:(c=Math.max(0,n.bisectRight(o,d)-1),l=d===h?c:n.bisectRight(o,h)-1,d-o[c]>a+1e-10&&++c,r&&(f=c,c=u-l,l=u-f),c>l?void 0:t().slice(c,l+1))},e.invert=function(t){const n=e.invertRange([t,t]);return n?n[0]:n},e.copy=function(){return N().domain(t()).range(s).round(c).paddingInner(l).paddingOuter(f).align(d)},h()}function P(e){const t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,e.copy=function(){return P(t())},e}function R(){return P(N().paddingInner(1))}var B=Array.prototype.map;function z(e){return B.call(e,t.toNumber)}const j=Array.prototype.slice;function L(){let e=[],i=[];function o(t){return null==t||t!==t?void 0:i[(n.bisect(e,t)-1)%i.length]}return o.domain=function(t){return arguments.length?(e=z(t),o):e.slice()},o.range=function(e){return arguments.length?(i=j.call(e),o):i.slice()},o.tickFormat=function(n,i){return r.tickFormat(e[0],t.peek(e),null==n?10:n,i)},o.copy=function(){return L().domain(o.domain()).range(o.range())},o}const I={};function U(e,n,r){const i=function(){const t=n();return t.invertRange||(t.invertRange=t.invert?T(t):t.invertExtent?O(t):void 0),t.type=e,t};return i.metadata=t.toSet(t.array(r)),i}function q(e,t,n){return arguments.length>1?(I[e]=U(e,t,n),this):W(e)?I[e]:void 0}function W(e){return t.hasOwnProperty(I,e)}function H(e,t){const n=I[e];return n&&n.metadata[t]}function Y(e){return H(e,D)}function V(e){return H(e,C)}function G(e){return H(e,M)}function $(e){return H(e,f)}function X(e){return H(e,S)}function J(e){return H(e,F)}function Q(e){return H(e,b)}q(c,r.scaleIdentity),q(l,r.scaleLinear,D),q(f,r.scaleLog,[D,f]),q(d,r.scalePow,D),q(h,r.scaleSqrt,D),q(p,r.scaleSymlog,D),q(g,r.scaleTime,[D,S]),q(m,r.scaleUtc,[D,S]),q(v,r.scaleSequential,[D,F]),q("".concat(v,"-").concat(l),r.scaleSequential,[D,F]),q("".concat(v,"-").concat(f),r.scaleSequentialLog,[D,F,f]),q("".concat(v,"-").concat(d),r.scaleSequentialPow,[D,F]),q("".concat(v,"-").concat(h),r.scaleSequentialSqrt,[D,F]),q("".concat(v,"-").concat(p),r.scaleSequentialSymlog,[D,F]),q("".concat(y,"-").concat(l),r.scaleDiverging,[D,F]),q("".concat(y,"-").concat(f),r.scaleDivergingLog,[D,F,f]),q("".concat(y,"-").concat(d),r.scaleDivergingPow,[D,F]),q("".concat(y,"-").concat(h),r.scaleDivergingSqrt,[D,F]),q("".concat(y,"-").concat(p),r.scaleDivergingSymlog,[D,F]),q(b,r.scaleQuantile,[M,b]),q(x,r.scaleQuantize,M),q(w,r.scaleThreshold,M),q(E,L,[C,M]),q(_,r.scaleOrdinal,C),q(k,N,C),q(A,R,C);const Z=["clamp","base","constant","exponent"];function K(e,n){const r=n[0],i=t.peek(n)-r;return function(t){return e(r+t*i)}}function ee(e,t,n){return i.piecewise(ie(t||"rgb",n),e)}function te(e,t){const n=new Array(t),r=t+1;for(let i=0;i<t;)n[i]=e(++i/r);return n}function ne(e){const t=e.type,n=e.copy();return n.type=t,n}function re(e,n,r){const i=r-n;let o,a,s;return i&&Number.isFinite(i)?(o=(a=e.type).indexOf("-"),a=o<0?a:a.slice(o+1),s=q(a)().domain([n,r]).range([0,1]),Z.forEach((t=>e[t]?s[t](e[t]()):0)),s):t.constant(.5)}function ie(e,t){const n=s[oe(e)];return null!=t&&n&&n.gamma?n.gamma(t):n}function oe(e){return"interpolate"+e.toLowerCase().split("-").map((e=>e[0].toUpperCase()+e.slice(1))).join("")}const ae={blues:"cfe1f2bed8eca8cee58fc1de74b2d75ba3cf4592c63181bd206fb2125ca40a4a90",greens:"d3eecdc0e6baabdda594d3917bc77d60ba6c46ab5e329a512089430e7735036429",greys:"e2e2e2d4d4d4c4c4c4b1b1b19d9d9d8888887575756262624d4d4d3535351e1e1e",oranges:"fdd8b3fdc998fdb87bfda55efc9244f87f2cf06b18e4580bd14904b93d029f3303",purples:"e2e1efd4d4e8c4c5e0b4b3d6a3a0cc928ec3827cb97566ae684ea25c3696501f8c",reds:"fdc9b4fcb49afc9e80fc8767fa7051f6573fec3f2fdc2a25c81b1db21218970b13",blueGreen:"d5efedc1e8e0a7ddd18bd2be70c6a958ba9144ad77319c5d2089460e7736036429",bluePurple:"ccddecbad0e4a8c2dd9ab0d4919cc98d85be8b6db28a55a6873c99822287730f71",greenBlue:"d3eecec5e8c3b1e1bb9bd8bb82cec269c2ca51b2cd3c9fc7288abd1675b10b60a1",orangeRed:"fddcaffdcf9bfdc18afdad77fb9562f67d53ee6545e24932d32d1ebf130da70403",purpleBlue:"dbdaebc8cee4b1c3de97b7d87bacd15b9fc93a90c01e7fb70b70ab056199045281",purpleBlueGreen:"dbd8eac8cee4b0c3de93b7d872acd1549fc83892bb1c88a3097f8702736b016353",purpleRed:"dcc9e2d3b3d7ce9eccd186c0da6bb2e14da0e23189d91e6fc61159ab07498f023a",redPurple:"fccfccfcbec0faa9b8f98faff571a5ec539ddb3695c41b8aa908808d0179700174",yellowGreen:"e4f4acd1eca0b9e2949ed68880c97c62bb6e47aa5e3297502083440e723b036034",yellowOrangeBrown:"feeaa1fedd84fecc63feb746fca031f68921eb7215db5e0bc54c05ab3d038f3204",yellowOrangeRed:"fee087fed16ffebd59fea849fd903efc7335f9522bee3423de1b20ca0b22af0225",blueOrange:"134b852f78b35da2cb9dcae1d2e5eff2f0ebfce0bafbbf74e8932fc5690d994a07",brownBlueGreen:"704108a0651ac79548e3c78af3e6c6eef1eac9e9e48ed1c74da79e187a72025147",purpleGreen:"5b1667834792a67fb6c9aed3e6d6e8eff0efd9efd5aedda971bb75368e490e5e29",purpleOrange:"4114696647968f83b7b9b4d6dadbebf3eeeafce0bafbbf74e8932fc5690d994a07",redBlue:"8c0d25bf363adf745ef4ae91fbdbc9f2efeed2e5ef9dcae15da2cb2f78b3134b85",redGrey:"8c0d25bf363adf745ef4ae91fcdccbfaf4f1e2e2e2c0c0c0969696646464343434",yellowGreenBlue:"eff9bddbf1b4bde5b594d5b969c5be45b4c22c9ec02182b82163aa23479c1c3185",redYellowBlue:"a50026d4322cf16e43fcac64fedd90faf8c1dcf1ecabd6e875abd04a74b4313695",redYellowGreen:"a50026d4322cf16e43fcac63fedd8df9f7aed7ee8ea4d86e64bc6122964f006837",pinkYellowGreen:"8e0152c0267edd72adf0b3d6faddedf5f3efe1f2cab6de8780bb474f9125276419",spectral:"9e0142d13c4bf0704afcac63fedd8dfbf8b0e0f3a1a9dda269bda94288b55e4fa2",viridis:"440154470e61481a6c482575472f7d443a834144873d4e8a39568c35608d31688e2d708e2a788e27818e23888e21918d1f988b1fa08822a8842ab07f35b77943bf7154c56866cc5d7ad1518fd744a5db36bcdf27d2e21be9e51afde725",magma:"0000040404130b0924150e3720114b2c11603b0f704a107957157e651a80721f817f24828c29819a2e80a8327db6377ac43c75d1426fde4968e95462f1605df76f5cfa7f5efc8f65fe9f6dfeaf78febf84fece91fddea0fcedaffcfdbf",inferno:"0000040403130c0826170c3b240c4f330a5f420a68500d6c5d126e6b176e781c6d86216b932667a12b62ae305cbb3755c73e4cd24644dd513ae65c30ed6925f3771af8850ffb9506fca50afcb519fac62df6d645f2e661f3f484fcffa4",plasma:"0d088723069033059742039d5002a25d01a66a00a87801a88405a7900da49c179ea72198b12a90ba3488c33d80cb4779d35171da5a69e16462e76e5bed7953f2834cf68f44fa9a3dfca636fdb32ffec029fcce25f9dc24f5ea27f0f921",cividis:"00205100235800265d002961012b65042e670831690d346b11366c16396d1c3c6e213f6e26426e2c456e31476e374a6e3c4d6e42506e47536d4c566d51586e555b6e5a5e6e5e616e62646f66676f6a6a706e6d717270717573727976737c79747f7c75827f758682768985778c8877908b78938e789691789a94789e9778a19b78a59e77a9a177aea575b2a874b6ab73bbaf71c0b26fc5b66dc9b96acebd68d3c065d8c462ddc85fe2cb5ce7cf58ebd355f0d652f3da4ff7de4cfae249fce647",rainbow:"6e40aa883eb1a43db3bf3cafd83fa4ee4395fe4b83ff576eff6659ff7847ff8c38f3a130e2b72fcfcc36bee044aff05b8ff4576ff65b52f6673af27828ea8d1ddfa319d0b81cbecb23abd82f96e03d82e14c6edb5a5dd0664dbf6e40aa",sinebow:"ff4040fc582af47218e78d0bd5a703bfbf00a7d5038de70b72f41858fc2a40ff402afc5818f4720be78d03d5a700bfbf03a7d50b8de71872f42a58fc4040ff582afc7218f48d0be7a703d5bf00bfd503a7e70b8df41872fc2a58ff4040",turbo:"23171b32204a3e2a71453493493eae4b49c54a53d7485ee44569ee4074f53c7ff8378af93295f72e9ff42ba9ef28b3e926bce125c5d925cdcf27d5c629dcbc2de3b232e9a738ee9d3ff39347f68950f9805afc7765fd6e70fe667cfd5e88fc5795fb51a1f84badf545b9f140c5ec3cd0e637dae034e4d931ecd12ef4c92bfac029ffb626ffad24ffa223ff9821ff8d1fff821dff771cfd6c1af76118f05616e84b14df4111d5380fcb2f0dc0260ab61f07ac1805a313029b0f00950c00910b00",browns:"eedbbdecca96e9b97ae4a865dc9856d18954c7784cc0673fb85536ad44339f3632",tealBlues:"bce4d89dd3d181c3cb65b3c245a2b9368fae347da0306a932c5985",teals:"bbdfdfa2d4d58ac9c975bcbb61b0af4da5a43799982b8b8c1e7f7f127273006667",warmGreys:"dcd4d0cec5c1c0b8b4b3aaa7a59c9998908c8b827f7e7673726866665c5a59504e",goldGreen:"f4d166d5ca60b6c35c98bb597cb25760a6564b9c533f8f4f33834a257740146c36",goldOrange:"f4d166f8be5cf8aa4cf5983bf3852aef701be2621fd65322c54923b142239e3a26",goldRed:"f4d166f6be59f9aa51fc964ef6834bee734ae56249db5247cf4244c43141b71d3e",lightGreyRed:"efe9e6e1dad7d5cbc8c8bdb9bbaea9cd967ddc7b43e15f19df4011dc000b",lightGreyTeal:"e4eaead6dcddc8ced2b7c2c7a6b4bc64b0bf22a6c32295c11f85be1876bc",lightMulti:"e0f1f2c4e9d0b0de9fd0e181f6e072f6c053f3993ef77440ef4a3c",lightOrange:"f2e7daf7d5baf9c499fab184fa9c73f68967ef7860e8645bde515bd43d5b",lightTealBlue:"e3e9e0c0dccf9aceca7abfc859afc0389fb9328dad2f7ca0276b95255988",darkBlue:"3232322d46681a5c930074af008cbf05a7ce25c0dd38daed50f3faffffff",darkGold:"3c3c3c584b37725e348c7631ae8b2bcfa424ecc31ef9de30fff184ffffff",darkGreen:"3a3a3a215748006f4d048942489e4276b340a6c63dd2d836ffeb2cffffaa",darkMulti:"3737371f5287197d8c29a86995ce3fffe800ffffff",darkRed:"3434347036339e3c38cc4037e75d1eec8620eeab29f0ce32ffeb2c"};function se(e){const t=e.length/6|0,n=new Array(t);for(let r=0;r<t;)n[r]="#"+e.slice(6*r,6*++r);return n}function ue(e,t){for(const n in e)le(n,t(e[n]))}const ce={};function le(e,t){return e=e&&e.toLowerCase(),arguments.length>1?(ce[e]=t,this):ce[e]}ue({category10:"1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf",category20:"1f77b4aec7e8ff7f0effbb782ca02c98df8ad62728ff98969467bdc5b0d58c564bc49c94e377c2f7b6d27f7f7fc7c7c7bcbd22dbdb8d17becf9edae5",category20b:"393b795254a36b6ecf9c9ede6379398ca252b5cf6bcedb9c8c6d31bd9e39e7ba52e7cb94843c39ad494ad6616be7969c7b4173a55194ce6dbdde9ed6",category20c:"3182bd6baed69ecae1c6dbefe6550dfd8d3cfdae6bfdd0a231a35474c476a1d99bc7e9c0756bb19e9ac8bcbddcdadaeb636363969696bdbdbdd9d9d9",tableau10:"4c78a8f58518e4575672b7b254a24beeca3bb279a2ff9da69d755dbab0ac",tableau20:"4c78a89ecae9f58518ffbf7954a24b88d27ab79a20f2cf5b43989483bcb6e45756ff9d9879706ebab0acd67195fcbfd2b279a2d6a5c99e765fd8b5a5",accent:"7fc97fbeaed4fdc086ffff99386cb0f0027fbf5b17666666",dark2:"1b9e77d95f027570b3e7298a66a61ee6ab02a6761d666666",paired:"a6cee31f78b4b2df8a33a02cfb9a99e31a1cfdbf6fff7f00cab2d66a3d9affff99b15928",pastel1:"fbb4aeb3cde3ccebc5decbe4fed9a6ffffcce5d8bdfddaecf2f2f2",pastel2:"b3e2cdfdcdaccbd5e8f4cae4e6f5c9fff2aef1e2cccccccc",set1:"e41a1c377eb84daf4a984ea3ff7f00ffff33a65628f781bf999999",set2:"66c2a5fc8d628da0cbe78ac3a6d854ffd92fe5c494b3b3b3",set3:"8dd3c7ffffb3bebadafb807280b1d3fdb462b3de69fccde5d9d9d9bc80bdccebc5ffed6f"},se),ue(ae,(e=>ee(se(e))));const fe="symbol",de="discrete",he="gradient",pe=e=>t.isArray(e)?e.map((e=>String(e))):String(e),ge=(e,t)=>e[1]-t[1],me=(e,t)=>t[1]-e[1];function ve(e,n,r){let i;return t.isNumber(n)&&(e.bins&&(n=Math.max(n,e.bins.length)),null!=r&&(n=Math.min(n,Math.floor(t.span(e.domain())/r||1)))),t.isObject(n)&&(i=n.step,n=n.interval),t.isString(n)&&(n=e.type===g?o.timeInterval(n):e.type==m?o.utcInterval(n):t.error("Only time and utc scales accept interval strings."),i&&(n=n.every(i))),n}function ye(e,n,r){let i=e.range(),o=i[0],a=t.peek(i),s=ge;if(o>a&&(i=a,a=o,o=i,s=me),o=Math.floor(o),a=Math.ceil(a),n=n.map((t=>[t,e(t)])).filter((e=>o<=e[1]&&e[1]<=a)).sort(s).map((e=>e[0])),r>0&&n.length>1){const e=[n[0],t.peek(n)];for(;n.length>r&&n.length>=3;)n=n.filter(((e,t)=>!(t%2)));n.length<3&&(n=e)}return n}function be(e,t){return e.bins?ye(e,e.bins):e.ticks?e.ticks(t):e.domain()}function xe(e,t,n,r,i,o){const a=t.type;let s=pe;if(a===g||i===g)s=e.timeFormat(r);else if(a===m||i===m)s=e.utcFormat(r);else if($(a)){const i=e.formatFloat(r);if(o||t.bins)s=i;else{const e=we(t,n,!1);s=t=>e(t)?i(t):""}}else if(t.tickFormat){const i=t.domain();s=e.formatSpan(i[0],i[i.length-1],n,r)}else r&&(s=e.format(r));return s}function we(e,t,n){const r=be(e,t),i=e.base(),o=Math.log(i),a=Math.max(1,i*t/r.length),s=e=>{let t=e/Math.pow(i,Math.round(Math.log(e)/o));return t*i<i-.5&&(t*=i),t<=a};return n?r.filter(s):s}const _e={[b]:"quantiles",[x]:"thresholds",[w]:"domain"},Ae={[b]:"quantiles",[x]:"domain"};function ke(e,t){return e.bins?Ce(e.bins):e.type===f?we(e,t,!0):_e[e.type]?De(e[_e[e.type]]()):be(e,t)}function Ee(e,t,n){const r=t[Ae[t.type]](),i=r.length;let o,a=i>1?r[1]-r[0]:r[0];for(o=1;o<i;++o)a=Math.min(a,r[o]-r[o-1]);return e.formatSpan(0,a,30,n)}function De(e){const t=[-1/0].concat(e);return t.max=1/0,t}function Ce(e){const n=e.slice(0,-1);return n.max=t.peek(e),n}const Me=e=>_e[e.type]||e.bins;function Fe(e,t,n,r,i,o,a){const s=Ae[t.type]&&o!==g&&o!==m?Ee(e,t,i):xe(e,t,n,i,o,a);return r===fe&&Me(t)?Se(s):r===de?Oe(s):Ne(s)}const Se=e=>(t,n,r)=>{const i=Te(r[n+1],Te(r.max,1/0)),o=Pe(t,e),a=Pe(i,e);return o&&a?o+" \u2013 "+a:a?"< "+a:"\u2265 "+o},Te=(e,t)=>null!=e?e:t,Oe=e=>(t,n)=>n?e(t):null,Ne=e=>t=>e(t),Pe=(e,t)=>Number.isFinite(e)?t(e):null;function Re(e){const n=e.domain(),r=n.length-1;let i=+n[0],o=+t.peek(n),a=o-i;if(e.type===w){const e=r?a/r:.1;i-=e,o+=e,a=o-i}return e=>(e-i)/a}function Be(e,n,r,i){const o=i||n.type;return t.isString(r)&&X(o)&&(r=r.replace(/%a/g,"%A").replace(/%b/g,"%B")),r||o!==g?r||o!==m?Fe(e,n,5,null,r,i,!0):e.utcFormat("%A, %d %B %Y, %X UTC"):e.timeFormat("%A, %d %B %Y, %X")}function ze(e,n,r){r=r||{};const i=Math.max(3,r.maxlen||7),o=Be(e,n,r.format,r.formatType);if(G(n.type)){const e=ke(n).slice(1).map(o),t=e.length;return"".concat(t," boundar").concat(1===t?"y":"ies",": ").concat(e.join(", "))}if(V(n.type)){const e=n.domain(),t=e.length,r=t>i?e.slice(0,i-2).map(o).join(", ")+", ending with "+e.slice(-1).map(o):e.map(o).join(", ");return"".concat(t," value").concat(1===t?"":"s",": ").concat(r)}{const e=n.domain();return"values from ".concat(o(e[0])," to ").concat(o(t.peek(e)))}}Object.defineProperty(e,"scaleImplicit",{enumerable:!0,get:function(){return r.scaleImplicit}}),e.Band=k,e.BinOrdinal=E,e.DiscreteLegend=de,e.Diverging=y,e.GradientLegend=he,e.Identity=c,e.Linear=l,e.Log=f,e.Ordinal=_,e.Point=A,e.Pow=d,e.Quantile=b,e.Quantize=x,e.Sequential=v,e.Sqrt=h,e.SymbolLegend=fe,e.Symlog=p,e.Threshold=w,e.Time=g,e.UTC=m,e.bandSpace=u,e.domainCaption=ze,e.interpolate=ie,e.interpolateColors=ee,e.interpolateRange=K,e.isContinuous=Y,e.isDiscrete=V,e.isDiscretizing=G,e.isInterpolating=J,e.isLogarithmic=$,e.isQuantile=Q,e.isTemporal=X,e.isValidScaleType=W,e.labelFormat=Fe,e.labelFraction=Re,e.labelValues=ke,e.quantizeInterpolator=te,e.scale=q,e.scaleCopy=ne,e.scaleFraction=re,e.scheme=le,e.tickCount=ve,e.tickFormat=xe,e.tickValues=be,e.validTicks=ye,Object.defineProperty(e,"__esModule",{value:!0})}(t,n(1176),n(1190),n(2336),n(1713),n(1322))},1320:function(e,t){function n(e,t,n,r,i,o,a){try{var s=e[o](a),u=s.value}catch(c){return void n(c)}s.done?t(u):Promise.resolve(u).then(r,i)}e.exports=function(e){return function(){var t=this,r=arguments;return new Promise((function(i,o){var a=e.apply(t,r);function s(e){n(a,i,o,s,u,"next",e)}function u(e){n(a,i,o,s,u,"throw",e)}s(void 0)}))}}},1322:function(e,t,n){!function(e,t,n,r){"use strict";const i="year",o="quarter",a="month",s="week",u="date",c="day",l="dayofyear",f="hours",d="minutes",h="seconds",p="milliseconds",g=[i,o,a,s,u,c,l,f,d,h,p],m=g.reduce(((e,t,n)=>(e[t]=1+n,e)),{});function v(e){const n=t.array(e).slice(),r={};return n.length||t.error("Missing time unit."),n.forEach((e=>{t.hasOwnProperty(m,e)?r[e]=1:t.error("Invalid time unit: ".concat(e,"."))})),(r[s]||r[c]?1:0)+(r[o]||r[a]||r[u]?1:0)+(r[l]?1:0)>1&&t.error("Incompatible time units: ".concat(e)),n.sort(((e,t)=>m[e]-m[t])),n}const y={[i]:"%Y ",[o]:"Q%q ",[a]:"%b ",[u]:"%d ",[s]:"W%U ",[c]:"%a ",[l]:"%j ",[f]:"%H:00",[d]:"00:%M",[h]:":%S",[p]:".%L",["".concat(i,"-").concat(a)]:"%Y-%m ",["".concat(i,"-").concat(a,"-").concat(u)]:"%Y-%m-%d ",["".concat(f,"-").concat(d)]:"%H:%M"};function b(e,n){const r=t.extend({},y,n),i=v(e),o=i.length;let a,s,u="",c=0;for(c=0;c<o;)for(a=i.length;a>c;--a)if(s=i.slice(c,a).join("-"),null!=r[s]){u+=r[s],c=a;break}return u.trim()}const x=new Date;function w(e){return x.setFullYear(e),x.setMonth(0),x.setDate(1),x.setHours(0,0,0,0),x}function _(e){return k(new Date(e))}function A(e){return E(new Date(e))}function k(e){return n.timeDay.count(w(e.getFullYear())-1,e)}function E(e){return n.timeWeek.count(w(e.getFullYear())-1,e)}function D(e){return w(e).getDay()}function C(e,t,n,r,i,o,a){if(0<=e&&e<100){const s=new Date(-1,t,n,r,i,o,a);return s.setFullYear(e),s}return new Date(e,t,n,r,i,o,a)}function M(e){return S(new Date(e))}function F(e){return T(new Date(e))}function S(e){const t=Date.UTC(e.getUTCFullYear(),0,1);return n.utcDay.count(t-1,e)}function T(e){const t=Date.UTC(e.getUTCFullYear(),0,1);return n.utcWeek.count(t-1,e)}function O(e){return x.setTime(Date.UTC(e,0,1)),x.getUTCDay()}function N(e,t,n,r,i,o,a){if(0<=e&&e<100){const e=new Date(Date.UTC(-1,t,n,r,i,o,a));return e.setUTCFullYear(n.y),e}return new Date(Date.UTC(e,t,n,r,i,o,a))}function P(e,n,r,g,m){const v=n||1,y=t.peek(e),b=(e,t,n)=>R(r[n=n||e],g[n],e===y&&v,t),x=new Date,w=t.toSet(e),_=w[i]?b(i):t.constant(2012),A=w[a]?b(a):w[o]?b(o):t.zero,k=w[s]&&w[c]?b(c,1,s+c):w[s]?b(s,1):w[c]?b(c,1):w[u]?b(u,1):w[l]?b(l,1):t.one,E=w[f]?b(f):t.zero,D=w[d]?b(d):t.zero,C=w[h]?b(h):t.zero,M=w[p]?b(p):t.zero;return function(e){x.setTime(+e);const t=_(x);return m(t,A(x),k(x,t),E(x),D(x),C(x),M(x))}}function R(e,t,n,r){const i=n<=1?e:r?(t,i)=>r+n*Math.floor((e(t,i)-r)/n):(t,r)=>n*Math.floor(e(t,r)/n);return t?(e,n)=>t(i(e,n),n):i}function B(e,t,n){return t+7*e-(n+6)%7}const z={[i]:e=>e.getFullYear(),[o]:e=>Math.floor(e.getMonth()/3),[a]:e=>e.getMonth(),[u]:e=>e.getDate(),[f]:e=>e.getHours(),[d]:e=>e.getMinutes(),[h]:e=>e.getSeconds(),[p]:e=>e.getMilliseconds(),[l]:e=>k(e),[s]:e=>E(e),[s+c]:(e,t)=>B(E(e),e.getDay(),D(t)),[c]:(e,t)=>B(1,e.getDay(),D(t))},j={[o]:e=>3*e,[s]:(e,t)=>B(e,0,D(t))};function L(e,t){return P(e,t||1,z,j,C)}const I={[i]:e=>e.getUTCFullYear(),[o]:e=>Math.floor(e.getUTCMonth()/3),[a]:e=>e.getUTCMonth(),[u]:e=>e.getUTCDate(),[f]:e=>e.getUTCHours(),[d]:e=>e.getUTCMinutes(),[h]:e=>e.getUTCSeconds(),[p]:e=>e.getUTCMilliseconds(),[l]:e=>S(e),[s]:e=>T(e),[c]:(e,t)=>B(1,e.getUTCDay(),O(t)),[s+c]:(e,t)=>B(T(e),e.getUTCDay(),O(t))},U={[o]:e=>3*e,[s]:(e,t)=>B(e,0,O(t))};function q(e,t){return P(e,t||1,I,U,N)}const W={[i]:n.timeYear,[o]:n.timeMonth.every(3),[a]:n.timeMonth,[s]:n.timeWeek,[u]:n.timeDay,[c]:n.timeDay,[l]:n.timeDay,[f]:n.timeHour,[d]:n.timeMinute,[h]:n.timeSecond,[p]:n.timeMillisecond},H={[i]:n.utcYear,[o]:n.utcMonth.every(3),[a]:n.utcMonth,[s]:n.utcWeek,[u]:n.utcDay,[c]:n.utcDay,[l]:n.utcDay,[f]:n.utcHour,[d]:n.utcMinute,[h]:n.utcSecond,[p]:n.utcMillisecond};function Y(e){return W[e]}function V(e){return H[e]}function G(e,t,n){return e?e.offset(t,n):void 0}function $(e,t,n){return G(Y(e),t,n)}function X(e,t,n){return G(V(e),t,n)}function J(e,t,n,r){return e?e.range(t,n,r):void 0}function Q(e,t,n,r){return J(Y(e),t,n,r)}function Z(e,t,n,r){return J(V(e),t,n,r)}const K=1e3,ee=60*K,te=60*ee,ne=24*te,re=7*ne,ie=30*ne,oe=365*ne,ae=[i,a,u,f,d,h,p],se=ae.slice(0,-1),ue=se.slice(0,-1),ce=ue.slice(0,-1),le=ce.slice(0,-1),fe=[i,a],de=[i],he=[[se,1,K],[se,5,5*K],[se,15,15*K],[se,30,30*K],[ue,1,ee],[ue,5,5*ee],[ue,15,15*ee],[ue,30,30*ee],[ce,1,te],[ce,3,3*te],[ce,6,6*te],[ce,12,12*te],[le,1,ne],[[i,s],1,re],[fe,1,ie],[fe,3,3*ie],[de,1,oe]];function pe(e){const n=e.extent,i=e.maxbins||40,o=Math.abs(t.span(n))/i;let a,s,u=r.bisector((e=>e[2])).right(he,o);return u===he.length?(a=de,s=r.tickStep(n[0]/oe,n[1]/oe,i)):u?(u=he[o/he[u-1][2]<he[u][2]/o?u-1:u],a=u[0],s=u[1]):(a=ae,s=Math.max(r.tickStep(n[0],n[1],i),1)),{units:a,step:s}}e.DATE=u,e.DAY=c,e.DAYOFYEAR=l,e.HOURS=f,e.MILLISECONDS=p,e.MINUTES=d,e.MONTH=a,e.QUARTER=o,e.SECONDS=h,e.TIME_UNITS=g,e.WEEK=s,e.YEAR=i,e.dayofyear=_,e.timeBin=pe,e.timeFloor=L,e.timeInterval=Y,e.timeOffset=$,e.timeSequence=Q,e.timeUnitSpecifier=b,e.timeUnits=v,e.utcFloor=q,e.utcInterval=V,e.utcOffset=X,e.utcSequence=Z,e.utcdayofyear=M,e.utcweek=F,e.week=A,Object.defineProperty(e,"__esModule",{value:!0})}(t,n(1176),n(2330),n(1190))},1323:function(e,t,n){!function(e,t,n,r,i,o,a){"use strict";let s=0;function u(){s=0}const c="p_";function l(e){return e&&e.gradient}function f(e,t,n){const r=e.gradient;let i=e.id,o="radial"===r?c:"";return i||(i=e.id="gradient_"+s++,"radial"===r?(e.x1=d(e.x1,.5),e.y1=d(e.y1,.5),e.r1=d(e.r1,0),e.x2=d(e.x2,.5),e.y2=d(e.y2,.5),e.r2=d(e.r2,.5),o=c):(e.x1=d(e.x1,0),e.y1=d(e.y1,0),e.x2=d(e.x2,1),e.y2=d(e.y2,0))),t[i]=e,"url("+(n||"")+"#"+o+i+")"}function d(e,t){return null!=e?e:t}function h(e,t){var n,r=[];return n={gradient:"linear",x1:e?e[0]:0,y1:e?e[1]:0,x2:t?t[0]:1,y2:t?t[1]:0,stops:r,stop:function(e,t){return r.push({offset:e,color:t}),n}}}const p={basis:{curve:n.curveBasis},"basis-closed":{curve:n.curveBasisClosed},"basis-open":{curve:n.curveBasisOpen},bundle:{curve:n.curveBundle,tension:"beta",value:.85},cardinal:{curve:n.curveCardinal,tension:"tension",value:0},"cardinal-open":{curve:n.curveCardinalOpen,tension:"tension",value:0},"cardinal-closed":{curve:n.curveCardinalClosed,tension:"tension",value:0},"catmull-rom":{curve:n.curveCatmullRom,tension:"alpha",value:.5},"catmull-rom-closed":{curve:n.curveCatmullRomClosed,tension:"alpha",value:.5},"catmull-rom-open":{curve:n.curveCatmullRomOpen,tension:"alpha",value:.5},linear:{curve:n.curveLinear},"linear-closed":{curve:n.curveLinearClosed},monotone:{horizontal:n.curveMonotoneY,vertical:n.curveMonotoneX},natural:{curve:n.curveNatural},step:{curve:n.curveStep},"step-after":{curve:n.curveStepAfter},"step-before":{curve:n.curveStepBefore}};function g(e,n,r){var i=t.hasOwnProperty(p,e)&&p[e],o=null;return i&&(o=i.curve||i[n||"vertical"],i.tension&&null!=r&&(o=o[i.tension](r))),o}const m={m:2,l:2,h:1,v:1,c:6,s:4,q:4,t:2,a:7},v=[/([MLHVCSQTAZmlhvcsqtaz])/g,/###/,/(\.\d+)(\.\d)/g,/(\d)([-+])/g,/\s|,|###/];function y(e){const t=[];let n,r,i,o,a,s,u,c,l,f;const d=e.slice().replace(v[0],"###$1").split(v[1]).slice(1);for(u=0,l=d.length;u<l;++u){for(n=d[u],r=n.slice(1).trim().replace(v[2],"$1###$2").replace(v[3],"$1###$2").split(v[4]),a=n.charAt(0),i=[a],c=0,f=r.length;c<f;++c)(o=+r[c])===o&&i.push(o);if(s=m[a.toLowerCase()],i.length-1>s){const e=i.length;for(c=1,t.push([a].concat(i.slice(c,c+=s))),a="M"===a?"L":"m"===a?"l":a;c<e;c+=s)t.push([a].concat(i.slice(c,c+s)))}else t.push(i)}return t}const b=Math.PI/180,x=1e-14,w=Math.PI/2,_=2*Math.PI,A=Math.sqrt(3)/2;var k={},E={},D=[].join;function C(e,t,n,r,i,o,a,s,u){const c=D.call(arguments);if(k[c])return k[c];const l=a*b,f=Math.sin(l),d=Math.cos(l),h=d*(s-e)*.5+f*(u-t)*.5,p=d*(u-t)*.5-f*(s-e)*.5;let g=h*h/((n=Math.abs(n))*n)+p*p/((r=Math.abs(r))*r);g>1&&(g=Math.sqrt(g),n*=g,r*=g);const m=d/n,v=f/n,y=-f/r,x=d/r,A=m*s+v*u,E=y*s+x*u,C=m*e+v*t,M=y*e+x*t;let F=1/((C-A)*(C-A)+(M-E)*(M-E))-.25;F<0&&(F=0);let S=Math.sqrt(F);o==i&&(S=-S);const T=.5*(A+C)-S*(M-E),O=.5*(E+M)+S*(C-A),N=Math.atan2(E-O,A-T);let P=Math.atan2(M-O,C-T)-N;P<0&&1===o?P+=_:P>0&&0===o&&(P-=_);const R=Math.ceil(Math.abs(P/(w+.001))),B=[];for(let b=0;b<R;++b){const e=N+b*P/R,t=N+(b+1)*P/R;B[b]=[T,O,e,t,n,r,f,d]}return k[c]=B}function M(e){const t=D.call(e);if(E[t])return E[t];var n=e[0],r=e[1],i=e[2],o=e[3],a=e[4],s=e[5],u=e[6],c=e[7];const l=c*a,f=-u*s,d=u*a,h=c*s,p=Math.cos(i),g=Math.sin(i),m=Math.cos(o),v=Math.sin(o),y=.5*(o-i),b=Math.sin(.5*y),x=8/3*b*b/Math.sin(y),w=n+p-x*g,_=r+g+x*p,A=n+m,k=r+v,C=A+x*v,M=k-x*m;return E[t]=[l*w+f*_,d*w+h*_,l*C+f*M,d*C+h*M,l*A+f*k,d*A+h*k]}const F=["l",0,0,0,0,0,0,0];function S(e,t,n){const r=F[0]=e[0];if("a"===r||"A"===r)F[1]=t*e[1],F[2]=n*e[2],F[3]=e[3],F[4]=e[4],F[5]=e[5],F[6]=t*e[6],F[7]=n*e[7];else if("h"===r||"H"===r)F[1]=t*e[1];else if("v"===r||"V"===r)F[1]=n*e[1];else for(var i=1,o=e.length;i<o;++i)F[i]=(i%2==1?t:n)*e[i];return F}function T(e,t,n,r,i,o){var a,s,u,c,l,f=null,d=0,h=0,p=0,g=0;null==n&&(n=0),null==r&&(r=0),null==i&&(i=1),null==o&&(o=i),e.beginPath&&e.beginPath();for(var m=0,v=t.length;m<v;++m){switch(a=t[m],1===i&&1===o||(a=S(a,i,o)),a[0]){case"l":d+=a[1],h+=a[2],e.lineTo(d+n,h+r);break;case"L":d=a[1],h=a[2],e.lineTo(d+n,h+r);break;case"h":d+=a[1],e.lineTo(d+n,h+r);break;case"H":d=a[1],e.lineTo(d+n,h+r);break;case"v":h+=a[1],e.lineTo(d+n,h+r);break;case"V":h=a[1],e.lineTo(d+n,h+r);break;case"m":d+=a[1],h+=a[2],e.moveTo(d+n,h+r);break;case"M":d=a[1],h=a[2],e.moveTo(d+n,h+r);break;case"c":s=d+a[5],u=h+a[6],p=d+a[3],g=h+a[4],e.bezierCurveTo(d+a[1]+n,h+a[2]+r,p+n,g+r,s+n,u+r),d=s,h=u;break;case"C":d=a[5],h=a[6],p=a[3],g=a[4],e.bezierCurveTo(a[1]+n,a[2]+r,p+n,g+r,d+n,h+r);break;case"s":s=d+a[3],u=h+a[4],p=2*d-p,g=2*h-g,e.bezierCurveTo(p+n,g+r,d+a[1]+n,h+a[2]+r,s+n,u+r),p=d+a[1],g=h+a[2],d=s,h=u;break;case"S":s=a[3],u=a[4],p=2*d-p,g=2*h-g,e.bezierCurveTo(p+n,g+r,a[1]+n,a[2]+r,s+n,u+r),d=s,h=u,p=a[1],g=a[2];break;case"q":s=d+a[3],u=h+a[4],p=d+a[1],g=h+a[2],e.quadraticCurveTo(p+n,g+r,s+n,u+r),d=s,h=u;break;case"Q":s=a[3],u=a[4],e.quadraticCurveTo(a[1]+n,a[2]+r,s+n,u+r),d=s,h=u,p=a[1],g=a[2];break;case"t":s=d+a[1],u=h+a[2],null===f[0].match(/[QqTt]/)?(p=d,g=h):"t"===f[0]?(p=2*d-c,g=2*h-l):"q"===f[0]&&(p=2*d-p,g=2*h-g),c=p,l=g,e.quadraticCurveTo(p+n,g+r,s+n,u+r),h=u,p=(d=s)+a[1],g=h+a[2];break;case"T":s=a[1],u=a[2],p=2*d-p,g=2*h-g,e.quadraticCurveTo(p+n,g+r,s+n,u+r),d=s,h=u;break;case"a":O(e,d+n,h+r,[a[1],a[2],a[3],a[4],a[5],a[6]+d+n,a[7]+h+r]),d+=a[6],h+=a[7];break;case"A":O(e,d+n,h+r,[a[1],a[2],a[3],a[4],a[5],a[6]+n,a[7]+r]),d=a[6],h=a[7];break;case"z":case"Z":e.closePath()}f=a}}function O(e,t,n,r){const i=C(r[5],r[6],r[0],r[1],r[3],r[4],r[2],t,n);for(let o=0;o<i.length;++o){const t=M(i[o]);e.bezierCurveTo(t[0],t[1],t[2],t[3],t[4],t[5])}}const N=.5773502691896257,P={circle:{draw:function(e,t){const n=Math.sqrt(t)/2;e.moveTo(n,0),e.arc(0,0,n,0,_)}},cross:{draw:function(e,t){var n=Math.sqrt(t)/2,r=n/2.5;e.moveTo(-n,-r),e.lineTo(-n,r),e.lineTo(-r,r),e.lineTo(-r,n),e.lineTo(r,n),e.lineTo(r,r),e.lineTo(n,r),e.lineTo(n,-r),e.lineTo(r,-r),e.lineTo(r,-n),e.lineTo(-r,-n),e.lineTo(-r,-r),e.closePath()}},diamond:{draw:function(e,t){const n=Math.sqrt(t)/2;e.moveTo(-n,0),e.lineTo(0,-n),e.lineTo(n,0),e.lineTo(0,n),e.closePath()}},square:{draw:function(e,t){var n=Math.sqrt(t),r=-n/2;e.rect(r,r,n,n)}},arrow:{draw:function(e,t){var n=Math.sqrt(t)/2,r=n/7,i=n/2.5,o=n/8;e.moveTo(-r,n),e.lineTo(r,n),e.lineTo(r,-o),e.lineTo(i,-o),e.lineTo(0,-n),e.lineTo(-i,-o),e.lineTo(-r,-o),e.closePath()}},wedge:{draw:function(e,t){var n=Math.sqrt(t)/2,r=A*n,i=r-n*N,o=n/4;e.moveTo(0,-r-i),e.lineTo(-o,r-i),e.lineTo(o,r-i),e.closePath()}},triangle:{draw:function(e,t){var n=Math.sqrt(t)/2,r=A*n,i=r-n*N;e.moveTo(0,-r-i),e.lineTo(-n,r-i),e.lineTo(n,r-i),e.closePath()}},"triangle-up":{draw:function(e,t){var n=Math.sqrt(t)/2,r=A*n;e.moveTo(0,-r),e.lineTo(-n,r),e.lineTo(n,r),e.closePath()}},"triangle-down":{draw:function(e,t){var n=Math.sqrt(t)/2,r=A*n;e.moveTo(0,r),e.lineTo(-n,-r),e.lineTo(n,-r),e.closePath()}},"triangle-right":{draw:function(e,t){var n=Math.sqrt(t)/2,r=A*n;e.moveTo(r,0),e.lineTo(-r,-n),e.lineTo(-r,n),e.closePath()}},"triangle-left":{draw:function(e,t){var n=Math.sqrt(t)/2,r=A*n;e.moveTo(-r,0),e.lineTo(r,-n),e.lineTo(r,n),e.closePath()}},stroke:{draw:function(e,t){const n=Math.sqrt(t)/2;e.moveTo(-n,0),e.lineTo(n,0)}}};function R(e){return t.hasOwnProperty(P,e)?P[e]:z(e)}var B={};function z(e){if(!t.hasOwnProperty(B,e)){const t=y(e);B[e]={draw:function(e,n){T(e,t,0,0,Math.sqrt(n)/2)}}}return B[e]}const j=.448084975506;function L(e){return e.x}function I(e){return e.y}function U(e){return e.width}function q(e){return e.height}function W(e){return"function"===typeof e?e:()=>+e}function H(e,t,n){return Math.max(t,Math.min(e,n))}function Y(){var e=L,t=I,n=U,i=q,o=W(0),a=o,s=o,u=o,c=null;function l(l,f,d){var h,p=null!=f?f:+e.call(this,l),g=null!=d?d:+t.call(this,l),m=+n.call(this,l),v=+i.call(this,l),y=Math.min(m,v)/2,b=H(+o.call(this,l),0,y),x=H(+a.call(this,l),0,y),w=H(+s.call(this,l),0,y),_=H(+u.call(this,l),0,y);if(c||(c=h=r.path()),b<=0&&x<=0&&w<=0&&_<=0)c.rect(p,g,m,v);else{var A=p+m,k=g+v;c.moveTo(p+b,g),c.lineTo(A-x,g),c.bezierCurveTo(A-j*x,g,A,g+j*x,A,g+x),c.lineTo(A,k-_),c.bezierCurveTo(A,k-j*_,A-j*_,k,A-_,k),c.lineTo(p+w,k),c.bezierCurveTo(p+j*w,k,p,k-j*w,p,k-w),c.lineTo(p,g+b),c.bezierCurveTo(p,g+j*b,p+j*b,g,p+b,g),c.closePath()}if(h)return c=null,h+""||null}return l.x=function(t){return arguments.length?(e=W(t),l):e},l.y=function(e){return arguments.length?(t=W(e),l):t},l.width=function(e){return arguments.length?(n=W(e),l):n},l.height=function(e){return arguments.length?(i=W(e),l):i},l.cornerRadius=function(e,t,n,r){return arguments.length?(o=W(e),a=null!=t?W(t):o,u=null!=n?W(n):o,s=null!=r?W(r):a,l):o},l.context=function(e){return arguments.length?(c=null==e?null:e,l):c},l}function V(){var e,t,n,i,o,a,s,u,c=null;function l(e,t,n){const r=n/2;if(o){var i=s-t,l=e-a;if(i||l){var f=Math.sqrt(i*i+l*l),d=(i/=f)*u,h=(l/=f)*u,p=Math.atan2(l,i);c.moveTo(a-d,s-h),c.lineTo(e-i*r,t-l*r),c.arc(e,t,r,p-Math.PI,p),c.lineTo(a+d,s+h),c.arc(a,s,u,p,p+Math.PI)}else c.arc(e,t,r,0,_);c.closePath()}else o=1;a=e,s=t,u=r}function f(a){var s,u,f,d=a.length,h=!1;for(null==c&&(c=f=r.path()),s=0;s<=d;++s)!(s<d&&i(u=a[s],s,a))===h&&(h=!h)&&(o=0),h&&l(+e(u,s,a),+t(u,s,a),+n(u,s,a));if(f)return c=null,f+""||null}return f.x=function(t){return arguments.length?(e=t,f):e},f.y=function(e){return arguments.length?(t=e,f):t},f.size=function(e){return arguments.length?(n=e,f):n},f.defined=function(e){return arguments.length?(i=e,f):i},f.context=function(e){return arguments.length?(c=null==e?null:e,f):c},f}function G(e,t){return null!=e?e:t}const $=e=>e.x||0,X=e=>e.y||0,J=e=>e.width||0,Q=e=>e.height||0,Z=e=>(e.x||0)+(e.width||0),K=e=>(e.y||0)+(e.height||0),ee=e=>e.startAngle||0,te=e=>e.endAngle||0,ne=e=>e.padAngle||0,re=e=>e.innerRadius||0,ie=e=>e.outerRadius||0,oe=e=>e.cornerRadius||0,ae=e=>G(e.cornerRadiusTopLeft,e.cornerRadius)||0,se=e=>G(e.cornerRadiusTopRight,e.cornerRadius)||0,ue=e=>G(e.cornerRadiusBottomRight,e.cornerRadius)||0,ce=e=>G(e.cornerRadiusBottomLeft,e.cornerRadius)||0,le=e=>G(e.size,64),fe=e=>e.size||1,de=e=>!(!1===e.defined),he=e=>R(e.shape||"circle"),pe=n.arc().startAngle(ee).endAngle(te).padAngle(ne).innerRadius(re).outerRadius(ie).cornerRadius(oe),ge=n.area().x($).y1(X).y0(K).defined(de),me=n.area().y(X).x1($).x0(Z).defined(de),ve=n.line().x($).y(X).defined(de),ye=Y().x($).y(X).width(J).height(Q).cornerRadius(ae,se,ue,ce),be=n.symbol().type(he).size(le),xe=V().x($).y(X).defined(de).size(fe);function we(e){return e.cornerRadius||e.cornerRadiusTopLeft||e.cornerRadiusTopRight||e.cornerRadiusBottomRight||e.cornerRadiusBottomLeft}function _e(e,t){return pe.context(e)(t)}function Ae(e,t){const n=t[0],r=n.interpolate||"linear";return("horizontal"===n.orient?me:ge).curve(g(r,n.orient,n.tension)).context(e)(t)}function ke(e,t){const n=t[0],r=n.interpolate||"linear";return ve.curve(g(r,n.orient,n.tension)).context(e)(t)}function Ee(e,t,n,r){return ye.context(e)(t,n,r)}function De(e,t){return(t.mark.shape||t.shape).context(e)(t)}function Ce(e,t){return be.context(e)(t)}function Me(e,t){return xe.context(e)(t)}var Fe=1;function Se(){Fe=1}function Te(e,n,r){var i=n.clip,o=e._defs,a=n.clip_id||(n.clip_id="clip"+Fe++),s=o.clipping[a]||(o.clipping[a]={id:a});return t.isFunction(i)?s.path=i(null):we(r)?s.path=Ee(null,r,0,0):(s.width=r.width||0,s.height=r.height||0),"url(#"+a+")"}function Oe(e){this.clear(),e&&this.union(e)}function Ne(e){this.mark=e,this.bounds=this.bounds||new Oe}function Pe(e){Ne.call(this,e),this.items=this.items||[]}function Re(e){this._pending=0,this._loader=e||o.loader()}function Be(e){e._pending+=1}function ze(e){e._pending-=1}function je(e,t,n){if(t.stroke&&0!==t.opacity&&0!==t.strokeOpacity){const r=null!=t.strokeWidth?+t.strokeWidth:1;e.expand(r+(n?Le(t,r):0))}return e}function Le(e,t){return e.strokeJoin&&"miter"!==e.strokeJoin?0:t}Oe.prototype={clone(){return new Oe(this)},clear(){return this.x1=+Number.MAX_VALUE,this.y1=+Number.MAX_VALUE,this.x2=-Number.MAX_VALUE,this.y2=-Number.MAX_VALUE,this},empty(){return this.x1===+Number.MAX_VALUE&&this.y1===+Number.MAX_VALUE&&this.x2===-Number.MAX_VALUE&&this.y2===-Number.MAX_VALUE},equals(e){return this.x1===e.x1&&this.y1===e.y1&&this.x2===e.x2&&this.y2===e.y2},set(e,t,n,r){return n<e?(this.x2=e,this.x1=n):(this.x1=e,this.x2=n),r<t?(this.y2=t,this.y1=r):(this.y1=t,this.y2=r),this},add(e,t){return e<this.x1&&(this.x1=e),t<this.y1&&(this.y1=t),e>this.x2&&(this.x2=e),t>this.y2&&(this.y2=t),this},expand(e){return this.x1-=e,this.y1-=e,this.x2+=e,this.y2+=e,this},round(){return this.x1=Math.floor(this.x1),this.y1=Math.floor(this.y1),this.x2=Math.ceil(this.x2),this.y2=Math.ceil(this.y2),this},scale(e){return this.x1*=e,this.y1*=e,this.x2*=e,this.y2*=e,this},translate(e,t){return this.x1+=e,this.x2+=e,this.y1+=t,this.y2+=t,this},rotate(e,t,n){const r=this.rotatedPoints(e,t,n);return this.clear().add(r[0],r[1]).add(r[2],r[3]).add(r[4],r[5]).add(r[6],r[7])},rotatedPoints(e,t,n){var r=this.x1,i=this.y1,o=this.x2,a=this.y2,s=Math.cos(e),u=Math.sin(e),c=t-t*s+n*u,l=n-t*u-n*s;return[s*r-u*i+c,u*r+s*i+l,s*r-u*a+c,u*r+s*a+l,s*o-u*i+c,u*o+s*i+l,s*o-u*a+c,u*o+s*a+l]},union(e){return e.x1<this.x1&&(this.x1=e.x1),e.y1<this.y1&&(this.y1=e.y1),e.x2>this.x2&&(this.x2=e.x2),e.y2>this.y2&&(this.y2=e.y2),this},intersect(e){return e.x1>this.x1&&(this.x1=e.x1),e.y1>this.y1&&(this.y1=e.y1),e.x2<this.x2&&(this.x2=e.x2),e.y2<this.y2&&(this.y2=e.y2),this},encloses(e){return e&&this.x1<=e.x1&&this.x2>=e.x2&&this.y1<=e.y1&&this.y2>=e.y2},alignsWith(e){return e&&(this.x1==e.x1||this.x2==e.x2||this.y1==e.y1||this.y2==e.y2)},intersects(e){return e&&!(this.x2<e.x1||this.x1>e.x2||this.y2<e.y1||this.y1>e.y2)},contains(e,t){return!(e<this.x1||e>this.x2||t<this.y1||t>this.y2)},width(){return this.x2-this.x1},height(){return this.y2-this.y1}},t.inherits(Pe,Ne),Re.prototype={pending(){return this._pending},sanitizeURL(e){const t=this;return Be(t),t._loader.sanitize(e,{context:"href"}).then((e=>(ze(t),e))).catch((()=>(ze(t),null)))},loadImage(e){const n=this,r=i.image();return Be(n),n._loader.sanitize(e,{context:"image"}).then((e=>{const i=e.href;if(!i||!r)throw{url:i};const o=new r,a=t.hasOwnProperty(e,"crossOrigin")?e.crossOrigin:"anonymous";return null!=a&&(o.crossOrigin=a),o.onload=()=>ze(n),o.onerror=()=>ze(n),o.src=i,o})).catch((e=>(ze(n),{complete:!1,width:0,height:0,src:e&&e.url||""})))},ready(){const e=this;return new Promise((t=>{function n(r){e.pending()?setTimeout((()=>{n(!0)}),10):t(r)}n(!1)}))}};const Ie=_-1e-8;let Ue,qe,We,He,Ye,Ve,Ge,$e;const Xe=(e,t)=>Ue.add(e,t),Je=(e,t)=>Xe(qe=e,We=t),Qe=e=>Xe(e,Ue.y1),Ze=e=>Xe(Ue.x1,e),Ke=(e,t)=>Ye*e+Ge*t,et=(e,t)=>Ve*e+$e*t,tt=(e,t)=>Xe(Ke(e,t),et(e,t)),nt=(e,t)=>Je(Ke(e,t),et(e,t));function rt(e,t){return Ue=e,t?(He=t*b,Ye=$e=Math.cos(He),Ve=Math.sin(He),Ge=-Ve):(Ye=$e=1,He=Ve=Ge=0),it}const it={beginPath(){},closePath(){},moveTo:nt,lineTo:nt,rect(e,t,n,r){He?(tt(e+n,t),tt(e+n,t+r),tt(e,t+r),nt(e,t)):(Xe(e+n,t+r),Je(e,t))},quadraticCurveTo(e,t,n,r){const i=Ke(e,t),o=et(e,t),a=Ke(n,r),s=et(n,r);ot(qe,i,a,Qe),ot(We,o,s,Ze),Je(a,s)},bezierCurveTo(e,t,n,r,i,o){const a=Ke(e,t),s=et(e,t),u=Ke(n,r),c=et(n,r),l=Ke(i,o),f=et(i,o);at(qe,a,u,l,Qe),at(We,s,c,f,Ze),Je(l,f)},arc(e,t,n,r,i,o){if(r+=He,i+=He,qe=n*Math.cos(i)+e,We=n*Math.sin(i)+t,Math.abs(i-r)>Ie)Xe(e-n,t-n),Xe(e+n,t+n);else{const a=r=>Xe(n*Math.cos(r)+e,n*Math.sin(r)+t);let s,u;if(a(r),a(i),i!==r)if((r%=_)<0&&(r+=_),(i%=_)<0&&(i+=_),i<r&&(o=!o,s=r,r=i,i=s),o)for(i-=_,s=r-r%w,u=0;u<4&&s>i;++u,s-=w)a(s);else for(s=r-r%w+w,u=0;u<4&&s<i;++u,s+=w)a(s)}}};function ot(e,t,n,r){const i=(e-t)/(e+n-2*t);0<i&&i<1&&r(e+(t-e)*i)}function at(e,t,n,r,i){const o=r-e+3*t-3*n,a=e+n-2*t,s=e-t;let u,c=0,l=0;Math.abs(o)>x?(u=a*a+s*o,u>=0&&(u=Math.sqrt(u),c=(-a+u)/o,l=(-a-u)/o)):c=.5*s/a,0<c&&c<1&&i(st(c,e,t,n,r)),0<l&&l<1&&i(st(l,e,t,n,r))}function st(e,t,n,r,i){const o=1-e,a=o*o,s=e*e;return a*o*t+3*a*e*n+3*o*s*r+s*e*i}var ut=(ut=i.canvas(1,1))?ut.getContext("2d"):null;const ct=new Oe;function lt(e){return function(t,n){if(!ut)return!0;e(ut,t),ct.clear().union(t.bounds).intersect(n).round();const r=ct.x1,i=ct.y1,o=ct.x2,a=ct.y2;for(let e=i;e<=a;++e)for(let t=r;t<=o;++t)if(ut.isPointInPath(t,e))return!0;return!1}}function ft(e,t){return t.contains(e.x||0,e.y||0)}function dt(e,t){const n=e.x||0,r=e.y||0,i=e.width||0,o=e.height||0;return t.intersects(ct.set(n,r,n+i,r+o))}function ht(e,t){const n=e.x||0,r=e.y||0;return pt(t,n,r,null!=e.x2?e.x2:n,null!=e.y2?e.y2:r)}function pt(e,t,n,r,i){const o=e.x1,a=e.y1,s=e.x2,u=e.y2,c=r-t,l=i-n;let f,d,h,p,g=0,m=1;for(p=0;p<4;++p){if(0===p&&(f=-c,d=-(o-t)),1===p&&(f=c,d=s-t),2===p&&(f=-l,d=-(a-n)),3===p&&(f=l,d=u-n),Math.abs(f)<1e-10&&d<0)return!1;if(h=d/f,f<0){if(h>m)return!1;h>g&&(g=h)}else if(f>0){if(h<g)return!1;h<m&&(m=h)}}return!0}function gt(e,t){e.globalCompositeOperation=t.blend||"source-over"}function mt(e,t){return null==e?t:e}function vt(e,t){const n=t.length;for(let r=0;r<n;++r)e.addColorStop(t[r].offset,t[r].color);return e}function yt(e,t,n){const r=n.width(),o=n.height();let a;if("radial"===t.gradient)a=e.createRadialGradient(n.x1+mt(t.x1,.5)*r,n.y1+mt(t.y1,.5)*o,Math.max(r,o)*mt(t.r1,0),n.x1+mt(t.x2,.5)*r,n.y1+mt(t.y2,.5)*o,Math.max(r,o)*mt(t.r2,.5));else{const s=mt(t.x1,0),u=mt(t.y1,0),c=mt(t.x2,1),l=mt(t.y2,0);if(s!==c&&u!==l&&r!==o){const n=i.canvas(Math.ceil(r),Math.ceil(o)),a=n.getContext("2d");return a.scale(r,o),a.fillStyle=vt(a.createLinearGradient(s,u,c,l),t.stops),a.fillRect(0,0,r,o),e.createPattern(n,"no-repeat")}a=e.createLinearGradient(n.x1+s*r,n.y1+u*o,n.x1+c*r,n.y1+l*o)}return vt(a,t.stops)}function bt(e,t,n){return l(n)?yt(e,n,t.bounds):n}function xt(e,t,n){return(n*=null==t.fillOpacity?1:t.fillOpacity)>0&&(e.globalAlpha=n,e.fillStyle=bt(e,t,t.fill),!0)}var wt=[];function _t(e,t,n){var r=null!=(r=t.strokeWidth)?r:1;return!(r<=0)&&(n*=null==t.strokeOpacity?1:t.strokeOpacity)>0&&(e.globalAlpha=n,e.strokeStyle=bt(e,t,t.stroke),e.lineWidth=r,e.lineCap=t.strokeCap||"butt",e.lineJoin=t.strokeJoin||"miter",e.miterLimit=t.strokeMiterLimit||10,e.setLineDash&&(e.setLineDash(t.strokeDash||wt),e.lineDashOffset=t.strokeDashOffset||0),!0)}function At(e,t){return e.zindex-t.zindex||e.index-t.index}function kt(e){if(!e.zdirty)return e.zitems;var t,n,r,i=e.items,o=[];for(n=0,r=i.length;n<r;++n)(t=i[n]).index=n,t.zindex&&o.push(t);return e.zdirty=!1,e.zitems=o.sort(At)}function Et(e,t){var n,r,i=e.items;if(!i||!i.length)return;const o=kt(e);if(o&&o.length){for(n=0,r=i.length;n<r;++n)i[n].zindex||t(i[n]);i=o}for(n=0,r=i.length;n<r;++n)t(i[n])}function Dt(e,t){var n,r,i=e.items;if(!i||!i.length)return null;const o=kt(e);for(o&&o.length&&(i=o),r=i.length;--r>=0;)if(n=t(i[r]))return n;if(i===o)for(r=(i=e.items).length;--r>=0;)if(!i[r].zindex&&(n=t(i[r])))return n;return null}function Ct(e){return function(t,n,r){Et(n,(n=>{r&&!r.intersects(n.bounds)||Ft(e,t,n,n)}))}}function Mt(e){return function(t,n,r){!n.items.length||r&&!r.intersects(n.bounds)||Ft(e,t,n.items[0],n.items)}}function Ft(e,t,n,r){var i=null==n.opacity?1:n.opacity;0!==i&&(e(t,r)||(gt(t,n),n.fill&&xt(t,n,i)&&t.fill(),n.stroke&&_t(t,n,i)&&t.stroke()))}function St(e){return e=e||t.truthy,function(t,n,r,i,o,a){return r*=t.pixelRatio,i*=t.pixelRatio,Dt(n,(n=>{const s=n.bounds;if((!s||s.contains(o,a))&&s)return e(t,n,r,i,o,a)?n:void 0}))}}function Tt(e,t){return function(n,r,i,o){var a,s,u=Array.isArray(r)?r[0]:r,c=null==t?u.fill:t,l=u.stroke&&n.isPointInStroke;return l&&(a=u.strokeWidth,s=u.strokeCap,n.lineWidth=null!=a?a:1,n.lineCap=null!=s?s:"butt"),!e(n,r)&&(c&&n.isPointInPath(i,o)||l&&n.isPointInStroke(i,o))}}function Ot(e){return St(Tt(e))}function Nt(e,t){return"translate("+e+","+t+")"}function Pt(e){return"rotate("+e+")"}function Rt(e,t){return"scale("+e+","+t+")"}function Bt(e){return Nt(e.x||0,e.y||0)}function zt(e){return Nt(e.x||0,e.y||0)+(e.angle?" "+Pt(e.angle):"")}function jt(e){return Nt(e.x||0,e.y||0)+(e.angle?" "+Pt(e.angle):"")+(e.scaleX||e.scaleY?" "+Rt(e.scaleX||1,e.scaleY||1):"")}function Lt(e,t,n){function r(e,n){e("transform",zt(n)),e("d",t(null,n))}function i(e,n){return t(rt(e,n.angle),n),je(e,n).translate(n.x||0,n.y||0)}function o(e,n){var r=n.x||0,i=n.y||0,o=n.angle||0;e.translate(r,i),o&&e.rotate(o*=b),e.beginPath(),t(e,n),o&&e.rotate(-o),e.translate(-r,-i)}return{type:e,tag:"path",nested:!1,attr:r,bound:i,draw:Ct(o),pick:Ot(o),isect:n||lt(o)}}var It=Lt("arc",_e);function Ut(e,t){for(var n,r,i="horizontal"===e[0].orient?t[1]:t[0],o="horizontal"===e[0].orient?"y":"x",a=e.length,s=1/0;--a>=0;)!1!==e[a].defined&&(r=Math.abs(e[a][o]-i))<s&&(s=r,n=e[a]);return n}function qt(e,t){for(var n,r,i=Math.pow(e[0].strokeWidth||1,2),o=e.length;--o>=0;)if(!1!==e[o].defined&&(n=e[o].x-t[0])*n+(r=e[o].y-t[1])*r<i)return e[o];return null}function Wt(e,t){for(var n,r,i=e.length;--i>=0;)if(!1!==e[i].defined&&(n=e[i].x-t[0])*n+(r=e[i].y-t[1])*r<(n=e[i].size||1)*n)return e[i];return null}function Ht(e,t,n){function r(e,n){var r=n.mark.items;r.length&&e("d",t(null,r))}function i(e,n){var r=n.items;return 0===r.length?e:(t(rt(e),r),je(e,r[0]))}function o(e,n){e.beginPath(),t(e,n)}const a=Tt(o);function s(e,t,n,r,i,o){var s=t.items,u=t.bounds;return!s||!s.length||u&&!u.contains(i,o)?null:(n*=e.pixelRatio,r*=e.pixelRatio,a(e,s,n,r)?s[0]:null)}return{type:e,tag:"path",nested:!0,attr:r,bound:i,draw:Mt(o),pick:s,isect:ft,tip:n}}var Yt=Ht("area",Ae,Ut);function Vt(e,n){var r=n.clip;e.save(),t.isFunction(r)?(e.beginPath(),r(e),e.clip()):Gt(e,n.group)}function Gt(e,t){e.beginPath(),we(t)?Ee(e,t,0,0):e.rect(0,0,t.width||0,t.height||0),e.clip()}function $t(e){const t=mt(e.strokeWidth,1);return null!=e.strokeOffset?e.strokeOffset:e.stroke&&t>.5&&t<1.5?.5-Math.abs(t-1):0}function Xt(e,t){e("transform",Bt(t))}function Jt(e,t){const n=$t(t);e("d",Ee(null,t,n,n))}function Qt(e,t){e("class","background"),e("aria-hidden",!0),Jt(e,t)}function Zt(e,t){e("class","foreground"),e("aria-hidden",!0),t.strokeForeground?Jt(e,t):e("d","")}function Kt(e,t,n){e("clip-path",t.clip?Te(n,t,t):null)}function en(e,t){if(!t.clip&&t.items){const n=t.items,r=n.length;for(let t=0;t<r;++t)e.union(n[t].bounds)}return(t.clip||t.width||t.height)&&!t.noBound&&e.add(0,0).add(t.width||0,t.height||0),je(e,t),e.translate(t.x||0,t.y||0)}function tn(e,t,n,r){const i=$t(t);e.beginPath(),Ee(e,t,(n||0)+i,(r||0)+i)}const nn=Tt(tn),rn=Tt(tn,!1),on=Tt(tn,!0);function an(e,t,n){Et(t,(t=>{const r=t.x||0,i=t.y||0,o=t.strokeForeground,a=null==t.opacity?1:t.opacity;(t.stroke||t.fill)&&a&&(tn(e,t,r,i),gt(e,t),t.fill&&xt(e,t,a)&&e.fill(),t.stroke&&!o&&_t(e,t,a)&&e.stroke()),e.save(),e.translate(r,i),t.clip&&Gt(e,t),n&&n.translate(-r,-i),Et(t,(t=>{this.draw(e,t,n)})),n&&n.translate(r,i),e.restore(),o&&t.stroke&&a&&(tn(e,t,r,i),gt(e,t),_t(e,t,a)&&e.stroke())}))}function sn(e,t,n,r,i,o){if(t.bounds&&!t.bounds.contains(i,o)||!t.items)return null;const a=n*e.pixelRatio,s=r*e.pixelRatio;return Dt(t,(u=>{let c,l,f;const d=u.bounds;if(d&&!d.contains(i,o))return;l=u.x||0,f=u.y||0;const h=l+(u.width||0),p=f+(u.height||0),g=u.clip;if(g&&(i<l||i>h||o<f||o>p))return;if(e.save(),e.translate(l,f),l=i-l,f=o-f,g&&we(u)&&!on(e,u,a,s))return e.restore(),null;const m=u.strokeForeground,v=!1!==t.interactive;return v&&m&&u.stroke&&rn(e,u,a,s)?(e.restore(),u):(c=Dt(u,(e=>un(e,l,f)?this.pick(e,n,r,l,f):null)),!c&&v&&(u.fill||!m&&u.stroke)&&nn(e,u,a,s)&&(c=u),e.restore(),c||null)}))}function un(e,t,n){return(!1!==e.interactive||"group"===e.marktype)&&e.bounds&&e.bounds.contains(t,n)}var cn={type:"group",tag:"g",nested:!1,attr:Xt,bound:en,draw:an,pick:sn,isect:dt,content:Kt,background:Qt,foreground:Zt},ln={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",version:"1.1"};function fn(e,t){var n=e.image;return(!n||e.url&&e.url!==n.url)&&(n={complete:!1,width:0,height:0},t.loadImage(e.url).then((t=>{e.image=t,e.image.url=e.url}))),n}function dn(e,t){return null!=e.width?e.width:t&&t.width?!1!==e.aspect&&e.height?e.height*t.width/t.height:t.width:0}function hn(e,t){return null!=e.height?e.height:t&&t.height?!1!==e.aspect&&e.width?e.width*t.height/t.width:t.height:0}function pn(e,t){return"center"===e?t/2:"right"===e?t:0}function gn(e,t){return"middle"===e?t/2:"bottom"===e?t:0}function mn(e,t,n){const r=fn(t,n),i=dn(t,r),o=hn(t,r),a=(t.x||0)-pn(t.align,i),s=(t.y||0)-gn(t.baseline,o);e("href",!r.src&&r.toDataURL?r.toDataURL():r.src||"",ln["xmlns:xlink"],"xlink:href"),e("transform",Nt(a,s)),e("width",i),e("height",o),e("preserveAspectRatio",!1===t.aspect?"none":"xMidYMid")}function vn(e,t){const n=t.image,r=dn(t,n),i=hn(t,n),o=(t.x||0)-pn(t.align,r),a=(t.y||0)-gn(t.baseline,i);return e.set(o,a,o+r,a+i)}function yn(e,t,n){Et(t,(t=>{if(n&&!n.intersects(t.bounds))return;const r=fn(t,this);let i,o,a,s,u=dn(t,r),c=hn(t,r),l=(t.x||0)-pn(t.align,u),f=(t.y||0)-gn(t.baseline,c);!1!==t.aspect&&(o=r.width/r.height,a=t.width/t.height,o===o&&a===a&&o!==a&&(a<o?(s=u/o,f+=(c-s)/2,c=s):(s=c*o,l+=(u-s)/2,u=s))),(r.complete||r.toDataURL)&&(gt(e,t),e.globalAlpha=null!=(i=t.opacity)?i:1,e.imageSmoothingEnabled=!1!==t.smooth,e.drawImage(r,l,f,u,c))}))}var bn={type:"image",tag:"image",nested:!1,attr:mn,bound:vn,draw:yn,pick:St(),isect:t.truthy,get:fn,xOffset:pn,yOffset:gn},xn=Ht("line",ke,qt);function wn(e,t){var n=t.scaleX||1,r=t.scaleY||1;1===n&&1===r||e("vector-effect","non-scaling-stroke"),e("transform",jt(t)),e("d",t.path)}function _n(e,t){var n=t.path;if(null==n)return!0;var r=t.x||0,i=t.y||0,o=t.scaleX||1,a=t.scaleY||1,s=(t.angle||0)*b,u=t.pathCache;u&&u.path===n||((t.pathCache=u=y(n)).path=n),s&&e.rotate&&e.translate?(e.translate(r,i),e.rotate(s),T(e,u,0,0,o,a),e.rotate(-s),e.translate(-r,-i)):T(e,u,r,i,o,a)}function An(e,t){return _n(rt(e,t.angle),t)?e.set(0,0,0,0):je(e,t,!0)}var kn={type:"path",tag:"path",nested:!1,attr:wn,bound:An,draw:Ct(_n),pick:Ot(_n),isect:lt(_n)};function En(e,t){e("d",Ee(null,t))}function Dn(e,t){var n,r;return je(e.set(n=t.x||0,r=t.y||0,n+t.width||0,r+t.height||0),t)}function Cn(e,t){e.beginPath(),Ee(e,t)}var Mn={type:"rect",tag:"path",nested:!1,attr:En,bound:Dn,draw:Ct(Cn),pick:Ot(Cn),isect:dt};function Fn(e,t){e("transform",Bt(t)),e("x2",null!=t.x2?t.x2-(t.x||0):0),e("y2",null!=t.y2?t.y2-(t.y||0):0)}function Sn(e,t){var n,r;return je(e.set(n=t.x||0,r=t.y||0,null!=t.x2?t.x2:n,null!=t.y2?t.y2:r),t)}function Tn(e,t,n){var r,i,o,a;return!(!t.stroke||!_t(e,t,n))&&(r=t.x||0,i=t.y||0,o=null!=t.x2?t.x2:r,a=null!=t.y2?t.y2:i,e.beginPath(),e.moveTo(r,i),e.lineTo(o,a),!0)}function On(e,t,n){Et(t,(t=>{if(!n||n.intersects(t.bounds)){var r=null==t.opacity?1:t.opacity;r&&Tn(e,t,r)&&(gt(e,t),e.stroke())}}))}function Nn(e,t,n,r){return!!e.isPointInStroke&&Tn(e,t,1)&&e.isPointInStroke(n,r)}var Pn={type:"rule",tag:"line",nested:!1,attr:Fn,bound:Sn,draw:On,pick:St(Nn),isect:ht},Rn=Lt("shape",De),Bn=Lt("symbol",Ce,ft);const zn=t.lruCache();var jn={height:Hn,measureWidth:qn,estimateWidth:In,width:In,canvas:Ln};function Ln(e){jn.width=e&&ut?qn:In}function In(e,t){return Un(Xn(e,t),Hn(e))}function Un(e,t){return~~(.8*e.length*t)}function qn(e,t){return Hn(e)<=0||!(t=Xn(e,t))?0:Wn(t,Kn(e))}function Wn(e,t){const n="(".concat(t,") ").concat(e);let r=zn.get(n);return void 0===r&&(ut.font=t,r=ut.measureText(e).width,zn.set(n,r)),r}function Hn(e){return null!=e.fontSize?+e.fontSize||0:11}function Yn(e){return null!=e.lineHeight?e.lineHeight:Hn(e)+2}function Vn(e){return t.isArray(e)?e.length>1?e:e[0]:e}function Gn(e){return Vn(e.lineBreak&&e.text&&!t.isArray(e.text)?e.text.split(e.lineBreak):e.text)}function $n(e){const n=Gn(e);return(t.isArray(n)?n.length-1:0)*Yn(e)}function Xn(e,t){const n=null==t?"":(t+"").trim();return e.limit>0&&n.length?Qn(e,n):n}function Jn(e){if(jn.width===qn){const t=Kn(e);return e=>Wn(e,t)}{const t=Hn(e);return e=>Un(e,t)}}function Qn(e,t){var n=+e.limit,r=Jn(e);if(r(t)<n)return t;var i,o=e.ellipsis||"\u2026",a="rtl"===e.dir,s=0,u=t.length;if(n-=r(o),a){for(;s<u;)i=s+u>>>1,r(t.slice(i))>n?s=i+1:u=i;return o+t.slice(s)}for(;s<u;)i=1+(s+u>>>1),r(t.slice(0,i))<n?s=i:u=i-1;return t.slice(0,s)+o}function Zn(e,t){var n=e.font;return(t&&n?String(n).replace(/"/g,"'"):n)||"sans-serif"}function Kn(e,t){return(e.fontStyle?e.fontStyle+" ":"")+(e.fontVariant?e.fontVariant+" ":"")+(e.fontWeight?e.fontWeight+" ":"")+Hn(e)+"px "+Zn(e,t)}function er(e){var t=e.baseline,n=Hn(e);return Math.round("top"===t?.79*n:"middle"===t?.3*n:"bottom"===t?-.21*n:"line-top"===t?.29*n+.5*Yn(e):"line-bottom"===t?.29*n-.5*Yn(e):0)}Ln(!0);const tr={left:"start",center:"middle",right:"end"},nr=new Oe;function rr(e){var t,n=e.x||0,r=e.y||0,i=e.radius||0;return i&&(t=(e.theta||0)-w,n+=i*Math.cos(t),r+=i*Math.sin(t)),nr.x1=n,nr.y1=r,nr}function ir(e,t){var n,r=t.dx||0,i=(t.dy||0)+er(t),o=rr(t),a=o.x1,s=o.y1,u=t.angle||0;e("text-anchor",tr[t.align]||"start"),u?(n=Nt(a,s)+" "+Pt(u),(r||i)&&(n+=" "+Nt(r,i))):n=Nt(a+r,s+i),e("transform",n)}function or(e,n,r){var i,o=jn.height(n),a=n.align,s=rr(n),u=s.x1,c=s.y1,l=n.dx||0,f=(n.dy||0)+er(n)-Math.round(.8*o),d=Gn(n);if(t.isArray(d)?(o+=Yn(n)*(d.length-1),i=d.reduce(((e,t)=>Math.max(e,jn.width(n,t))),0)):i=jn.width(n,d),"center"===a?l-=i/2:"right"===a&&(l-=i),e.set(l+=u,f+=c,l+i,f+o),n.angle&&!r)e.rotate(n.angle*b,u,c);else if(2===r)return e.rotatedPoints(n.angle*b,u,c);return e}function ar(e,n,r){Et(n,(n=>{var i,o,a,s,u,c,l,f=null==n.opacity?1:n.opacity;if(!(r&&!r.intersects(n.bounds)||0===f||n.fontSize<=0||null==n.text||0===n.text.length)){if(e.font=Kn(n),e.textAlign=n.align||"left",o=(i=rr(n)).x1,a=i.y1,n.angle&&(e.save(),e.translate(o,a),e.rotate(n.angle*b),o=a=0),o+=n.dx||0,a+=(n.dy||0)+er(n),c=Gn(n),gt(e,n),t.isArray(c))for(u=Yn(n),s=0;s<c.length;++s)l=Xn(n,c[s]),n.fill&&xt(e,n,f)&&e.fillText(l,o,a),n.stroke&&_t(e,n,f)&&e.strokeText(l,o,a),a+=u;else l=Xn(n,c),n.fill&&xt(e,n,f)&&e.fillText(l,o,a),n.stroke&&_t(e,n,f)&&e.strokeText(l,o,a);n.angle&&e.restore()}}))}function sr(e,t,n,r,i,o){if(t.fontSize<=0)return!1;if(!t.angle)return!0;var a=rr(t),s=a.x1,u=a.y1,c=or(nr,t,1),l=-t.angle*b,f=Math.cos(l),d=Math.sin(l),h=f*i-d*o+(s-f*s+d*u),p=d*i+f*o+(u-d*s-f*u);return c.contains(h,p)}function ur(e,t){const n=or(nr,e,2);return pt(t,n[0],n[1],n[2],n[3])||pt(t,n[0],n[1],n[4],n[5])||pt(t,n[4],n[5],n[6],n[7])||pt(t,n[2],n[3],n[6],n[7])}var cr={type:"text",tag:"text",nested:!1,attr:ir,bound:or,draw:ar,pick:St(sr),isect:ur},lr=Ht("trail",Me,Wt),fr={arc:It,area:Yt,group:cn,image:bn,line:xn,path:kn,rect:Mn,rule:Pn,shape:Rn,symbol:Bn,text:cr,trail:lr};function dr(e,t,n){var r=fr[e.mark.marktype],i=t||r.bound;return r.nested&&(e=e.mark),i(e.bounds||(e.bounds=new Oe),e,n)}var hr={mark:null};function pr(e,t,n){var r,i,o,a,s=fr[e.marktype],u=s.bound,c=e.items,l=c&&c.length;if(s.nested)return l?o=c[0]:(hr.mark=e,o=hr),a=dr(o,u,n),t=t&&t.union(a)||a;if(t=t||e.bounds&&e.bounds.clear()||new Oe,l)for(r=0,i=c.length;r<i;++r)t.union(dr(c[r],u,n));return e.bounds=t}const gr=["marktype","name","role","interactive","clip","items","zindex","x","y","width","height","align","baseline","fill","fillOpacity","opacity","blend","stroke","strokeOpacity","strokeWidth","strokeCap","strokeDash","strokeDashOffset","strokeForeground","strokeOffset","startAngle","endAngle","innerRadius","outerRadius","cornerRadius","padAngle","cornerRadiusTopLeft","cornerRadiusTopRight","cornerRadiusBottomLeft","cornerRadiusBottomRight","interpolate","tension","orient","defined","url","aspect","smooth","path","scaleX","scaleY","x2","y2","size","shape","text","angle","theta","radius","dir","dx","dy","ellipsis","limit","lineBreak","lineHeight","font","fontSize","fontWeight","fontStyle","fontVariant","description","aria","ariaRole","ariaRoleDescription"];function mr(e,t){return JSON.stringify(e,gr,t)}function vr(e){return yr("string"===typeof e?JSON.parse(e):e)}function yr(e){var t,n,r,i=e.marktype,o=e.items;if(o)for(n=0,r=o.length;n<r;++n)t=i?"mark":"group",o[n][t]=e,o[n].zindex&&(o[n][t].zdirty=!0),"group"===(i||t)&&yr(o[n]);return i&&pr(e),e}function br(e){arguments.length?this.root=vr(e):(this.root=xr({marktype:"group",name:"root",role:"frame"}),this.root.items=[new Pe(this.root)])}function xr(e,t){const n={bounds:new Oe,clip:!!e.clip,group:t,interactive:!1!==e.interactive,items:[],marktype:e.marktype,name:e.name||void 0,role:e.role||void 0,zindex:e.zindex||0};return null!=e.aria&&(n.aria=e.aria),e.description&&(n.description=e.description),n}function wr(e,t,n){return!e&&"undefined"!==typeof document&&document.createElement&&(e=document),e?n?e.createElementNS(n,t):e.createElement(t):null}function _r(e,t){t=t.toLowerCase();for(var n=e.childNodes,r=0,i=n.length;r<i;++r)if(n[r].tagName.toLowerCase()===t)return n[r]}function Ar(e,t,n,r){var i,o=e.childNodes[t];return o&&o.tagName.toLowerCase()===n.toLowerCase()||(i=o||null,o=wr(e.ownerDocument,n,r),e.insertBefore(o,i)),o}function kr(e,t){for(var n=e.childNodes,r=n.length;r>t;)e.removeChild(n[--r]);return e}function Er(e){return"mark-"+e.marktype+(e.role?" role-"+e.role:"")+(e.name?" "+e.name:"")}function Dr(e,t){const n=t.getBoundingClientRect();return[e.clientX-n.left-(t.clientLeft||0),e.clientY-n.top-(t.clientTop||0)]}function Cr(e,t,n,r){var i,o,a=e&&e.mark;if(a&&(i=fr[a.marktype]).tip){for((o=Dr(t,n))[0]-=r[0],o[1]-=r[1];e=e.mark.group;)o[0]-=e.x||0,o[1]-=e.y||0;e=i.tip(a.items,o)}return e}function Mr(e,t){this._active=null,this._handlers={},this._loader=e||o.loader(),this._tooltip=t||Fr}function Fr(e,t,n,r){e.element().setAttribute("title",r||"")}function Sr(e){this._el=null,this._bgcolor=null,this._loader=new Re(e)}br.prototype={toJSON(e){return mr(this.root,e||0)},mark(e,t,n){const r=xr(e,t=t||this.root.items[0]);return t.items[n]=r,r.zindex&&(r.group.zdirty=!0),r}},Mr.prototype={initialize(e,t,n){return this._el=e,this._obj=n||null,this.origin(t)},element(){return this._el},canvas(){return this._el&&this._el.firstChild},origin(e){return arguments.length?(this._origin=e||[0,0],this):this._origin.slice()},scene(e){return arguments.length?(this._scene=e,this):this._scene},on(){},off(){},_handlerIndex(e,t,n){for(let r=e?e.length:0;--r>=0;)if(e[r].type===t&&(!n||e[r].handler===n))return r;return-1},handlers(e){const t=this._handlers,n=[];if(e)n.push(...t[this.eventName(e)]);else for(const r in t)n.push(...t[r]);return n},eventName(e){const t=e.indexOf(".");return t<0?e:e.slice(0,t)},handleHref(e,t,n){this._loader.sanitize(n,{context:"href"}).then((t=>{const n=new MouseEvent(e.type,e),r=wr(null,"a");for(const e in t)r.setAttribute(e,t[e]);r.dispatchEvent(n)})).catch((()=>{}))},handleTooltip(e,t,n){if(t&&null!=t.tooltip){t=Cr(t,e,this.canvas(),this._origin);const r=n&&t&&t.tooltip||null;this._tooltip.call(this._obj,this,e,t,r)}},getItemBoundingClientRect(e){const t=this.canvas();if(!t)return;const n=t.getBoundingClientRect(),r=this._origin,i=e.bounds,o=i.width(),a=i.height();let s=i.x1+r[0]+n.left,u=i.y1+r[1]+n.top;for(;e.mark&&(e=e.mark.group);)s+=e.x||0,u+=e.y||0;return{x:s,y:u,width:o,height:a,left:s,top:u,right:s+o,bottom:u+a}}},Sr.prototype={initialize(e,t,n,r,i){return this._el=e,this.resize(t,n,r,i)},element(){return this._el},canvas(){return this._el&&this._el.firstChild},background(e){return 0===arguments.length?this._bgcolor:(this._bgcolor=e,this)},resize(e,t,n,r){return this._width=e,this._height=t,this._origin=n||[0,0],this._scale=r||1,this},dirty(){},render(e){const t=this;return t._call=function(){t._render(e)},t._call(),t._call=null,t},_render(){},renderAsync(e){const t=this.render(e);return this._ready?this._ready.then((()=>t)):Promise.resolve(t)},_load(e,t){var n=this,r=n._loader[e](t);if(!n._ready){const e=n._call;n._ready=n._loader.ready().then((t=>{t&&e(),n._ready=null}))}return r},sanitizeURL(e){return this._load("sanitizeURL",e)},loadImage(e){return this._load("loadImage",e)}};const Tr="dragenter",Or="dragleave",Nr="dragover",Pr="mousedown",Rr="mousemove",Br="mouseout",zr="mouseover",jr="click",Lr="mousewheel",Ir="touchstart",Ur="touchmove",qr="touchend",Wr=["keydown","keypress","keyup",Tr,Or,Nr,Pr,"mouseup",Rr,Br,zr,jr,"dblclick","wheel",Lr,Ir,Ur,qr],Hr=Rr,Yr=Br,Vr=jr;function Gr(e,t){Mr.call(this,e,t),this._down=null,this._touch=null,this._first=!0,this._events={}}const $r=e=>e===Ir||e===Ur||e===qr?[Ir,Ur,qr]:[e];function Xr(e,t){$r(t).forEach((t=>Jr(e,t)))}function Jr(e,t){const n=e.canvas();n&&!e._events[t]&&(e._events[t]=1,n.addEventListener(t,e[t]?n=>e[t](n):n=>e.fire(t,n)))}function Qr(e,t,n){return function(r){const i=this._active,o=this.pickEvent(r);o===i||(i&&i.exit||this.fire(n,r),this._active=o,this.fire(t,r)),this.fire(e,r)}}function Zr(e){return function(t){this.fire(e,t),this._active=null}}function Kr(){return"undefined"!==typeof window&&window.devicePixelRatio||1}t.inherits(Gr,Mr,{initialize(e,t,n){return this._canvas=e&&_r(e,"canvas"),[jr,Pr,Rr,Br,Or].forEach((e=>Xr(this,e))),Mr.prototype.initialize.call(this,e,t,n)},canvas(){return this._canvas},context(){return this._canvas.getContext("2d")},events:Wr,DOMMouseScroll(e){this.fire(Lr,e)},mousemove:Qr(Rr,zr,Br),dragover:Qr(Nr,Tr,Or),mouseout:Zr(Br),dragleave:Zr(Or),mousedown(e){this._down=this._active,this.fire(Pr,e)},click(e){this._down===this._active&&(this.fire(jr,e),this._down=null)},touchstart(e){this._touch=this.pickEvent(e.changedTouches[0]),this._first&&(this._active=this._touch,this._first=!1),this.fire(Ir,e,!0)},touchmove(e){this.fire(Ur,e,!0)},touchend(e){this.fire(qr,e,!0),this._touch=null},fire(e,t,n){const r=n?this._touch:this._active,i=this._handlers[e];if(t.vegaType=e,e===Vr&&r&&r.href?this.handleHref(t,r,r.href):e!==Hr&&e!==Yr||this.handleTooltip(t,r,e!==Yr),i)for(let o=0,a=i.length;o<a;++o)i[o].handler.call(this._obj,t,r)},on(e,t){const n=this.eventName(e),r=this._handlers;return this._handlerIndex(r[n],e,t)<0&&(Xr(this,e),(r[n]||(r[n]=[])).push({type:e,handler:t})),this},off(e,t){const n=this.eventName(e),r=this._handlers[n],i=this._handlerIndex(r,e,t);return i>=0&&r.splice(i,1),this},pickEvent(e){const t=Dr(e,this._canvas),n=this._origin;return this.pick(this._scene,t[0],t[1],t[0]-n[0],t[1]-n[1])},pick(e,t,n,r,i){const o=this.context();return fr[e.marktype].pick.call(this,o,e,t,n,r,i)}});var ei=Kr();function ti(e,t,n,r,i,o){const a="undefined"!==typeof HTMLElement&&e instanceof HTMLElement&&null!=e.parentNode,s=e.getContext("2d"),u=a?ei:i;e.width=t*u,e.height=n*u;for(const c in o)s[c]=o[c];return a&&1!==u&&(e.style.width=t+"px",e.style.height=n+"px"),s.pixelRatio=u,s.setTransform(u,0,0,u,u*r[0],u*r[1]),e}function ni(e){Sr.call(this,e),this._options={},this._redraw=!1,this._dirty=new Oe,this._tempb=new Oe}const ri=Sr.prototype,ii=(e,t,n)=>(new Oe).set(0,0,t,n).translate(-e[0],-e[1]);function oi(e,t,n){return t.expand(1).round(),e.pixelRatio%1&&t.scale(e.pixelRatio).round().scale(1/e.pixelRatio),t.translate(-n[0]%1,-n[1]%1),e.beginPath(),e.rect(t.x1,t.y1,t.width(),t.height()),e.clip(),t}function ai(e,t){Mr.call(this,e,t);const n=this;n._hrefHandler=si(n,((e,t)=>{t&&t.href&&n.handleHref(e,t,t.href)})),n._tooltipHandler=si(n,((e,t)=>{n.handleTooltip(e,t,e.type!==Yr)}))}t.inherits(ni,Sr,{initialize(e,t,n,r,o,a){return this._options=a||{},this._canvas=this._options.externalContext?null:i.canvas(1,1,this._options.type),e&&this._canvas&&(kr(e,0).appendChild(this._canvas),this._canvas.setAttribute("class","marks")),ri.initialize.call(this,e,t,n,r,o)},resize(e,n,r,i){if(ri.resize.call(this,e,n,r,i),this._canvas)ti(this._canvas,this._width,this._height,this._origin,this._scale,this._options.context);else{const e=this._options.externalContext;e||t.error("CanvasRenderer is missing a valid canvas or context"),e.scale(this._scale,this._scale),e.translate(this._origin[0],this._origin[1])}return this._redraw=!0,this},canvas(){return this._canvas},context(){return this._options.externalContext||(this._canvas?this._canvas.getContext("2d"):null)},dirty(e){const t=this._tempb.clear().union(e.bounds);let n=e.mark.group;for(;n;)t.translate(n.x||0,n.y||0),n=n.mark.group;this._dirty.union(t)},_render(e){const t=this.context(),n=this._origin,r=this._width,i=this._height,o=this._dirty,a=ii(n,r,i);t.save();const s=this._redraw||o.empty()?(this._redraw=!1,a.expand(1)):oi(t,a.intersect(o),n);return this.clear(-n[0],-n[1],r,i),this.draw(t,e,s),t.restore(),o.clear(),this},draw(e,t,n){const r=fr[t.marktype];t.clip&&Vt(e,t),r.draw.call(this,e,t,n),t.clip&&e.restore()},clear(e,t,n,r){const i=this._options,o=this.context();"pdf"===i.type||i.externalContext||o.clearRect(e,t,n,r),null!=this._bgcolor&&(o.fillStyle=this._bgcolor,o.fillRect(e,t,n,r))}});const si=(e,t)=>n=>{let r=n.target.__data__;r=Array.isArray(r)?r[0]:r,n.vegaType=n.type,t.call(e._obj,n,r)};t.inherits(ai,Mr,{initialize(e,t,n){let r=this._svg;return r&&(r.removeEventListener(Vr,this._hrefHandler),r.removeEventListener(Hr,this._tooltipHandler),r.removeEventListener(Yr,this._tooltipHandler)),this._svg=r=e&&_r(e,"svg"),r&&(r.addEventListener(Vr,this._hrefHandler),r.addEventListener(Hr,this._tooltipHandler),r.addEventListener(Yr,this._tooltipHandler)),Mr.prototype.initialize.call(this,e,t,n)},canvas(){return this._svg},on(e,t){const n=this.eventName(e),r=this._handlers;if(this._handlerIndex(r[n],e,t)<0){const i={type:e,handler:t,listener:si(this,t)};(r[n]||(r[n]=[])).push(i),this._svg&&this._svg.addEventListener(n,i.listener)}return this},off(e,t){const n=this.eventName(e),r=this._handlers[n],i=this._handlerIndex(r,e,t);return i>=0&&(this._svg&&this._svg.removeEventListener(n,r[i].listener),r.splice(i,1)),this}});const ui="aria-hidden",ci="aria-label",li="role",fi="aria-roledescription",di="graphics-object",hi="graphics-symbol",pi=(e,t,n)=>({[li]:e,[fi]:t,[ci]:n||void 0}),gi=t.toSet(["axis-domain","axis-grid","axis-label","axis-tick","axis-title","legend-band","legend-entry","legend-gradient","legend-label","legend-title","legend-symbol","title"]),mi={axis:{desc:"axis",caption:Ai},legend:{desc:"legend",caption:ki},"title-text":{desc:"title",caption:e=>"Title text '".concat(_i(e),"'")},"title-subtitle":{desc:"subtitle",caption:e=>"Subtitle text '".concat(_i(e),"'")}},vi={ariaRole:li,ariaRoleDescription:fi,description:ci};function yi(e,t){const n=!1===t.aria;if(e(ui,n||void 0),n||null==t.description)for(const r in vi)e(vi[r],void 0);else{const n=t.mark.marktype;e(ci,t.description),e(li,t.ariaRole||("group"===n?di:hi)),e(fi,t.ariaRoleDescription||"".concat(n," mark"))}}function bi(e){return!1===e.aria?{[ui]:!0}:gi[e.role]?null:mi[e.role]?wi(e,mi[e.role]):xi(e)}function xi(e){const t=e.marktype,n="group"===t||"text"===t||e.items.some((e=>null!=e.description&&!1!==e.aria));return pi(n?di:hi,"".concat(t," mark container"),e.description)}function wi(e,t){try{const n=e.items[0],r=t.caption||(()=>"");return pi(t.role||hi,t.desc,n.description||r(n))}catch(n){return null}}function _i(e){return t.array(e.text).join(" ")}function Ai(e){const t=e.datum,n=e.orient,r=t.title?Ei(e):null,i=e.context,o=i.scales[t.scale].value,s=i.dataflow.locale(),u=o.type;return"".concat("left"===n||"right"===n?"Y":"X","-axis")+(r?" titled '".concat(r,"'"):"")+" for a ".concat(a.isDiscrete(u)?"discrete":u," scale")+" with ".concat(a.domainCaption(s,o,e))}function ki(e){const t=e.datum,n=t.title?Ei(e):null,r="".concat(t.type||""," legend").trim(),i=t.scales,o=Object.keys(i),s=e.context,u=s.scales[i[o[0]]].value,c=s.dataflow.locale();return Ci(r)+(n?" titled '".concat(n,"'"):"")+" for ".concat(Di(o))+" with ".concat(a.domainCaption(c,u,e))}function Ei(e){try{return t.array(t.peek(e.items).items[0].text).join(" ")}catch(n){return null}}function Di(e){return(e=e.map((e=>e+("fill"===e||"stroke"===e?" color":"")))).length<2?e[0]:e.slice(0,-1).join(", ")+" and "+t.peek(e)}function Ci(e){return e.length?e[0].toUpperCase()+e.slice(1):e}const Mi=e=>(e+"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),Fi=e=>Mi(e).replace(/"/g,"&quot;").replace(/\t/g,"&#x9;").replace(/\n/g,"&#xA;").replace(/\r/g,"&#xD;");function Si(){let e="",t="",n="";const r=[],i=()=>t=n="",o=o=>{t&&(e+="".concat(t,">").concat(n),i()),r.push(o)},a=(e,n)=>(null!=n&&(t+=" ".concat(e,'="').concat(Fi(n),'"')),s),s={open(e,...n){o(e),t="<"+e;for(var r=0,i=n;r<i.length;r++){const e=i[r];for(const t in e)a(t,e[t])}return s},close(){const o=r.pop();return e+=t?t+(n?">".concat(n,"</").concat(o,">"):"/>"):"</".concat(o,">"),i(),s},attr:a,text:e=>(n+=Mi(e),s),toString:()=>e};return s}const Ti=e=>Oi(Si(),e)+"";function Oi(e,t){if(e.open(t.tagName),t.hasAttributes()){const n=t.attributes,r=n.length;for(let t=0;t<r;++t)e.attr(n[t].name,n[t].value)}if(t.hasChildNodes()){const n=t.childNodes,r=n.length;for(let t=0;t<r;t++){const r=n[t];3===r.nodeType?e.text(r.nodeValue):Oi(e,r)}}return e.close()}const Ni={fill:"fill",fillOpacity:"fill-opacity",stroke:"stroke",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",strokeCap:"stroke-linecap",strokeJoin:"stroke-linejoin",strokeDash:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeMiterLimit:"stroke-miterlimit",opacity:"opacity",blend:"mix-blend-mode"},Pi={fill:"none","stroke-miterlimit":10},Ri=0,Bi=ln.xmlns;function zi(e){Sr.call(this,e),this._dirtyID=0,this._dirty=[],this._svg=null,this._root=null,this._defs=null}const ji=Sr.prototype;function Li(e,t){for(;e&&e.dirty!==t;e=e.mark.group){if(e.dirty=t,!e.mark||e.mark.dirty===t)return;e.mark.dirty=t}}function Ii(e,t,n){let r,i,o;if("radial"===t.gradient){let r=Ar(e,n++,"pattern",Bi);Ji(r,{id:c+t.id,viewBox:"0,0,1,1",width:"100%",height:"100%",preserveAspectRatio:"xMidYMid slice"}),r=Ar(r,0,"rect",Bi),Ji(r,{width:1,height:1,fill:"url(".concat(Ki(),"#").concat(t.id,")")}),Ji(e=Ar(e,n++,"radialGradient",Bi),{id:t.id,fx:t.x1,fy:t.y1,fr:t.r1,cx:t.x2,cy:t.y2,r:t.r2})}else Ji(e=Ar(e,n++,"linearGradient",Bi),{id:t.id,x1:t.x1,x2:t.x2,y1:t.y1,y2:t.y2});for(r=0,i=t.stops.length;r<i;++r)o=Ar(e,r,"stop",Bi),o.setAttribute("offset",t.stops[r].offset),o.setAttribute("stop-color",t.stops[r].color);return kr(e,r),n}function Ui(e,t,n){let r;return(e=Ar(e,n,"clipPath",Bi)).setAttribute("id",t.id),t.path?(r=Ar(e,0,"path",Bi),r.setAttribute("d",t.path)):(r=Ar(e,0,"rect",Bi),Ji(r,{x:0,y:0,width:t.width,height:t.height})),kr(e,1),n+1}function qi(e,t,n){t=t.lastChild.previousSibling;let r,i=0;Et(n,(n=>{r=e.mark(t,n,r),++i})),kr(t,1+i)}function Wi(e,t,n,r,i){let o,a=e._svg;if(!a&&(o=t.ownerDocument,a=wr(o,r,Bi),e._svg=a,e.mark&&(a.__data__=e,a.__values__={fill:"default"},"g"===r))){const t=wr(o,"path",Bi);a.appendChild(t),t.__data__=e;const n=wr(o,"g",Bi);a.appendChild(n),n.__data__=e;const r=wr(o,"path",Bi);a.appendChild(r),r.__data__=e,r.__values__={fill:"default"}}return(a.ownerSVGElement!==i||Hi(a,n))&&t.insertBefore(a,n?n.nextSibling:t.firstChild),a}function Hi(e,t){return e.parentNode&&e.parentNode.childNodes.length>1&&e.previousSibling!=t}t.inherits(zi,Sr,{initialize(e,t,n,r,i){return this._defs={},this._clearDefs(),e&&(this._svg=Ar(e,0,"svg",Bi),Ji(this._svg,ln),this._svg.setAttribute("class","marks"),kr(e,1),this._root=Ar(this._svg,Ri,"g",Bi),Ji(this._root,Pi),kr(this._svg,Ri+1)),this.background(this._bgcolor),ji.initialize.call(this,e,t,n,r,i)},background(e){return arguments.length&&this._svg&&this._svg.style.setProperty("background-color",e),ji.background.apply(this,arguments)},resize(e,t,n,r){return ji.resize.call(this,e,t,n,r),this._svg&&(Ji(this._svg,{width:this._width*this._scale,height:this._height*this._scale,viewBox:"0 0 ".concat(this._width," ").concat(this._height)}),this._root.setAttribute("transform","translate(".concat(this._origin,")"))),this._dirty=[],this},canvas(){return this._svg},svg(){const e=this._svg,t=this._bgcolor;if(!e)return null;let n;t&&(e.removeAttribute("style"),n=Ar(e,Ri,"rect",Bi),Ji(n,{width:this._width,height:this._height,fill:t}));const r=Ti(e);return t&&(e.removeChild(n),this._svg.style.setProperty("background-color",t)),r},_render(e){return this._dirtyCheck()&&(this._dirtyAll&&this._clearDefs(),this.mark(this._root,e),kr(this._root,1)),this.defs(),this._dirty=[],++this._dirtyID,this},dirty(e){e.dirty!==this._dirtyID&&(e.dirty=this._dirtyID,this._dirty.push(e))},isDirty(e){return this._dirtyAll||!e._svg||e.dirty===this._dirtyID},_dirtyCheck(){this._dirtyAll=!0;const e=this._dirty;if(!e.length||!this._dirtyID)return!0;const t=++this._dirtyID;let n,r,i,o,a,s,u;for(a=0,s=e.length;a<s;++a)n=e[a],r=n.mark,r.marktype!==i&&(i=r.marktype,o=fr[i]),r.zdirty&&r.dirty!==t&&(this._dirtyAll=!1,Li(n,t),r.items.forEach((e=>{e.dirty=t}))),r.zdirty||(n.exit?(o.nested&&r.items.length?(u=r.items[0],u._svg&&this._update(o,u._svg,u)):n._svg&&(u=n._svg.parentNode,u&&u.removeChild(n._svg)),n._svg=null):(n=o.nested?r.items[0]:n,n._update!==t&&(n._svg&&n._svg.ownerSVGElement?this._update(o,n._svg,n):(this._dirtyAll=!1,Li(n,t)),n._update=t)));return!this._dirtyAll},mark(e,t,n){if(!this.isDirty(t))return t._svg;const r=this._svg,i=fr[t.marktype],o=!1===t.interactive?"none":null,a="g"===i.tag;let s=null,u=0;const c=Wi(t,e,n,"g",r);c.setAttribute("class",Er(t));const l=bi(t);for(const d in l)Qi(c,d,l[d]);a||Qi(c,"pointer-events",o),Qi(c,"clip-path",t.clip?Te(this,t,t.group):null);const f=e=>{const t=this.isDirty(e),n=Wi(e,c,s,i.tag,r);t&&(this._update(i,n,e),a&&qi(this,n,e)),s=n,++u};return i.nested?t.items.length&&f(t.items[0]):Et(t,f),kr(c,u),c},_update(e,t,n){Yi=t,Vi=t.__values__,yi($i,n),e.attr($i,n,this);const r=Gi[e.type];r&&r.call(this,e,t,n),Yi&&this.style(Yi,n)},style(e,t){if(null!=t)for(const n in Ni){let r="font"===n?Zn(t):t[n];if(r===Vi[n])continue;const i=Ni[n];null==r?e.removeAttribute(i):(l(r)&&(r=f(r,this._defs.gradient,Ki())),e.setAttribute(i,r+"")),Vi[n]=r}},defs(){const e=this._svg,t=this._defs;let n=t.el,r=0;for(const i in t.gradient)n||(t.el=n=Ar(e,Ri+1,"defs",Bi)),r=Ii(n,t.gradient[i],r);for(const i in t.clipping)n||(t.el=n=Ar(e,Ri+1,"defs",Bi)),r=Ui(n,t.clipping[i],r);n&&(0===r?(e.removeChild(n),t.el=null):kr(n,r))},_clearDefs(){const e=this._defs;e.gradient={},e.clipping={}}});let Yi=null,Vi=null;const Gi={group(e,t,n){const r=Yi=t.childNodes[2];Vi=r.__values__,e.foreground($i,n,this),Vi=t.__values__,Yi=t.childNodes[1],e.content($i,n,this);const i=Yi=t.childNodes[0];e.background($i,n,this);const o=!1===n.mark.interactive?"none":null;if(o!==Vi.events&&(Qi(r,"pointer-events",o),Qi(i,"pointer-events",o),Vi.events=o),n.strokeForeground&&n.stroke){const e=n.fill;Qi(r,"display",null),this.style(i,n),Qi(i,"stroke",null),e&&(n.fill=null),Vi=r.__values__,this.style(r,n),e&&(n.fill=e),Yi=null}else Qi(r,"display","none")},image(e,t,n){!1===n.smooth?(Xi(t,"image-rendering","optimizeSpeed"),Xi(t,"image-rendering","pixelated")):Xi(t,"image-rendering",null)},text(e,n,r){const i=Gn(r);let o,a,s,u;t.isArray(i)?(a=i.map((e=>Xn(r,e))),o=a.join("\n"),o!==Vi.text&&(kr(n,0),s=n.ownerDocument,u=Yn(r),a.forEach(((e,t)=>{const i=wr(s,"tspan",Bi);i.__data__=r,i.textContent=e,t&&(i.setAttribute("x",0),i.setAttribute("dy",u)),n.appendChild(i)})),Vi.text=o)):(a=Xn(r,i),a!==Vi.text&&(n.textContent=a,Vi.text=a)),Qi(n,"font-family",Zn(r)),Qi(n,"font-size",Hn(r)+"px"),Qi(n,"font-style",r.fontStyle),Qi(n,"font-variant",r.fontVariant),Qi(n,"font-weight",r.fontWeight)}};function $i(e,t,n){t!==Vi[e]&&(n?Zi(Yi,e,t,n):Qi(Yi,e,t),Vi[e]=t)}function Xi(e,t,n){n!==Vi[t]&&(null==n?e.style.removeProperty(t):e.style.setProperty(t,n+""),Vi[t]=n)}function Ji(e,t){for(const n in t)Qi(e,n,t[n])}function Qi(e,t,n){null!=n?e.setAttribute(t,n):e.removeAttribute(t)}function Zi(e,t,n,r){null!=n?e.setAttributeNS(r,t,n):e.removeAttributeNS(r,t)}function Ki(){let e;return"undefined"===typeof window?"":(e=window.location).hash?e.href.slice(0,-e.hash.length):e.href}function eo(e){Sr.call(this,e),this._text=null,this._defs={gradient:{},clipping:{}}}function to(e,t,n,r,i){if(null==t)return e;if("bgrect"===r&&!1===n.interactive&&(e["pointer-events"]="none"),"bgfore"===r&&(!1===n.interactive&&(e["pointer-events"]="none"),e.display="none",null!==t.fill))return e;"image"===r&&!1===t.smooth&&(e.style="image-rendering: optimizeSpeed; image-rendering: pixelated;"),"text"===r&&(e["font-family"]=Zn(t),e["font-size"]=Hn(t)+"px",e["font-style"]=t.fontStyle,e["font-variant"]=t.fontVariant,e["font-weight"]=t.fontWeight);for(const o in Ni){let n=t[o];const r=Ni[o];("transparent"!==n||"fill"!==r&&"stroke"!==r)&&null!=n&&(l(n)&&(n=f(n,i.gradient,"")),e[r]=n)}return e}t.inherits(eo,Sr,{svg(){return this._text},_render(e){const n=Si();n.open("svg",t.extend({},ln,{class:"marks",width:this._width*this._scale,height:this._height*this._scale,viewBox:"0 0 ".concat(this._width," ").concat(this._height)}));const r=this._bgcolor;return r&&"transparent"!==r&&"none"!==r&&n.open("rect",{width:this._width,height:this._height,fill:r}).close(),n.open("g",Pi,{transform:"translate("+this._origin+")"}),this.mark(n,e),n.close(),this.defs(n),this._text=n.close()+"",this},mark(e,n){const r=fr[n.marktype],i=r.tag,o=[yi,r.attr];e.open("g",{class:Er(n),"clip-path":n.clip?Te(this,n,n.group):null},bi(n),{"pointer-events":"g"!==i&&!1===n.interactive?"none":null});const a=a=>{const s=this.href(a);if(s&&e.open("a",s),e.open(i,this.attr(n,a,o,"g"!==i?i:null)),"text"===i){const n=Gn(a);if(t.isArray(n)){const t={x:0,dy:Yn(a)};for(let r=0;r<n.length;++r)e.open("tspan",r?t:null).text(Xn(a,n[r])).close()}else e.text(Xn(a,n))}else if("g"===i){const t=a.strokeForeground,i=a.fill,o=a.stroke;t&&o&&(a.stroke=null),e.open("path",this.attr(n,a,r.background,"bgrect")).close(),e.open("g",this.attr(n,a,r.content)),Et(a,(t=>this.mark(e,t))),e.close(),t&&o?(i&&(a.fill=null),a.stroke=o,e.open("path",this.attr(n,a,r.foreground,"bgrect")).close(),i&&(a.fill=i)):e.open("path",this.attr(n,a,r.foreground,"bgfore")).close()}e.close(),s&&e.close()};return r.nested?n.items&&n.items.length&&a(n.items[0]):Et(n,a),e.close()},href(e){const t=e.href;let n;if(t){if(n=this._hrefs&&this._hrefs[t])return n;this.sanitizeURL(t).then((e=>{e["xlink:href"]=e.href,e.href=null,(this._hrefs||(this._hrefs={}))[t]=e}))}return null},attr(e,t,n,r){const i={},o=(e,t,n,r)=>{i[r||e]=t};return Array.isArray(n)?n.forEach((e=>e(o,t,this))):n(o,t,this),r&&to(i,t,e,r,this._defs),i},defs(e){const t=this._defs.gradient,n=this._defs.clipping;if(0!==Object.keys(t).length+Object.keys(n).length){e.open("defs");for(const n in t){const r=t[n],i=r.stops;"radial"===r.gradient?(e.open("pattern",{id:c+n,viewBox:"0,0,1,1",width:"100%",height:"100%",preserveAspectRatio:"xMidYMid slice"}),e.open("rect",{width:"1",height:"1",fill:"url(#"+n+")"}).close(),e.close(),e.open("radialGradient",{id:n,fx:r.x1,fy:r.y1,fr:r.r1,cx:r.x2,cy:r.y2,r:r.r2})):e.open("linearGradient",{id:n,x1:r.x1,x2:r.x2,y1:r.y1,y2:r.y2});for(let t=0;t<i.length;++t)e.open("stop",{offset:i[t].offset,"stop-color":i[t].color}).close();e.close()}for(const t in n){const r=n[t];e.open("clipPath",{id:t}),r.path?e.open("path",{d:r.path}).close():e.open("rect",{x:0,y:0,width:r.width,height:r.height}).close(),e.close()}e.close()}}});const no="canvas",ro="png",io="svg",oo="none",ao={Canvas:no,PNG:ro,SVG:io,None:oo},so={};function uo(e,t){return e=String(e||"").toLowerCase(),arguments.length>1?(so[e]=t,this):so[e]}function co(e,n,r){const i=[],o=(new Oe).union(n),a=e.marktype;return a?lo(e,o,r,i):"group"===a?ho(e,o,r,i):t.error("Intersect scene must be mark node or group item.")}function lo(e,t,n,r){if(fo(e,t,n)){const i=e.items,o=e.marktype,a=i.length;let s=0;if("group"===o)for(;s<a;++s)ho(i[s],t,n,r);else for(const e=fr[o].isect;s<a;++s){const n=i[s];po(n,t,e)&&r.push(n)}}return r}function fo(e,t,n){return e.bounds&&t.intersects(e.bounds)&&("group"===e.marktype||!1!==e.interactive&&(!n||n(e)))}function ho(e,t,n,r){n&&n(e.mark)&&po(e,t,fr.group.isect)&&r.push(e);const i=e.items,o=i&&i.length;if(o){const a=e.x||0,s=e.y||0;t.translate(-a,-s);for(let e=0;e<o;++e)lo(i[e],t,n,r);t.translate(a,s)}return r}function po(e,t,n){const r=e.bounds;return t.encloses(r)||t.intersects(r)&&n(e,t)}so[no]=so[ro]={renderer:ni,headless:ni,handler:Gr},so[io]={renderer:zi,headless:eo,handler:ai},so[oo]={};const go=new Oe;function mo(e){const n=e.clip;if(t.isFunction(n))n(rt(go.clear()));else{if(!n)return;go.set(0,0,e.group.width,e.group.height)}e.bounds.intersect(go)}const vo=1e-9;function yo(e,n,r){return e===n||("path"===r?bo(e,n):e instanceof Date&&n instanceof Date?+e===+n:t.isNumber(e)&&t.isNumber(n)?Math.abs(e-n)<=vo:e&&n&&(t.isObject(e)||t.isObject(n))?xo(e,n):e==n)}function bo(e,t){return yo(y(e),y(t))}function xo(e,t){var n,r,i=Object.keys(e),o=Object.keys(t);if(i.length!==o.length)return!1;for(i.sort(),o.sort(),r=i.length-1;r>=0;r--)if(i[r]!=o[r])return!1;for(r=i.length-1;r>=0;r--)if(!yo(e[n=i[r]],t[n],n))return!1;return typeof e===typeof t}function wo(){Se(),u()}e.Bounds=Oe,e.CanvasHandler=Gr,e.CanvasRenderer=ni,e.Gradient=h,e.GroupItem=Pe,e.Handler=Mr,e.Item=Ne,e.Marks=fr,e.RenderType=ao,e.Renderer=Sr,e.ResourceLoader=Re,e.SVGHandler=ai,e.SVGRenderer=zi,e.SVGStringRenderer=eo,e.Scenegraph=br,e.boundClip=mo,e.boundContext=rt,e.boundItem=dr,e.boundMark=pr,e.boundStroke=je,e.domChild=Ar,e.domClear=kr,e.domCreate=wr,e.domFind=_r,e.font=Kn,e.fontFamily=Zn,e.fontSize=Hn,e.intersect=co,e.intersectBoxLine=pt,e.intersectPath=lt,e.intersectPoint=ft,e.intersectRule=ht,e.lineHeight=Yn,e.markup=Si,e.multiLineOffset=$n,e.pathCurves=g,e.pathEqual=bo,e.pathParse=y,e.pathRectangle=Y,e.pathRender=T,e.pathSymbols=R,e.pathTrail=V,e.point=Dr,e.renderModule=uo,e.resetSVGClipId=Se,e.resetSVGDefIds=wo,e.sceneEqual=yo,e.sceneFromJSON=vr,e.scenePickVisit=Dt,e.sceneToJSON=mr,e.sceneVisit=Et,e.sceneZOrder=kt,e.serializeXML=Ti,e.textMetrics=jn,Object.defineProperty(e,"__esModule",{value:!0})}(t,n(1176),n(2335),n(1712),n(1369),n(1487),n(1283))},1368:function(e,t,n){!function(e,t,n,r,i,o){"use strict";function a(e){const t={};return n=>t[n]||(t[n]=e(n))}function s(e,t){return n=>{const r=e(n),i=r.indexOf(t);if(i<0)return r;let o=u(r,i);const a=o<r.length?r.slice(o):"";for(;--o>i;)if("0"!==r[o]){++o;break}return r.slice(0,o)+a}}function u(e,t){let n,r=e.lastIndexOf("e");if(r>0)return r;for(r=e.length;--r>t;)if(n=e.charCodeAt(r),n>=48&&n<=57)return r+1}function c(e){const r=a(e.format),i=e.formatPrefix;return{format:r,formatPrefix:i,formatFloat(e){const t=n.formatSpecifier(e||",");if(null==t.precision){switch(t.precision=12,t.type){case"%":t.precision-=2;break;case"e":t.precision-=1}return s(r(t),r(".1f")(1)[1])}return r(t)},formatSpan(e,o,a,s){s=n.formatSpecifier(null==s?",f":s);const u=t.tickStep(e,o,a),c=Math.max(Math.abs(e),Math.abs(o));let l;if(null==s.precision)switch(s.type){case"s":return isNaN(l=n.precisionPrefix(u,c))||(s.precision=l),i(s,c);case"":case"e":case"g":case"p":case"r":isNaN(l=n.precisionRound(u,c))||(s.precision=l-("e"===s.type));break;case"f":case"%":isNaN(l=n.precisionFixed(u))||(s.precision=l-2*("%"===s.type))}return r(s)}}}let l,f;function d(){return l=c({format:n.format,formatPrefix:n.formatPrefix})}function h(e){return c(n.formatLocale(e))}function p(e){return arguments.length?l=h(e):l}function g(e,t,n){n=n||{},i.isObject(n)||i.error("Invalid time multi-format specifier: ".concat(n));const o=t(r.SECONDS),a=t(r.MINUTES),s=t(r.HOURS),u=t(r.DATE),c=t(r.WEEK),l=t(r.MONTH),f=t(r.QUARTER),d=t(r.YEAR),h=e(n[r.MILLISECONDS]||".%L"),p=e(n[r.SECONDS]||":%S"),g=e(n[r.MINUTES]||"%I:%M"),m=e(n[r.HOURS]||"%I %p"),v=e(n[r.DATE]||n[r.DAY]||"%a %d"),y=e(n[r.WEEK]||"%b %d"),b=e(n[r.MONTH]||"%B"),x=e(n[r.QUARTER]||"%B"),w=e(n[r.YEAR]||"%Y");return e=>(o(e)<e?h:a(e)<e?p:s(e)<e?g:u(e)<e?m:l(e)<e?c(e)<e?v:y:d(e)<e?f(e)<e?b:x:w)(e)}function m(e){const t=a(e.format),n=a(e.utcFormat);return{timeFormat:e=>i.isString(e)?t(e):g(t,r.timeInterval,e),utcFormat:e=>i.isString(e)?n(e):g(n,r.utcInterval,e),timeParse:a(e.parse),utcParse:a(e.utcParse)}}function v(){return f=m({format:o.timeFormat,parse:o.timeParse,utcFormat:o.utcFormat,utcParse:o.utcParse})}function y(e){return m(o.timeFormatLocale(e))}function b(e){return arguments.length?f=y(e):f}d(),v();const x=(e,t)=>i.extend({},e,t);function w(e,t){const n=e?h(e):p(),r=t?y(t):b();return x(n,r)}function _(e,t){const n=arguments.length;return n&&2!==n&&i.error("defaultLocale expects either zero or two arguments."),n?x(p(e),b(t)):x(p(),b())}function A(){return d(),v(),_()}e.defaultLocale=_,e.locale=w,e.numberFormatDefaultLocale=p,e.numberFormatLocale=h,e.resetDefaultLocale=A,e.resetNumberFormatDefaultLocale=d,e.resetTimeFormatDefaultLocale=v,e.timeFormatDefaultLocale=b,e.timeFormatLocale=y,Object.defineProperty(e,"__esModule",{value:!0})}(t,n(1190),n(2329),n(1322),n(1176),n(2331))},1369:function(e,t,n){!function(e){"use strict";function t(e,t){if("undefined"!=typeof document&&document.createElement){const n=document.createElement("canvas");if(n&&n.getContext)return n.width=e,n.height=t,n}return null}e.canvas=t,e.domCanvas=t,e.image=()=>"undefined"!=typeof Image?Image:null,Object.defineProperty(e,"__esModule",{value:!0})}(t)},1370:function(e,t,n){!function(e,t){"use strict";var n=1e-6,r=1e-12,i=Math.PI,o=i/2,a=i/4,s=2*i,u=180/i,c=i/180,l=Math.abs,f=Math.atan,d=Math.atan2,h=Math.cos,p=Math.ceil,g=Math.exp,m=Math.hypot,v=Math.log,y=Math.pow,b=Math.sin,x=Math.sign||function(e){return e>0?1:e<0?-1:0},w=Math.sqrt,_=Math.tan;function A(e){return e>1?0:e<-1?i:Math.acos(e)}function k(e){return e>1?o:e<-1?-o:Math.asin(e)}function E(e){return(e=b(e/2))*e}function D(){}function C(e,t){e&&F.hasOwnProperty(e.type)&&F[e.type](e,t)}var M={Feature:function(e,t){C(e.geometry,t)},FeatureCollection:function(e,t){for(var n=e.features,r=-1,i=n.length;++r<i;)C(n[r].geometry,t)}},F={Sphere:function(e,t){t.sphere()},Point:function(e,t){e=e.coordinates,t.point(e[0],e[1],e[2])},MultiPoint:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)e=n[r],t.point(e[0],e[1],e[2])},LineString:function(e,t){S(e.coordinates,t,0)},MultiLineString:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)S(n[r],t,0)},Polygon:function(e,t){T(e.coordinates,t)},MultiPolygon:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)T(n[r],t)},GeometryCollection:function(e,t){for(var n=e.geometries,r=-1,i=n.length;++r<i;)C(n[r],t)}};function S(e,t,n){var r,i=-1,o=e.length-n;for(t.lineStart();++i<o;)r=e[i],t.point(r[0],r[1],r[2]);t.lineEnd()}function T(e,t){var n=-1,r=e.length;for(t.polygonStart();++n<r;)S(e[n],t,1);t.polygonEnd()}function O(e,t){e&&M.hasOwnProperty(e.type)?M[e.type](e,t):C(e,t)}var N,P,R,B,z,j,L,I,U,q,W,H,Y,V,G,$,X=new t.Adder,J=new t.Adder,Q={point:D,lineStart:D,lineEnd:D,polygonStart:function(){X=new t.Adder,Q.lineStart=Z,Q.lineEnd=K},polygonEnd:function(){var e=+X;J.add(e<0?s+e:e),this.lineStart=this.lineEnd=this.point=D},sphere:function(){J.add(s)}};function Z(){Q.point=ee}function K(){te(N,P)}function ee(e,t){Q.point=te,N=e,P=t,R=e*=c,B=h(t=(t*=c)/2+a),z=b(t)}function te(e,t){var n=(e*=c)-R,r=n>=0?1:-1,i=r*n,o=h(t=(t*=c)/2+a),s=b(t),u=z*s,l=B*o+u*h(i),f=u*r*b(i);X.add(d(f,l)),R=e,B=o,z=s}function ne(e){return J=new t.Adder,O(e,Q),2*J}function re(e){return[d(e[1],e[0]),k(e[2])]}function ie(e){var t=e[0],n=e[1],r=h(n);return[r*h(t),r*b(t),b(n)]}function oe(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function ae(e,t){return[e[1]*t[2]-e[2]*t[1],e[2]*t[0]-e[0]*t[2],e[0]*t[1]-e[1]*t[0]]}function se(e,t){e[0]+=t[0],e[1]+=t[1],e[2]+=t[2]}function ue(e,t){return[e[0]*t,e[1]*t,e[2]*t]}function ce(e){var t=w(e[0]*e[0]+e[1]*e[1]+e[2]*e[2]);e[0]/=t,e[1]/=t,e[2]/=t}var le,fe,de,he,pe,ge,me,ve,ye,be,xe,we,_e,Ae,ke,Ee,De={point:Ce,lineStart:Fe,lineEnd:Se,polygonStart:function(){De.point=Te,De.lineStart=Oe,De.lineEnd=Ne,V=new t.Adder,Q.polygonStart()},polygonEnd:function(){Q.polygonEnd(),De.point=Ce,De.lineStart=Fe,De.lineEnd=Se,X<0?(j=-(I=180),L=-(U=90)):V>n?U=90:V<-n&&(L=-90),$[0]=j,$[1]=I},sphere:function(){j=-(I=180),L=-(U=90)}};function Ce(e,t){G.push($=[j=e,I=e]),t<L&&(L=t),t>U&&(U=t)}function Me(e,t){var n=ie([e*c,t*c]);if(Y){var r=ae(Y,n),i=ae([r[1],-r[0],0],r);ce(i),i=re(i);var o,a=e-q,s=a>0?1:-1,f=i[0]*u*s,d=l(a)>180;d^(s*q<f&&f<s*e)?(o=i[1]*u)>U&&(U=o):d^(s*q<(f=(f+360)%360-180)&&f<s*e)?(o=-i[1]*u)<L&&(L=o):(t<L&&(L=t),t>U&&(U=t)),d?e<q?Pe(j,e)>Pe(j,I)&&(I=e):Pe(e,I)>Pe(j,I)&&(j=e):I>=j?(e<j&&(j=e),e>I&&(I=e)):e>q?Pe(j,e)>Pe(j,I)&&(I=e):Pe(e,I)>Pe(j,I)&&(j=e)}else G.push($=[j=e,I=e]);t<L&&(L=t),t>U&&(U=t),Y=n,q=e}function Fe(){De.point=Me}function Se(){$[0]=j,$[1]=I,De.point=Ce,Y=null}function Te(e,t){if(Y){var n=e-q;V.add(l(n)>180?n+(n>0?360:-360):n)}else W=e,H=t;Q.point(e,t),Me(e,t)}function Oe(){Q.lineStart()}function Ne(){Te(W,H),Q.lineEnd(),l(V)>n&&(j=-(I=180)),$[0]=j,$[1]=I,Y=null}function Pe(e,t){return(t-=e)<0?t+360:t}function Re(e,t){return e[0]-t[0]}function Be(e,t){return e[0]<=e[1]?e[0]<=t&&t<=e[1]:t<e[0]||e[1]<t}function ze(e){var t,n,r,i,o,a,s;if(U=I=-(j=L=1/0),G=[],O(e,De),n=G.length){for(G.sort(Re),t=1,o=[r=G[0]];t<n;++t)Be(r,(i=G[t])[0])||Be(r,i[1])?(Pe(r[0],i[1])>Pe(r[0],r[1])&&(r[1]=i[1]),Pe(i[0],r[1])>Pe(r[0],r[1])&&(r[0]=i[0])):o.push(r=i);for(a=-1/0,t=0,r=o[n=o.length-1];t<=n;r=i,++t)i=o[t],(s=Pe(r[1],i[0]))>a&&(a=s,j=i[0],I=r[1])}return G=$=null,j===1/0||L===1/0?[[NaN,NaN],[NaN,NaN]]:[[j,L],[I,U]]}var je={sphere:D,point:Le,lineStart:Ue,lineEnd:He,polygonStart:function(){je.lineStart=Ye,je.lineEnd=Ve},polygonEnd:function(){je.lineStart=Ue,je.lineEnd=He}};function Le(e,t){e*=c;var n=h(t*=c);Ie(n*h(e),n*b(e),b(t))}function Ie(e,t,n){++le,de+=(e-de)/le,he+=(t-he)/le,pe+=(n-pe)/le}function Ue(){je.point=qe}function qe(e,t){e*=c;var n=h(t*=c);Ae=n*h(e),ke=n*b(e),Ee=b(t),je.point=We,Ie(Ae,ke,Ee)}function We(e,t){e*=c;var n=h(t*=c),r=n*h(e),i=n*b(e),o=b(t),a=d(w((a=ke*o-Ee*i)*a+(a=Ee*r-Ae*o)*a+(a=Ae*i-ke*r)*a),Ae*r+ke*i+Ee*o);fe+=a,ge+=a*(Ae+(Ae=r)),me+=a*(ke+(ke=i)),ve+=a*(Ee+(Ee=o)),Ie(Ae,ke,Ee)}function He(){je.point=Le}function Ye(){je.point=Ge}function Ve(){$e(we,_e),je.point=Le}function Ge(e,t){we=e,_e=t,e*=c,t*=c,je.point=$e;var n=h(t);Ae=n*h(e),ke=n*b(e),Ee=b(t),Ie(Ae,ke,Ee)}function $e(e,t){e*=c;var n=h(t*=c),r=n*h(e),i=n*b(e),o=b(t),a=ke*o-Ee*i,s=Ee*r-Ae*o,u=Ae*i-ke*r,l=m(a,s,u),f=k(l),d=l&&-f/l;ye.add(d*a),be.add(d*s),xe.add(d*u),fe+=f,ge+=f*(Ae+(Ae=r)),me+=f*(ke+(ke=i)),ve+=f*(Ee+(Ee=o)),Ie(Ae,ke,Ee)}function Xe(e){le=fe=de=he=pe=ge=me=ve=0,ye=new t.Adder,be=new t.Adder,xe=new t.Adder,O(e,je);var i=+ye,o=+be,a=+xe,s=m(i,o,a);return s<r&&(i=ge,o=me,a=ve,fe<n&&(i=de,o=he,a=pe),(s=m(i,o,a))<r)?[NaN,NaN]:[d(o,i)*u,k(a/s)*u]}function Je(e){return function(){return e}}function Qe(e,t){function n(n,r){return n=e(n,r),t(n[0],n[1])}return e.invert&&t.invert&&(n.invert=function(n,r){return(n=t.invert(n,r))&&e.invert(n[0],n[1])}),n}function Ze(e,t){return[l(e)>i?e+Math.round(-e/s)*s:e,t]}function Ke(e,t,n){return(e%=s)?t||n?Qe(tt(e),nt(t,n)):tt(e):t||n?nt(t,n):Ze}function et(e){return function(t,n){return[(t+=e)>i?t-s:t<-i?t+s:t,n]}}function tt(e){var t=et(e);return t.invert=et(-e),t}function nt(e,t){var n=h(e),r=b(e),i=h(t),o=b(t);function a(e,t){var a=h(t),s=h(e)*a,u=b(e)*a,c=b(t),l=c*n+s*r;return[d(u*i-l*o,s*n-c*r),k(l*i+u*o)]}return a.invert=function(e,t){var a=h(t),s=h(e)*a,u=b(e)*a,c=b(t),l=c*i-u*o;return[d(u*i+c*o,s*n+l*r),k(l*n-s*r)]},a}function rt(e){function t(t){return(t=e(t[0]*c,t[1]*c))[0]*=u,t[1]*=u,t}return e=Ke(e[0]*c,e[1]*c,e.length>2?e[2]*c:0),t.invert=function(t){return(t=e.invert(t[0]*c,t[1]*c))[0]*=u,t[1]*=u,t},t}function it(e,t,n,r,i,o){if(n){var a=h(t),u=b(t),c=r*n;null==i?(i=t+r*s,o=t-c/2):(i=ot(a,i),o=ot(a,o),(r>0?i<o:i>o)&&(i+=r*s));for(var l,f=i;r>0?f>o:f<o;f-=c)l=re([a,-u*h(f),-u*b(f)]),e.point(l[0],l[1])}}function ot(e,t){(t=ie(t))[0]-=e,ce(t);var r=A(-t[1]);return((-t[2]<0?-r:r)+s-n)%s}function at(){var e,t,n=Je([0,0]),r=Je(90),i=Je(6),o={point:a};function a(n,r){e.push(n=t(n,r)),n[0]*=u,n[1]*=u}function s(){var a=n.apply(this,arguments),s=r.apply(this,arguments)*c,u=i.apply(this,arguments)*c;return e=[],t=Ke(-a[0]*c,-a[1]*c,0).invert,it(o,s,u,1),a={type:"Polygon",coordinates:[e]},e=t=null,a}return s.center=function(e){return arguments.length?(n="function"===typeof e?e:Je([+e[0],+e[1]]),s):n},s.radius=function(e){return arguments.length?(r="function"===typeof e?e:Je(+e),s):r},s.precision=function(e){return arguments.length?(i="function"===typeof e?e:Je(+e),s):i},s}function st(){var e,t=[];return{point:function(t,n,r){e.push([t,n,r])},lineStart:function(){t.push(e=[])},lineEnd:D,rejoin:function(){t.length>1&&t.push(t.pop().concat(t.shift()))},result:function(){var n=t;return t=[],e=null,n}}}function ut(e,t){return l(e[0]-t[0])<n&&l(e[1]-t[1])<n}function ct(e,t,n,r){this.x=e,this.z=t,this.o=n,this.e=r,this.v=!1,this.n=this.p=null}function lt(e,t,r,i,o){var a,s,u=[],c=[];if(e.forEach((function(e){if(!((t=e.length-1)<=0)){var t,r,i=e[0],s=e[t];if(ut(i,s)){if(!i[2]&&!s[2]){for(o.lineStart(),a=0;a<t;++a)o.point((i=e[a])[0],i[1]);return void o.lineEnd()}s[0]+=2*n}u.push(r=new ct(i,e,null,!0)),c.push(r.o=new ct(i,null,r,!1)),u.push(r=new ct(s,e,null,!1)),c.push(r.o=new ct(s,null,r,!0))}})),u.length){for(c.sort(t),ft(u),ft(c),a=0,s=c.length;a<s;++a)c[a].e=r=!r;for(var l,f,d=u[0];;){for(var h=d,p=!0;h.v;)if((h=h.n)===d)return;l=h.z,o.lineStart();do{if(h.v=h.o.v=!0,h.e){if(p)for(a=0,s=l.length;a<s;++a)o.point((f=l[a])[0],f[1]);else i(h.x,h.n.x,1,o);h=h.n}else{if(p)for(l=h.p.z,a=l.length-1;a>=0;--a)o.point((f=l[a])[0],f[1]);else i(h.x,h.p.x,-1,o);h=h.p}l=(h=h.o).z,p=!p}while(!h.v);o.lineEnd()}}}function ft(e){if(t=e.length){for(var t,n,r=0,i=e[0];++r<t;)i.n=n=e[r],n.p=i,i=n;i.n=n=e[0],n.p=i}}function dt(e){return l(e[0])<=i?e[0]:x(e[0])*((l(e[0])+i)%s-i)}function ht(e,u){var c=dt(u),l=u[1],f=b(l),p=[b(c),-h(c),0],g=0,m=0,v=new t.Adder;1===f?l=o+n:-1===f&&(l=-o-n);for(var y=0,x=e.length;y<x;++y)if(_=(w=e[y]).length)for(var w,_,A=w[_-1],E=dt(A),D=A[1]/2+a,C=b(D),M=h(D),F=0;F<_;++F,E=T,C=N,M=P,A=S){var S=w[F],T=dt(S),O=S[1]/2+a,N=b(O),P=h(O),R=T-E,B=R>=0?1:-1,z=B*R,j=z>i,L=C*N;if(v.add(d(L*B*b(z),M*P+L*h(z))),g+=j?R+B*s:R,j^E>=c^T>=c){var I=ae(ie(A),ie(S));ce(I);var U=ae(p,I);ce(U);var q=(j^R>=0?-1:1)*k(U[2]);(l>q||l===q&&(I[0]||I[1]))&&(m+=j^R>=0?1:-1)}}return(g<-n||g<n&&v<-r)^1&m}function pt(e,n,r,i){return function(o){var a,s,u,c=n(o),l=st(),f=n(l),d=!1,h={point:p,lineStart:m,lineEnd:v,polygonStart:function(){h.point=y,h.lineStart=b,h.lineEnd=x,s=[],a=[]},polygonEnd:function(){h.point=p,h.lineStart=m,h.lineEnd=v,s=t.merge(s);var e=ht(a,i);s.length?(d||(o.polygonStart(),d=!0),lt(s,mt,e,r,o)):e&&(d||(o.polygonStart(),d=!0),o.lineStart(),r(null,null,1,o),o.lineEnd()),d&&(o.polygonEnd(),d=!1),s=a=null},sphere:function(){o.polygonStart(),o.lineStart(),r(null,null,1,o),o.lineEnd(),o.polygonEnd()}};function p(t,n){e(t,n)&&o.point(t,n)}function g(e,t){c.point(e,t)}function m(){h.point=g,c.lineStart()}function v(){h.point=p,c.lineEnd()}function y(e,t){u.push([e,t]),f.point(e,t)}function b(){f.lineStart(),u=[]}function x(){y(u[0][0],u[0][1]),f.lineEnd();var e,t,n,r,i=f.clean(),c=l.result(),h=c.length;if(u.pop(),a.push(u),u=null,h)if(1&i){if((t=(n=c[0]).length-1)>0){for(d||(o.polygonStart(),d=!0),o.lineStart(),e=0;e<t;++e)o.point((r=n[e])[0],r[1]);o.lineEnd()}}else h>1&&2&i&&c.push(c.pop().concat(c.shift())),s.push(c.filter(gt))}return h}}function gt(e){return e.length>1}function mt(e,t){return((e=e.x)[0]<0?e[1]-o-n:o-e[1])-((t=t.x)[0]<0?t[1]-o-n:o-t[1])}Ze.invert=Ze;var vt=pt((function(){return!0}),yt,xt,[-i,-o]);function yt(e){var t,r=NaN,a=NaN,s=NaN;return{lineStart:function(){e.lineStart(),t=1},point:function(u,c){var f=u>0?i:-i,d=l(u-r);l(d-i)<n?(e.point(r,a=(a+c)/2>0?o:-o),e.point(s,a),e.lineEnd(),e.lineStart(),e.point(f,a),e.point(u,a),t=0):s!==f&&d>=i&&(l(r-s)<n&&(r-=s*n),l(u-f)<n&&(u-=f*n),a=bt(r,a,u,c),e.point(s,a),e.lineEnd(),e.lineStart(),e.point(f,a),t=0),e.point(r=u,a=c),s=f},lineEnd:function(){e.lineEnd(),r=a=NaN},clean:function(){return 2-t}}}function bt(e,t,r,i){var o,a,s=b(e-r);return l(s)>n?f((b(t)*(a=h(i))*b(r)-b(i)*(o=h(t))*b(e))/(o*a*s)):(t+i)/2}function xt(e,t,r,a){var s;if(null==e)s=r*o,a.point(-i,s),a.point(0,s),a.point(i,s),a.point(i,0),a.point(i,-s),a.point(0,-s),a.point(-i,-s),a.point(-i,0),a.point(-i,s);else if(l(e[0]-t[0])>n){var u=e[0]<t[0]?i:-i;s=r*u/2,a.point(-u,s),a.point(0,s),a.point(u,s)}else a.point(t[0],t[1])}function wt(e){var t=h(e),r=6*c,o=t>0,a=l(t)>n;function s(t,n,i,o){it(o,e,r,i,t,n)}function u(e,n){return h(e)*h(n)>t}function f(e){var t,n,r,s,c;return{lineStart:function(){s=r=!1,c=1},point:function(l,f){var h,g=[l,f],m=u(l,f),v=o?m?0:p(l,f):m?p(l+(l<0?i:-i),f):0;if(!t&&(s=r=m)&&e.lineStart(),m!==r&&(!(h=d(t,g))||ut(t,h)||ut(g,h))&&(g[2]=1),m!==r)c=0,m?(e.lineStart(),h=d(g,t),e.point(h[0],h[1])):(h=d(t,g),e.point(h[0],h[1],2),e.lineEnd()),t=h;else if(a&&t&&o^m){var y;v&n||!(y=d(g,t,!0))||(c=0,o?(e.lineStart(),e.point(y[0][0],y[0][1]),e.point(y[1][0],y[1][1]),e.lineEnd()):(e.point(y[1][0],y[1][1]),e.lineEnd(),e.lineStart(),e.point(y[0][0],y[0][1],3)))}!m||t&&ut(t,g)||e.point(g[0],g[1]),t=g,r=m,n=v},lineEnd:function(){r&&e.lineEnd(),t=null},clean:function(){return c|(s&&r)<<1}}}function d(e,r,o){var a=[1,0,0],s=ae(ie(e),ie(r)),u=oe(s,s),c=s[0],f=u-c*c;if(!f)return!o&&e;var d=t*u/f,h=-t*c/f,p=ae(a,s),g=ue(a,d);se(g,ue(s,h));var m=p,v=oe(g,m),y=oe(m,m),b=v*v-y*(oe(g,g)-1);if(!(b<0)){var x=w(b),_=ue(m,(-v-x)/y);if(se(_,g),_=re(_),!o)return _;var A,k=e[0],E=r[0],D=e[1],C=r[1];E<k&&(A=k,k=E,E=A);var M=E-k,F=l(M-i)<n;if(!F&&C<D&&(A=D,D=C,C=A),F||M<n?F?D+C>0^_[1]<(l(_[0]-k)<n?D:C):D<=_[1]&&_[1]<=C:M>i^(k<=_[0]&&_[0]<=E)){var S=ue(m,(-v+x)/y);return se(S,g),[_,re(S)]}}}function p(t,n){var r=o?e:i-e,a=0;return t<-r?a|=1:t>r&&(a|=2),n<-r?a|=4:n>r&&(a|=8),a}return pt(u,f,s,o?[0,-e]:[-i,e-i])}function _t(e,t,n,r,i,o){var a,s=e[0],u=e[1],c=0,l=1,f=t[0]-s,d=t[1]-u;if(a=n-s,f||!(a>0)){if(a/=f,f<0){if(a<c)return;a<l&&(l=a)}else if(f>0){if(a>l)return;a>c&&(c=a)}if(a=i-s,f||!(a<0)){if(a/=f,f<0){if(a>l)return;a>c&&(c=a)}else if(f>0){if(a<c)return;a<l&&(l=a)}if(a=r-u,d||!(a>0)){if(a/=d,d<0){if(a<c)return;a<l&&(l=a)}else if(d>0){if(a>l)return;a>c&&(c=a)}if(a=o-u,d||!(a<0)){if(a/=d,d<0){if(a>l)return;a>c&&(c=a)}else if(d>0){if(a<c)return;a<l&&(l=a)}return c>0&&(e[0]=s+c*f,e[1]=u+c*d),l<1&&(t[0]=s+l*f,t[1]=u+l*d),!0}}}}}var At,kt,Et,Dt,Ct=1e9,Mt=-Ct;function Ft(e,r,i,o){function a(t,n){return e<=t&&t<=i&&r<=n&&n<=o}function s(t,n,a,s){var c=0,l=0;if(null==t||(c=u(t,a))!==(l=u(n,a))||f(t,n)<0^a>0)do{s.point(0===c||3===c?e:i,c>1?o:r)}while((c=(c+a+4)%4)!==l);else s.point(n[0],n[1])}function u(t,o){return l(t[0]-e)<n?o>0?0:3:l(t[0]-i)<n?o>0?2:1:l(t[1]-r)<n?o>0?1:0:o>0?3:2}function c(e,t){return f(e.x,t.x)}function f(e,t){var n=u(e,1),r=u(t,1);return n!==r?n-r:0===n?t[1]-e[1]:1===n?e[0]-t[0]:2===n?e[1]-t[1]:t[0]-e[0]}return function(n){var u,l,f,d,h,p,g,m,v,y,b,x=n,w=st(),_={point:A,lineStart:C,lineEnd:M,polygonStart:E,polygonEnd:D};function A(e,t){a(e,t)&&x.point(e,t)}function k(){for(var t=0,n=0,r=l.length;n<r;++n)for(var i,a,s=l[n],u=1,c=s.length,f=s[0],d=f[0],h=f[1];u<c;++u)i=d,a=h,d=(f=s[u])[0],h=f[1],a<=o?h>o&&(d-i)*(o-a)>(h-a)*(e-i)&&++t:h<=o&&(d-i)*(o-a)<(h-a)*(e-i)&&--t;return t}function E(){x=w,u=[],l=[],b=!0}function D(){var e=k(),r=b&&e,i=(u=t.merge(u)).length;(r||i)&&(n.polygonStart(),r&&(n.lineStart(),s(null,null,1,n),n.lineEnd()),i&&lt(u,c,e,s,n),n.polygonEnd()),x=n,u=l=f=null}function C(){_.point=F,l&&l.push(f=[]),y=!0,v=!1,g=m=NaN}function M(){u&&(F(d,h),p&&v&&w.rejoin(),u.push(w.result())),_.point=A,v&&x.lineEnd()}function F(t,n){var s=a(t,n);if(l&&f.push([t,n]),y)d=t,h=n,p=s,y=!1,s&&(x.lineStart(),x.point(t,n));else if(s&&v)x.point(t,n);else{var u=[g=Math.max(Mt,Math.min(Ct,g)),m=Math.max(Mt,Math.min(Ct,m))],c=[t=Math.max(Mt,Math.min(Ct,t)),n=Math.max(Mt,Math.min(Ct,n))];_t(u,c,e,r,i,o)?(v||(x.lineStart(),x.point(u[0],u[1])),x.point(c[0],c[1]),s||x.lineEnd(),b=!1):s&&(x.lineStart(),x.point(t,n),b=!1)}g=t,m=n,v=s}return _}}function St(){var e,t,n,r=0,i=0,o=960,a=500;return n={stream:function(n){return e&&t===n?e:e=Ft(r,i,o,a)(t=n)},extent:function(s){return arguments.length?(r=+s[0][0],i=+s[0][1],o=+s[1][0],a=+s[1][1],e=t=null,n):[[r,i],[o,a]]}}}var Tt={sphere:D,point:D,lineStart:Ot,lineEnd:D,polygonStart:D,polygonEnd:D};function Ot(){Tt.point=Pt,Tt.lineEnd=Nt}function Nt(){Tt.point=Tt.lineEnd=D}function Pt(e,t){kt=e*=c,Et=b(t*=c),Dt=h(t),Tt.point=Rt}function Rt(e,t){e*=c;var n=b(t*=c),r=h(t),i=l(e-kt),o=h(i),a=r*b(i),s=Dt*n-Et*r*o,u=Et*n+Dt*r*o;At.add(d(w(a*a+s*s),u)),kt=e,Et=n,Dt=r}function Bt(e){return At=new t.Adder,O(e,Tt),+At}var zt=[null,null],jt={type:"LineString",coordinates:zt};function Lt(e,t){return zt[0]=e,zt[1]=t,Bt(jt)}var It={Feature:function(e,t){return qt(e.geometry,t)},FeatureCollection:function(e,t){for(var n=e.features,r=-1,i=n.length;++r<i;)if(qt(n[r].geometry,t))return!0;return!1}},Ut={Sphere:function(){return!0},Point:function(e,t){return Wt(e.coordinates,t)},MultiPoint:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)if(Wt(n[r],t))return!0;return!1},LineString:function(e,t){return Ht(e.coordinates,t)},MultiLineString:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)if(Ht(n[r],t))return!0;return!1},Polygon:function(e,t){return Yt(e.coordinates,t)},MultiPolygon:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)if(Yt(n[r],t))return!0;return!1},GeometryCollection:function(e,t){for(var n=e.geometries,r=-1,i=n.length;++r<i;)if(qt(n[r],t))return!0;return!1}};function qt(e,t){return!(!e||!Ut.hasOwnProperty(e.type))&&Ut[e.type](e,t)}function Wt(e,t){return 0===Lt(e,t)}function Ht(e,t){for(var n,i,o,a=0,s=e.length;a<s;a++){if(0===(i=Lt(e[a],t)))return!0;if(a>0&&(o=Lt(e[a],e[a-1]))>0&&n<=o&&i<=o&&(n+i-o)*(1-Math.pow((n-i)/o,2))<r*o)return!0;n=i}return!1}function Yt(e,t){return!!ht(e.map(Vt),Gt(t))}function Vt(e){return(e=e.map(Gt)).pop(),e}function Gt(e){return[e[0]*c,e[1]*c]}function $t(e,t){return(e&&It.hasOwnProperty(e.type)?It[e.type]:qt)(e,t)}function Xt(e,r,i){var o=t.range(e,r-n,i).concat(r);return function(e){return o.map((function(t){return[e,t]}))}}function Jt(e,r,i){var o=t.range(e,r-n,i).concat(r);return function(e){return o.map((function(t){return[t,e]}))}}function Qt(){var e,r,i,o,a,s,u,c,f,d,h,g,m=10,v=m,y=90,b=360,x=2.5;function w(){return{type:"MultiLineString",coordinates:_()}}function _(){return t.range(p(o/y)*y,i,y).map(h).concat(t.range(p(c/b)*b,u,b).map(g)).concat(t.range(p(r/m)*m,e,m).filter((function(e){return l(e%y)>n})).map(f)).concat(t.range(p(s/v)*v,a,v).filter((function(e){return l(e%b)>n})).map(d))}return w.lines=function(){return _().map((function(e){return{type:"LineString",coordinates:e}}))},w.outline=function(){return{type:"Polygon",coordinates:[h(o).concat(g(u).slice(1),h(i).reverse().slice(1),g(c).reverse().slice(1))]}},w.extent=function(e){return arguments.length?w.extentMajor(e).extentMinor(e):w.extentMinor()},w.extentMajor=function(e){return arguments.length?(o=+e[0][0],i=+e[1][0],c=+e[0][1],u=+e[1][1],o>i&&(e=o,o=i,i=e),c>u&&(e=c,c=u,u=e),w.precision(x)):[[o,c],[i,u]]},w.extentMinor=function(t){return arguments.length?(r=+t[0][0],e=+t[1][0],s=+t[0][1],a=+t[1][1],r>e&&(t=r,r=e,e=t),s>a&&(t=s,s=a,a=t),w.precision(x)):[[r,s],[e,a]]},w.step=function(e){return arguments.length?w.stepMajor(e).stepMinor(e):w.stepMinor()},w.stepMajor=function(e){return arguments.length?(y=+e[0],b=+e[1],w):[y,b]},w.stepMinor=function(e){return arguments.length?(m=+e[0],v=+e[1],w):[m,v]},w.precision=function(t){return arguments.length?(x=+t,f=Xt(s,a,90),d=Jt(r,e,x),h=Xt(c,u,90),g=Jt(o,i,x),w):x},w.extentMajor([[-180,-90+n],[180,90-n]]).extentMinor([[-180,-80-n],[180,80+n]])}function Zt(){return Qt()()}function Kt(e,t){var n=e[0]*c,r=e[1]*c,i=t[0]*c,o=t[1]*c,a=h(r),s=b(r),l=h(o),f=b(o),p=a*h(n),g=a*b(n),m=l*h(i),v=l*b(i),y=2*k(w(E(o-r)+a*l*E(i-n))),x=b(y),_=y?function(e){var t=b(e*=y)/x,n=b(y-e)/x,r=n*p+t*m,i=n*g+t*v,o=n*s+t*f;return[d(i,r)*u,d(o,w(r*r+i*i))*u]}:function(){return[n*u,r*u]};return _.distance=y,_}var en,tn,nn,rn,on=e=>e,an=new t.Adder,sn=new t.Adder,un={point:D,lineStart:D,lineEnd:D,polygonStart:function(){un.lineStart=cn,un.lineEnd=dn},polygonEnd:function(){un.lineStart=un.lineEnd=un.point=D,an.add(l(sn)),sn=new t.Adder},result:function(){var e=an/2;return an=new t.Adder,e}};function cn(){un.point=ln}function ln(e,t){un.point=fn,en=nn=e,tn=rn=t}function fn(e,t){sn.add(rn*e-nn*t),nn=e,rn=t}function dn(){fn(en,tn)}var hn=1/0,pn=hn,gn=-hn,mn=gn,vn={point:yn,lineStart:D,lineEnd:D,polygonStart:D,polygonEnd:D,result:function(){var e=[[hn,pn],[gn,mn]];return gn=mn=-(pn=hn=1/0),e}};function yn(e,t){e<hn&&(hn=e),e>gn&&(gn=e),t<pn&&(pn=t),t>mn&&(mn=t)}var bn,xn,wn,_n,An=0,kn=0,En=0,Dn=0,Cn=0,Mn=0,Fn=0,Sn=0,Tn=0,On={point:Nn,lineStart:Pn,lineEnd:zn,polygonStart:function(){On.lineStart=jn,On.lineEnd=Ln},polygonEnd:function(){On.point=Nn,On.lineStart=Pn,On.lineEnd=zn},result:function(){var e=Tn?[Fn/Tn,Sn/Tn]:Mn?[Dn/Mn,Cn/Mn]:En?[An/En,kn/En]:[NaN,NaN];return An=kn=En=Dn=Cn=Mn=Fn=Sn=Tn=0,e}};function Nn(e,t){An+=e,kn+=t,++En}function Pn(){On.point=Rn}function Rn(e,t){On.point=Bn,Nn(wn=e,_n=t)}function Bn(e,t){var n=e-wn,r=t-_n,i=w(n*n+r*r);Dn+=i*(wn+e)/2,Cn+=i*(_n+t)/2,Mn+=i,Nn(wn=e,_n=t)}function zn(){On.point=Nn}function jn(){On.point=In}function Ln(){Un(bn,xn)}function In(e,t){On.point=Un,Nn(bn=wn=e,xn=_n=t)}function Un(e,t){var n=e-wn,r=t-_n,i=w(n*n+r*r);Dn+=i*(wn+e)/2,Cn+=i*(_n+t)/2,Mn+=i,Fn+=(i=_n*e-wn*t)*(wn+e),Sn+=i*(_n+t),Tn+=3*i,Nn(wn=e,_n=t)}function qn(e){this._context=e}qn.prototype={_radius:4.5,pointRadius:function(e){return this._radius=e,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){0===this._line&&this._context.closePath(),this._point=NaN},point:function(e,t){switch(this._point){case 0:this._context.moveTo(e,t),this._point=1;break;case 1:this._context.lineTo(e,t);break;default:this._context.moveTo(e+this._radius,t),this._context.arc(e,t,this._radius,0,s)}},result:D};var Wn,Hn,Yn,Vn,Gn,$n=new t.Adder,Xn={point:D,lineStart:function(){Xn.point=Jn},lineEnd:function(){Wn&&Qn(Hn,Yn),Xn.point=D},polygonStart:function(){Wn=!0},polygonEnd:function(){Wn=null},result:function(){var e=+$n;return $n=new t.Adder,e}};function Jn(e,t){Xn.point=Qn,Hn=Vn=e,Yn=Gn=t}function Qn(e,t){Vn-=e,Gn-=t,$n.add(w(Vn*Vn+Gn*Gn)),Vn=e,Gn=t}function Zn(){this._string=[]}function Kn(e){return"m0,"+e+"a"+e+","+e+" 0 1,1 0,"+-2*e+"a"+e+","+e+" 0 1,1 0,"+2*e+"z"}function er(e,t){var n,r,i=4.5;function o(e){return e&&("function"===typeof i&&r.pointRadius(+i.apply(this,arguments)),O(e,n(r))),r.result()}return o.area=function(e){return O(e,n(un)),un.result()},o.measure=function(e){return O(e,n(Xn)),Xn.result()},o.bounds=function(e){return O(e,n(vn)),vn.result()},o.centroid=function(e){return O(e,n(On)),On.result()},o.projection=function(t){return arguments.length?(n=null==t?(e=null,on):(e=t).stream,o):e},o.context=function(e){return arguments.length?(r=null==e?(t=null,new Zn):new qn(t=e),"function"!==typeof i&&r.pointRadius(i),o):t},o.pointRadius=function(e){return arguments.length?(i="function"===typeof e?e:(r.pointRadius(+e),+e),o):i},o.projection(e).context(t)}function tr(e){return{stream:nr(e)}}function nr(e){return function(t){var n=new rr;for(var r in e)n[r]=e[r];return n.stream=t,n}}function rr(){}function ir(e,t,n){var r=e.clipExtent&&e.clipExtent();return e.scale(150).translate([0,0]),null!=r&&e.clipExtent(null),O(n,e.stream(vn)),t(vn.result()),null!=r&&e.clipExtent(r),e}function or(e,t,n){return ir(e,(function(n){var r=t[1][0]-t[0][0],i=t[1][1]-t[0][1],o=Math.min(r/(n[1][0]-n[0][0]),i/(n[1][1]-n[0][1])),a=+t[0][0]+(r-o*(n[1][0]+n[0][0]))/2,s=+t[0][1]+(i-o*(n[1][1]+n[0][1]))/2;e.scale(150*o).translate([a,s])}),n)}function ar(e,t,n){return or(e,[[0,0],t],n)}function sr(e,t,n){return ir(e,(function(n){var r=+t,i=r/(n[1][0]-n[0][0]),o=(r-i*(n[1][0]+n[0][0]))/2,a=-i*n[0][1];e.scale(150*i).translate([o,a])}),n)}function ur(e,t,n){return ir(e,(function(n){var r=+t,i=r/(n[1][1]-n[0][1]),o=-i*n[0][0],a=(r-i*(n[1][1]+n[0][1]))/2;e.scale(150*i).translate([o,a])}),n)}Zn.prototype={_radius:4.5,_circle:Kn(4.5),pointRadius:function(e){return(e=+e)!==this._radius&&(this._radius=e,this._circle=null),this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){0===this._line&&this._string.push("Z"),this._point=NaN},point:function(e,t){switch(this._point){case 0:this._string.push("M",e,",",t),this._point=1;break;case 1:this._string.push("L",e,",",t);break;default:null==this._circle&&(this._circle=Kn(this._radius)),this._string.push("M",e,",",t,this._circle)}},result:function(){if(this._string.length){var e=this._string.join("");return this._string=[],e}return null}},rr.prototype={constructor:rr,point:function(e,t){this.stream.point(e,t)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};var cr=16,lr=h(30*c);function fr(e,t){return+t?hr(e,t):dr(e)}function dr(e){return nr({point:function(t,n){t=e(t,n),this.stream.point(t[0],t[1])}})}function hr(e,t){function r(i,o,a,s,u,c,f,h,p,g,m,v,y,b){var x=f-i,_=h-o,A=x*x+_*_;if(A>4*t&&y--){var E=s+g,D=u+m,C=c+v,M=w(E*E+D*D+C*C),F=k(C/=M),S=l(l(C)-1)<n||l(a-p)<n?(a+p)/2:d(D,E),T=e(S,F),O=T[0],N=T[1],P=O-i,R=N-o,B=_*P-x*R;(B*B/A>t||l((x*P+_*R)/A-.5)>.3||s*g+u*m+c*v<lr)&&(r(i,o,a,s,u,c,O,N,S,E/=M,D/=M,C,y,b),b.point(O,N),r(O,N,S,E,D,C,f,h,p,g,m,v,y,b))}}return function(t){var n,i,o,a,s,u,c,l,f,d,h,p,g={point:m,lineStart:v,lineEnd:b,polygonStart:function(){t.polygonStart(),g.lineStart=x},polygonEnd:function(){t.polygonEnd(),g.lineStart=v}};function m(n,r){n=e(n,r),t.point(n[0],n[1])}function v(){l=NaN,g.point=y,t.lineStart()}function y(n,i){var o=ie([n,i]),a=e(n,i);r(l,f,c,d,h,p,l=a[0],f=a[1],c=n,d=o[0],h=o[1],p=o[2],cr,t),t.point(l,f)}function b(){g.point=m,t.lineEnd()}function x(){v(),g.point=w,g.lineEnd=_}function w(e,t){y(n=e,t),i=l,o=f,a=d,s=h,u=p,g.point=y}function _(){r(l,f,c,d,h,p,i,o,n,a,s,u,cr,t),g.lineEnd=b,b()}return g}}var pr=nr({point:function(e,t){this.stream.point(e*c,t*c)}});function gr(e){return nr({point:function(t,n){var r=e(t,n);return this.stream.point(r[0],r[1])}})}function mr(e,t,n,r,i){function o(o,a){return[t+e*(o*=r),n-e*(a*=i)]}return o.invert=function(o,a){return[(o-t)/e*r,(n-a)/e*i]},o}function vr(e,t,n,r,i,o){if(!o)return mr(e,t,n,r,i);var a=h(o),s=b(o),u=a*e,c=s*e,l=a/e,f=s/e,d=(s*n-a*t)/e,p=(s*t+a*n)/e;function g(e,o){return[u*(e*=r)-c*(o*=i)+t,n-c*e-u*o]}return g.invert=function(e,t){return[r*(l*e-f*t+d),i*(p-f*e-l*t)]},g}function yr(e){return br((function(){return e}))()}function br(e){var t,n,r,i,o,a,s,l,f,d,h=150,p=480,g=250,m=0,v=0,y=0,b=0,x=0,_=0,A=1,k=1,E=null,D=vt,C=null,M=on,F=.5;function S(e){return l(e[0]*c,e[1]*c)}function T(e){return(e=l.invert(e[0],e[1]))&&[e[0]*u,e[1]*u]}function O(){var e=vr(h,0,0,A,k,_).apply(null,t(m,v)),r=vr(h,p-e[0],g-e[1],A,k,_);return n=Ke(y,b,x),s=Qe(t,r),l=Qe(n,s),a=fr(s,F),N()}function N(){return f=d=null,S}return S.stream=function(e){return f&&d===e?f:f=pr(gr(n)(D(a(M(d=e)))))},S.preclip=function(e){return arguments.length?(D=e,E=void 0,N()):D},S.postclip=function(e){return arguments.length?(M=e,C=r=i=o=null,N()):M},S.clipAngle=function(e){return arguments.length?(D=+e?wt(E=e*c):(E=null,vt),N()):E*u},S.clipExtent=function(e){return arguments.length?(M=null==e?(C=r=i=o=null,on):Ft(C=+e[0][0],r=+e[0][1],i=+e[1][0],o=+e[1][1]),N()):null==C?null:[[C,r],[i,o]]},S.scale=function(e){return arguments.length?(h=+e,O()):h},S.translate=function(e){return arguments.length?(p=+e[0],g=+e[1],O()):[p,g]},S.center=function(e){return arguments.length?(m=e[0]%360*c,v=e[1]%360*c,O()):[m*u,v*u]},S.rotate=function(e){return arguments.length?(y=e[0]%360*c,b=e[1]%360*c,x=e.length>2?e[2]%360*c:0,O()):[y*u,b*u,x*u]},S.angle=function(e){return arguments.length?(_=e%360*c,O()):_*u},S.reflectX=function(e){return arguments.length?(A=e?-1:1,O()):A<0},S.reflectY=function(e){return arguments.length?(k=e?-1:1,O()):k<0},S.precision=function(e){return arguments.length?(a=fr(s,F=e*e),N()):w(F)},S.fitExtent=function(e,t){return or(S,e,t)},S.fitSize=function(e,t){return ar(S,e,t)},S.fitWidth=function(e,t){return sr(S,e,t)},S.fitHeight=function(e,t){return ur(S,e,t)},function(){return t=e.apply(this,arguments),S.invert=t.invert&&T,O()}}function xr(e){var t=0,n=i/3,r=br(e),o=r(t,n);return o.parallels=function(e){return arguments.length?r(t=e[0]*c,n=e[1]*c):[t*u,n*u]},o}function wr(e){var t=h(e);function n(e,n){return[e*t,b(n)/t]}return n.invert=function(e,n){return[e/t,k(n*t)]},n}function _r(e,t){var r=b(e),o=(r+b(t))/2;if(l(o)<n)return wr(e);var a=1+r*(2*o-r),s=w(a)/o;function u(e,t){var n=w(a-2*o*b(t))/o;return[n*b(e*=o),s-n*h(e)]}return u.invert=function(e,t){var n=s-t,r=d(e,l(n))*x(n);return n*o<0&&(r-=i*x(e)*x(n)),[r/o,k((a-(e*e+n*n)*o*o)/(2*o))]},u}function Ar(){return xr(_r).scale(155.424).center([0,33.6442])}function kr(){return Ar().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])}function Er(e){var t=e.length;return{point:function(n,r){for(var i=-1;++i<t;)e[i].point(n,r)},sphere:function(){for(var n=-1;++n<t;)e[n].sphere()},lineStart:function(){for(var n=-1;++n<t;)e[n].lineStart()},lineEnd:function(){for(var n=-1;++n<t;)e[n].lineEnd()},polygonStart:function(){for(var n=-1;++n<t;)e[n].polygonStart()},polygonEnd:function(){for(var n=-1;++n<t;)e[n].polygonEnd()}}}function Dr(){var e,t,r,i,o,a,s=kr(),u=Ar().rotate([154,0]).center([-2,58.5]).parallels([55,65]),c=Ar().rotate([157,0]).center([-3,19.9]).parallels([8,18]),l={point:function(e,t){a=[e,t]}};function f(e){var t=e[0],n=e[1];return a=null,r.point(t,n),a||(i.point(t,n),a)||(o.point(t,n),a)}function d(){return e=t=null,f}return f.invert=function(e){var t=s.scale(),n=s.translate(),r=(e[0]-n[0])/t,i=(e[1]-n[1])/t;return(i>=.12&&i<.234&&r>=-.425&&r<-.214?u:i>=.166&&i<.234&&r>=-.214&&r<-.115?c:s).invert(e)},f.stream=function(n){return e&&t===n?e:e=Er([s.stream(t=n),u.stream(n),c.stream(n)])},f.precision=function(e){return arguments.length?(s.precision(e),u.precision(e),c.precision(e),d()):s.precision()},f.scale=function(e){return arguments.length?(s.scale(e),u.scale(.35*e),c.scale(e),f.translate(s.translate())):s.scale()},f.translate=function(e){if(!arguments.length)return s.translate();var t=s.scale(),a=+e[0],f=+e[1];return r=s.translate(e).clipExtent([[a-.455*t,f-.238*t],[a+.455*t,f+.238*t]]).stream(l),i=u.translate([a-.307*t,f+.201*t]).clipExtent([[a-.425*t+n,f+.12*t+n],[a-.214*t-n,f+.234*t-n]]).stream(l),o=c.translate([a-.205*t,f+.212*t]).clipExtent([[a-.214*t+n,f+.166*t+n],[a-.115*t-n,f+.234*t-n]]).stream(l),d()},f.fitExtent=function(e,t){return or(f,e,t)},f.fitSize=function(e,t){return ar(f,e,t)},f.fitWidth=function(e,t){return sr(f,e,t)},f.fitHeight=function(e,t){return ur(f,e,t)},f.scale(1070)}function Cr(e){return function(t,n){var r=h(t),i=h(n),o=e(r*i);return o===1/0?[2,0]:[o*i*b(t),o*b(n)]}}function Mr(e){return function(t,n){var r=w(t*t+n*n),i=e(r),o=b(i),a=h(i);return[d(t*o,r*a),k(r&&n*o/r)]}}var Fr=Cr((function(e){return w(2/(1+e))}));function Sr(){return yr(Fr).scale(124.75).clipAngle(179.999)}Fr.invert=Mr((function(e){return 2*k(e/2)}));var Tr=Cr((function(e){return(e=A(e))&&e/b(e)}));function Or(){return yr(Tr).scale(79.4188).clipAngle(179.999)}function Nr(e,t){return[e,v(_((o+t)/2))]}function Pr(){return Rr(Nr).scale(961/s)}function Rr(e){var t,n,r,o=yr(e),a=o.center,s=o.scale,u=o.translate,c=o.clipExtent,l=null;function f(){var a=i*s(),u=o(rt(o.rotate()).invert([0,0]));return c(null==l?[[u[0]-a,u[1]-a],[u[0]+a,u[1]+a]]:e===Nr?[[Math.max(u[0]-a,l),t],[Math.min(u[0]+a,n),r]]:[[l,Math.max(u[1]-a,t)],[n,Math.min(u[1]+a,r)]])}return o.scale=function(e){return arguments.length?(s(e),f()):s()},o.translate=function(e){return arguments.length?(u(e),f()):u()},o.center=function(e){return arguments.length?(a(e),f()):a()},o.clipExtent=function(e){return arguments.length?(null==e?l=t=n=r=null:(l=+e[0][0],t=+e[0][1],n=+e[1][0],r=+e[1][1]),f()):null==l?null:[[l,t],[n,r]]},f()}function Br(e){return _((o+e)/2)}function zr(e,t){var r=h(e),a=e===t?b(e):v(r/h(t))/v(Br(t)/Br(e)),s=r*y(Br(e),a)/a;if(!a)return Nr;function u(e,t){s>0?t<-o+n&&(t=-o+n):t>o-n&&(t=o-n);var r=s/y(Br(t),a);return[r*b(a*e),s-r*h(a*e)]}return u.invert=function(e,t){var n=s-t,r=x(a)*w(e*e+n*n),u=d(e,l(n))*x(n);return n*a<0&&(u-=i*x(e)*x(n)),[u/a,2*f(y(s/r,1/a))-o]},u}function jr(){return xr(zr).scale(109.5).parallels([30,30])}function Lr(e,t){return[e,t]}function Ir(){return yr(Lr).scale(152.63)}function Ur(e,t){var r=h(e),o=e===t?b(e):(r-h(t))/(t-e),a=r/o+e;if(l(o)<n)return Lr;function s(e,t){var n=a-t,r=o*e;return[n*b(r),a-n*h(r)]}return s.invert=function(e,t){var n=a-t,r=d(e,l(n))*x(n);return n*o<0&&(r-=i*x(e)*x(n)),[r/o,a-x(o)*w(e*e+n*n)]},s}function qr(){return xr(Ur).scale(131.154).center([0,13.9389])}Tr.invert=Mr((function(e){return e})),Nr.invert=function(e,t){return[e,2*f(g(t))-o]},Lr.invert=Lr;var Wr=1.340264,Hr=-.081106,Yr=893e-6,Vr=.003796,Gr=w(3)/2,$r=12;function Xr(e,t){var n=k(Gr*b(t)),r=n*n,i=r*r*r;return[e*h(n)/(Gr*(Wr+3*Hr*r+i*(7*Yr+9*Vr*r))),n*(Wr+Hr*r+i*(Yr+Vr*r))]}function Jr(){return yr(Xr).scale(177.158)}function Qr(e,t){var n=h(t),r=h(e)*n;return[n*b(e)/r,b(t)/r]}function Zr(){return yr(Qr).scale(144.049).clipAngle(60)}function Kr(){var e,t,n,r,i,o,a,s=1,l=0,f=0,d=1,p=1,g=0,m=null,v=1,y=1,x=nr({point:function(e,t){var n=A([e,t]);this.stream.point(n[0],n[1])}}),w=on;function _(){return v=s*d,y=s*p,o=a=null,A}function A(n){var r=n[0]*v,i=n[1]*y;if(g){var o=i*e-r*t;r=r*e+i*t,i=o}return[r+l,i+f]}return A.invert=function(n){var r=n[0]-l,i=n[1]-f;if(g){var o=i*e+r*t;r=r*e-i*t,i=o}return[r/v,i/y]},A.stream=function(e){return o&&a===e?o:o=x(w(a=e))},A.postclip=function(e){return arguments.length?(w=e,m=n=r=i=null,_()):w},A.clipExtent=function(e){return arguments.length?(w=null==e?(m=n=r=i=null,on):Ft(m=+e[0][0],n=+e[0][1],r=+e[1][0],i=+e[1][1]),_()):null==m?null:[[m,n],[r,i]]},A.scale=function(e){return arguments.length?(s=+e,_()):s},A.translate=function(e){return arguments.length?(l=+e[0],f=+e[1],_()):[l,f]},A.angle=function(n){return arguments.length?(t=b(g=n%360*c),e=h(g),_()):g*u},A.reflectX=function(e){return arguments.length?(d=e?-1:1,_()):d<0},A.reflectY=function(e){return arguments.length?(p=e?-1:1,_()):p<0},A.fitExtent=function(e,t){return or(A,e,t)},A.fitSize=function(e,t){return ar(A,e,t)},A.fitWidth=function(e,t){return sr(A,e,t)},A.fitHeight=function(e,t){return ur(A,e,t)},A}function ei(e,t){var n=t*t,r=n*n;return[e*(.8707-.131979*n+r*(r*(.003971*n-.001529*r)-.013791)),t*(1.007226+n*(.015085+r*(.028874*n-.044475-.005916*r)))]}function ti(){return yr(ei).scale(175.295)}function ni(e,t){return[h(t)*b(e),b(t)]}function ri(){return yr(ni).scale(249.5).clipAngle(90+n)}function ii(e,t){var n=h(t),r=1+h(e)*n;return[n*b(e)/r,b(t)/r]}function oi(){return yr(ii).scale(250).clipAngle(142)}function ai(e,t){return[v(_((o+t)/2)),-e]}function si(){var e=Rr(ai),t=e.center,n=e.rotate;return e.center=function(e){return arguments.length?t([-e[1],e[0]]):[(e=t())[1],-e[0]]},e.rotate=function(e){return arguments.length?n([e[0],e[1],e.length>2?e[2]+90:90]):[(e=n())[0],e[1],e[2]-90]},n([0,0,90]).scale(159.155)}Xr.invert=function(e,t){for(var n,i=t,o=i*i,a=o*o*o,s=0;s<$r&&(a=(o=(i-=n=(i*(Wr+Hr*o+a*(Yr+Vr*o))-t)/(Wr+3*Hr*o+a*(7*Yr+9*Vr*o)))*i)*o*o,!(l(n)<r));++s);return[Gr*e*(Wr+3*Hr*o+a*(7*Yr+9*Vr*o))/h(i),k(b(i)/Gr)]},Qr.invert=Mr(f),ei.invert=function(e,t){var r,i=t,o=25;do{var a=i*i,s=a*a;i-=r=(i*(1.007226+a*(.015085+s*(.028874*a-.044475-.005916*s)))-t)/(1.007226+a*(.045255+s*(.259866*a-.311325-.005916*11*s)))}while(l(r)>n&&--o>0);return[e/(.8707+(a=i*i)*(a*(a*a*a*(.003971-.001529*a)-.013791)-.131979)),i]},ni.invert=Mr(k),ii.invert=Mr((function(e){return 2*f(e)})),ai.invert=function(e,t){return[-t,2*f(g(e))-o]},e.geoAlbers=kr,e.geoAlbersUsa=Dr,e.geoArea=ne,e.geoAzimuthalEqualArea=Sr,e.geoAzimuthalEqualAreaRaw=Fr,e.geoAzimuthalEquidistant=Or,e.geoAzimuthalEquidistantRaw=Tr,e.geoBounds=ze,e.geoCentroid=Xe,e.geoCircle=at,e.geoClipAntimeridian=vt,e.geoClipCircle=wt,e.geoClipExtent=St,e.geoClipRectangle=Ft,e.geoConicConformal=jr,e.geoConicConformalRaw=zr,e.geoConicEqualArea=Ar,e.geoConicEqualAreaRaw=_r,e.geoConicEquidistant=qr,e.geoConicEquidistantRaw=Ur,e.geoContains=$t,e.geoDistance=Lt,e.geoEqualEarth=Jr,e.geoEqualEarthRaw=Xr,e.geoEquirectangular=Ir,e.geoEquirectangularRaw=Lr,e.geoGnomonic=Zr,e.geoGnomonicRaw=Qr,e.geoGraticule=Qt,e.geoGraticule10=Zt,e.geoIdentity=Kr,e.geoInterpolate=Kt,e.geoLength=Bt,e.geoMercator=Pr,e.geoMercatorRaw=Nr,e.geoNaturalEarth1=ti,e.geoNaturalEarth1Raw=ei,e.geoOrthographic=ri,e.geoOrthographicRaw=ni,e.geoPath=er,e.geoProjection=yr,e.geoProjectionMutator=br,e.geoRotation=rt,e.geoStereographic=oi,e.geoStereographicRaw=ii,e.geoStream=O,e.geoTransform=tr,e.geoTransverseMercator=si,e.geoTransverseMercatorRaw=ai,Object.defineProperty(e,"__esModule",{value:!0})}(t,n(1190))},1487:function(e,t,n){(function(e){var r=n(16),i=n(1320);!function(t,n,o){"use strict";const a=/^([A-Za-z]+:)?\/\//,s=/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp|file|data):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i,u=/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205f\u3000]/g,c="file://";function l(e,t){return f.apply(this,arguments)}function f(){return(f=i(r.mark((function e(t,n){var i,o;return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.sanitize(t,n);case 2:return i=e.sent,o=i.href,e.abrupt("return",i.localFile?this.file(o):this.http(o,n));case 5:case"end":return e.stop()}}),e,this)})))).apply(this,arguments)}function d(e,t){return h.apply(this,arguments)}function h(){return(h=i(r.mark((function e(t,i){var o,l,f,d,h,p,g;return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=n.extend({},this.options,i),o=this.fileAccess,l={href:null},p=s.test(t.replace(u,"")),null!=t&&"string"==typeof t&&p||n.error("Sanitize failure, invalid URI: "+n.stringValue(t)),g=a.test(t),e.abrupt("return",((h=i.baseURL)&&!g&&(t.startsWith("/")||"/"===h[h.length-1]||(t="/"+t),t=h+t),d=(f=t.startsWith(c))||"file"===i.mode||"http"!==i.mode&&!g&&o,f?t=t.slice(c.length):t.startsWith("//")&&("file"===i.defaultProtocol?(t=t.slice(2),d=!0):t=(i.defaultProtocol||"http")+":"+t),Object.defineProperty(l,"localFile",{value:!!d}),l.href=t,i.target&&(l.target=i.target+""),i.rel&&(l.rel=i.rel+""),"image"===i.context&&i.crossOrigin&&(l.crossOrigin=i.crossOrigin+""),l));case 6:case"end":return e.stop()}}),e,this)})))).apply(this,arguments)}function p(e){return e?t=>new Promise(((n,r)=>{e.readFile(t,((e,t)=>{e?r(e):n(t)}))})):g}function g(){return m.apply(this,arguments)}function m(){return(m=i(r.mark((function e(){return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n.error("No file system access.");case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function v(e){return e?function(){var t=i(r.mark((function t(i,o){var a,s,u;return r.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=n.extend({},this.options.http,o),s=o&&o.response,t.next=4,e(i,a);case 4:return u=t.sent,t.abrupt("return",u.ok?n.isFunction(u[s])?u[s]():u.text():n.error(u.status+""+u.statusText));case 6:case"end":return t.stop()}}),t,this)})));return function(e,n){return t.apply(this,arguments)}}():y}function y(){return b.apply(this,arguments)}function b(){return(b=i(r.mark((function e(){return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n.error("No HTTP fetch method available.");case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}const x=e=>!(Number.isNaN(+e)||e instanceof Date),w={boolean:n.toBoolean,integer:n.toNumber,number:n.toNumber,date:n.toDate,string:n.toString,unknown:n.identity},_=[e=>"true"===e||"false"===e||!0===e||!1===e,e=>x(e)&&Number.isInteger(+e),x,e=>!Number.isNaN(Date.parse(e))],A=["boolean","integer","number","date"];function k(e,t){if(!e||!e.length)return"unknown";const n=e.length,r=_.length,i=_.map(((e,t)=>t+1));for(let a,s,u=0,c=0;u<n;++u)for(s=t?e[u][t]:e[u],a=0;a<r;++a)if(i[a]&&null!=(o=s)&&o==o&&!_[a](s)&&(i[a]=0,++c,c===_.length))return"string";var o;return A[i.reduce(((e,t)=>0===e?t:e),0)-1]}function E(e,t){return t.reduce(((t,n)=>(t[n]=k(e,n),t)),{})}var D={},C={};function M(e){return new Function("d","return {"+e.map((function(e,t){return JSON.stringify(e)+": d["+t+'] || ""'})).join(",")+"}")}function F(e){var t=Object.create(null),n=[];return e.forEach((function(e){for(var r in e)r in t||n.push(t[r]=r)})),n}function S(e,t){var n=e+"",r=n.length;return r<t?new Array(t-r+1).join(0)+n:n}function T(e){var t,n=e.getUTCHours(),r=e.getUTCMinutes(),i=e.getUTCSeconds(),o=e.getUTCMilliseconds();return isNaN(e)?"Invalid Date":((t=e.getUTCFullYear())<0?"-"+S(-t,6):t>9999?"+"+S(t,6):S(t,4))+"-"+S(e.getUTCMonth()+1,2)+"-"+S(e.getUTCDate(),2)+(o?"T"+S(n,2)+":"+S(r,2)+":"+S(i,2)+"."+S(o,3)+"Z":i?"T"+S(n,2)+":"+S(r,2)+":"+S(i,2)+"Z":r||n?"T"+S(n,2)+":"+S(r,2)+"Z":"")}function O(e){var t=new RegExp('["'+e+"\n\r]"),n=e.charCodeAt(0);function r(e,t){var r,i=[],o=e.length,a=0,s=0,u=o<=0,c=!1;function l(){if(u)return C;if(c)return c=!1,D;var t,r,i=a;if(34===e.charCodeAt(i)){for(;a++<o&&34!==e.charCodeAt(a)||34===e.charCodeAt(++a););return(t=a)>=o?u=!0:10===(r=e.charCodeAt(a++))?c=!0:13===r&&(c=!0,10===e.charCodeAt(a)&&++a),e.slice(i+1,t-1).replace(/""/g,'"')}for(;a<o;){if(10===(r=e.charCodeAt(t=a++)))c=!0;else if(13===r)c=!0,10===e.charCodeAt(a)&&++a;else if(r!==n)continue;return e.slice(i,t)}return u=!0,e.slice(i,o)}for(10===e.charCodeAt(o-1)&&--o,13===e.charCodeAt(o-1)&&--o;(r=l())!==C;){for(var f=[];r!==D&&r!==C;)f.push(r),r=l();t&&null==(f=t(f,s++))||i.push(f)}return i}function i(t,n){return t.map((function(t){return n.map((function(e){return a(t[e])})).join(e)}))}function o(t){return t.map(a).join(e)}function a(e){return null==e?"":e instanceof Date?T(e):t.test(e+="")?'"'+e.replace(/"/g,'""')+'"':e}return{parse:function(e,t){var n,i,o=r(e,(function(e,r){if(n)return n(e,r-1);i=e,n=t?function(e,t){var n=M(e);return function(r,i){return t(n(r),i,e)}}(e,t):M(e)}));return o.columns=i||[],o},parseRows:r,format:function(t,n){return null==n&&(n=F(t)),[n.map(a).join(e)].concat(i(t,n)).join("\n")},formatBody:function(e,t){return null==t&&(t=F(e)),i(e,t).join("\n")},formatRows:function(e){return e.map(o).join("\n")},formatRow:o,formatValue:a}}function N(e){const t=function(t,r){const i={delimiter:e};return P(t,r?n.extend(r,i):i)};return t.responseType="text",t}function P(e,t){return t.header&&(e=t.header.map(n.stringValue).join(t.delimiter)+"\n"+e),O(t.delimiter).parse(e+"")}function R(t,r){const i=r&&r.property?n.field(r.property):n.identity;return!n.isObject(t)||(o=t,"function"==typeof e&&n.isFunction(e.isBuffer)&&e.isBuffer(o))?i(JSON.parse(t)):function(e,t){return!n.isArray(e)&&n.isIterable(e)&&(e=[...e]),t&&t.copy?JSON.parse(JSON.stringify(e)):e}(i(t),r);var o}function B(e){return e}function z(e,t){return"string"==typeof t&&(t=e.objects[t]),"GeometryCollection"===t.type?{type:"FeatureCollection",features:t.geometries.map((function(t){return j(e,t)}))}:j(e,t)}function j(e,t){var n=t.id,r=t.bbox,i=null==t.properties?{}:t.properties,o=L(e,t);return null==n&&null==r?{type:"Feature",properties:i,geometry:o}:null==r?{type:"Feature",id:n,properties:i,geometry:o}:{type:"Feature",id:n,bbox:r,properties:i,geometry:o}}function L(e,t){var n=function(e){if(null==e)return B;var t,n,r=e.scale[0],i=e.scale[1],o=e.translate[0],a=e.translate[1];return function(e,s){s||(t=n=0);var u=2,c=e.length,l=new Array(c);for(l[0]=(t+=e[0])*r+o,l[1]=(n+=e[1])*i+a;u<c;)l[u]=e[u],++u;return l}}(e.transform),r=e.arcs;function i(e,t){t.length&&t.pop();for(var i=r[e<0?~e:e],o=0,a=i.length;o<a;++o)t.push(n(i[o],o));e<0&&function(e,t){for(var n,r=e.length,i=r-t;i<--r;)n=e[i],e[i++]=e[r],e[r]=n}(t,a)}function o(e){return n(e)}function a(e){for(var t=[],n=0,r=e.length;n<r;++n)i(e[n],t);return t.length<2&&t.push(t[0]),t}function s(e){for(var t=a(e);t.length<4;)t.push(t[0]);return t}function u(e){return e.map(s)}return function e(t){var n,r=t.type;switch(r){case"GeometryCollection":return{type:r,geometries:t.geometries.map(e)};case"Point":n=o(t.coordinates);break;case"MultiPoint":n=t.coordinates.map(o);break;case"LineString":n=a(t.arcs);break;case"MultiLineString":n=t.arcs.map(a);break;case"Polygon":n=u(t.arcs);break;case"MultiPolygon":n=t.arcs.map(u);break;default:return null}return{type:r,coordinates:n}}(t)}function I(e,t){var n={},r={},i={},o=[],a=-1;function s(e,t){for(var r in e){var i=e[r];delete t[i.start],delete i.start,delete i.end,i.forEach((function(e){n[e<0?~e:e]=1})),o.push(i)}}return t.forEach((function(n,r){var i,o=e.arcs[n<0?~n:n];o.length<3&&!o[1][0]&&!o[1][1]&&(i=t[++a],t[a]=n,t[r]=i)})),t.forEach((function(t){var n,o,a=function(t){var n,r=e.arcs[t<0?~t:t],i=r[0];return e.transform?(n=[0,0],r.forEach((function(e){n[0]+=e[0],n[1]+=e[1]}))):n=r[r.length-1],t<0?[n,i]:[i,n]}(t),s=a[0],u=a[1];if(n=i[s])if(delete i[n.end],n.push(t),n.end=u,o=r[u]){delete r[o.start];var c=o===n?n:n.concat(o);r[c.start=n.start]=i[c.end=o.end]=c}else r[n.start]=i[n.end]=n;else if(n=r[u])if(delete r[n.start],n.unshift(t),n.start=s,o=i[s]){delete i[o.end];var l=o===n?n:o.concat(n);r[l.start=o.start]=i[l.end=n.end]=l}else r[n.start]=i[n.end]=n;else r[(n=[t]).start=s]=i[n.end=u]=n})),s(i,r),s(r,i),t.forEach((function(e){n[e<0?~e:e]||o.push([e])})),o}function U(e){return L(e,q.apply(this,arguments))}function q(e,t,n){var r,i,o;if(arguments.length>1)r=W(e,t,n);else for(i=0,r=new Array(o=e.arcs.length);i<o;++i)r[i]=i;return{type:"MultiLineString",arcs:I(e,r)}}function W(e,t,n){var r,i=[],o=[];function a(e){var t=e<0?~e:e;(o[t]||(o[t]=[])).push({i:e,g:r})}function s(e){e.forEach(a)}function u(e){e.forEach(s)}return function e(t){switch(r=t,t.type){case"GeometryCollection":t.geometries.forEach(e);break;case"LineString":s(t.arcs);break;case"MultiLineString":case"Polygon":u(t.arcs);break;case"MultiPolygon":!function(e){e.forEach(u)}(t.arcs)}}(t),o.forEach(null==n?function(e){i.push(e[0].i)}:function(e){n(e[0].g,e[e.length-1].g)&&i.push(e[0].i)}),i}P.responseType="text",R.responseType="json";const H={interior:(e,t)=>e!==t,exterior:(e,t)=>e===t};function Y(e,t){let r,i,o,a;return e=R(e,t),t&&t.feature?(r=z,o=t.feature):t&&t.mesh?(r=U,o=t.mesh,a=H[t.filter]):n.error("Missing TopoJSON feature or mesh parameter."),i=(i=e.objects[o])?r(e,i,a):n.error("Invalid TopoJSON object: "+o),i&&i.features||[i]}Y.responseType="json";const V={dsv:P,csv:N(","),tsv:N("\t"),json:R,topojson:Y};function G(e,t){return arguments.length>1?(V[e]=t,this):n.hasOwnProperty(V,e)?V[e]:null}const $=function(e,t){return n=>({options:n||{},sanitize:d,load:l,fileAccess:!!t,file:p(t),http:v(e)})}("undefined"!=typeof fetch&&fetch,null);t.format=V,t.formats=G,t.inferType=k,t.inferTypes=E,t.loader=$,t.read=function(e,t,r,i){const a=G((t=t||{}).type||"json");return a||n.error("Unknown data format type: "+t.type),e=a(e,t),t.parse&&function(e,t,n,r){if(!e.length)return;const i=o.timeFormatDefaultLocale();n=n||i.timeParse,r=r||i.utcParse;let a,s,u,c,l,f,d=e.columns||Object.keys(e[0]);"auto"===t&&(t=E(e,d)),d=Object.keys(t);const h=d.map((e=>{const i=t[e];let o,a;if(i&&(i.startsWith("date:")||i.startsWith("utc:")))return o=i.split(/:(.+)?/,2),a=o[1],("'"===a[0]&&"'"===a[a.length-1]||'"'===a[0]&&'"'===a[a.length-1])&&(a=a.slice(1,-1)),("utc"===o[0]?r:n)(a);if(!w[i])throw Error("Illegal format pattern: "+e+":"+i);return w[i]}));for(u=0,l=e.length,f=d.length;u<l;++u)for(a=e[u],c=0;c<f;++c)s=d[c],a[s]=h[c](a[s])}(e,t.parse,r,i),n.hasOwnProperty(e,"columns")&&delete e.columns,e},t.responseType=function(e){const t=G(e);return t&&t.responseType||"text"},t.typeParsers=w,Object.defineProperty(t,"__esModule",{value:!0})}(t,n(1176),n(1368))}).call(this,n(60).Buffer)},1488:function(e,t,n){var r=n(163);!function(e,t,n,i,o,a,s,u,c,l,f,d){"use strict";function h(e){const t=this.context.data[e];return t?t.values.value:[]}function p(e,t,n){const r=this.context.data[e]["index:"+t],i=r?r.value.get(n):void 0;return i?i.count:i}function g(e,n){const r=this.context.dataflow,i=this.context.data[e].input;return r.pulse(i,r.changeset().remove(t.truthy).insert(n)),1}function m(e,t,n){if(e){const n=this.context.dataflow,r=e.mark.source;n.pulse(r,n.changeset().encode(e,t))}return void 0!==n?n:e}const v=e=>function(t,n){return this.context.dataflow.locale()[e](n)(t)},y=v("format"),b=v("timeFormat"),x=v("utcFormat"),w=v("timeParse"),_=v("utcParse"),A=new Date(2e3,0,1);function k(e,t,n){return Number.isInteger(e)&&Number.isInteger(t)?(A.setYear(2e3),A.setMonth(e),A.setDate(t),b.call(this,A,n)):""}function E(e){return k.call(this,e,1,"%B")}function D(e){return k.call(this,e,1,"%b")}function C(e){return k.call(this,0,2+e,"%A")}function M(e){return k.call(this,0,2+e,"%a")}const F=":",S="@",T="%",O="$";function N(e,r,i,o){r[0].type!==n.Literal&&t.error("First argument to data functions must be a string literal.");const a=r[0].value,s=F+a;if(!t.hasOwnProperty(s,o))try{o[s]=i.getData(a).tuplesRef()}catch(u){}}function P(e,r,i,o){r[0].type!==n.Literal&&t.error("First argument to indata must be a string literal."),r[1].type!==n.Literal&&t.error("Second argument to indata must be a string literal.");const a=r[0].value,s=r[1].value,u=S+s;t.hasOwnProperty(u,o)||(o[u]=i.getData(a).indataRef(i,s))}function R(e,t,r,i){if(t[0].type===n.Literal)B(r,i,t[0].value);else for(e in r.scales)B(r,i,e)}function B(e,n,r){const i=T+r;if(!t.hasOwnProperty(n,i))try{n[i]=e.scaleRef(r)}catch(o){}}function z(e,n){let r;return t.isFunction(e)?e:t.isString(e)?(r=n.scales[e])&&r.value:void 0}function j(e,r,i){r.__bandwidth=e=>e&&e.bandwidth?e.bandwidth():0,i._bandwidth=R,i._range=R,i._scale=R;const o=r=>"_["+(r.type===n.Literal?t.stringValue(T+r.value):t.stringValue(T)+"+"+e(r))+"]";return{_bandwidth:e=>"this.__bandwidth(".concat(o(e[0]),")"),_range:e=>"".concat(o(e[0]),".range()"),_scale:t=>"".concat(o(t[0]),"(").concat(e(t[1]),")")}}function L(e,t){return function(n,r,i){if(n){const t=z(n,(i||this).context);return t&&t.path[e](r)}return t(r)}}const I=L("area",i.geoArea),U=L("bounds",i.geoBounds),q=L("centroid",i.geoCentroid);function W(e){const t=this.context.group;let n=!1;if(t)for(;e;){if(e===t){n=!0;break}e=e.mark.group}return n}function H(e,t,n){try{e[t].apply(e,["EXPRESSION"].concat([].slice.call(n)))}catch(r){e.warn(r)}return n[n.length-1]}function Y(){return H(this.context.dataflow,"warn",arguments)}function V(){return H(this.context.dataflow,"info",arguments)}function G(){return H(this.context.dataflow,"debug",arguments)}function $(e){const t=e/255;return t<=.03928?t/12.92:Math.pow((t+.055)/1.055,2.4)}function X(e){const t=o.rgb(e);return.2126*$(t.r)+.7152*$(t.g)+.0722*$(t.b)}function J(e,t){const n=X(e),r=X(t);return(Math.max(n,r)+.05)/(Math.min(n,r)+.05)}function Q(){const e=[].slice.call(arguments);return e.unshift({}),t.extend(...e)}function Z(e,n){return e===n||e!==e&&n!==n||(t.isArray(e)?!(!t.isArray(n)||e.length!==n.length)&&K(e,n):!(!t.isObject(e)||!t.isObject(n))&&ee(e,n))}function K(e,t){for(let n=0,r=e.length;n<r;++n)if(!Z(e[n],t[n]))return!1;return!0}function ee(e,t){for(const n in e)if(!Z(e[n],t[n]))return!1;return!0}function te(e){return t=>ee(e,t)}function ne(e,n,r,i,o,s){const u=this.context.dataflow,c=this.context.data[e],l=c.input,f=u.stamp();let d,h,p=c.changes;if(!1===u._trigger||!(l.value.length||n||i))return 0;if((!p||p.stamp<f)&&(c.changes=p=u.changeset(),p.stamp=f,u.runAfter((()=>{c.modified=!0,u.pulse(l,p).run()}),!0,1)),r&&(d=!0===r?t.truthy:t.isArray(r)||a.isTuple(r)?r:te(r),p.remove(d)),n&&p.insert(n),i&&(d=te(i),l.value.some(d)?p.remove(d):p.insert(i)),o)for(h in s)p.modify(o,h,s[h]);return 1}function re(e){const t=e.touches,n=t[0].clientX-t[1].clientX,r=t[0].clientY-t[1].clientY;return Math.sqrt(n*n+r*r)}function ie(e){const t=e.touches;return Math.atan2(t[0].clientY-t[1].clientY,t[0].clientX-t[1].clientX)}function oe(e){return t.isArray(e)||ArrayBuffer.isView(e)?e:null}function ae(e){return oe(e)||(t.isString(e)?e:null)}function se(e,...t){return oe(e).join(...t)}function ue(e,...t){return ae(e).indexOf(...t)}function ce(e,...t){return ae(e).lastIndexOf(...t)}function le(e,...t){return ae(e).slice(...t)}function fe(e,n,r){return t.isFunction(r)&&t.error("Function argument passed to replace."),String(e).replace(n,r)}function de(e){return oe(e).slice().reverse()}function he(e,t,n){return s.bandSpace(e||0,t||0,n||0)}function pe(e,t){const n=z(e,(t||this).context);return n&&n.bandwidth?n.bandwidth():0}function ge(e,t){const n=z(e,(t||this).context);return n?n.copy():void 0}function me(e,t){const n=z(e,(t||this).context);return n?n.domain():[]}function ve(e,n,r){const i=z(e,(r||this).context);return i?t.isArray(n)?(i.invertRange||i.invert)(n):(i.invert||i.invertExtent)(n):void 0}function ye(e,t){const n=z(e,(t||this).context);return n&&n.range?n.range():[]}function be(e,t,n){const r=z(e,(n||this).context);return r?r(t):void 0}function xe(e,n,r,i,o){e=z(e,(o||this).context);const a=u.Gradient(n,r);let c=e.domain(),l=c[0],f=t.peek(c),d=t.identity;return f-l?d=s.scaleFraction(e,l,f):e=(e.interpolator?s.scale("sequential")().interpolator(e.interpolator()):s.scale("linear")().interpolate(e.interpolate()).range(e.range())).domain([l=0,f=1]),e.ticks&&(c=e.ticks(+i||15),l!==c[0]&&c.unshift(l),f!==t.peek(c)&&c.push(f)),c.forEach((t=>a.stop(d(t),e(t)))),a}function we(e,t,n){const r=z(e,(n||this).context);return function(e){return r?r.path.context(e)(t):""}}function _e(e){let t=null;return function(n){return n?u.pathRender(n,t=t||u.pathParse(e)):e}}const Ae=e=>e.data;function ke(e,t){const n=h.call(t,e);return n.root&&n.root.lookup||{}}function Ee(e,t,n){const r=ke(e,this),i=r[t],o=r[n];return i&&o?i.path(o).map(Ae):void 0}function De(e,t){const n=ke(e,this)[t];return n?n.ancestors().map(Ae):void 0}const Ce=()=>"undefined"!==typeof window&&window||null;function Me(){const e=Ce();return e?e.screen:{}}function Fe(){const e=Ce();return e?[e.innerWidth,e.innerHeight]:[void 0,void 0]}function Se(){const e=this.context.dataflow,t=e.container&&e.container();return t?[t.clientWidth,t.clientHeight]:[void 0,void 0]}function Te(e,t,n){if(!e)return[];const i=r(e,2),o=i[0],a=i[1],s=(new u.Bounds).set(o[0],o[1],a[0],a[1]),c=n||this.context.dataflow.scenegraph().root;return u.intersect(c,s,Oe(t))}function Oe(e){let n=null;if(e){const r=t.array(e.marktype),i=t.array(e.markname);n=e=>(!r.length||r.some((t=>e.marktype===t)))&&(!i.length||i.some((t=>e.name===t)))}return n}const Ne={random:()=>l.random(),cumulativeNormal:l.cumulativeNormal,cumulativeLogNormal:l.cumulativeLogNormal,cumulativeUniform:l.cumulativeUniform,densityNormal:l.densityNormal,densityLogNormal:l.densityLogNormal,densityUniform:l.densityUniform,quantileNormal:l.quantileNormal,quantileLogNormal:l.quantileLogNormal,quantileUniform:l.quantileUniform,sampleNormal:l.sampleNormal,sampleLogNormal:l.sampleLogNormal,sampleUniform:l.sampleUniform,isArray:t.isArray,isBoolean:t.isBoolean,isDate:t.isDate,isDefined:e=>void 0!==e,isNumber:t.isNumber,isObject:t.isObject,isRegExp:t.isRegExp,isString:t.isString,isTuple:a.isTuple,isValid:e=>null!=e&&e===e,toBoolean:t.toBoolean,toDate:t.toDate,toNumber:t.toNumber,toString:t.toString,indexof:ue,join:se,lastindexof:ce,replace:fe,reverse:de,slice:le,flush:t.flush,lerp:t.lerp,merge:Q,pad:t.pad,peek:t.peek,span:t.span,inrange:t.inrange,truncate:t.truncate,rgb:o.rgb,lab:o.lab,hcl:o.hcl,hsl:o.hsl,luminance:X,contrast:J,sequence:d.range,format:y,utcFormat:x,utcParse:_,utcOffset:f.utcOffset,utcSequence:f.utcSequence,timeFormat:b,timeParse:w,timeOffset:f.timeOffset,timeSequence:f.timeSequence,timeUnitSpecifier:f.timeUnitSpecifier,monthFormat:E,monthAbbrevFormat:D,dayFormat:C,dayAbbrevFormat:M,quarter:t.quarter,utcquarter:t.utcquarter,week:f.week,utcweek:f.utcweek,dayofyear:f.dayofyear,utcdayofyear:f.utcdayofyear,warn:Y,info:V,debug:G,extent:t.extent,inScope:W,intersect:Te,clampRange:t.clampRange,pinchDistance:re,pinchAngle:ie,screen:Me,containerSize:Se,windowSize:Fe,bandspace:he,setdata:g,pathShape:_e,panLinear:t.panLinear,panLog:t.panLog,panPow:t.panPow,panSymlog:t.panSymlog,zoomLinear:t.zoomLinear,zoomLog:t.zoomLog,zoomPow:t.zoomPow,zoomSymlog:t.zoomSymlog,encode:m,modify:ne},Pe=["view","item","group","xy","x","y"],Re="event.vega.",Be="this.",ze={},je={forbidden:["_"],allowed:["datum","event","item"],fieldvar:"datum",globalvar:e=>"_[".concat(t.stringValue(O+e),"]"),functions:Ie,constants:n.constants,visitors:ze},Le=n.codegen(je);function Ie(e){const r=n.functions(e);Pe.forEach((e=>r[e]=Re+e));for(const t in Ne)r[t]=Be+t;return t.extend(r,j(e,Ne,ze)),r}function Ue(e,t,n){return 1===arguments.length?Ne[e]:(Ne[e]=t,n&&(ze[e]=n),Le&&(Le.functions[e]=Be+e),this)}function qe(e,r){const i={};let o;try{e=t.isString(e)?e:t.stringValue(e)+"",o=n.parse(e)}catch(s){t.error("Expression parse error: "+e)}o.visit((e=>{if(e.type!==n.CallExpression)return;const t=e.callee.name,o=je.visitors[t];o&&o(t,e.arguments,r,i)}));const a=Le(o);return a.globals.forEach((e=>{const n=O+e;!t.hasOwnProperty(i,n)&&r.getSignal(e)&&(i[n]=r.signalRef(e))})),{$expr:t.extend({code:a.code},r.options.ast?{ast:o}:null),$fields:a.fields,$params:i}}Ue("bandwidth",pe,R),Ue("copy",ge,R),Ue("domain",me,R),Ue("range",ye,R),Ue("invert",ve,R),Ue("scale",be,R),Ue("gradient",xe,R),Ue("geoArea",I,R),Ue("geoBounds",U,R),Ue("geoCentroid",q,R),Ue("geoShape",we,R),Ue("indata",p,P),Ue("data",h,N),Ue("treePath",Ee,N),Ue("treeAncestors",De,N),Ue("vlSelectionTest",c.selectionTest,c.selectionVisitor),Ue("vlSelectionResolve",c.selectionResolve,c.selectionVisitor),e.DataPrefix=F,e.IndexPrefix=S,e.ScalePrefix=T,e.SignalPrefix=O,e.bandspace=he,e.bandwidth=pe,e.codeGenerator=Le,e.codegenParams=je,e.containerSize=Se,e.contrast=J,e.copy=ge,e.data=h,e.dataVisitor=N,e.dayAbbrevFormat=M,e.dayFormat=C,e.debug=G,e.domain=me,e.encode=m,e.expressionFunction=Ue,e.format=y,e.functionContext=Ne,e.geoArea=I,e.geoBounds=U,e.geoCentroid=q,e.geoShape=we,e.inScope=W,e.indata=p,e.indataVisitor=P,e.indexof=ue,e.info=V,e.invert=ve,e.join=se,e.lastindexof=ce,e.luminance=X,e.merge=Q,e.modify=ne,e.monthAbbrevFormat=D,e.monthFormat=E,e.parseExpression=qe,e.pathShape=_e,e.pinchAngle=ie,e.pinchDistance=re,e.range=ye,e.replace=fe,e.reverse=de,e.scale=be,e.scaleGradient=xe,e.scaleVisitor=R,e.screen=Me,e.setdata=g,e.slice=le,e.timeFormat=b,e.timeParse=w,e.treeAncestors=De,e.treePath=Ee,e.utcFormat=x,e.utcParse=_,e.warn=Y,e.windowSize=Fe,Object.defineProperty(e,"__esModule",{value:!0})}(t,n(1176),n(1716),n(1370),n(2360),n(1183),n(1283),n(1323),n(2361),n(1282),n(1322),n(1190))},1711:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(1176),i=n(1183),o=n(2333),a=n(2334),s=n(2340),u=n(2343),c=n(2346),l=n(2351),f=n(2353),d=n(2354),h=n(2355),p=n(2357),g=n(2358),m=n(1282),v=n(1322),y=n(1487),b=n(1323),x=n(1283),w=n(1715),_=n(2359),A=n(1368),k=n(1488),E=n(2363),D=n(1717);function C(e){if(e&&e.__esModule)return e;var t=Object.create(null);return e&&Object.keys(e).forEach((function(n){if("default"!==n){var r=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(t,n,r.get?r:{enumerable:!0,get:function(){return e[n]}})}})),t.default=e,Object.freeze(t)}var M=C(o),F=C(a),S=C(s),T=C(u),O=C(c),N=C(l),P=C(f),R=C(d),B=C(h),z=C(p),j=C(g);r.extend(i.transforms,M,F,S,T,O,P,N,R,B,z,j),Object.keys(r).forEach((function(e){"default"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return r[e]}})})),Object.keys(m).forEach((function(e){"default"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return m[e]}})})),Object.keys(v).forEach((function(e){"default"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return v[e]}})})),Object.keys(y).forEach((function(e){"default"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return y[e]}})})),Object.keys(b).forEach((function(e){"default"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return b[e]}})})),Object.defineProperty(t,"Dataflow",{enumerable:!0,get:function(){return i.Dataflow}}),Object.defineProperty(t,"EventStream",{enumerable:!0,get:function(){return i.EventStream}}),Object.defineProperty(t,"MultiPulse",{enumerable:!0,get:function(){return i.MultiPulse}}),Object.defineProperty(t,"Operator",{enumerable:!0,get:function(){return i.Operator}}),Object.defineProperty(t,"Parameters",{enumerable:!0,get:function(){return i.Parameters}}),Object.defineProperty(t,"Pulse",{enumerable:!0,get:function(){return i.Pulse}}),Object.defineProperty(t,"Transform",{enumerable:!0,get:function(){return i.Transform}}),Object.defineProperty(t,"changeset",{enumerable:!0,get:function(){return i.changeset}}),Object.defineProperty(t,"definition",{enumerable:!0,get:function(){return i.definition}}),Object.defineProperty(t,"ingest",{enumerable:!0,get:function(){return i.ingest}}),Object.defineProperty(t,"isTuple",{enumerable:!0,get:function(){return i.isTuple}}),Object.defineProperty(t,"transform",{enumerable:!0,get:function(){return i.transform}}),Object.defineProperty(t,"transforms",{enumerable:!0,get:function(){return i.transforms}}),Object.defineProperty(t,"tupleid",{enumerable:!0,get:function(){return i.tupleid}}),Object.defineProperty(t,"interpolate",{enumerable:!0,get:function(){return x.interpolate}}),Object.defineProperty(t,"interpolateColors",{enumerable:!0,get:function(){return x.interpolateColors}}),Object.defineProperty(t,"interpolateRange",{enumerable:!0,get:function(){return x.interpolateRange}}),Object.defineProperty(t,"quantizeInterpolator",{enumerable:!0,get:function(){return x.quantizeInterpolator}}),Object.defineProperty(t,"scale",{enumerable:!0,get:function(){return x.scale}}),Object.defineProperty(t,"scheme",{enumerable:!0,get:function(){return x.scheme}}),Object.defineProperty(t,"projection",{enumerable:!0,get:function(){return w.projection}}),Object.defineProperty(t,"View",{enumerable:!0,get:function(){return _.View}}),Object.defineProperty(t,"defaultLocale",{enumerable:!0,get:function(){return A.defaultLocale}}),Object.defineProperty(t,"formatLocale",{enumerable:!0,get:function(){return A.numberFormatDefaultLocale}}),Object.defineProperty(t,"locale",{enumerable:!0,get:function(){return A.locale}}),Object.defineProperty(t,"resetDefaultLocale",{enumerable:!0,get:function(){return A.resetDefaultLocale}}),Object.defineProperty(t,"timeFormatLocale",{enumerable:!0,get:function(){return A.timeFormatDefaultLocale}}),Object.defineProperty(t,"expressionFunction",{enumerable:!0,get:function(){return k.expressionFunction}}),Object.defineProperty(t,"parse",{enumerable:!0,get:function(){return E.parse}}),Object.defineProperty(t,"runtimeContext",{enumerable:!0,get:function(){return D.context}}),t.version="5.17.3"},1712:function(e,t,n){!function(e){"use strict";const t=Math.PI,n=2*t,r=1e-6,i=n-r;function o(){this._x0=this._y0=this._x1=this._y1=null,this._=""}function a(){return new o}o.prototype=a.prototype={constructor:o,moveTo:function(e,t){this._+="M"+(this._x0=this._x1=+e)+","+(this._y0=this._y1=+t)},closePath:function(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")},lineTo:function(e,t){this._+="L"+(this._x1=+e)+","+(this._y1=+t)},quadraticCurveTo:function(e,t,n,r){this._+="Q"+ +e+","+ +t+","+(this._x1=+n)+","+(this._y1=+r)},bezierCurveTo:function(e,t,n,r,i,o){this._+="C"+ +e+","+ +t+","+ +n+","+ +r+","+(this._x1=+i)+","+(this._y1=+o)},arcTo:function(e,n,i,o,a){e=+e,n=+n,i=+i,o=+o,a=+a;var s=this._x1,u=this._y1,c=i-e,l=o-n,f=s-e,d=u-n,h=f*f+d*d;if(a<0)throw new Error("negative radius: "+a);if(null===this._x1)this._+="M"+(this._x1=e)+","+(this._y1=n);else if(h>r)if(Math.abs(d*c-l*f)>r&&a){var p=i-s,g=o-u,m=c*c+l*l,v=p*p+g*g,y=Math.sqrt(m),b=Math.sqrt(h),x=a*Math.tan((t-Math.acos((m+h-v)/(2*y*b)))/2),w=x/b,_=x/y;Math.abs(w-1)>r&&(this._+="L"+(e+w*f)+","+(n+w*d)),this._+="A"+a+","+a+",0,0,"+ +(d*p>f*g)+","+(this._x1=e+_*c)+","+(this._y1=n+_*l)}else this._+="L"+(this._x1=e)+","+(this._y1=n)},arc:function(e,o,a,s,u,c){e=+e,o=+o,c=!!c;var l=(a=+a)*Math.cos(s),f=a*Math.sin(s),d=e+l,h=o+f,p=1^c,g=c?s-u:u-s;if(a<0)throw new Error("negative radius: "+a);null===this._x1?this._+="M"+d+","+h:(Math.abs(this._x1-d)>r||Math.abs(this._y1-h)>r)&&(this._+="L"+d+","+h),a&&(g<0&&(g=g%n+n),g>i?this._+="A"+a+","+a+",0,1,"+p+","+(e-l)+","+(o-f)+"A"+a+","+a+",0,1,"+p+","+(this._x1=d)+","+(this._y1=h):g>r&&(this._+="A"+a+","+a+",0,"+ +(g>=t)+","+p+","+(this._x1=e+a*Math.cos(u))+","+(this._y1=o+a*Math.sin(u))))},rect:function(e,t,n,r){this._+="M"+(this._x0=this._x1=+e)+","+(this._y0=this._y1=+t)+"h"+ +n+"v"+ +r+"h"+-n+"Z"},toString:function(){return this._}},e.path=a,Object.defineProperty(e,"__esModule",{value:!0})}(t)},1713:function(e,t,n){!function(e,t){"use strict";function n(e,t,n,r,i){var o=e*e,a=o*e;return((1-3*e+3*o-a)*t+(4-6*o+3*a)*n+(1+3*e+3*o-3*a)*r+a*i)/6}function r(e){var t=e.length-1;return function(r){var i=r<=0?r=0:r>=1?(r=1,t-1):Math.floor(r*t),o=e[i],a=e[i+1],s=i>0?e[i-1]:2*o-a,u=i<t-1?e[i+2]:2*a-o;return n((r-i/t)*t,s,o,a,u)}}function i(e){var t=e.length;return function(r){var i=Math.floor(((r%=1)<0?++r:r)*t),o=e[(i+t-1)%t],a=e[i%t],s=e[(i+1)%t],u=e[(i+2)%t];return n((r-i/t)*t,o,a,s,u)}}var o=e=>()=>e;function a(e,t){return function(n){return e+n*t}}function s(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}function u(e,t){var n=t-e;return n?a(e,n>180||n<-180?n-360*Math.round(n/360):n):o(isNaN(e)?t:e)}function c(e){return 1===(e=+e)?l:function(t,n){return n-t?s(t,n,e):o(isNaN(t)?n:t)}}function l(e,t){var n=t-e;return n?a(e,n):o(isNaN(e)?t:e)}var f=function e(n){var r=c(n);function i(e,n){var i=r((e=t.rgb(e)).r,(n=t.rgb(n)).r),o=r(e.g,n.g),a=r(e.b,n.b),s=l(e.opacity,n.opacity);return function(t){return e.r=i(t),e.g=o(t),e.b=a(t),e.opacity=s(t),e+""}}return i.gamma=e,i}(1);function d(e){return function(n){var r,i,o=n.length,a=new Array(o),s=new Array(o),u=new Array(o);for(r=0;r<o;++r)i=t.rgb(n[r]),a[r]=i.r||0,s[r]=i.g||0,u[r]=i.b||0;return a=e(a),s=e(s),u=e(u),i.opacity=1,function(e){return i.r=a(e),i.g=s(e),i.b=u(e),i+""}}}var h=d(r),p=d(i);function g(e,t){t||(t=[]);var n,r=e?Math.min(t.length,e.length):0,i=t.slice();return function(o){for(n=0;n<r;++n)i[n]=e[n]*(1-o)+t[n]*o;return i}}function m(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function v(e,t){return(m(t)?g:y)(e,t)}function y(e,t){var n,r=t?t.length:0,i=e?Math.min(r,e.length):0,o=new Array(i),a=new Array(r);for(n=0;n<i;++n)o[n]=C(e[n],t[n]);for(;n<r;++n)a[n]=t[n];return function(e){for(n=0;n<i;++n)a[n]=o[n](e);return a}}function b(e,t){var n=new Date;return e=+e,t=+t,function(r){return n.setTime(e*(1-r)+t*r),n}}function x(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function w(e,t){var n,r={},i={};for(n in null!==e&&"object"===typeof e||(e={}),null!==t&&"object"===typeof t||(t={}),t)n in e?r[n]=C(e[n],t[n]):i[n]=t[n];return function(e){for(n in r)i[n]=r[n](e);return i}}var _=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,A=new RegExp(_.source,"g");function k(e){return function(){return e}}function E(e){return function(t){return e(t)+""}}function D(e,t){var n,r,i,o=_.lastIndex=A.lastIndex=0,a=-1,s=[],u=[];for(e+="",t+="";(n=_.exec(e))&&(r=A.exec(t));)(i=r.index)>o&&(i=t.slice(o,i),s[a]?s[a]+=i:s[++a]=i),(n=n[0])===(r=r[0])?s[a]?s[a]+=r:s[++a]=r:(s[++a]=null,u.push({i:a,x:x(n,r)})),o=A.lastIndex;return o<t.length&&(i=t.slice(o),s[a]?s[a]+=i:s[++a]=i),s.length<2?u[0]?E(u[0].x):k(t):(t=u.length,function(e){for(var n,r=0;r<t;++r)s[(n=u[r]).i]=n.x(e);return s.join("")})}function C(e,n){var r,i=typeof n;return null==n||"boolean"===i?o(n):("number"===i?x:"string"===i?(r=t.color(n))?(n=r,f):D:n instanceof t.color?f:n instanceof Date?b:m(n)?g:Array.isArray(n)?y:"function"!==typeof n.valueOf&&"function"!==typeof n.toString||isNaN(n)?w:x)(e,n)}function M(e){var t=e.length;return function(n){return e[Math.max(0,Math.min(t-1,Math.floor(n*t)))]}}function F(e,t){var n=u(+e,+t);return function(e){var t=n(e);return t-360*Math.floor(t/360)}}function S(e,t){return e=+e,t=+t,function(n){return Math.round(e*(1-n)+t*n)}}var T,O=180/Math.PI,N={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function P(e,t,n,r,i,o){var a,s,u;return(a=Math.sqrt(e*e+t*t))&&(e/=a,t/=a),(u=e*n+t*r)&&(n-=e*u,r-=t*u),(s=Math.sqrt(n*n+r*r))&&(n/=s,r/=s,u/=s),e*r<t*n&&(e=-e,t=-t,u=-u,a=-a),{translateX:i,translateY:o,rotate:Math.atan2(t,e)*O,skewX:Math.atan(u)*O,scaleX:a,scaleY:s}}function R(e){const t=new("function"===typeof DOMMatrix?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?N:P(t.a,t.b,t.c,t.d,t.e,t.f)}function B(e){return null==e?N:(T||(T=document.createElementNS("http://www.w3.org/2000/svg","g")),T.setAttribute("transform",e),(e=T.transform.baseVal.consolidate())?P((e=e.matrix).a,e.b,e.c,e.d,e.e,e.f):N)}function z(e,t,n,r){function i(e){return e.length?e.pop()+" ":""}function o(e,r,i,o,a,s){if(e!==i||r!==o){var u=a.push("translate(",null,t,null,n);s.push({i:u-4,x:x(e,i)},{i:u-2,x:x(r,o)})}else(i||o)&&a.push("translate("+i+t+o+n)}function a(e,t,n,o){e!==t?(e-t>180?t+=360:t-e>180&&(e+=360),o.push({i:n.push(i(n)+"rotate(",null,r)-2,x:x(e,t)})):t&&n.push(i(n)+"rotate("+t+r)}function s(e,t,n,o){e!==t?o.push({i:n.push(i(n)+"skewX(",null,r)-2,x:x(e,t)}):t&&n.push(i(n)+"skewX("+t+r)}function u(e,t,n,r,o,a){if(e!==n||t!==r){var s=o.push(i(o)+"scale(",null,",",null,")");a.push({i:s-4,x:x(e,n)},{i:s-2,x:x(t,r)})}else 1===n&&1===r||o.push(i(o)+"scale("+n+","+r+")")}return function(t,n){var r=[],i=[];return t=e(t),n=e(n),o(t.translateX,t.translateY,n.translateX,n.translateY,r,i),a(t.rotate,n.rotate,r,i),s(t.skewX,n.skewX,r,i),u(t.scaleX,t.scaleY,n.scaleX,n.scaleY,r,i),t=n=null,function(e){for(var t,n=-1,o=i.length;++n<o;)r[(t=i[n]).i]=t.x(e);return r.join("")}}}var j=z(R,"px, ","px)","deg)"),L=z(B,", ",")",")"),I=1e-12;function U(e){return((e=Math.exp(e))+1/e)/2}function q(e){return((e=Math.exp(e))-1/e)/2}function W(e){return((e=Math.exp(2*e))-1)/(e+1)}var H=function e(t,n,r){function i(e,i){var o,a,s=e[0],u=e[1],c=e[2],l=i[0],f=i[1],d=i[2],h=l-s,p=f-u,g=h*h+p*p;if(g<I)a=Math.log(d/c)/t,o=function(e){return[s+e*h,u+e*p,c*Math.exp(t*e*a)]};else{var m=Math.sqrt(g),v=(d*d-c*c+r*g)/(2*c*n*m),y=(d*d-c*c-r*g)/(2*d*n*m),b=Math.log(Math.sqrt(v*v+1)-v),x=Math.log(Math.sqrt(y*y+1)-y);a=(x-b)/t,o=function(e){var r=e*a,i=U(b),o=c/(n*m)*(i*W(t*r+b)-q(b));return[s+o*h,u+o*p,c*i/U(t*r+b)]}}return o.duration=1e3*a*t/Math.SQRT2,o}return i.rho=function(t){var n=Math.max(.001,+t),r=n*n;return e(n,r,r*r)},i}(Math.SQRT2,2,4);function Y(e){return function(n,r){var i=e((n=t.hsl(n)).h,(r=t.hsl(r)).h),o=l(n.s,r.s),a=l(n.l,r.l),s=l(n.opacity,r.opacity);return function(e){return n.h=i(e),n.s=o(e),n.l=a(e),n.opacity=s(e),n+""}}}var V=Y(u),G=Y(l);function $(e,n){var r=l((e=t.lab(e)).l,(n=t.lab(n)).l),i=l(e.a,n.a),o=l(e.b,n.b),a=l(e.opacity,n.opacity);return function(t){return e.l=r(t),e.a=i(t),e.b=o(t),e.opacity=a(t),e+""}}function X(e){return function(n,r){var i=e((n=t.hcl(n)).h,(r=t.hcl(r)).h),o=l(n.c,r.c),a=l(n.l,r.l),s=l(n.opacity,r.opacity);return function(e){return n.h=i(e),n.c=o(e),n.l=a(e),n.opacity=s(e),n+""}}}var J=X(u),Q=X(l);function Z(e){return function n(r){function i(n,i){var o=e((n=t.cubehelix(n)).h,(i=t.cubehelix(i)).h),a=l(n.s,i.s),s=l(n.l,i.l),u=l(n.opacity,i.opacity);return function(e){return n.h=o(e),n.s=a(e),n.l=s(Math.pow(e,r)),n.opacity=u(e),n+""}}return r=+r,i.gamma=n,i}(1)}var K=Z(u),ee=Z(l);function te(e,t){void 0===t&&(t=e,e=C);for(var n=0,r=t.length-1,i=t[0],o=new Array(r<0?0:r);n<r;)o[n]=e(i,i=t[++n]);return function(e){var t=Math.max(0,Math.min(r-1,Math.floor(e*=r)));return o[t](e-t)}}function ne(e,t){for(var n=new Array(t),r=0;r<t;++r)n[r]=e(r/(t-1));return n}e.interpolate=C,e.interpolateArray=v,e.interpolateBasis=r,e.interpolateBasisClosed=i,e.interpolateCubehelix=K,e.interpolateCubehelixLong=ee,e.interpolateDate=b,e.interpolateDiscrete=M,e.interpolateHcl=J,e.interpolateHclLong=Q,e.interpolateHsl=V,e.interpolateHslLong=G,e.interpolateHue=F,e.interpolateLab=$,e.interpolateNumber=x,e.interpolateNumberArray=g,e.interpolateObject=w,e.interpolateRgb=f,e.interpolateRgbBasis=h,e.interpolateRgbBasisClosed=p,e.interpolateRound=S,e.interpolateString=D,e.interpolateTransformCss=j,e.interpolateTransformSvg=L,e.interpolateZoom=H,e.piecewise=te,e.quantize=ne,Object.defineProperty(e,"__esModule",{value:!0})}(t,n(2337))},1714:function(e,t,n){!function(e){"use strict";var t=new Date,n=new Date;function r(e,i,o,a){function s(t){return e(t=0===arguments.length?new Date:new Date(+t)),t}return s.floor=function(t){return e(t=new Date(+t)),t},s.ceil=function(t){return e(t=new Date(t-1)),i(t,1),e(t),t},s.round=function(e){var t=s(e),n=s.ceil(e);return e-t<n-e?t:n},s.offset=function(e,t){return i(e=new Date(+e),null==t?1:Math.floor(t)),e},s.range=function(t,n,r){var o,a=[];if(t=s.ceil(t),r=null==r?1:Math.floor(r),!(t<n)||!(r>0))return a;do{a.push(o=new Date(+t)),i(t,r),e(t)}while(o<t&&t<n);return a},s.filter=function(t){return r((function(n){if(n>=n)for(;e(n),!t(n);)n.setTime(n-1)}),(function(e,n){if(e>=e)if(n<0)for(;++n<=0;)for(;i(e,-1),!t(e););else for(;--n>=0;)for(;i(e,1),!t(e););}))},o&&(s.count=function(r,i){return t.setTime(+r),n.setTime(+i),e(t),e(n),Math.floor(o(t,n))},s.every=function(e){return e=Math.floor(e),isFinite(e)&&e>0?e>1?s.filter(a?function(t){return a(t)%e===0}:function(t){return s.count(0,t)%e===0}):s:null}),s}var i=r((function(){}),(function(e,t){e.setTime(+e+t)}),(function(e,t){return t-e}));i.every=function(e){return e=Math.floor(e),isFinite(e)&&e>0?e>1?r((function(t){t.setTime(Math.floor(t/e)*e)}),(function(t,n){t.setTime(+t+n*e)}),(function(t,n){return(n-t)/e})):i:null};var o=i.range,a=1e3,s=6e4,u=36e5,c=864e5,l=6048e5,f=r((function(e){e.setTime(e-e.getMilliseconds())}),(function(e,t){e.setTime(+e+t*a)}),(function(e,t){return(t-e)/a}),(function(e){return e.getUTCSeconds()})),d=f.range,h=r((function(e){e.setTime(e-e.getMilliseconds()-e.getSeconds()*a)}),(function(e,t){e.setTime(+e+t*s)}),(function(e,t){return(t-e)/s}),(function(e){return e.getMinutes()})),p=h.range,g=r((function(e){e.setTime(e-e.getMilliseconds()-e.getSeconds()*a-e.getMinutes()*s)}),(function(e,t){e.setTime(+e+t*u)}),(function(e,t){return(t-e)/u}),(function(e){return e.getHours()})),m=g.range,v=r((e=>e.setHours(0,0,0,0)),((e,t)=>e.setDate(e.getDate()+t)),((e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*s)/c),(e=>e.getDate()-1)),y=v.range;function b(e){return r((function(t){t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)}),(function(e,t){e.setDate(e.getDate()+7*t)}),(function(e,t){return(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*s)/l}))}var x=b(0),w=b(1),_=b(2),A=b(3),k=b(4),E=b(5),D=b(6),C=x.range,M=w.range,F=_.range,S=A.range,T=k.range,O=E.range,N=D.range,P=r((function(e){e.setDate(1),e.setHours(0,0,0,0)}),(function(e,t){e.setMonth(e.getMonth()+t)}),(function(e,t){return t.getMonth()-e.getMonth()+12*(t.getFullYear()-e.getFullYear())}),(function(e){return e.getMonth()})),R=P.range,B=r((function(e){e.setMonth(0,1),e.setHours(0,0,0,0)}),(function(e,t){e.setFullYear(e.getFullYear()+t)}),(function(e,t){return t.getFullYear()-e.getFullYear()}),(function(e){return e.getFullYear()}));B.every=function(e){return isFinite(e=Math.floor(e))&&e>0?r((function(t){t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)}),(function(t,n){t.setFullYear(t.getFullYear()+n*e)})):null};var z=B.range,j=r((function(e){e.setUTCSeconds(0,0)}),(function(e,t){e.setTime(+e+t*s)}),(function(e,t){return(t-e)/s}),(function(e){return e.getUTCMinutes()})),L=j.range,I=r((function(e){e.setUTCMinutes(0,0,0)}),(function(e,t){e.setTime(+e+t*u)}),(function(e,t){return(t-e)/u}),(function(e){return e.getUTCHours()})),U=I.range,q=r((function(e){e.setUTCHours(0,0,0,0)}),(function(e,t){e.setUTCDate(e.getUTCDate()+t)}),(function(e,t){return(t-e)/c}),(function(e){return e.getUTCDate()-1})),W=q.range;function H(e){return r((function(t){t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)}),(function(e,t){e.setUTCDate(e.getUTCDate()+7*t)}),(function(e,t){return(t-e)/l}))}var Y=H(0),V=H(1),G=H(2),$=H(3),X=H(4),J=H(5),Q=H(6),Z=Y.range,K=V.range,ee=G.range,te=$.range,ne=X.range,re=J.range,ie=Q.range,oe=r((function(e){e.setUTCDate(1),e.setUTCHours(0,0,0,0)}),(function(e,t){e.setUTCMonth(e.getUTCMonth()+t)}),(function(e,t){return t.getUTCMonth()-e.getUTCMonth()+12*(t.getUTCFullYear()-e.getUTCFullYear())}),(function(e){return e.getUTCMonth()})),ae=oe.range,se=r((function(e){e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)}),(function(e,t){e.setUTCFullYear(e.getUTCFullYear()+t)}),(function(e,t){return t.getUTCFullYear()-e.getUTCFullYear()}),(function(e){return e.getUTCFullYear()}));se.every=function(e){return isFinite(e=Math.floor(e))&&e>0?r((function(t){t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)}),(function(t,n){t.setUTCFullYear(t.getUTCFullYear()+n*e)})):null};var ue=se.range;e.timeDay=v,e.timeDays=y,e.timeFriday=E,e.timeFridays=O,e.timeHour=g,e.timeHours=m,e.timeInterval=r,e.timeMillisecond=i,e.timeMilliseconds=o,e.timeMinute=h,e.timeMinutes=p,e.timeMonday=w,e.timeMondays=M,e.timeMonth=P,e.timeMonths=R,e.timeSaturday=D,e.timeSaturdays=N,e.timeSecond=f,e.timeSeconds=d,e.timeSunday=x,e.timeSundays=C,e.timeThursday=k,e.timeThursdays=T,e.timeTuesday=_,e.timeTuesdays=F,e.timeWednesday=A,e.timeWednesdays=S,e.timeWeek=x,e.timeWeeks=C,e.timeYear=B,e.timeYears=z,e.utcDay=q,e.utcDays=W,e.utcFriday=J,e.utcFridays=re,e.utcHour=I,e.utcHours=U,e.utcMillisecond=i,e.utcMilliseconds=o,e.utcMinute=j,e.utcMinutes=L,e.utcMonday=V,e.utcMondays=K,e.utcMonth=oe,e.utcMonths=ae,e.utcSaturday=Q,e.utcSaturdays=ie,e.utcSecond=f,e.utcSeconds=d,e.utcSunday=Y,e.utcSundays=Z,e.utcThursday=X,e.utcThursdays=ne,e.utcTuesday=G,e.utcTuesdays=ee,e.utcWednesday=$,e.utcWednesdays=te,e.utcWeek=Y,e.utcWeeks=Z,e.utcYear=se,e.utcYears=ue,Object.defineProperty(e,"__esModule",{value:!0})}(t)},1715:function(e,t,n){!function(e,t,n){"use strict";const r=t.geoPath(),i=["clipAngle","clipExtent","scale","translate","center","rotate","parallels","precision","reflectX","reflectY","coefficient","distance","fraction","lobes","parallel","radius","ratio","spacing","tilt"];function o(e,n){return function r(){const o=n();return o.type=e,o.path=t.geoPath().projection(o),o.copy=o.copy||function(){const e=r();return i.forEach((t=>{o[t]&&e[t](o[t]())})),e.path.pointRadius(o.path.pointRadius()),e},o}}function a(e,t){if(!e||"string"!==typeof e)throw new Error("Projection type must be a name string.");return e=e.toLowerCase(),arguments.length>1?(u[e]=o(e,t),this):u[e]||null}function s(e){return e&&e.path||r}const u={albers:t.geoAlbers,albersusa:t.geoAlbersUsa,azimuthalequalarea:t.geoAzimuthalEqualArea,azimuthalequidistant:t.geoAzimuthalEquidistant,conicconformal:t.geoConicConformal,conicequalarea:t.geoConicEqualArea,conicequidistant:t.geoConicEquidistant,equalEarth:t.geoEqualEarth,equirectangular:t.geoEquirectangular,gnomonic:t.geoGnomonic,identity:t.geoIdentity,mercator:t.geoMercator,mollweide:n.geoMollweide,naturalEarth1:t.geoNaturalEarth1,orthographic:t.geoOrthographic,stereographic:t.geoStereographic,transversemercator:t.geoTransverseMercator};for(const c in u)a(c,u[c]);e.getProjectionPath=s,e.projection=a,e.projectionProperties=i,Object.defineProperty(e,"__esModule",{value:!0})}(t,n(1370),n(2344))},1716:function(e,t,n){!function(e,t){"use strict";const n="RawCode",r="Literal",i="Property",o="Identifier",a="ArrayExpression",s="BinaryExpression",u="CallExpression",c="ConditionalExpression",l="LogicalExpression",f="MemberExpression",d="ObjectExpression",h="UnaryExpression";function p(e){this.type=e}function g(e){switch(e.type){case a:return e.elements;case s:case l:return[e.left,e.right];case u:return[e.callee].concat(e.arguments);case c:return[e.test,e.consequent,e.alternate];case f:return[e.object,e.property];case d:return e.properties;case i:return[e.key,e.value];case h:return[e.argument];case o:case r:case n:default:return[]}}var m,v,y,b,x;p.prototype.visit=function(e){let t,n,r;if(e(this))return 1;for(t=g(this),n=0,r=t.length;n<r;++n)if(t[n].visit(e))return 1};var w=1,_=2,A=3,k=4,E=5,D=6,C=7,M=8,F=9;(m={})[w]="Boolean",m[_]="<end>",m[A]="Identifier",m[k]="Keyword",m[E]="Null",m[D]="Numeric",m[C]="Punctuator",m[M]="String",m[F]="RegularExpression";var S="ArrayExpression",T="BinaryExpression",O="CallExpression",N="ConditionalExpression",P="Identifier",R="Literal",B="LogicalExpression",z="MemberExpression",j="ObjectExpression",L="Property",I="UnaryExpression",U="Unexpected token %0",q="Unexpected number",W="Unexpected string",H="Unexpected identifier",Y="Unexpected reserved word",V="Unexpected end of input",G="Invalid regular expression",$="Invalid regular expression: missing /",X="Octal literals are not allowed in strict mode.",J="Duplicate data property in object literal not allowed in strict mode",Q="ILLEGAL",Z="Disabled.",K=new RegExp("[\\xAA\\xB5\\xBA\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\u02C1\\u02C6-\\u02D1\\u02E0-\\u02E4\\u02EC\\u02EE\\u0370-\\u0374\\u0376\\u0377\\u037A-\\u037D\\u037F\\u0386\\u0388-\\u038A\\u038C\\u038E-\\u03A1\\u03A3-\\u03F5\\u03F7-\\u0481\\u048A-\\u052F\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u05D0-\\u05EA\\u05F0-\\u05F2\\u0620-\\u064A\\u066E\\u066F\\u0671-\\u06D3\\u06D5\\u06E5\\u06E6\\u06EE\\u06EF\\u06FA-\\u06FC\\u06FF\\u0710\\u0712-\\u072F\\u074D-\\u07A5\\u07B1\\u07CA-\\u07EA\\u07F4\\u07F5\\u07FA\\u0800-\\u0815\\u081A\\u0824\\u0828\\u0840-\\u0858\\u08A0-\\u08B2\\u0904-\\u0939\\u093D\\u0950\\u0958-\\u0961\\u0971-\\u0980\\u0985-\\u098C\\u098F\\u0990\\u0993-\\u09A8\\u09AA-\\u09B0\\u09B2\\u09B6-\\u09B9\\u09BD\\u09CE\\u09DC\\u09DD\\u09DF-\\u09E1\\u09F0\\u09F1\\u0A05-\\u0A0A\\u0A0F\\u0A10\\u0A13-\\u0A28\\u0A2A-\\u0A30\\u0A32\\u0A33\\u0A35\\u0A36\\u0A38\\u0A39\\u0A59-\\u0A5C\\u0A5E\\u0A72-\\u0A74\\u0A85-\\u0A8D\\u0A8F-\\u0A91\\u0A93-\\u0AA8\\u0AAA-\\u0AB0\\u0AB2\\u0AB3\\u0AB5-\\u0AB9\\u0ABD\\u0AD0\\u0AE0\\u0AE1\\u0B05-\\u0B0C\\u0B0F\\u0B10\\u0B13-\\u0B28\\u0B2A-\\u0B30\\u0B32\\u0B33\\u0B35-\\u0B39\\u0B3D\\u0B5C\\u0B5D\\u0B5F-\\u0B61\\u0B71\\u0B83\\u0B85-\\u0B8A\\u0B8E-\\u0B90\\u0B92-\\u0B95\\u0B99\\u0B9A\\u0B9C\\u0B9E\\u0B9F\\u0BA3\\u0BA4\\u0BA8-\\u0BAA\\u0BAE-\\u0BB9\\u0BD0\\u0C05-\\u0C0C\\u0C0E-\\u0C10\\u0C12-\\u0C28\\u0C2A-\\u0C39\\u0C3D\\u0C58\\u0C59\\u0C60\\u0C61\\u0C85-\\u0C8C\\u0C8E-\\u0C90\\u0C92-\\u0CA8\\u0CAA-\\u0CB3\\u0CB5-\\u0CB9\\u0CBD\\u0CDE\\u0CE0\\u0CE1\\u0CF1\\u0CF2\\u0D05-\\u0D0C\\u0D0E-\\u0D10\\u0D12-\\u0D3A\\u0D3D\\u0D4E\\u0D60\\u0D61\\u0D7A-\\u0D7F\\u0D85-\\u0D96\\u0D9A-\\u0DB1\\u0DB3-\\u0DBB\\u0DBD\\u0DC0-\\u0DC6\\u0E01-\\u0E30\\u0E32\\u0E33\\u0E40-\\u0E46\\u0E81\\u0E82\\u0E84\\u0E87\\u0E88\\u0E8A\\u0E8D\\u0E94-\\u0E97\\u0E99-\\u0E9F\\u0EA1-\\u0EA3\\u0EA5\\u0EA7\\u0EAA\\u0EAB\\u0EAD-\\u0EB0\\u0EB2\\u0EB3\\u0EBD\\u0EC0-\\u0EC4\\u0EC6\\u0EDC-\\u0EDF\\u0F00\\u0F40-\\u0F47\\u0F49-\\u0F6C\\u0F88-\\u0F8C\\u1000-\\u102A\\u103F\\u1050-\\u1055\\u105A-\\u105D\\u1061\\u1065\\u1066\\u106E-\\u1070\\u1075-\\u1081\\u108E\\u10A0-\\u10C5\\u10C7\\u10CD\\u10D0-\\u10FA\\u10FC-\\u1248\\u124A-\\u124D\\u1250-\\u1256\\u1258\\u125A-\\u125D\\u1260-\\u1288\\u128A-\\u128D\\u1290-\\u12B0\\u12B2-\\u12B5\\u12B8-\\u12BE\\u12C0\\u12C2-\\u12C5\\u12C8-\\u12D6\\u12D8-\\u1310\\u1312-\\u1315\\u1318-\\u135A\\u1380-\\u138F\\u13A0-\\u13F4\\u1401-\\u166C\\u166F-\\u167F\\u1681-\\u169A\\u16A0-\\u16EA\\u16EE-\\u16F8\\u1700-\\u170C\\u170E-\\u1711\\u1720-\\u1731\\u1740-\\u1751\\u1760-\\u176C\\u176E-\\u1770\\u1780-\\u17B3\\u17D7\\u17DC\\u1820-\\u1877\\u1880-\\u18A8\\u18AA\\u18B0-\\u18F5\\u1900-\\u191E\\u1950-\\u196D\\u1970-\\u1974\\u1980-\\u19AB\\u19C1-\\u19C7\\u1A00-\\u1A16\\u1A20-\\u1A54\\u1AA7\\u1B05-\\u1B33\\u1B45-\\u1B4B\\u1B83-\\u1BA0\\u1BAE\\u1BAF\\u1BBA-\\u1BE5\\u1C00-\\u1C23\\u1C4D-\\u1C4F\\u1C5A-\\u1C7D\\u1CE9-\\u1CEC\\u1CEE-\\u1CF1\\u1CF5\\u1CF6\\u1D00-\\u1DBF\\u1E00-\\u1F15\\u1F18-\\u1F1D\\u1F20-\\u1F45\\u1F48-\\u1F4D\\u1F50-\\u1F57\\u1F59\\u1F5B\\u1F5D\\u1F5F-\\u1F7D\\u1F80-\\u1FB4\\u1FB6-\\u1FBC\\u1FBE\\u1FC2-\\u1FC4\\u1FC6-\\u1FCC\\u1FD0-\\u1FD3\\u1FD6-\\u1FDB\\u1FE0-\\u1FEC\\u1FF2-\\u1FF4\\u1FF6-\\u1FFC\\u2071\\u207F\\u2090-\\u209C\\u2102\\u2107\\u210A-\\u2113\\u2115\\u2119-\\u211D\\u2124\\u2126\\u2128\\u212A-\\u212D\\u212F-\\u2139\\u213C-\\u213F\\u2145-\\u2149\\u214E\\u2160-\\u2188\\u2C00-\\u2C2E\\u2C30-\\u2C5E\\u2C60-\\u2CE4\\u2CEB-\\u2CEE\\u2CF2\\u2CF3\\u2D00-\\u2D25\\u2D27\\u2D2D\\u2D30-\\u2D67\\u2D6F\\u2D80-\\u2D96\\u2DA0-\\u2DA6\\u2DA8-\\u2DAE\\u2DB0-\\u2DB6\\u2DB8-\\u2DBE\\u2DC0-\\u2DC6\\u2DC8-\\u2DCE\\u2DD0-\\u2DD6\\u2DD8-\\u2DDE\\u2E2F\\u3005-\\u3007\\u3021-\\u3029\\u3031-\\u3035\\u3038-\\u303C\\u3041-\\u3096\\u309D-\\u309F\\u30A1-\\u30FA\\u30FC-\\u30FF\\u3105-\\u312D\\u3131-\\u318E\\u31A0-\\u31BA\\u31F0-\\u31FF\\u3400-\\u4DB5\\u4E00-\\u9FCC\\uA000-\\uA48C\\uA4D0-\\uA4FD\\uA500-\\uA60C\\uA610-\\uA61F\\uA62A\\uA62B\\uA640-\\uA66E\\uA67F-\\uA69D\\uA6A0-\\uA6EF\\uA717-\\uA71F\\uA722-\\uA788\\uA78B-\\uA78E\\uA790-\\uA7AD\\uA7B0\\uA7B1\\uA7F7-\\uA801\\uA803-\\uA805\\uA807-\\uA80A\\uA80C-\\uA822\\uA840-\\uA873\\uA882-\\uA8B3\\uA8F2-\\uA8F7\\uA8FB\\uA90A-\\uA925\\uA930-\\uA946\\uA960-\\uA97C\\uA984-\\uA9B2\\uA9CF\\uA9E0-\\uA9E4\\uA9E6-\\uA9EF\\uA9FA-\\uA9FE\\uAA00-\\uAA28\\uAA40-\\uAA42\\uAA44-\\uAA4B\\uAA60-\\uAA76\\uAA7A\\uAA7E-\\uAAAF\\uAAB1\\uAAB5\\uAAB6\\uAAB9-\\uAABD\\uAAC0\\uAAC2\\uAADB-\\uAADD\\uAAE0-\\uAAEA\\uAAF2-\\uAAF4\\uAB01-\\uAB06\\uAB09-\\uAB0E\\uAB11-\\uAB16\\uAB20-\\uAB26\\uAB28-\\uAB2E\\uAB30-\\uAB5A\\uAB5C-\\uAB5F\\uAB64\\uAB65\\uABC0-\\uABE2\\uAC00-\\uD7A3\\uD7B0-\\uD7C6\\uD7CB-\\uD7FB\\uF900-\\uFA6D\\uFA70-\\uFAD9\\uFB00-\\uFB06\\uFB13-\\uFB17\\uFB1D\\uFB1F-\\uFB28\\uFB2A-\\uFB36\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFBB1\\uFBD3-\\uFD3D\\uFD50-\\uFD8F\\uFD92-\\uFDC7\\uFDF0-\\uFDFB\\uFE70-\\uFE74\\uFE76-\\uFEFC\\uFF21-\\uFF3A\\uFF41-\\uFF5A\\uFF66-\\uFFBE\\uFFC2-\\uFFC7\\uFFCA-\\uFFCF\\uFFD2-\\uFFD7\\uFFDA-\\uFFDC]"),ee=new RegExp("[\\xAA\\xB5\\xBA\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\u02C1\\u02C6-\\u02D1\\u02E0-\\u02E4\\u02EC\\u02EE\\u0300-\\u0374\\u0376\\u0377\\u037A-\\u037D\\u037F\\u0386\\u0388-\\u038A\\u038C\\u038E-\\u03A1\\u03A3-\\u03F5\\u03F7-\\u0481\\u0483-\\u0487\\u048A-\\u052F\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u0591-\\u05BD\\u05BF\\u05C1\\u05C2\\u05C4\\u05C5\\u05C7\\u05D0-\\u05EA\\u05F0-\\u05F2\\u0610-\\u061A\\u0620-\\u0669\\u066E-\\u06D3\\u06D5-\\u06DC\\u06DF-\\u06E8\\u06EA-\\u06FC\\u06FF\\u0710-\\u074A\\u074D-\\u07B1\\u07C0-\\u07F5\\u07FA\\u0800-\\u082D\\u0840-\\u085B\\u08A0-\\u08B2\\u08E4-\\u0963\\u0966-\\u096F\\u0971-\\u0983\\u0985-\\u098C\\u098F\\u0990\\u0993-\\u09A8\\u09AA-\\u09B0\\u09B2\\u09B6-\\u09B9\\u09BC-\\u09C4\\u09C7\\u09C8\\u09CB-\\u09CE\\u09D7\\u09DC\\u09DD\\u09DF-\\u09E3\\u09E6-\\u09F1\\u0A01-\\u0A03\\u0A05-\\u0A0A\\u0A0F\\u0A10\\u0A13-\\u0A28\\u0A2A-\\u0A30\\u0A32\\u0A33\\u0A35\\u0A36\\u0A38\\u0A39\\u0A3C\\u0A3E-\\u0A42\\u0A47\\u0A48\\u0A4B-\\u0A4D\\u0A51\\u0A59-\\u0A5C\\u0A5E\\u0A66-\\u0A75\\u0A81-\\u0A83\\u0A85-\\u0A8D\\u0A8F-\\u0A91\\u0A93-\\u0AA8\\u0AAA-\\u0AB0\\u0AB2\\u0AB3\\u0AB5-\\u0AB9\\u0ABC-\\u0AC5\\u0AC7-\\u0AC9\\u0ACB-\\u0ACD\\u0AD0\\u0AE0-\\u0AE3\\u0AE6-\\u0AEF\\u0B01-\\u0B03\\u0B05-\\u0B0C\\u0B0F\\u0B10\\u0B13-\\u0B28\\u0B2A-\\u0B30\\u0B32\\u0B33\\u0B35-\\u0B39\\u0B3C-\\u0B44\\u0B47\\u0B48\\u0B4B-\\u0B4D\\u0B56\\u0B57\\u0B5C\\u0B5D\\u0B5F-\\u0B63\\u0B66-\\u0B6F\\u0B71\\u0B82\\u0B83\\u0B85-\\u0B8A\\u0B8E-\\u0B90\\u0B92-\\u0B95\\u0B99\\u0B9A\\u0B9C\\u0B9E\\u0B9F\\u0BA3\\u0BA4\\u0BA8-\\u0BAA\\u0BAE-\\u0BB9\\u0BBE-\\u0BC2\\u0BC6-\\u0BC8\\u0BCA-\\u0BCD\\u0BD0\\u0BD7\\u0BE6-\\u0BEF\\u0C00-\\u0C03\\u0C05-\\u0C0C\\u0C0E-\\u0C10\\u0C12-\\u0C28\\u0C2A-\\u0C39\\u0C3D-\\u0C44\\u0C46-\\u0C48\\u0C4A-\\u0C4D\\u0C55\\u0C56\\u0C58\\u0C59\\u0C60-\\u0C63\\u0C66-\\u0C6F\\u0C81-\\u0C83\\u0C85-\\u0C8C\\u0C8E-\\u0C90\\u0C92-\\u0CA8\\u0CAA-\\u0CB3\\u0CB5-\\u0CB9\\u0CBC-\\u0CC4\\u0CC6-\\u0CC8\\u0CCA-\\u0CCD\\u0CD5\\u0CD6\\u0CDE\\u0CE0-\\u0CE3\\u0CE6-\\u0CEF\\u0CF1\\u0CF2\\u0D01-\\u0D03\\u0D05-\\u0D0C\\u0D0E-\\u0D10\\u0D12-\\u0D3A\\u0D3D-\\u0D44\\u0D46-\\u0D48\\u0D4A-\\u0D4E\\u0D57\\u0D60-\\u0D63\\u0D66-\\u0D6F\\u0D7A-\\u0D7F\\u0D82\\u0D83\\u0D85-\\u0D96\\u0D9A-\\u0DB1\\u0DB3-\\u0DBB\\u0DBD\\u0DC0-\\u0DC6\\u0DCA\\u0DCF-\\u0DD4\\u0DD6\\u0DD8-\\u0DDF\\u0DE6-\\u0DEF\\u0DF2\\u0DF3\\u0E01-\\u0E3A\\u0E40-\\u0E4E\\u0E50-\\u0E59\\u0E81\\u0E82\\u0E84\\u0E87\\u0E88\\u0E8A\\u0E8D\\u0E94-\\u0E97\\u0E99-\\u0E9F\\u0EA1-\\u0EA3\\u0EA5\\u0EA7\\u0EAA\\u0EAB\\u0EAD-\\u0EB9\\u0EBB-\\u0EBD\\u0EC0-\\u0EC4\\u0EC6\\u0EC8-\\u0ECD\\u0ED0-\\u0ED9\\u0EDC-\\u0EDF\\u0F00\\u0F18\\u0F19\\u0F20-\\u0F29\\u0F35\\u0F37\\u0F39\\u0F3E-\\u0F47\\u0F49-\\u0F6C\\u0F71-\\u0F84\\u0F86-\\u0F97\\u0F99-\\u0FBC\\u0FC6\\u1000-\\u1049\\u1050-\\u109D\\u10A0-\\u10C5\\u10C7\\u10CD\\u10D0-\\u10FA\\u10FC-\\u1248\\u124A-\\u124D\\u1250-\\u1256\\u1258\\u125A-\\u125D\\u1260-\\u1288\\u128A-\\u128D\\u1290-\\u12B0\\u12B2-\\u12B5\\u12B8-\\u12BE\\u12C0\\u12C2-\\u12C5\\u12C8-\\u12D6\\u12D8-\\u1310\\u1312-\\u1315\\u1318-\\u135A\\u135D-\\u135F\\u1380-\\u138F\\u13A0-\\u13F4\\u1401-\\u166C\\u166F-\\u167F\\u1681-\\u169A\\u16A0-\\u16EA\\u16EE-\\u16F8\\u1700-\\u170C\\u170E-\\u1714\\u1720-\\u1734\\u1740-\\u1753\\u1760-\\u176C\\u176E-\\u1770\\u1772\\u1773\\u1780-\\u17D3\\u17D7\\u17DC\\u17DD\\u17E0-\\u17E9\\u180B-\\u180D\\u1810-\\u1819\\u1820-\\u1877\\u1880-\\u18AA\\u18B0-\\u18F5\\u1900-\\u191E\\u1920-\\u192B\\u1930-\\u193B\\u1946-\\u196D\\u1970-\\u1974\\u1980-\\u19AB\\u19B0-\\u19C9\\u19D0-\\u19D9\\u1A00-\\u1A1B\\u1A20-\\u1A5E\\u1A60-\\u1A7C\\u1A7F-\\u1A89\\u1A90-\\u1A99\\u1AA7\\u1AB0-\\u1ABD\\u1B00-\\u1B4B\\u1B50-\\u1B59\\u1B6B-\\u1B73\\u1B80-\\u1BF3\\u1C00-\\u1C37\\u1C40-\\u1C49\\u1C4D-\\u1C7D\\u1CD0-\\u1CD2\\u1CD4-\\u1CF6\\u1CF8\\u1CF9\\u1D00-\\u1DF5\\u1DFC-\\u1F15\\u1F18-\\u1F1D\\u1F20-\\u1F45\\u1F48-\\u1F4D\\u1F50-\\u1F57\\u1F59\\u1F5B\\u1F5D\\u1F5F-\\u1F7D\\u1F80-\\u1FB4\\u1FB6-\\u1FBC\\u1FBE\\u1FC2-\\u1FC4\\u1FC6-\\u1FCC\\u1FD0-\\u1FD3\\u1FD6-\\u1FDB\\u1FE0-\\u1FEC\\u1FF2-\\u1FF4\\u1FF6-\\u1FFC\\u200C\\u200D\\u203F\\u2040\\u2054\\u2071\\u207F\\u2090-\\u209C\\u20D0-\\u20DC\\u20E1\\u20E5-\\u20F0\\u2102\\u2107\\u210A-\\u2113\\u2115\\u2119-\\u211D\\u2124\\u2126\\u2128\\u212A-\\u212D\\u212F-\\u2139\\u213C-\\u213F\\u2145-\\u2149\\u214E\\u2160-\\u2188\\u2C00-\\u2C2E\\u2C30-\\u2C5E\\u2C60-\\u2CE4\\u2CEB-\\u2CF3\\u2D00-\\u2D25\\u2D27\\u2D2D\\u2D30-\\u2D67\\u2D6F\\u2D7F-\\u2D96\\u2DA0-\\u2DA6\\u2DA8-\\u2DAE\\u2DB0-\\u2DB6\\u2DB8-\\u2DBE\\u2DC0-\\u2DC6\\u2DC8-\\u2DCE\\u2DD0-\\u2DD6\\u2DD8-\\u2DDE\\u2DE0-\\u2DFF\\u2E2F\\u3005-\\u3007\\u3021-\\u302F\\u3031-\\u3035\\u3038-\\u303C\\u3041-\\u3096\\u3099\\u309A\\u309D-\\u309F\\u30A1-\\u30FA\\u30FC-\\u30FF\\u3105-\\u312D\\u3131-\\u318E\\u31A0-\\u31BA\\u31F0-\\u31FF\\u3400-\\u4DB5\\u4E00-\\u9FCC\\uA000-\\uA48C\\uA4D0-\\uA4FD\\uA500-\\uA60C\\uA610-\\uA62B\\uA640-\\uA66F\\uA674-\\uA67D\\uA67F-\\uA69D\\uA69F-\\uA6F1\\uA717-\\uA71F\\uA722-\\uA788\\uA78B-\\uA78E\\uA790-\\uA7AD\\uA7B0\\uA7B1\\uA7F7-\\uA827\\uA840-\\uA873\\uA880-\\uA8C4\\uA8D0-\\uA8D9\\uA8E0-\\uA8F7\\uA8FB\\uA900-\\uA92D\\uA930-\\uA953\\uA960-\\uA97C\\uA980-\\uA9C0\\uA9CF-\\uA9D9\\uA9E0-\\uA9FE\\uAA00-\\uAA36\\uAA40-\\uAA4D\\uAA50-\\uAA59\\uAA60-\\uAA76\\uAA7A-\\uAAC2\\uAADB-\\uAADD\\uAAE0-\\uAAEF\\uAAF2-\\uAAF6\\uAB01-\\uAB06\\uAB09-\\uAB0E\\uAB11-\\uAB16\\uAB20-\\uAB26\\uAB28-\\uAB2E\\uAB30-\\uAB5A\\uAB5C-\\uAB5F\\uAB64\\uAB65\\uABC0-\\uABEA\\uABEC\\uABED\\uABF0-\\uABF9\\uAC00-\\uD7A3\\uD7B0-\\uD7C6\\uD7CB-\\uD7FB\\uF900-\\uFA6D\\uFA70-\\uFAD9\\uFB00-\\uFB06\\uFB13-\\uFB17\\uFB1D-\\uFB28\\uFB2A-\\uFB36\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFBB1\\uFBD3-\\uFD3D\\uFD50-\\uFD8F\\uFD92-\\uFDC7\\uFDF0-\\uFDFB\\uFE00-\\uFE0F\\uFE20-\\uFE2D\\uFE33\\uFE34\\uFE4D-\\uFE4F\\uFE70-\\uFE74\\uFE76-\\uFEFC\\uFF10-\\uFF19\\uFF21-\\uFF3A\\uFF3F\\uFF41-\\uFF5A\\uFF66-\\uFFBE\\uFFC2-\\uFFC7\\uFFCA-\\uFFCF\\uFFD2-\\uFFD7\\uFFDA-\\uFFDC]");function te(e,t){if(!e)throw new Error("ASSERT: "+t)}function ne(e){return e>=48&&e<=57}function re(e){return"0123456789abcdefABCDEF".indexOf(e)>=0}function ie(e){return"01234567".indexOf(e)>=0}function oe(e){return 32===e||9===e||11===e||12===e||160===e||e>=5760&&[5760,6158,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279].indexOf(e)>=0}function ae(e){return 10===e||13===e||8232===e||8233===e}function se(e){return 36===e||95===e||e>=65&&e<=90||e>=97&&e<=122||92===e||e>=128&&K.test(String.fromCharCode(e))}function ue(e){return 36===e||95===e||e>=65&&e<=90||e>=97&&e<=122||e>=48&&e<=57||92===e||e>=128&&ee.test(String.fromCharCode(e))}const ce={if:1,in:1,do:1,var:1,for:1,new:1,try:1,let:1,this:1,else:1,case:1,void:1,with:1,enum:1,while:1,break:1,catch:1,throw:1,const:1,yield:1,class:1,super:1,return:1,typeof:1,delete:1,switch:1,export:1,import:1,public:1,static:1,default:1,finally:1,extends:1,package:1,private:1,function:1,continue:1,debugger:1,interface:1,protected:1,instanceof:1,implements:1};function le(){for(;y<b;){const e=v.charCodeAt(y);if(!oe(e)&&!ae(e))break;++y}}function fe(e){var t,n,r,i=0;for(n="u"===e?4:2,t=0;t<n;++t)y<b&&re(v[y])?(r=v[y++],i=16*i+"0123456789abcdef".indexOf(r.toLowerCase())):Le({},U,Q);return String.fromCharCode(i)}function de(){var e,t,n,r;for(t=0,"}"===(e=v[y])&&Le({},U,Q);y<b&&re(e=v[y++]);)t=16*t+"0123456789abcdef".indexOf(e.toLowerCase());return(t>1114111||"}"!==e)&&Le({},U,Q),t<=65535?String.fromCharCode(t):(n=55296+(t-65536>>10),r=56320+(t-65536&1023),String.fromCharCode(n,r))}function he(){var e,t;for(e=v.charCodeAt(y++),t=String.fromCharCode(e),92===e&&(117!==v.charCodeAt(y)&&Le({},U,Q),++y,(e=fe("u"))&&"\\"!==e&&se(e.charCodeAt(0))||Le({},U,Q),t=e);y<b&&ue(e=v.charCodeAt(y));)++y,t+=String.fromCharCode(e),92===e&&(t=t.substr(0,t.length-1),117!==v.charCodeAt(y)&&Le({},U,Q),++y,(e=fe("u"))&&"\\"!==e&&ue(e.charCodeAt(0))||Le({},U,Q),t+=e);return t}function pe(){var e,t;for(e=y++;y<b;){if(92===(t=v.charCodeAt(y)))return y=e,he();if(!ue(t))break;++y}return v.slice(e,y)}function ge(){var e,t;return e=y,{type:1===(t=92===v.charCodeAt(y)?he():pe()).length?A:ce.hasOwnProperty(t)?k:"null"===t?E:"true"===t||"false"===t?w:A,value:t,start:e,end:y}}function me(){var e,t,n,r,i=y,o=v.charCodeAt(y),a=v[y];switch(o){case 46:case 40:case 41:case 59:case 44:case 123:case 125:case 91:case 93:case 58:case 63:case 126:return++y,{type:C,value:String.fromCharCode(o),start:i,end:y};default:if(61===(e=v.charCodeAt(y+1)))switch(o){case 43:case 45:case 47:case 60:case 62:case 94:case 124:case 37:case 38:case 42:return y+=2,{type:C,value:String.fromCharCode(o)+String.fromCharCode(e),start:i,end:y};case 33:case 61:return y+=2,61===v.charCodeAt(y)&&++y,{type:C,value:v.slice(i,y),start:i,end:y}}}return">>>="===(r=v.substr(y,4))?{type:C,value:r,start:i,end:y+=4}:">>>"===(n=r.substr(0,3))||"<<="===n||">>="===n?{type:C,value:n,start:i,end:y+=3}:a===(t=n.substr(0,2))[1]&&"+-<>&|".indexOf(a)>=0||"=>"===t?{type:C,value:t,start:i,end:y+=2}:("//"===t&&Le({},U,Q),"<>=!+-*%&|^/".indexOf(a)>=0?(++y,{type:C,value:a,start:i,end:y}):void Le({},U,Q))}function ve(e){let t="";for(;y<b&&re(v[y]);)t+=v[y++];return 0===t.length&&Le({},U,Q),se(v.charCodeAt(y))&&Le({},U,Q),{type:D,value:parseInt("0x"+t,16),start:e,end:y}}function ye(e){let t="0"+v[y++];for(;y<b&&ie(v[y]);)t+=v[y++];return(se(v.charCodeAt(y))||ne(v.charCodeAt(y)))&&Le({},U,Q),{type:D,value:parseInt(t,8),octal:!0,start:e,end:y}}function be(){var e,t,n;if(te(ne((n=v[y]).charCodeAt(0))||"."===n,"Numeric literal must start with a decimal digit or a decimal point"),t=y,e="","."!==n){if(e=v[y++],n=v[y],"0"===e){if("x"===n||"X"===n)return++y,ve(t);if(ie(n))return ye(t);n&&ne(n.charCodeAt(0))&&Le({},U,Q)}for(;ne(v.charCodeAt(y));)e+=v[y++];n=v[y]}if("."===n){for(e+=v[y++];ne(v.charCodeAt(y));)e+=v[y++];n=v[y]}if("e"===n||"E"===n)if(e+=v[y++],"+"!==(n=v[y])&&"-"!==n||(e+=v[y++]),ne(v.charCodeAt(y)))for(;ne(v.charCodeAt(y));)e+=v[y++];else Le({},U,Q);return se(v.charCodeAt(y))&&Le({},U,Q),{type:D,value:parseFloat(e),start:t,end:y}}function xe(){var e,t,n,r,i="",o=!1;for(te("'"===(e=v[y])||'"'===e,"String literal must starts with a quote"),t=y,++y;y<b;){if((n=v[y++])===e){e="";break}if("\\"===n)if((n=v[y++])&&ae(n.charCodeAt(0)))"\r"===n&&"\n"===v[y]&&++y;else switch(n){case"u":case"x":"{"===v[y]?(++y,i+=de()):i+=fe(n);break;case"n":i+="\n";break;case"r":i+="\r";break;case"t":i+="\t";break;case"b":i+="\b";break;case"f":i+="\f";break;case"v":i+="\v";break;default:ie(n)?(0!==(r="01234567".indexOf(n))&&(o=!0),y<b&&ie(v[y])&&(o=!0,r=8*r+"01234567".indexOf(v[y++]),"0123".indexOf(n)>=0&&y<b&&ie(v[y])&&(r=8*r+"01234567".indexOf(v[y++]))),i+=String.fromCharCode(r)):i+=n}else{if(ae(n.charCodeAt(0)))break;i+=n}}return""!==e&&Le({},U,Q),{type:M,value:i,octal:o,start:t,end:y}}function we(e,t){let n=e;t.indexOf("u")>=0&&(n=n.replace(/\\u\{([0-9a-fA-F]+)\}/g,((e,t)=>{if(parseInt(t,16)<=1114111)return"x";Le({},G)})).replace(/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,"x"));try{new RegExp(n)}catch(r){Le({},G)}try{return new RegExp(e,t)}catch(i){return null}}function _e(){var e,t,n,r;for(te("/"===(e=v[y]),"Regular expression literal must start with a slash"),t=v[y++],n=!1,r=!1;y<b;)if(t+=e=v[y++],"\\"===e)ae((e=v[y++]).charCodeAt(0))&&Le({},$),t+=e;else if(ae(e.charCodeAt(0)))Le({},$);else if(n)"]"===e&&(n=!1);else{if("/"===e){r=!0;break}"["===e&&(n=!0)}return r||Le({},$),{value:t.substr(1,t.length-2),literal:t}}function Ae(){var e,t,n;for(t="",n="";y<b&&ue((e=v[y]).charCodeAt(0));)++y,"\\"===e&&y<b?Le({},U,Q):(n+=e,t+=e);return n.search(/[^gimuy]/g)>=0&&Le({},G,n),{value:n,literal:t}}function ke(){var e,t,n,r;return x=null,le(),e=y,t=_e(),n=Ae(),r=we(t.value,n.value),{literal:t.literal+n.literal,value:r,regex:{pattern:t.value,flags:n.value},start:e,end:y}}function Ee(e){return e.type===A||e.type===k||e.type===w||e.type===E}function De(){if(le(),y>=b)return{type:_,start:y,end:y};const e=v.charCodeAt(y);return se(e)?ge():40===e||41===e||59===e?me():39===e||34===e?xe():46===e?ne(v.charCodeAt(y+1))?be():me():ne(e)?be():me()}function Ce(){const e=x;return y=e.end,x=De(),y=e.end,e}function Me(){const e=y;x=De(),y=e}function Fe(e){const t=new p(S);return t.elements=e,t}function Se(e,t,n){const r=new p("||"===e||"&&"===e?B:T);return r.operator=e,r.left=t,r.right=n,r}function Te(e,t){const n=new p(O);return n.callee=e,n.arguments=t,n}function Oe(e,t,n){const r=new p(N);return r.test=e,r.consequent=t,r.alternate=n,r}function Ne(e){const t=new p(P);return t.name=e,t}function Pe(e){const t=new p(R);return t.value=e.value,t.raw=v.slice(e.start,e.end),e.regex&&("//"===t.raw&&(t.raw="/(?:)/"),t.regex=e.regex),t}function Re(e,t,n){const r=new p(z);return r.computed="["===e,r.object=t,r.property=n,r.computed||(n.member=!0),r}function Be(e){const t=new p(j);return t.properties=e,t}function ze(e,t,n){const r=new p(L);return r.key=t,r.value=n,r.kind=e,r}function je(e,t){const n=new p(I);return n.operator=e,n.argument=t,n.prefix=!0,n}function Le(e,t){var n,r=Array.prototype.slice.call(arguments,2),i=t.replace(/%(\d)/g,((e,t)=>(te(t<r.length,"Message reference must be in range"),r[t])));throw(n=new Error(i)).index=y,n.description=i,n}function Ie(e){e.type===_&&Le(e,V),e.type===D&&Le(e,q),e.type===M&&Le(e,W),e.type===A&&Le(e,H),e.type===k&&Le(e,Y),Le(e,U,e.value)}function Ue(e){const t=Ce();t.type===C&&t.value===e||Ie(t)}function qe(e){return x.type===C&&x.value===e}function We(e){return x.type===k&&x.value===e}function He(){const e=[];for(y=x.start,Ue("[");!qe("]");)qe(",")?(Ce(),e.push(null)):(e.push(at()),qe("]")||Ue(","));return Ce(),Fe(e)}function Ye(){y=x.start;const e=Ce();return e.type===M||e.type===D?(e.octal&&Le(e,X),Pe(e)):Ne(e.value)}function Ve(){var e,t,n;return y=x.start,(e=x).type===A?(n=Ye(),Ue(":"),ze("init",n,at())):e.type!==_&&e.type!==C?(t=Ye(),Ue(":"),ze("init",t,at())):void Ie(e)}function Ge(){var e,t,n=[],r={},i=String;for(y=x.start,Ue("{");!qe("}");)t="$"+((e=Ve()).key.type===P?e.key.name:i(e.key.value)),Object.prototype.hasOwnProperty.call(r,t)?Le({},J):r[t]=!0,n.push(e),qe("}")||Ue(",");return Ue("}"),Be(n)}function $e(){Ue("(");const e=st();return Ue(")"),e}const Xe={if:1};function Je(){var e,t,n;if(qe("("))return $e();if(qe("["))return He();if(qe("{"))return Ge();if(e=x.type,y=x.start,e===A||Xe[x.value])n=Ne(Ce().value);else if(e===M||e===D)x.octal&&Le(x,X),n=Pe(Ce());else{if(e===k)throw new Error(Z);e===w?((t=Ce()).value="true"===t.value,n=Pe(t)):e===E?((t=Ce()).value=null,n=Pe(t)):qe("/")||qe("/=")?(n=Pe(ke()),Me()):Ie(Ce())}return n}function Qe(){const e=[];if(Ue("("),!qe(")"))for(;y<b&&(e.push(at()),!qe(")"));)Ue(",");return Ue(")"),e}function Ze(){y=x.start;const e=Ce();return Ee(e)||Ie(e),Ne(e.value)}function Ke(){return Ue("."),Ze()}function et(){Ue("[");const e=st();return Ue("]"),e}function tt(){var e;for(e=Je();;)if(qe("."))e=Re(".",e,Ke());else if(qe("("))e=Te(e,Qe());else{if(!qe("["))break;e=Re("[",e,et())}return e}function nt(){const e=tt();if(x.type===C&&(qe("++")||qe("--")))throw new Error(Z);return e}function rt(){var e,t;if(x.type!==C&&x.type!==k)t=nt();else{if(qe("++")||qe("--"))throw new Error(Z);if(qe("+")||qe("-")||qe("~")||qe("!"))e=Ce(),t=rt(),t=je(e.value,t);else{if(We("delete")||We("void")||We("typeof"))throw new Error(Z);t=nt()}}return t}function it(e){let t=0;if(e.type!==C&&e.type!==k)return 0;switch(e.value){case"||":t=1;break;case"&&":t=2;break;case"|":t=3;break;case"^":t=4;break;case"&":t=5;break;case"==":case"!=":case"===":case"!==":t=6;break;case"<":case">":case"<=":case">=":case"instanceof":case"in":t=7;break;case"<<":case">>":case">>>":t=8;break;case"+":case"-":t=9;break;case"*":case"/":case"%":t=11}return t}function ot(){var e,t,n,r,i,o,a,s,u,c;if(e=x,u=rt(),0===(i=it(r=x)))return u;for(r.prec=i,Ce(),t=[e,x],o=[u,r,a=rt()];(i=it(x))>0;){for(;o.length>2&&i<=o[o.length-2].prec;)a=o.pop(),s=o.pop().value,u=o.pop(),t.pop(),n=Se(s,u,a),o.push(n);(r=Ce()).prec=i,o.push(r),t.push(x),n=rt(),o.push(n)}for(n=o[c=o.length-1],t.pop();c>1;)t.pop(),n=Se(o[c-1].value,o[c-2],n),c-=2;return n}function at(){var e,t;return e=ot(),qe("?")&&(Ce(),t=at(),Ue(":"),e=Oe(e,t,at())),e}function st(){const e=at();if(qe(","))throw new Error(Z);return e}function ut(e){y=0,b=(v=e).length,x=null,Me();const t=st();if(x.type!==_)throw new Error("Unexpect token after expression.");return t}var ct={NaN:"NaN",E:"Math.E",LN2:"Math.LN2",LN10:"Math.LN10",LOG2E:"Math.LOG2E",LOG10E:"Math.LOG10E",PI:"Math.PI",SQRT1_2:"Math.SQRT1_2",SQRT2:"Math.SQRT2",MIN_VALUE:"Number.MIN_VALUE",MAX_VALUE:"Number.MAX_VALUE"};function lt(e){function n(t,n,r,i){let o=e(n[0]);return r&&(o=r+"("+o+")",0===r.lastIndexOf("new ",0)&&(o="("+o+")")),o+"."+t+(i<0?"":0===i?"()":"("+n.slice(1).map(e).join(",")+")")}function r(e,t,r){return i=>n(e,i,t,r)}const i="new Date",o="String",a="RegExp";return{isNaN:"Number.isNaN",isFinite:"Number.isFinite",abs:"Math.abs",acos:"Math.acos",asin:"Math.asin",atan:"Math.atan",atan2:"Math.atan2",ceil:"Math.ceil",cos:"Math.cos",exp:"Math.exp",floor:"Math.floor",log:"Math.log",max:"Math.max",min:"Math.min",pow:"Math.pow",random:"Math.random",round:"Math.round",sin:"Math.sin",sqrt:"Math.sqrt",tan:"Math.tan",clamp:function(n){n.length<3&&t.error("Missing arguments to clamp function."),n.length>3&&t.error("Too many arguments to clamp function.");const r=n.map(e);return"Math.max("+r[1]+", Math.min("+r[2]+","+r[0]+"))"},now:"Date.now",utc:"Date.UTC",datetime:i,date:r("getDate",i,0),day:r("getDay",i,0),year:r("getFullYear",i,0),month:r("getMonth",i,0),hours:r("getHours",i,0),minutes:r("getMinutes",i,0),seconds:r("getSeconds",i,0),milliseconds:r("getMilliseconds",i,0),time:r("getTime",i,0),timezoneoffset:r("getTimezoneOffset",i,0),utcdate:r("getUTCDate",i,0),utcday:r("getUTCDay",i,0),utcyear:r("getUTCFullYear",i,0),utcmonth:r("getUTCMonth",i,0),utchours:r("getUTCHours",i,0),utcminutes:r("getUTCMinutes",i,0),utcseconds:r("getUTCSeconds",i,0),utcmilliseconds:r("getUTCMilliseconds",i,0),length:r("length",null,-1),parseFloat:"parseFloat",parseInt:"parseInt",upper:r("toUpperCase",o,0),lower:r("toLowerCase",o,0),substring:r("substring",o),split:r("split",o),trim:r("trim",o,0),regexp:a,test:r("test",a),if:function(n){n.length<3&&t.error("Missing arguments to if function."),n.length>3&&t.error("Too many arguments to if function.");const r=n.map(e);return"("+r[0]+"?"+r[1]+":"+r[2]+")"}}}function ft(e){const t=e&&e.length-1;return t&&('"'===e[0]&&'"'===e[t]||"'"===e[0]&&"'"===e[t])?e.slice(1,-1):e}function dt(e){const n=(e=e||{}).allowed?t.toSet(e.allowed):{},r=e.forbidden?t.toSet(e.forbidden):{},i=e.constants||ct,o=(e.functions||lt)(d),a=e.globalvar,s=e.fieldvar,u=t.isFunction(a)?a:e=>"".concat(a,'["').concat(e,'"]');let c={},l={},f=0;function d(e){if(t.isString(e))return e;const n=h[e.type];return null==n&&t.error("Unsupported type: "+e.type),n(e)}const h={Literal:e=>e.raw,Identifier:e=>{const o=e.name;return f>0?o:t.hasOwnProperty(r,o)?t.error("Illegal identifier: "+o):t.hasOwnProperty(i,o)?i[o]:t.hasOwnProperty(n,o)?o:(c[o]=1,u(o))},MemberExpression:e=>{const t=!e.computed,n=d(e.object);t&&(f+=1);const r=d(e.property);return n===s&&(l[ft(r)]=1),t&&(f-=1),n+(t?"."+r:"["+r+"]")},CallExpression:e=>{"Identifier"!==e.callee.type&&t.error("Illegal callee type: "+e.callee.type);const n=e.callee.name,r=e.arguments,i=t.hasOwnProperty(o,n)&&o[n];return i||t.error("Unrecognized function: "+n),t.isFunction(i)?i(r):i+"("+r.map(d).join(",")+")"},ArrayExpression:e=>"["+e.elements.map(d).join(",")+"]",BinaryExpression:e=>"("+d(e.left)+" "+e.operator+" "+d(e.right)+")",UnaryExpression:e=>"("+e.operator+d(e.argument)+")",ConditionalExpression:e=>"("+d(e.test)+"?"+d(e.consequent)+":"+d(e.alternate)+")",LogicalExpression:e=>"("+d(e.left)+e.operator+d(e.right)+")",ObjectExpression:e=>"{"+e.properties.map(d).join(",")+"}",Property:e=>{f+=1;const t=d(e.key);return f-=1,t+":"+d(e.value)}};function p(e){const t={code:d(e),globals:Object.keys(c),fields:Object.keys(l)};return c={},l={},t}return p.functions=o,p.constants=i,p}e.ASTNode=p,e.ArrayExpression=a,e.BinaryExpression=s,e.CallExpression=u,e.ConditionalExpression=c,e.Identifier=o,e.Literal=r,e.LogicalExpression=l,e.MemberExpression=f,e.ObjectExpression=d,e.Property=i,e.RawCode=n,e.UnaryExpression=h,e.codegen=dt,e.constants=ct,e.functions=lt,e.parse=ut,Object.defineProperty(e,"__esModule",{value:!0})}(t,n(1176))},1717:function(e,t,n){!function(e,t,n){"use strict";function r(e){const t=this,n=e.operators||[];return e.background&&(t.background=e.background),e.eventConfig&&(t.eventConfig=e.eventConfig),e.locale&&(t.locale=e.locale),n.forEach((e=>t.parseOperator(e))),n.forEach((e=>t.parseOperatorParameters(e))),(e.streams||[]).forEach((e=>t.parseStream(e))),(e.updates||[]).forEach((e=>t.parseUpdate(e))),t.resolve()}const i=t.toSet(["rule"]),o=t.toSet(["group","image","rect"]);function a(e,t){let n="";return i[t]||(e.x2&&(e.x?(o[t]&&(n+="if(o.x>o.x2)$=o.x,o.x=o.x2,o.x2=$;"),n+="o.width=o.x2-o.x;"):n+="o.x=o.x2-(o.width||0);"),e.xc&&(n+="o.x=o.xc-(o.width||0)/2;"),e.y2&&(e.y?(o[t]&&(n+="if(o.y>o.y2)$=o.y,o.y=o.y2,o.y2=$;"),n+="o.height=o.y2-o.y;"):n+="o.y=o.y2-(o.height||0);"),e.yc&&(n+="o.y=o.yc-(o.height||0)/2;")),n}function s(e){return(e+"").toLowerCase()}function u(e){return"operator"===s(e)}function c(e){return"collect"===s(e)}function l(e,t,n){";"!==n[n.length-1]&&(n="return("+n+");");const r=Function(...t.concat(n));return e&&e.functions?r.bind(e.functions):r}function f(e,t,n,r){return"((u = ".concat(e,") < (v = ").concat(t,") || u == null) && v != null ? ").concat(n,"\n  : (u > v || v == null) && u != null ? ").concat(r,"\n  : ((v = v instanceof Date ? +v : v), (u = u instanceof Date ? +u : u)) !== u && v === v ? ").concat(n,"\n  : v !== v && u === u ? ").concat(r," : ")}var d={operator:(e,t)=>l(e,["_"],t.code),parameter:(e,t)=>l(e,["datum","_"],t.code),event:(e,t)=>l(e,["event"],t.code),handler:(e,t)=>l(e,["_","event"],"var datum=event.item&&event.item.datum;return ".concat(t.code,";")),encode:(e,n)=>{const r=n.marktype,i=n.channels;let o="var o=item,datum=o.datum,m=0,$;";for(const a in i){const e="o["+t.stringValue(a)+"]";o+="$=".concat(i[a].code,";if(").concat(e,"!==$)").concat(e,"=$,m=1;")}return o+=a(i,r),o+="return m;",l(e,["item","_"],o)},codegen:{get(e){const n="[".concat(e.map(t.stringValue).join("]["),"]"),r=Function("_","return _".concat(n,";"));return r.path=n,r},comparator(e,t){let n;const r=(e,r)=>{const i=t[r];let o,a;return e.path?(o="a".concat(e.path),a="b".concat(e.path)):((n=n||{})["f"+r]=e,o="this.f".concat(r,"(a)"),a="this.f".concat(r,"(b)")),f(o,a,-i,i)},i=Function("a","b","var u, v; return "+e.map(r).join("")+"0;");return n?i.bind(n):i}}};function h(e){const t=this;u(e.type)||!e.type?t.operator(e,e.update?t.operatorExpression(e.update):null):t.transform(e,e.type)}function p(e){const n=this;if(e.params){const r=n.get(e.id);r||t.error("Invalid operator id: "+e.id),n.dataflow.connect(r,r.parameters(n.parseParameters(e.params),e.react,e.initonly))}}function g(e,n){n=n||{};const r=this;for(const i in e){const o=e[i];n[i]=t.isArray(o)?o.map((e=>m(e,r,n))):m(o,r,n)}return n}function m(e,n,r){if(!e||!t.isObject(e))return e;for(let i,o=0,a=v.length;o<a;++o)if(i=v[o],t.hasOwnProperty(e,i.key))return i.parse(e,n,r);return e}var v=[{key:"$ref",parse:y},{key:"$key",parse:x},{key:"$expr",parse:b},{key:"$field",parse:w},{key:"$encode",parse:A},{key:"$compare",parse:_},{key:"$context",parse:k},{key:"$subflow",parse:E},{key:"$tupleid",parse:D}];function y(e,n){return n.get(e.$ref)||t.error("Operator not defined: "+e.$ref)}function b(e,n,r){e.$params&&n.parseParameters(e.$params,r);const i="e:"+e.$expr.code+"_"+e.$name;return n.fn[i]||(n.fn[i]=t.accessor(n.parameterExpression(e.$expr),e.$fields,e.$name))}function x(e,n){const r="k:"+e.$key+"_"+!!e.$flat;return n.fn[r]||(n.fn[r]=t.key(e.$key,e.$flat,n.expr.codegen))}function w(e,n){if(!e.$field)return null;const r="f:"+e.$field+"_"+e.$name;return n.fn[r]||(n.fn[r]=t.field(e.$field,e.$name,n.expr.codegen))}function _(e,r){const i="c:"+e.$compare+"_"+e.$order,o=t.array(e.$compare).map((e=>e&&e.$tupleid?n.tupleid:e));return r.fn[i]||(r.fn[i]=t.compare(o,e.$order,r.expr.codegen))}function A(e,n){const r=e.$encode,i={};for(const o in r){const e=r[o];i[o]=t.accessor(n.encodeExpression(e.$expr),e.$fields),i[o].output=e.$output}return i}function k(e,t){return t}function E(e,t){const n=e.$subflow;return function(e,r,i){const o=t.fork().parse(n),a=o.get(n.operators[0].id),s=o.signals.parent;return s&&s.set(i),a.detachSubflow=()=>t.detach(o),a}}function D(){return n.tupleid}function C(e){var n,r=this,i=null!=e.filter?r.eventExpression(e.filter):void 0,o=null!=e.stream?r.get(e.stream):void 0;e.source?o=r.events(e.source,e.type,i):e.merge&&(o=(n=e.merge.map((e=>r.get(e))))[0].merge.apply(n[0],n.slice(1))),e.between&&(n=e.between.map((e=>r.get(e))),o=o.between(n[0],n[1])),e.filter&&(o=o.filter(i)),null!=e.throttle&&(o=o.throttle(+e.throttle)),null!=e.debounce&&(o=o.debounce(+e.debounce)),null==o&&t.error("Invalid stream definition: "+JSON.stringify(e)),e.consume&&o.consume(!0),r.stream(e,o)}function M(e){var n=this,r=t.isObject(r=e.source)?r.$ref:r,i=n.get(r),o=null,a=e.update,s=void 0;i||t.error("Source not defined: "+e.source),o=e.target&&e.target.$expr?n.eventExpression(e.target.$expr):n.get(e.target),a&&a.$expr&&(a.$params&&(s=n.parseParameters(a.$params)),a=n.handlerExpression(a.$expr)),n.update(e,i,o,a,s)}const F={skip:!0};function S(e){var t=this,n={};if(e.signals){var r=n.signals={};Object.keys(t.signals).forEach((n=>{const i=t.signals[n];e.signals(n,i)&&(r[n]=i.value)}))}if(e.data){var i=n.data={};Object.keys(t.data).forEach((n=>{const r=t.data[n];e.data(n,r)&&(i[n]=r.input.value)}))}return t.subcontext&&!1!==e.recurse&&(n.subcontext=t.subcontext.map((t=>t.getState(e)))),n}function T(e){var n=this,r=n.dataflow,i=e.data,o=e.signals;Object.keys(o||{}).forEach((e=>{r.update(n.signals[e],o[e],F)})),Object.keys(i||{}).forEach((e=>{r.pulse(n.data[e].input,r.changeset().remove(t.truthy).insert(i[e]))})),(e.subcontext||[]).forEach(((e,t)=>{const r=n.subcontext[t];r&&r.setState(e)}))}function O(e,t,n,r){return new N(e,t,n,r)}function N(e,t,n,r){this.dataflow=e,this.transforms=t,this.events=e.events.bind(e),this.expr=r||d,this.signals={},this.scales={},this.nodes={},this.data={},this.fn={},n&&(this.functions=Object.create(n),this.functions.context=this)}function P(e){this.dataflow=e.dataflow,this.transforms=e.transforms,this.events=e.events,this.expr=e.expr,this.signals=Object.create(e.signals),this.scales=Object.create(e.scales),this.nodes=Object.create(e.nodes),this.data=Object.create(e.data),this.fn=Object.create(e.fn),e.functions&&(this.functions=Object.create(e.functions),this.functions.context=this)}N.prototype=P.prototype={fork(){const e=new P(this);return(this.subcontext||(this.subcontext=[])).push(e),e},detach(e){this.subcontext=this.subcontext.filter((t=>t!==e));const t=Object.keys(e.nodes);for(var n=0,r=t;n<r.length;n++){const t=r[n];e.nodes[t]._targets=null}for(var i=0,o=t;i<o.length;i++){const t=o[i];e.nodes[t].detach()}e.nodes=null},get(e){return this.nodes[e]},set(e,t){return this.nodes[e]=t},add(e,t){const n=this,r=n.dataflow,i=e.value;if(n.set(e.id,t),c(e.type)&&i&&(i.$ingest?r.ingest(t,i.$ingest,i.$format):i.$request?r.preload(t,i.$request,i.$format):r.pulse(t,r.changeset().insert(i))),e.root&&(n.root=t),e.parent){let i=n.get(e.parent.$ref);i?(r.connect(i,[t]),t.targets().add(i)):(n.unresolved=n.unresolved||[]).push((()=>{i=n.get(e.parent.$ref),r.connect(i,[t]),t.targets().add(i)}))}if(e.signal&&(n.signals[e.signal]=t),e.scale&&(n.scales[e.scale]=t),e.data)for(const o in e.data){const r=n.data[o]||(n.data[o]={});e.data[o].forEach((e=>r[e]=t))}},resolve(){return(this.unresolved||[]).forEach((e=>e())),delete this.unresolved,this},operator(e,t){this.add(e,this.dataflow.add(e.value,t))},transform(e,t){this.add(e,this.dataflow.add(this.transforms[s(t)]))},stream(e,t){this.set(e.id,t)},update(e,t,n,r,i){this.dataflow.on(t,n,r,i,e.options)},operatorExpression(e){return this.expr.operator(this,e)},parameterExpression(e){return this.expr.parameter(this,e)},eventExpression(e){return this.expr.event(this,e)},handlerExpression(e){return this.expr.handler(this,e)},encodeExpression(e){return this.expr.encode(this,e)},parse:r,parseOperator:h,parseOperatorParameters:p,parseParameters:g,parseStream:C,parseUpdate:M,getState:S,setState:T},e.context=O,Object.defineProperty(e,"__esModule",{value:!0})}(t,n(1176),n(1183))},1718:function(e,t){function n(t){return"function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?e.exports=n=function(e){return typeof e}:e.exports=n=function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(t)}e.exports=n},2328:function(e,t,n){(function(t){var r=n(163),i=n(108),o=n(16);e.exports=function(e,n){"use strict";function a(e){if(e&&e.__esModule)return e;var t=Object.create(null);return e&&Object.keys(e).forEach((function(n){if("default"!==n){var r=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(t,n,r.get?r:{enumerable:!0,get:function(){return e[n]}})}})),t.default=e,Object.freeze(t)}var s=a(e),u=a(n),c="6.14.2",l=function(){return(l=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};function f(e,t,n,r){function i(e){return e instanceof n?e:new n((function(t){t(e)}))}return new(n||(n=Promise))((function(n,o){function a(e){try{u(r.next(e))}catch(t){o(t)}}function s(e){try{u(r.throw(e))}catch(t){o(t)}}function u(e){e.done?n(e.value):i(e.value).then(a,s)}u((r=r.apply(e,t||[])).next())}))}function d(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(e){return function(t){return u([e,t])}}function u(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(s){o=[6,s],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}}var h=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),p=Object.prototype.hasOwnProperty;function g(e,t){return p.call(e,t)}function m(e){if(Array.isArray(e)){for(var t=new Array(e.length),n=0;n<t.length;n++)t[n]=""+n;return t}if(Object.keys)return Object.keys(e);for(var r in t=[],e)g(e,r)&&t.push(r);return t}function v(e){switch(typeof e){case"object":return JSON.parse(JSON.stringify(e));case"undefined":return null;default:return e}}function y(e){for(var t,n=0,r=e.length;n<r;){if(!((t=e.charCodeAt(n))>=48&&t<=57))return!1;n++}return!0}function b(e){return-1===e.indexOf("/")&&-1===e.indexOf("~")?e:e.replace(/~/g,"~0").replace(/\//g,"~1")}function x(e){return e.replace(/~1/g,"/").replace(/~0/g,"~")}function w(e){if(void 0===e)return!0;if(e)if(Array.isArray(e)){for(var t=0,n=e.length;t<n;t++)if(w(e[t]))return!0}else if("object"===typeof e){var r=m(e),i=r.length;for(t=0;t<i;t++)if(w(e[r[t]]))return!0}return!1}function _(e,t){var n=[e];for(var r in t){var i="object"===typeof t[r]?JSON.stringify(t[r],null,2):t[r];"undefined"!==typeof i&&n.push(r+": "+i)}return n.join("\n")}var A=function(e){function t(t,n,r,i,o){var a=this.constructor,s=e.call(this,_(t,{name:n,index:r,operation:i,tree:o}))||this;return s.name=n,s.index=r,s.operation=i,s.tree=o,Object.setPrototypeOf(s,a.prototype),s.message=_(t,{name:n,index:r,operation:i,tree:o}),s}return h(t,e),t}(Error),k=A,E=v,D={add:function(e,t,n){return e[t]=this.value,{newDocument:n}},remove:function(e,t,n){var r=e[t];return delete e[t],{newDocument:n,removed:r}},replace:function(e,t,n){var r=e[t];return e[t]=this.value,{newDocument:n,removed:r}},move:function(e,t,n){var r=M(n,this.path);r&&(r=v(r));var i=F(n,{op:"remove",path:this.from}).removed;return F(n,{op:"add",path:this.path,value:i}),{newDocument:n,removed:r}},copy:function(e,t,n){var r=M(n,this.from);return F(n,{op:"add",path:this.path,value:v(r)}),{newDocument:n}},test:function(e,t,n){return{newDocument:n,test:P(e[t],this.value)}},_get:function(e,t,n){return this.value=e[t],{newDocument:n}}},C={add:function(e,t,n){return y(t)?e.splice(t,0,this.value):e[t]=this.value,{newDocument:n,index:t}},remove:function(e,t,n){return{newDocument:n,removed:e.splice(t,1)[0]}},replace:function(e,t,n){var r=e[t];return e[t]=this.value,{newDocument:n,removed:r}},move:D.move,copy:D.copy,test:D.test,_get:D._get};function M(e,t){if(""==t)return e;var n={op:"_get",path:t};return F(e,n),n.value}function F(e,t,n,r,i,o){if(void 0===n&&(n=!1),void 0===r&&(r=!0),void 0===i&&(i=!0),void 0===o&&(o=0),n&&("function"==typeof n?n(t,0,e,t.path):O(t,0)),""===t.path){var a={newDocument:e};if("add"===t.op)return a.newDocument=t.value,a;if("replace"===t.op)return a.newDocument=t.value,a.removed=e,a;if("move"===t.op||"copy"===t.op)return a.newDocument=M(e,t.from),"move"===t.op&&(a.removed=e),a;if("test"===t.op){if(a.test=P(e,t.value),!1===a.test)throw new k("Test operation failed","TEST_OPERATION_FAILED",o,t,e);return a.newDocument=e,a}if("remove"===t.op)return a.removed=e,a.newDocument=null,a;if("_get"===t.op)return t.value=e,a;if(n)throw new k("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",o,t,e);return a}r||(e=v(e));var s=(t.path||"").split("/"),u=e,c=1,l=s.length,f=void 0,d=void 0,h=void 0;for(h="function"==typeof n?n:O;;){if(d=s[c],i&&"__proto__"==d)throw new TypeError("JSON-Patch: modifying `__proto__` prop is banned for security reasons, if this was on purpose, please set `banPrototypeModifications` flag false and pass it to this function. More info in fast-json-patch README");if(n&&void 0===f&&(void 0===u[d]?f=s.slice(0,c).join("/"):c==l-1&&(f=t.path),void 0!==f&&h(t,0,e,f)),c++,Array.isArray(u)){if("-"===d)d=u.length;else{if(n&&!y(d))throw new k("Expected an unsigned base-10 integer value, making the new referenced value the array element with the zero-based index","OPERATION_PATH_ILLEGAL_ARRAY_INDEX",o,t,e);y(d)&&(d=~~d)}if(c>=l){if(n&&"add"===t.op&&d>u.length)throw new k("The specified index MUST NOT be greater than the number of elements in the array","OPERATION_VALUE_OUT_OF_BOUNDS",o,t,e);if(!1===(a=C[t.op].call(t,u,d,e)).test)throw new k("Test operation failed","TEST_OPERATION_FAILED",o,t,e);return a}}else if(d&&-1!=d.indexOf("~")&&(d=x(d)),c>=l){if(!1===(a=D[t.op].call(t,u,d,e)).test)throw new k("Test operation failed","TEST_OPERATION_FAILED",o,t,e);return a}u=u[d]}}function S(e,t,n,r,i){if(void 0===r&&(r=!0),void 0===i&&(i=!0),n&&!Array.isArray(t))throw new k("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");r||(e=v(e));for(var o=new Array(t.length),a=0,s=t.length;a<s;a++)o[a]=F(e,t[a],n,!0,i,a),e=o[a].newDocument;return o.newDocument=e,o}function T(e,t,n){var r=F(e,t);if(!1===r.test)throw new k("Test operation failed","TEST_OPERATION_FAILED",n,t,e);return r.newDocument}function O(e,t,n,r){if("object"!==typeof e||null===e||Array.isArray(e))throw new k("Operation is not an object","OPERATION_NOT_AN_OBJECT",t,e,n);if(!D[e.op])throw new k("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",t,e,n);if("string"!==typeof e.path)throw new k("Operation `path` property is not a string","OPERATION_PATH_INVALID",t,e,n);if(0!==e.path.indexOf("/")&&e.path.length>0)throw new k('Operation `path` property must start with "/"',"OPERATION_PATH_INVALID",t,e,n);if(("move"===e.op||"copy"===e.op)&&"string"!==typeof e.from)throw new k("Operation `from` property is not present (applicable in `move` and `copy` operations)","OPERATION_FROM_REQUIRED",t,e,n);if(("add"===e.op||"replace"===e.op||"test"===e.op)&&void 0===e.value)throw new k("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_REQUIRED",t,e,n);if(("add"===e.op||"replace"===e.op||"test"===e.op)&&w(e.value))throw new k("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_CANNOT_CONTAIN_UNDEFINED",t,e,n);if(n)if("add"==e.op){var i=e.path.split("/").length,o=r.split("/").length;if(i!==o+1&&i!==o)throw new k("Cannot perform an `add` operation at the desired path","OPERATION_PATH_CANNOT_ADD",t,e,n)}else if("replace"===e.op||"remove"===e.op||"_get"===e.op){if(e.path!==r)throw new k("Cannot perform the operation at a path that does not exist","OPERATION_PATH_UNRESOLVABLE",t,e,n)}else if("move"===e.op||"copy"===e.op){var a=N([{op:"_get",path:e.from,value:void 0}],n);if(a&&"OPERATION_PATH_UNRESOLVABLE"===a.name)throw new k("Cannot perform the operation from a path that does not exist","OPERATION_FROM_UNRESOLVABLE",t,e,n)}}function N(e,t,n){try{if(!Array.isArray(e))throw new k("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");if(t)S(v(t),v(e),n||!0);else{n=n||O;for(var r=0;r<e.length;r++)n(e[r],r,t,void 0)}}catch(i){if(i instanceof k)return i;throw i}}function P(e,t){if(e===t)return!0;if(e&&t&&"object"==typeof e&&"object"==typeof t){var n,r,i,o=Array.isArray(e),a=Array.isArray(t);if(o&&a){if((r=e.length)!=t.length)return!1;for(n=r;0!==n--;)if(!P(e[n],t[n]))return!1;return!0}if(o!=a)return!1;var s=Object.keys(e);if((r=s.length)!==Object.keys(t).length)return!1;for(n=r;0!==n--;)if(!t.hasOwnProperty(s[n]))return!1;for(n=r;0!==n--;)if(!P(e[i=s[n]],t[i]))return!1;return!0}return e!==e&&t!==t}var R=Object.freeze({__proto__:null,JsonPatchError:k,deepClone:E,getValueByPointer:M,applyOperation:F,applyPatch:S,applyReducer:T,validator:O,validate:N,_areEquals:P}),B=new WeakMap,z=function(){function e(e){this.observers=new Map,this.obj=e}return e}(),j=function(){function e(e,t){this.callback=e,this.observer=t}return e}();function L(e){return B.get(e)}function I(e,t){return e.observers.get(t)}function U(e,t){e.observers.delete(t.callback)}function q(e,t){t.unobserve()}function W(e,t){var n,r=[],i=L(e);if(i){var o=I(i,t);n=o&&o.observer}else i=new z(e),B.set(e,i);if(n)return n;if(n={},i.value=v(e),t){n.callback=t,n.next=null;var a=function(){H(n)},s=function(){clearTimeout(n.next),n.next=setTimeout(a)};"undefined"!==typeof window&&(window.addEventListener("mouseup",s),window.addEventListener("keyup",s),window.addEventListener("mousedown",s),window.addEventListener("keydown",s),window.addEventListener("change",s))}return n.patches=r,n.object=e,n.unobserve=function(){H(n),clearTimeout(n.next),U(i,n),"undefined"!==typeof window&&(window.removeEventListener("mouseup",s),window.removeEventListener("keyup",s),window.removeEventListener("mousedown",s),window.removeEventListener("keydown",s),window.removeEventListener("change",s))},i.observers.set(t,new j(t,n)),n}function H(e,t){void 0===t&&(t=!1);var n=B.get(e.object);Y(n.value,e.object,e.patches,"",t),e.patches.length&&S(n.value,e.patches);var r=e.patches;return r.length>0&&(e.patches=[],e.callback&&e.callback(r)),r}function Y(e,t,n,r,i){if(t!==e){"function"===typeof t.toJSON&&(t=t.toJSON());for(var o=m(t),a=m(e),s=!1,u=a.length-1;u>=0;u--){var c=e[f=a[u]];if(!g(t,f)||void 0===t[f]&&void 0!==c&&!1===Array.isArray(t))Array.isArray(e)===Array.isArray(t)?(i&&n.push({op:"test",path:r+"/"+b(f),value:v(c)}),n.push({op:"remove",path:r+"/"+b(f)}),s=!0):(i&&n.push({op:"test",path:r,value:e}),n.push({op:"replace",path:r,value:t}));else{var l=t[f];"object"==typeof c&&null!=c&&"object"==typeof l&&null!=l?Y(c,l,n,r+"/"+b(f),i):c!==l&&(i&&n.push({op:"test",path:r+"/"+b(f),value:v(c)}),n.push({op:"replace",path:r+"/"+b(f),value:v(l)}))}}if(s||o.length!=a.length)for(u=0;u<o.length;u++){var f;g(e,f=o[u])||void 0===t[f]||n.push({op:"add",path:r+"/"+b(f),value:v(t[f])})}}}function V(e,t,n){void 0===n&&(n=!1);var r=[];return Y(e,t,r,"",n),r}var G=Object.freeze({__proto__:null,unobserve:q,observe:W,generate:H,compare:V});Object.assign({},R,G,{JsonPatchError:A,deepClone:v,escapePathComponent:b,unescapePathComponent:x});var $=/("(?:[^\\"]|\\.)*")|[:,]/g,X=function(e,t){var n,r,i;return t=t||{},n=JSON.stringify([1],void 0,void 0===t.indent?2:t.indent).slice(2,-3),r=""===n?1/0:void 0===t.maxLength?80:t.maxLength,i=t.replacer,function e(t,o,a){var s,u,c,l,f,d,h,p,g,m,v,y;if(t&&"function"===typeof t.toJSON&&(t=t.toJSON()),void 0===(v=JSON.stringify(t,i)))return v;if(h=r-o.length-a,v.length<=h&&(g=v.replace($,(function(e,t){return t||e+" "}))).length<=h)return g;if(null!=i&&(t=JSON.parse(v),i=void 0),"object"===typeof t&&null!==t){if(p=o+n,c=[],u=0,Array.isArray(t))for(m="[",s="]",h=t.length;u<h;u++)c.push(e(t[u],p,u===h-1?0:1)||"null");else for(m="{",s="}",h=(d=Object.keys(t)).length;u<h;u++)l=d[u],f=JSON.stringify(l)+": ",void 0!==(y=e(t[l],p,f.length+(u===h-1?0:1)))&&c.push(f+y);if(c.length>0)return[m,n+c.join(",\n"+p),s].join("\n"+o)}return v}(e,"",0)};function J(e){var t={exports:{}};return e(t,t.exports),t.exports}const Q="2.0.0",Z=256,K=Number.MAX_SAFE_INTEGER||9007199254740991;var ee={SEMVER_SPEC_VERSION:Q,MAX_LENGTH:Z,MAX_SAFE_INTEGER:K,MAX_SAFE_COMPONENT_LENGTH:16},te="object"===typeof t&&Object({NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0})&&Object({NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).NODE_DEBUG&&/\bsemver\b/i.test(Object({NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).NODE_DEBUG)?(...e)=>console.error("SEMVER",...e):()=>{},ne=J((function(e,t){const n=ee.MAX_SAFE_COMPONENT_LENGTH,r=(t=e.exports={}).re=[],i=t.src=[],o=t.t={};let a=0;const s=(e,t,n)=>{const s=a++;te(s,t),o[e]=s,i[s]=t,r[s]=new RegExp(t,n?"g":void 0)};s("NUMERICIDENTIFIER","0|[1-9]\\d*"),s("NUMERICIDENTIFIERLOOSE","[0-9]+"),s("NONNUMERICIDENTIFIER","\\d*[a-zA-Z-][a-zA-Z0-9-]*"),s("MAINVERSION","(".concat(i[o.NUMERICIDENTIFIER],")\\.")+"(".concat(i[o.NUMERICIDENTIFIER],")\\.")+"(".concat(i[o.NUMERICIDENTIFIER],")")),s("MAINVERSIONLOOSE","(".concat(i[o.NUMERICIDENTIFIERLOOSE],")\\.")+"(".concat(i[o.NUMERICIDENTIFIERLOOSE],")\\.")+"(".concat(i[o.NUMERICIDENTIFIERLOOSE],")")),s("PRERELEASEIDENTIFIER","(?:".concat(i[o.NUMERICIDENTIFIER],"|").concat(i[o.NONNUMERICIDENTIFIER],")")),s("PRERELEASEIDENTIFIERLOOSE","(?:".concat(i[o.NUMERICIDENTIFIERLOOSE],"|").concat(i[o.NONNUMERICIDENTIFIER],")")),s("PRERELEASE","(?:-(".concat(i[o.PRERELEASEIDENTIFIER],"(?:\\.").concat(i[o.PRERELEASEIDENTIFIER],")*))")),s("PRERELEASELOOSE","(?:-?(".concat(i[o.PRERELEASEIDENTIFIERLOOSE],"(?:\\.").concat(i[o.PRERELEASEIDENTIFIERLOOSE],")*))")),s("BUILDIDENTIFIER","[0-9A-Za-z-]+"),s("BUILD","(?:\\+(".concat(i[o.BUILDIDENTIFIER],"(?:\\.").concat(i[o.BUILDIDENTIFIER],")*))")),s("FULLPLAIN","v?".concat(i[o.MAINVERSION]).concat(i[o.PRERELEASE],"?").concat(i[o.BUILD],"?")),s("FULL","^".concat(i[o.FULLPLAIN],"$")),s("LOOSEPLAIN","[v=\\s]*".concat(i[o.MAINVERSIONLOOSE]).concat(i[o.PRERELEASELOOSE],"?").concat(i[o.BUILD],"?")),s("LOOSE","^".concat(i[o.LOOSEPLAIN],"$")),s("GTLT","((?:<|>)?=?)"),s("XRANGEIDENTIFIERLOOSE","".concat(i[o.NUMERICIDENTIFIERLOOSE],"|x|X|\\*")),s("XRANGEIDENTIFIER","".concat(i[o.NUMERICIDENTIFIER],"|x|X|\\*")),s("XRANGEPLAIN","[v=\\s]*(".concat(i[o.XRANGEIDENTIFIER],")")+"(?:\\.(".concat(i[o.XRANGEIDENTIFIER],")")+"(?:\\.(".concat(i[o.XRANGEIDENTIFIER],")")+"(?:".concat(i[o.PRERELEASE],")?").concat(i[o.BUILD],"?")+")?)?"),s("XRANGEPLAINLOOSE","[v=\\s]*(".concat(i[o.XRANGEIDENTIFIERLOOSE],")")+"(?:\\.(".concat(i[o.XRANGEIDENTIFIERLOOSE],")")+"(?:\\.(".concat(i[o.XRANGEIDENTIFIERLOOSE],")")+"(?:".concat(i[o.PRERELEASELOOSE],")?").concat(i[o.BUILD],"?")+")?)?"),s("XRANGE","^".concat(i[o.GTLT],"\\s*").concat(i[o.XRANGEPLAIN],"$")),s("XRANGELOOSE","^".concat(i[o.GTLT],"\\s*").concat(i[o.XRANGEPLAINLOOSE],"$")),s("COERCE","".concat("(^|[^\\d])(\\d{1,").concat(n,"})")+"(?:\\.(\\d{1,".concat(n,"}))?")+"(?:\\.(\\d{1,".concat(n,"}))?")+"(?:$|[^\\d])"),s("COERCERTL",i[o.COERCE],!0),s("LONETILDE","(?:~>?)"),s("TILDETRIM","(\\s*)".concat(i[o.LONETILDE],"\\s+"),!0),t.tildeTrimReplace="$1~",s("TILDE","^".concat(i[o.LONETILDE]).concat(i[o.XRANGEPLAIN],"$")),s("TILDELOOSE","^".concat(i[o.LONETILDE]).concat(i[o.XRANGEPLAINLOOSE],"$")),s("LONECARET","(?:\\^)"),s("CARETTRIM","(\\s*)".concat(i[o.LONECARET],"\\s+"),!0),t.caretTrimReplace="$1^",s("CARET","^".concat(i[o.LONECARET]).concat(i[o.XRANGEPLAIN],"$")),s("CARETLOOSE","^".concat(i[o.LONECARET]).concat(i[o.XRANGEPLAINLOOSE],"$")),s("COMPARATORLOOSE","^".concat(i[o.GTLT],"\\s*(").concat(i[o.LOOSEPLAIN],")$|^$")),s("COMPARATOR","^".concat(i[o.GTLT],"\\s*(").concat(i[o.FULLPLAIN],")$|^$")),s("COMPARATORTRIM","(\\s*)".concat(i[o.GTLT],"\\s*(").concat(i[o.LOOSEPLAIN],"|").concat(i[o.XRANGEPLAIN],")"),!0),t.comparatorTrimReplace="$1$2$3",s("HYPHENRANGE","^\\s*(".concat(i[o.XRANGEPLAIN],")")+"\\s+-\\s+"+"(".concat(i[o.XRANGEPLAIN],")")+"\\s*$"),s("HYPHENRANGELOOSE","^\\s*(".concat(i[o.XRANGEPLAINLOOSE],")")+"\\s+-\\s+"+"(".concat(i[o.XRANGEPLAINLOOSE],")")+"\\s*$"),s("STAR","(<|>)?=?\\s*\\*"),s("GTE0","^\\s*>=\\s*0.0.0\\s*$"),s("GTE0PRE","^\\s*>=\\s*0.0.0-0\\s*$")}));const re=["includePrerelease","loose","rtl"];var ie=e=>e?"object"!==typeof e?{loose:!0}:re.filter((t=>e[t])).reduce(((e,t)=>(e[t]=!0,e)),{}):{};const oe=/^[0-9]+$/,ae=(e,t)=>{const n=oe.test(e),r=oe.test(t);return n&&r&&(e=+e,t=+t),e===t?0:n&&!r?-1:r&&!n?1:e<t?-1:1},se=(e,t)=>ae(t,e);var ue={compareIdentifiers:ae,rcompareIdentifiers:se};const ce=ee.MAX_LENGTH,le=ee.MAX_SAFE_INTEGER,fe=ne.re,de=ne.t,he=ue.compareIdentifiers;class pe{constructor(e,t){if(t=ie(t),e instanceof pe){if(e.loose===!!t.loose&&e.includePrerelease===!!t.includePrerelease)return e;e=e.version}else if("string"!==typeof e)throw new TypeError("Invalid Version: ".concat(e));if(e.length>ce)throw new TypeError("version is longer than ".concat(ce," characters"));te("SemVer",e,t),this.options=t,this.loose=!!t.loose,this.includePrerelease=!!t.includePrerelease;const n=e.trim().match(t.loose?fe[de.LOOSE]:fe[de.FULL]);if(!n)throw new TypeError("Invalid Version: ".concat(e));if(this.raw=e,this.major=+n[1],this.minor=+n[2],this.patch=+n[3],this.major>le||this.major<0)throw new TypeError("Invalid major version");if(this.minor>le||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>le||this.patch<0)throw new TypeError("Invalid patch version");n[4]?this.prerelease=n[4].split(".").map((e=>{if(/^[0-9]+$/.test(e)){const t=+e;if(t>=0&&t<le)return t}return e})):this.prerelease=[],this.build=n[5]?n[5].split("."):[],this.format()}format(){return this.version="".concat(this.major,".").concat(this.minor,".").concat(this.patch),this.prerelease.length&&(this.version+="-".concat(this.prerelease.join("."))),this.version}toString(){return this.version}compare(e){if(te("SemVer.compare",this.version,this.options,e),!(e instanceof pe)){if("string"===typeof e&&e===this.version)return 0;e=new pe(e,this.options)}return e.version===this.version?0:this.compareMain(e)||this.comparePre(e)}compareMain(e){return e instanceof pe||(e=new pe(e,this.options)),he(this.major,e.major)||he(this.minor,e.minor)||he(this.patch,e.patch)}comparePre(e){if(e instanceof pe||(e=new pe(e,this.options)),this.prerelease.length&&!e.prerelease.length)return-1;if(!this.prerelease.length&&e.prerelease.length)return 1;if(!this.prerelease.length&&!e.prerelease.length)return 0;let t=0;do{const n=this.prerelease[t],r=e.prerelease[t];if(te("prerelease compare",t,n,r),void 0===n&&void 0===r)return 0;if(void 0===r)return 1;if(void 0===n)return-1;if(n!==r)return he(n,r)}while(++t)}compareBuild(e){e instanceof pe||(e=new pe(e,this.options));let t=0;do{const n=this.build[t],r=e.build[t];if(te("prerelease compare",t,n,r),void 0===n&&void 0===r)return 0;if(void 0===r)return 1;if(void 0===n)return-1;if(n!==r)return he(n,r)}while(++t)}inc(e,t){switch(e){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",t);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",t);break;case"prepatch":this.prerelease.length=0,this.inc("patch",t),this.inc("pre",t);break;case"prerelease":0===this.prerelease.length&&this.inc("patch",t),this.inc("pre",t);break;case"major":0===this.minor&&0===this.patch&&0!==this.prerelease.length||this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":0===this.patch&&0!==this.prerelease.length||this.minor++,this.patch=0,this.prerelease=[];break;case"patch":0===this.prerelease.length&&this.patch++,this.prerelease=[];break;case"pre":if(0===this.prerelease.length)this.prerelease=[0];else{let e=this.prerelease.length;for(;--e>=0;)"number"===typeof this.prerelease[e]&&(this.prerelease[e]++,e=-2);-1===e&&this.prerelease.push(0)}t&&(this.prerelease[0]===t?isNaN(this.prerelease[1])&&(this.prerelease=[t,0]):this.prerelease=[t,0]);break;default:throw new Error("invalid increment argument: ".concat(e))}return this.format(),this.raw=this.version,this}}var ge=pe;const me=ee.MAX_LENGTH,ve=ne.re,ye=ne.t;var be=(e,t)=>{if(t=ie(t),e instanceof ge)return e;if("string"!==typeof e)return null;if(e.length>me)return null;if(!(t.loose?ve[ye.LOOSE]:ve[ye.FULL]).test(e))return null;try{return new ge(e,t)}catch(n){return null}},xe=(e,t)=>{const n=be(e,t);return n?n.version:null},we=(e,t)=>{const n=be(e.trim().replace(/^[=v]+/,""),t);return n?n.version:null},_e=(e,t,n,r)=>{"string"===typeof n&&(r=n,n=void 0);try{return new ge(e,n).inc(t,r).version}catch(i){return null}},Ae=(e,t,n)=>new ge(e,n).compare(new ge(t,n)),ke=(e,t,n)=>0===Ae(e,t,n),Ee=(e,t)=>{if(ke(e,t))return null;{const n=be(e),r=be(t),i=n.prerelease.length||r.prerelease.length,o=i?"pre":"",a=i?"prerelease":"";for(const e in n)if(("major"===e||"minor"===e||"patch"===e)&&n[e]!==r[e])return o+e;return a}},De=(e,t)=>new ge(e,t).major,Ce=(e,t)=>new ge(e,t).minor,Me=(e,t)=>new ge(e,t).patch,Fe=(e,t)=>{const n=be(e,t);return n&&n.prerelease.length?n.prerelease:null},Se=(e,t,n)=>Ae(t,e,n),Te=(e,t)=>Ae(e,t,!0),Oe=(e,t,n)=>{const r=new ge(e,n),i=new ge(t,n);return r.compare(i)||r.compareBuild(i)},Ne=(e,t)=>e.sort(((e,n)=>Oe(e,n,t))),Pe=(e,t)=>e.sort(((e,n)=>Oe(n,e,t))),Re=(e,t,n)=>Ae(e,t,n)>0,Be=(e,t,n)=>Ae(e,t,n)<0,ze=(e,t,n)=>0!==Ae(e,t,n),je=(e,t,n)=>Ae(e,t,n)>=0,Le=(e,t,n)=>Ae(e,t,n)<=0,Ie=(e,t,n,r)=>{switch(t){case"===":return"object"===typeof e&&(e=e.version),"object"===typeof n&&(n=n.version),e===n;case"!==":return"object"===typeof e&&(e=e.version),"object"===typeof n&&(n=n.version),e!==n;case"":case"=":case"==":return ke(e,n,r);case"!=":return ze(e,n,r);case">":return Re(e,n,r);case">=":return je(e,n,r);case"<":return Be(e,n,r);case"<=":return Le(e,n,r);default:throw new TypeError("Invalid operator: ".concat(t))}};const Ue=ne.re,qe=ne.t;var We=(e,t)=>{if(e instanceof ge)return e;if("number"===typeof e&&(e=String(e)),"string"!==typeof e)return null;let n=null;if((t=t||{}).rtl){let t;for(;(t=Ue[qe.COERCERTL].exec(e))&&(!n||n.index+n[0].length!==e.length);)n&&t.index+t[0].length===n.index+n[0].length||(n=t),Ue[qe.COERCERTL].lastIndex=t.index+t[1].length+t[2].length;Ue[qe.COERCERTL].lastIndex=-1}else n=e.match(Ue[qe.COERCE]);return null===n?null:be("".concat(n[2],".").concat(n[3]||"0",".").concat(n[4]||"0"),t)},He=function(e){e.prototype[Symbol.iterator]=o.mark((function e(){var t;return o.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=this.head;case 1:if(!t){e.next=7;break}return e.next=4,t.value;case 4:t=t.next,e.next=1;break;case 7:case"end":return e.stop()}}),e,this)}))},Ye=Ve;function Ve(e){var t=this;if(t instanceof Ve||(t=new Ve),t.tail=null,t.head=null,t.length=0,e&&"function"===typeof e.forEach)e.forEach((function(e){t.push(e)}));else if(arguments.length>0)for(var n=0,r=arguments.length;n<r;n++)t.push(arguments[n]);return t}function Ge(e,t,n){var r=t===e.head?new Je(n,null,t,e):new Je(n,t,t.next,e);return null===r.next&&(e.tail=r),null===r.prev&&(e.head=r),e.length++,r}function $e(e,t){e.tail=new Je(t,e.tail,null,e),e.head||(e.head=e.tail),e.length++}function Xe(e,t){e.head=new Je(t,null,e.head,e),e.tail||(e.tail=e.head),e.length++}function Je(e,t,n,r){if(!(this instanceof Je))return new Je(e,t,n,r);this.list=r,this.value=e,t?(t.next=this,this.prev=t):this.prev=null,n?(n.prev=this,this.next=n):this.next=null}Ve.Node=Je,Ve.create=Ve,Ve.prototype.removeNode=function(e){if(e.list!==this)throw new Error("removing node which does not belong to this list");var t=e.next,n=e.prev;return t&&(t.prev=n),n&&(n.next=t),e===this.head&&(this.head=t),e===this.tail&&(this.tail=n),e.list.length--,e.next=null,e.prev=null,e.list=null,t},Ve.prototype.unshiftNode=function(e){if(e!==this.head){e.list&&e.list.removeNode(e);var t=this.head;e.list=this,e.next=t,t&&(t.prev=e),this.head=e,this.tail||(this.tail=e),this.length++}},Ve.prototype.pushNode=function(e){if(e!==this.tail){e.list&&e.list.removeNode(e);var t=this.tail;e.list=this,e.prev=t,t&&(t.next=e),this.tail=e,this.head||(this.head=e),this.length++}},Ve.prototype.push=function(){for(var e=0,t=arguments.length;e<t;e++)$e(this,arguments[e]);return this.length},Ve.prototype.unshift=function(){for(var e=0,t=arguments.length;e<t;e++)Xe(this,arguments[e]);return this.length},Ve.prototype.pop=function(){if(this.tail){var e=this.tail.value;return this.tail=this.tail.prev,this.tail?this.tail.next=null:this.head=null,this.length--,e}},Ve.prototype.shift=function(){if(this.head){var e=this.head.value;return this.head=this.head.next,this.head?this.head.prev=null:this.tail=null,this.length--,e}},Ve.prototype.forEach=function(e,t){t=t||this;for(var n=this.head,r=0;null!==n;r++)e.call(t,n.value,r,this),n=n.next},Ve.prototype.forEachReverse=function(e,t){t=t||this;for(var n=this.tail,r=this.length-1;null!==n;r--)e.call(t,n.value,r,this),n=n.prev},Ve.prototype.get=function(e){for(var t=0,n=this.head;null!==n&&t<e;t++)n=n.next;if(t===e&&null!==n)return n.value},Ve.prototype.getReverse=function(e){for(var t=0,n=this.tail;null!==n&&t<e;t++)n=n.prev;if(t===e&&null!==n)return n.value},Ve.prototype.map=function(e,t){t=t||this;for(var n=new Ve,r=this.head;null!==r;)n.push(e.call(t,r.value,this)),r=r.next;return n},Ve.prototype.mapReverse=function(e,t){t=t||this;for(var n=new Ve,r=this.tail;null!==r;)n.push(e.call(t,r.value,this)),r=r.prev;return n},Ve.prototype.reduce=function(e,t){var n,r=this.head;if(arguments.length>1)n=t;else{if(!this.head)throw new TypeError("Reduce of empty list with no initial value");r=this.head.next,n=this.head.value}for(var i=0;null!==r;i++)n=e(n,r.value,i),r=r.next;return n},Ve.prototype.reduceReverse=function(e,t){var n,r=this.tail;if(arguments.length>1)n=t;else{if(!this.tail)throw new TypeError("Reduce of empty list with no initial value");r=this.tail.prev,n=this.tail.value}for(var i=this.length-1;null!==r;i--)n=e(n,r.value,i),r=r.prev;return n},Ve.prototype.toArray=function(){for(var e=new Array(this.length),t=0,n=this.head;null!==n;t++)e[t]=n.value,n=n.next;return e},Ve.prototype.toArrayReverse=function(){for(var e=new Array(this.length),t=0,n=this.tail;null!==n;t++)e[t]=n.value,n=n.prev;return e},Ve.prototype.slice=function(e,t){(t=t||this.length)<0&&(t+=this.length),(e=e||0)<0&&(e+=this.length);var n=new Ve;if(t<e||t<0)return n;e<0&&(e=0),t>this.length&&(t=this.length);for(var r=0,i=this.head;null!==i&&r<e;r++)i=i.next;for(;null!==i&&r<t;r++,i=i.next)n.push(i.value);return n},Ve.prototype.sliceReverse=function(e,t){(t=t||this.length)<0&&(t+=this.length),(e=e||0)<0&&(e+=this.length);var n=new Ve;if(t<e||t<0)return n;e<0&&(e=0),t>this.length&&(t=this.length);for(var r=this.length,i=this.tail;null!==i&&r>t;r--)i=i.prev;for(;null!==i&&r>e;r--,i=i.prev)n.push(i.value);return n},Ve.prototype.splice=function(e,t,...n){e>this.length&&(e=this.length-1),e<0&&(e=this.length+e);for(var r=0,i=this.head;null!==i&&r<e;r++)i=i.next;var o=[];for(r=0;i&&r<t;r++)o.push(i.value),i=this.removeNode(i);for(null===i&&(i=this.tail),i!==this.head&&i!==this.tail&&(i=i.prev),r=0;r<n.length;r++)i=Ge(this,i,n[r]);return o},Ve.prototype.reverse=function(){for(var e=this.head,t=this.tail,n=e;null!==n;n=n.prev){var r=n.prev;n.prev=n.next,n.next=r}return this.head=t,this.tail=e,this};try{He(Ve)}catch(Wr){}const Qe=Symbol("max"),Ze=Symbol("length"),Ke=Symbol("lengthCalculator"),et=Symbol("allowStale"),tt=Symbol("maxAge"),nt=Symbol("dispose"),rt=Symbol("noDisposeOnSet"),it=Symbol("lruList"),ot=Symbol("cache"),at=Symbol("updateAgeOnGet"),st=()=>1;class ut{constructor(e){if("number"===typeof e&&(e={max:e}),e||(e={}),e.max&&("number"!==typeof e.max||e.max<0))throw new TypeError("max must be a non-negative number");this[Qe]=e.max||1/0;const t=e.length||st;if(this[Ke]="function"!==typeof t?st:t,this[et]=e.stale||!1,e.maxAge&&"number"!==typeof e.maxAge)throw new TypeError("maxAge must be a number");this[tt]=e.maxAge||0,this[nt]=e.dispose,this[rt]=e.noDisposeOnSet||!1,this[at]=e.updateAgeOnGet||!1,this.reset()}set max(e){if("number"!==typeof e||e<0)throw new TypeError("max must be a non-negative number");this[Qe]=e||1/0,ft(this)}get max(){return this[Qe]}set allowStale(e){this[et]=!!e}get allowStale(){return this[et]}set maxAge(e){if("number"!==typeof e)throw new TypeError("maxAge must be a non-negative number");this[tt]=e,ft(this)}get maxAge(){return this[tt]}set lengthCalculator(e){"function"!==typeof e&&(e=st),e!==this[Ke]&&(this[Ke]=e,this[Ze]=0,this[it].forEach((e=>{e.length=this[Ke](e.value,e.key),this[Ze]+=e.length}))),ft(this)}get lengthCalculator(){return this[Ke]}get length(){return this[Ze]}get itemCount(){return this[it].length}rforEach(e,t){t=t||this;for(let n=this[it].tail;null!==n;){const r=n.prev;pt(this,e,n,t),n=r}}forEach(e,t){t=t||this;for(let n=this[it].head;null!==n;){const r=n.next;pt(this,e,n,t),n=r}}keys(){return this[it].toArray().map((e=>e.key))}values(){return this[it].toArray().map((e=>e.value))}reset(){this[nt]&&this[it]&&this[it].length&&this[it].forEach((e=>this[nt](e.key,e.value))),this[ot]=new Map,this[it]=new Ye,this[Ze]=0}dump(){return this[it].map((e=>!lt(this,e)&&{k:e.key,v:e.value,e:e.now+(e.maxAge||0)})).toArray().filter((e=>e))}dumpLru(){return this[it]}set(e,t,n){if((n=n||this[tt])&&"number"!==typeof n)throw new TypeError("maxAge must be a number");const r=n?Date.now():0,i=this[Ke](t,e);if(this[ot].has(e)){if(i>this[Qe])return dt(this,this[ot].get(e)),!1;const o=this[ot].get(e).value;return this[nt]&&(this[rt]||this[nt](e,o.value)),o.now=r,o.maxAge=n,o.value=t,this[Ze]+=i-o.length,o.length=i,this.get(e),ft(this),!0}const o=new ht(e,t,i,r,n);return o.length>this[Qe]?(this[nt]&&this[nt](e,t),!1):(this[Ze]+=o.length,this[it].unshift(o),this[ot].set(e,this[it].head),ft(this),!0)}has(e){if(!this[ot].has(e))return!1;const t=this[ot].get(e).value;return!lt(this,t)}get(e){return ct(this,e,!0)}peek(e){return ct(this,e,!1)}pop(){const e=this[it].tail;return e?(dt(this,e),e.value):null}del(e){dt(this,this[ot].get(e))}load(e){this.reset();const t=Date.now();for(let n=e.length-1;n>=0;n--){const r=e[n],i=r.e||0;if(0===i)this.set(r.k,r.v);else{const e=i-t;e>0&&this.set(r.k,r.v,e)}}}prune(){this[ot].forEach(((e,t)=>ct(this,t,!1)))}}const ct=(e,t,n)=>{const r=e[ot].get(t);if(r){const t=r.value;if(lt(e,t)){if(dt(e,r),!e[et])return}else n&&(e[at]&&(r.value.now=Date.now()),e[it].unshiftNode(r));return t.value}},lt=(e,t)=>{if(!t||!t.maxAge&&!e[tt])return!1;const n=Date.now()-t.now;return t.maxAge?n>t.maxAge:e[tt]&&n>e[tt]},ft=e=>{if(e[Ze]>e[Qe])for(let t=e[it].tail;e[Ze]>e[Qe]&&null!==t;){const n=t.prev;dt(e,t),t=n}},dt=(e,t)=>{if(t){const n=t.value;e[nt]&&e[nt](n.key,n.value),e[Ze]-=n.length,e[ot].delete(n.key),e[it].removeNode(t)}};class ht{constructor(e,t,n,r,i){this.key=e,this.value=t,this.length=n,this.now=r,this.maxAge=i||0}}const pt=(e,t,n,r)=>{let i=n.value;lt(e,i)&&(dt(e,n),e[et]||(i=void 0)),i&&t.call(r,i.value,i.key,e)};var gt=ut;class mt{constructor(e,t){if(t=ie(t),e instanceof mt)return e.loose===!!t.loose&&e.includePrerelease===!!t.includePrerelease?e:new mt(e.raw,t);if(e instanceof Ut)return this.raw=e.value,this.set=[[e]],this.format(),this;if(this.options=t,this.loose=!!t.loose,this.includePrerelease=!!t.includePrerelease,this.raw=e,this.set=e.split(/\s*\|\|\s*/).map((e=>this.parseRange(e.trim()))).filter((e=>e.length)),!this.set.length)throw new TypeError("Invalid SemVer Range: ".concat(e));if(this.set.length>1){const e=this.set[0];if(this.set=this.set.filter((e=>!kt(e[0]))),0===this.set.length)this.set=[e];else if(this.set.length>1){var n,r=i(this.set);try{for(r.s();!(n=r.n()).done;){const e=n.value;if(1===e.length&&Et(e[0])){this.set=[e];break}}}catch(o){r.e(o)}finally{r.f()}}}this.format()}format(){return this.range=this.set.map((e=>e.join(" ").trim())).join("||").trim(),this.range}toString(){return this.range}parseRange(e){e=e.trim();const t=Object.keys(this.options).join(","),n="parseRange:".concat(t,":").concat(e),r=yt.get(n);if(r)return r;const o=this.options.loose,a=o?bt[xt.HYPHENRANGELOOSE]:bt[xt.HYPHENRANGE];e=e.replace(a,zt(this.options.includePrerelease)),te("hyphen replace",e),e=e.replace(bt[xt.COMPARATORTRIM],wt),te("comparator trim",e,bt[xt.COMPARATORTRIM]),e=(e=(e=e.replace(bt[xt.TILDETRIM],_t)).replace(bt[xt.CARETTRIM],At)).split(/\s+/).join(" ");const s=o?bt[xt.COMPARATORLOOSE]:bt[xt.COMPARATOR],u=e.split(" ").map((e=>Ct(e,this.options))).join(" ").split(/\s+/).map((e=>Bt(e,this.options))).filter(this.options.loose?e=>!!e.match(s):()=>!0).map((e=>new Ut(e,this.options))),c=(u.length,new Map);var l,f=i(u);try{for(f.s();!(l=f.n()).done;){const e=l.value;if(kt(e))return[e];c.set(e.value,e)}}catch(h){f.e(h)}finally{f.f()}c.size>1&&c.has("")&&c.delete("");const d=[...c.values()];return yt.set(n,d),d}intersects(e,t){if(!(e instanceof mt))throw new TypeError("a Range is required");return this.set.some((n=>Dt(n,t)&&e.set.some((e=>Dt(e,t)&&n.every((n=>e.every((e=>n.intersects(e,t)))))))))}test(e){if(!e)return!1;if("string"===typeof e)try{e=new ge(e,this.options)}catch(Wr){return!1}for(let t=0;t<this.set.length;t++)if(jt(this.set[t],e,this.options))return!0;return!1}}var vt=mt;const yt=new gt({max:1e3}),bt=ne.re,xt=ne.t,wt=ne.comparatorTrimReplace,_t=ne.tildeTrimReplace,At=ne.caretTrimReplace,kt=e=>"<0.0.0-0"===e.value,Et=e=>""===e.value,Dt=(e,t)=>{let n=!0;const r=e.slice();let i=r.pop();for(;n&&r.length;)n=r.every((e=>i.intersects(e,t))),i=r.pop();return n},Ct=(e,t)=>(te("comp",e,t),e=Tt(e,t),te("caret",e),e=Ft(e,t),te("tildes",e),e=Nt(e,t),te("xrange",e),e=Rt(e,t),te("stars",e),e),Mt=e=>!e||"x"===e.toLowerCase()||"*"===e,Ft=(e,t)=>e.trim().split(/\s+/).map((e=>St(e,t))).join(" "),St=(e,t)=>{const n=t.loose?bt[xt.TILDELOOSE]:bt[xt.TILDE];return e.replace(n,((t,n,r,i,o)=>{let a;return te("tilde",e,t,n,r,i,o),Mt(n)?a="":Mt(r)?a=">=".concat(n,".0.0 <").concat(+n+1,".0.0-0"):Mt(i)?a=">=".concat(n,".").concat(r,".0 <").concat(n,".").concat(+r+1,".0-0"):o?(te("replaceTilde pr",o),a=">=".concat(n,".").concat(r,".").concat(i,"-").concat(o," <").concat(n,".").concat(+r+1,".0-0")):a=">=".concat(n,".").concat(r,".").concat(i," <").concat(n,".").concat(+r+1,".0-0"),te("tilde return",a),a}))},Tt=(e,t)=>e.trim().split(/\s+/).map((e=>Ot(e,t))).join(" "),Ot=(e,t)=>{te("caret",e,t);const n=t.loose?bt[xt.CARETLOOSE]:bt[xt.CARET],r=t.includePrerelease?"-0":"";return e.replace(n,((t,n,i,o,a)=>{let s;return te("caret",e,t,n,i,o,a),Mt(n)?s="":Mt(i)?s=">=".concat(n,".0.0").concat(r," <").concat(+n+1,".0.0-0"):Mt(o)?s="0"===n?">=".concat(n,".").concat(i,".0").concat(r," <").concat(n,".").concat(+i+1,".0-0"):">=".concat(n,".").concat(i,".0").concat(r," <").concat(+n+1,".0.0-0"):a?(te("replaceCaret pr",a),s="0"===n?"0"===i?">=".concat(n,".").concat(i,".").concat(o,"-").concat(a," <").concat(n,".").concat(i,".").concat(+o+1,"-0"):">=".concat(n,".").concat(i,".").concat(o,"-").concat(a," <").concat(n,".").concat(+i+1,".0-0"):">=".concat(n,".").concat(i,".").concat(o,"-").concat(a," <").concat(+n+1,".0.0-0")):(te("no pr"),s="0"===n?"0"===i?">=".concat(n,".").concat(i,".").concat(o).concat(r," <").concat(n,".").concat(i,".").concat(+o+1,"-0"):">=".concat(n,".").concat(i,".").concat(o).concat(r," <").concat(n,".").concat(+i+1,".0-0"):">=".concat(n,".").concat(i,".").concat(o," <").concat(+n+1,".0.0-0")),te("caret return",s),s}))},Nt=(e,t)=>(te("replaceXRanges",e,t),e.split(/\s+/).map((e=>Pt(e,t))).join(" ")),Pt=(e,t)=>{e=e.trim();const n=t.loose?bt[xt.XRANGELOOSE]:bt[xt.XRANGE];return e.replace(n,((n,r,i,o,a,s)=>{te("xRange",e,n,r,i,o,a,s);const u=Mt(i),c=u||Mt(o),l=c||Mt(a),f=l;return"="===r&&f&&(r=""),s=t.includePrerelease?"-0":"",u?n=">"===r||"<"===r?"<0.0.0-0":"*":r&&f?(c&&(o=0),a=0,">"===r?(r=">=",c?(i=+i+1,o=0,a=0):(o=+o+1,a=0)):"<="===r&&(r="<",c?i=+i+1:o=+o+1),"<"===r&&(s="-0"),n="".concat(r+i,".").concat(o,".").concat(a).concat(s)):c?n=">=".concat(i,".0.0").concat(s," <").concat(+i+1,".0.0-0"):l&&(n=">=".concat(i,".").concat(o,".0").concat(s," <").concat(i,".").concat(+o+1,".0-0")),te("xRange return",n),n}))},Rt=(e,t)=>(te("replaceStars",e,t),e.trim().replace(bt[xt.STAR],"")),Bt=(e,t)=>(te("replaceGTE0",e,t),e.trim().replace(bt[t.includePrerelease?xt.GTE0PRE:xt.GTE0],"")),zt=e=>(t,n,r,i,o,a,s,u,c,l,f,d,h)=>(n=Mt(r)?"":Mt(i)?">=".concat(r,".0.0").concat(e?"-0":""):Mt(o)?">=".concat(r,".").concat(i,".0").concat(e?"-0":""):a?">=".concat(n):">=".concat(n).concat(e?"-0":""),u=Mt(c)?"":Mt(l)?"<".concat(+c+1,".0.0-0"):Mt(f)?"<".concat(c,".").concat(+l+1,".0-0"):d?"<=".concat(c,".").concat(l,".").concat(f,"-").concat(d):e?"<".concat(c,".").concat(l,".").concat(+f+1,"-0"):"<=".concat(u),"".concat(n," ").concat(u).trim()),jt=(e,t,n)=>{for(let r=0;r<e.length;r++)if(!e[r].test(t))return!1;if(t.prerelease.length&&!n.includePrerelease){for(let n=0;n<e.length;n++)if(te(e[n].semver),e[n].semver!==Ut.ANY&&e[n].semver.prerelease.length>0){const r=e[n].semver;if(r.major===t.major&&r.minor===t.minor&&r.patch===t.patch)return!0}return!1}return!0},Lt=Symbol("SemVer ANY");class It{static get ANY(){return Lt}constructor(e,t){if(t=ie(t),e instanceof It){if(e.loose===!!t.loose)return e;e=e.value}te("comparator",e,t),this.options=t,this.loose=!!t.loose,this.parse(e),this.semver===Lt?this.value="":this.value=this.operator+this.semver.version,te("comp",this)}parse(e){const t=this.options.loose?qt[Wt.COMPARATORLOOSE]:qt[Wt.COMPARATOR],n=e.match(t);if(!n)throw new TypeError("Invalid comparator: ".concat(e));this.operator=void 0!==n[1]?n[1]:"","="===this.operator&&(this.operator=""),n[2]?this.semver=new ge(n[2],this.options.loose):this.semver=Lt}toString(){return this.value}test(e){if(te("Comparator.test",e,this.options.loose),this.semver===Lt||e===Lt)return!0;if("string"===typeof e)try{e=new ge(e,this.options)}catch(Wr){return!1}return Ie(e,this.operator,this.semver,this.options)}intersects(e,t){if(!(e instanceof It))throw new TypeError("a Comparator is required");if(t&&"object"===typeof t||(t={loose:!!t,includePrerelease:!1}),""===this.operator)return""===this.value||new vt(e.value,t).test(this.value);if(""===e.operator)return""===e.value||new vt(this.value,t).test(e.semver);const n=(">="===this.operator||">"===this.operator)&&(">="===e.operator||">"===e.operator),r=("<="===this.operator||"<"===this.operator)&&("<="===e.operator||"<"===e.operator),i=this.semver.version===e.semver.version,o=(">="===this.operator||"<="===this.operator)&&(">="===e.operator||"<="===e.operator),a=Ie(this.semver,"<",e.semver,t)&&(">="===this.operator||">"===this.operator)&&("<="===e.operator||"<"===e.operator),s=Ie(this.semver,">",e.semver,t)&&("<="===this.operator||"<"===this.operator)&&(">="===e.operator||">"===e.operator);return n||r||i&&o||a||s}}var Ut=It;const qt=ne.re,Wt=ne.t;var Ht=(e,t,n)=>{try{t=new vt(t,n)}catch(Wr){return!1}return t.test(e)},Yt=(e,t)=>new vt(e,t).set.map((e=>e.map((e=>e.value)).join(" ").trim().split(" "))),Vt=(e,t,n)=>{let r=null,i=null,o=null;try{o=new vt(t,n)}catch(Wr){return null}return e.forEach((e=>{o.test(e)&&(r&&-1!==i.compare(e)||(r=e,i=new ge(r,n)))})),r},Gt=(e,t,n)=>{let r=null,i=null,o=null;try{o=new vt(t,n)}catch(Wr){return null}return e.forEach((e=>{o.test(e)&&(r&&1!==i.compare(e)||(r=e,i=new ge(r,n)))})),r},$t=(e,t)=>{e=new vt(e,t);let n=new ge("0.0.0");if(e.test(n))return n;if(n=new ge("0.0.0-0"),e.test(n))return n;n=null;for(let r=0;r<e.set.length;++r){const t=e.set[r];let i=null;t.forEach((e=>{const t=new ge(e.semver.version);switch(e.operator){case">":0===t.prerelease.length?t.patch++:t.prerelease.push(0),t.raw=t.format();case"":case">=":i&&!Re(t,i)||(i=t);break;case"<":case"<=":break;default:throw new Error("Unexpected operation: ".concat(e.operator))}})),!i||n&&!Re(n,i)||(n=i)}return n&&e.test(n)?n:null},Xt=(e,t)=>{try{return new vt(e,t).range||"*"}catch(Wr){return null}};const Jt=Ut.ANY;var Qt=(e,t,n,r)=>{let i,o,a,s,u;switch(e=new ge(e,r),t=new vt(t,r),n){case">":i=Re,o=Le,a=Be,s=">",u=">=";break;case"<":i=Be,o=je,a=Re,s="<",u="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(Ht(e,t,r))return!1;for(let c=0;c<t.set.length;++c){const n=t.set[c];let l=null,f=null;if(n.forEach((e=>{e.semver===Jt&&(e=new Ut(">=0.0.0")),l=l||e,f=f||e,i(e.semver,l.semver,r)?l=e:a(e.semver,f.semver,r)&&(f=e)})),l.operator===s||l.operator===u)return!1;if((!f.operator||f.operator===s)&&o(e,f.semver))return!1;if(f.operator===u&&a(e,f.semver))return!1}return!0},Zt=(e,t,n)=>Qt(e,t,">",n),Kt=(e,t,n)=>Qt(e,t,"<",n),en=(e,t,n)=>(e=new vt(e,n),t=new vt(t,n),e.intersects(t)),tn=(e,t,n)=>{const o=[];let a=null,s=null;const u=e.sort(((e,t)=>Ae(e,t,n)));var c,l=i(u);try{for(l.s();!(c=l.n()).done;){const e=c.value;Ht(e,t,n)?(s=e,a||(a=e)):(s&&o.push([a,s]),s=null,a=null)}}catch(m){l.e(m)}finally{l.f()}a&&o.push([a,null]);const f=[];for(var d=0,h=o;d<h.length;d++){const e=r(h[d],2),t=e[0],n=e[1];t===n?f.push(t):n||t!==u[0]?n?t===u[0]?f.push("<=".concat(n)):f.push("".concat(t," - ").concat(n)):f.push(">=".concat(t)):f.push("*")}const p=f.join(" || "),g="string"===typeof t.raw?t.raw:String(t);return p.length<g.length?p:t};const nn=Ut.ANY,rn=(e,t,n)=>{if(e===t)return!0;e=new vt(e,n),t=new vt(t,n);let r=!1;var o,a=i(e.set);try{e:for(a.s();!(o=a.n()).done;){const e=o.value;var s,u=i(t.set);try{for(u.s();!(s=u.n()).done;){const t=s.value,i=on(e,t,n);if(r=r||null!==i,i)continue e}}catch(c){u.e(c)}finally{u.f()}if(r)return!1}}catch(c){a.e(c)}finally{a.f()}return!0},on=(e,t,n)=>{if(e===t)return!0;if(1===e.length&&e[0].semver===nn)return 1===t.length&&t[0].semver===nn;const r=new Set;let o,a;var s,u=i(e);try{for(u.s();!(s=u.n()).done;){const e=s.value;">"===e.operator||">="===e.operator?o=an(o,e,n):"<"===e.operator||"<="===e.operator?a=sn(a,e,n):r.add(e.semver)}}catch(x){u.e(x)}finally{u.f()}if(r.size>1)return null;let c;if(o&&a){if(c=Ae(o.semver,a.semver,n),c>0)return null;if(0===c&&(">="!==o.operator||"<="!==a.operator))return null}var l,f=i(r);try{for(f.s();!(l=f.n()).done;){const e=l.value;if(o&&!Ht(e,String(o),n))return null;if(a&&!Ht(e,String(a),n))return null;var d,h=i(t);try{for(h.s();!(d=h.n()).done;){const t=d.value;if(!Ht(e,String(t),n))return!1}}catch(x){h.e(x)}finally{h.f()}return!0}}catch(x){f.e(x)}finally{f.f()}let p,g,m,v;var y,b=i(t);try{for(b.s();!(y=b.n()).done;){const e=y.value;if(v=v||">"===e.operator||">="===e.operator,m=m||"<"===e.operator||"<="===e.operator,o)if(">"===e.operator||">="===e.operator){if(p=an(o,e,n),p===e&&p!==o)return!1}else if(">="===o.operator&&!Ht(o.semver,String(e),n))return!1;if(a)if("<"===e.operator||"<="===e.operator){if(g=sn(a,e,n),g===e&&g!==a)return!1}else if("<="===a.operator&&!Ht(a.semver,String(e),n))return!1;if(!e.operator&&(a||o)&&0!==c)return!1}}catch(x){b.e(x)}finally{b.f()}return!(o&&m&&!a&&0!==c)&&!(a&&v&&!o&&0!==c)},an=(e,t,n)=>{if(!e)return t;const r=Ae(e.semver,t.semver,n);return r>0?e:r<0||">"===t.operator&&">="===e.operator?t:e},sn=(e,t,n)=>{if(!e)return t;const r=Ae(e.semver,t.semver,n);return r<0?e:r>0||"<"===t.operator&&"<="===e.operator?t:e};var un=rn,cn={re:ne.re,src:ne.src,tokens:ne.t,SEMVER_SPEC_VERSION:ee.SEMVER_SPEC_VERSION,SemVer:ge,compareIdentifiers:ue.compareIdentifiers,rcompareIdentifiers:ue.rcompareIdentifiers,parse:be,valid:xe,clean:we,inc:_e,diff:Ee,major:De,minor:Ce,patch:Me,prerelease:Fe,compare:Ae,rcompare:Se,compareLoose:Te,compareBuild:Oe,sort:Ne,rsort:Pe,gt:Re,lt:Be,eq:ke,neq:ze,gte:je,lte:Le,cmp:Ie,coerce:We,Comparator:Ut,Range:vt,satisfies:Ht,toComparators:Yt,maxSatisfying:Vt,minSatisfying:Gt,minVersion:$t,validRange:Xt,outside:Qt,gtr:Zt,ltr:Kt,intersects:en,simplifyRange:tn,subset:un};function ln(e){const t=/\/schema\/([\w-]+)\/([\w\.\-]+)\.json$/g.exec(e).slice(1,3),n=r(t,2);return{library:n[0],version:n[1]}}var fn={name:"vega-themes",version:"2.9.1",description:"Themes for stylized Vega and Vega-Lite visualizations.",keywords:["vega","vega-lite","themes","style"],license:"BSD-3-Clause",author:{name:"UW Interactive Data Lab",url:"https://idl.cs.washington.edu"},contributors:[{name:"Emily Gu",url:"https://github.com/emilygu"},{name:"Arvind Satyanarayan",url:"http://arvindsatya.com"},{name:"Jeffrey Heer",url:"https://idl.cs.washington.edu"},{name:"Dominik Moritz",url:"https://www.domoritz.de"}],main:"build/vega-themes.js",module:"build/vega-themes.module.js",unpkg:"build/vega-themes.min.js",jsdelivr:"build/vega-themes.min.js",types:"build/vega-themes.module.d.ts",repository:{type:"git",url:"https://github.com/vega/vega-themes.git"},files:["src","build"],scripts:{prebuild:"yarn clean",build:"rollup -c",clean:"rimraf build && rimraf examples/build","copy:data":"rsync -r node_modules/vega-datasets/data/* examples/data","copy:build":"rsync -r build/* examples/build","deploy:gh":"yarn build && mkdir -p examples/build && rsync -r build/* examples/build && gh-pages -d examples",prepublishOnly:"yarn clean && yarn build",preversion:"yarn lint",serve:"browser-sync start -s -f build examples --serveStatic examples",start:"yarn build && concurrently --kill-others -n Server,Rollup 'yarn serve' 'rollup -c -w'",prepare:"beemo create-config",eslintbase:"beemo eslint .",format:"yarn eslintbase --fix",lint:"yarn eslintbase"},devDependencies:{"@rollup/plugin-json":"^4.1.0","@rollup/plugin-node-resolve":"^9.0.0","@wessberg/rollup-plugin-ts":"^1.3.4","browser-sync":"^2.26.12",concurrently:"^5.3.0","gh-pages":"^3.1.0",rollup:"^2.26.11","rollup-plugin-bundle-size":"^1.0.3","rollup-plugin-terser":"^7.0.2",typescript:"^4.0.2",vega:"^5.10.0","vega-lite":"^4.8.1","vega-lite-dev-config":"^0.14.6"},peerDependencies:{vega:"*","vega-lite":"*"},beemo:{module:"vega-lite-dev-config",drivers:["typescript","prettier","eslint"]}};const dn="#fff",hn={background:"#333",title:{color:dn},style:{"guide-label":{fill:dn},"guide-title":{fill:dn}},axis:{domainColor:dn,gridColor:"#888",tickColor:dn}},pn="#4572a7",gn={background:"#fff",arc:{fill:pn},area:{fill:pn},line:{stroke:pn,strokeWidth:2},path:{stroke:pn},rect:{fill:pn},shape:{stroke:pn},symbol:{fill:pn,strokeWidth:1.5,size:50},axis:{bandPosition:.5,grid:!0,gridColor:"#000000",gridOpacity:1,gridWidth:.5,labelPadding:10,tickSize:5,tickWidth:.5},axisBand:{grid:!1,tickExtra:!0},legend:{labelBaseline:"middle",labelFontSize:11,symbolSize:50,symbolType:"square"},range:{category:["#4572a7","#aa4643","#8aa453","#71598e","#4598ae","#d98445","#94aace","#d09393","#b9cc98","#a99cbc"]}},mn="#30a2da",vn="#cbcbcb",yn="#f0f0f0",bn="#333",xn={arc:{fill:mn},area:{fill:mn},axis:{domainColor:vn,grid:!0,gridColor:vn,gridWidth:1,labelColor:"#999",labelFontSize:10,titleColor:"#333",tickColor:vn,tickSize:10,titleFontSize:14,titlePadding:10,labelPadding:4},axisBand:{grid:!1},background:yn,group:{fill:yn},legend:{labelColor:bn,labelFontSize:11,padding:1,symbolSize:30,symbolType:"square",titleColor:bn,titleFontSize:14,titlePadding:10},line:{stroke:mn,strokeWidth:2},path:{stroke:mn,strokeWidth:.5},rect:{fill:mn},range:{category:["#30a2da","#fc4f30","#e5ae38","#6d904f","#8b8b8b","#b96db8","#ff9e27","#56cc60","#52d2ca","#52689e","#545454","#9fe4f8"],diverging:["#cc0020","#e77866","#f6e7e1","#d6e8ed","#91bfd9","#1d78b5"],heatmap:["#d6e8ed","#cee0e5","#91bfd9","#549cc6","#1d78b5"]},point:{filled:!0,shape:"circle"},shape:{stroke:mn},bar:{binSpacing:2,fill:mn,stroke:null},title:{anchor:"start",fontSize:24,fontWeight:600,offset:20}},wn="#000",_n={group:{fill:"#e5e5e5"},arc:{fill:wn},area:{fill:wn},line:{stroke:wn},path:{stroke:wn},rect:{fill:wn},shape:{stroke:wn},symbol:{fill:wn,size:40},axis:{domain:!1,grid:!0,gridColor:"#FFFFFF",gridOpacity:1,labelColor:"#7F7F7F",labelPadding:4,tickColor:"#7F7F7F",tickSize:5.67,titleFontSize:16,titleFontWeight:"normal"},legend:{labelBaseline:"middle",labelFontSize:11,symbolSize:40},range:{category:["#000000","#7F7F7F","#1A1A1A","#999999","#333333","#B0B0B0","#4D4D4D","#C9C9C9","#666666","#DCDCDC"]}},An="Benton Gothic, sans-serif",kn=11.5,En="#82c6df",Dn="Benton Gothic Bold, sans-serif",Cn="normal",Mn=13,Fn={"category-6":["#ec8431","#829eb1","#c89d29","#3580b1","#adc839","#ab7fb4"],"fire-7":["#fbf2c7","#f9e39c","#f8d36e","#f4bb6a","#e68a4f","#d15a40","#ab4232"],"fireandice-6":["#e68a4f","#f4bb6a","#f9e39c","#dadfe2","#a6b7c6","#849eae"],"ice-7":["#edefee","#dadfe2","#c4ccd2","#a6b7c6","#849eae","#607785","#47525d"]},Sn={background:"#ffffff",title:{anchor:"start",color:"#000000",font:Dn,fontSize:22,fontWeight:"normal"},arc:{fill:En},area:{fill:En},line:{stroke:En,strokeWidth:2},path:{stroke:En},rect:{fill:En},shape:{stroke:En},symbol:{fill:En,size:30},axis:{labelFont:An,labelFontSize:kn,labelFontWeight:"normal",titleFont:Dn,titleFontSize:Mn,titleFontWeight:Cn},axisX:{labelAngle:0,labelPadding:4,tickSize:3},axisY:{labelBaseline:"middle",maxExtent:45,minExtent:45,tickSize:2,titleAlign:"left",titleAngle:0,titleX:-45,titleY:-11},legend:{labelFont:An,labelFontSize:kn,symbolType:"square",titleFont:Dn,titleFontSize:Mn,titleFontWeight:Cn},range:{category:Fn["category-6"],diverging:Fn["fireandice-6"],heatmap:Fn["fire-7"],ordinal:Fn["fire-7"],ramp:Fn["fire-7"]}},Tn="#ab5787",On="#979797",Nn={background:"#f9f9f9",arc:{fill:Tn},area:{fill:Tn},line:{stroke:Tn},path:{stroke:Tn},rect:{fill:Tn},shape:{stroke:Tn},symbol:{fill:Tn,size:30},axis:{domainColor:On,domainWidth:.5,gridWidth:.2,labelColor:On,tickColor:On,tickWidth:.2,titleColor:On},axisBand:{grid:!1},axisX:{grid:!0,tickSize:10},axisY:{domain:!1,grid:!0,tickSize:0},legend:{labelFontSize:11,padding:1,symbolSize:30,symbolType:"square"},range:{category:["#ab5787","#51b2e5","#703c5c","#168dd9","#d190b6","#00609f","#d365ba","#154866","#666666","#c4c4c4"]}},Pn="#3e5c69",Rn={background:"#fff",arc:{fill:Pn},area:{fill:Pn},line:{stroke:Pn},path:{stroke:Pn},rect:{fill:Pn},shape:{stroke:Pn},symbol:{fill:Pn},axis:{domainWidth:.5,grid:!0,labelPadding:2,tickSize:5,tickWidth:.5,titleFontWeight:"normal"},axisBand:{grid:!1},axisX:{gridWidth:.2},axisY:{gridDash:[3],gridWidth:.4},legend:{labelFontSize:11,padding:1,symbolType:"square"},range:{category:["#3e5c69","#6793a6","#182429","#0570b0","#3690c0","#74a9cf","#a6bddb","#e2ddf2"]}},Bn="#1696d2",zn="#000000",jn="Lato",Ln="Lato",In="Lato",Un={"main-colors":["#1696d2","#d2d2d2","#000000","#fdbf11","#ec008b","#55b748","#5c5859","#db2b27"],"shades-blue":["#CFE8F3","#A2D4EC","#73BFE2","#46ABDB","#1696D2","#12719E","#0A4C6A","#062635"],"shades-gray":["#F5F5F5","#ECECEC","#E3E3E3","#DCDBDB","#D2D2D2","#9D9D9D","#696969","#353535"],"shades-yellow":["#FFF2CF","#FCE39E","#FDD870","#FCCB41","#FDBF11","#E88E2D","#CA5800","#843215"],"shades-magenta":["#F5CBDF","#EB99C2","#E46AA7","#E54096","#EC008B","#AF1F6B","#761548","#351123"],"shades-green":["#DCEDD9","#BCDEB4","#98CF90","#78C26D","#55B748","#408941","#2C5C2D","#1A2E19"],"shades-black":["#D5D5D4","#ADABAC","#848081","#5C5859","#332D2F","#262223","#1A1717","#0E0C0D"],"shades-red":["#F8D5D4","#F1AAA9","#E9807D","#E25552","#DB2B27","#A4201D","#6E1614","#370B0A"],"one-group":["#1696d2","#000000"],"two-groups-cat-1":["#1696d2","#000000"],"two-groups-cat-2":["#1696d2","#fdbf11"],"two-groups-cat-3":["#1696d2","#db2b27"],"two-groups-seq":["#a2d4ec","#1696d2"],"three-groups-cat":["#1696d2","#fdbf11","#000000"],"three-groups-seq":["#a2d4ec","#1696d2","#0a4c6a"],"four-groups-cat-1":["#000000","#d2d2d2","#fdbf11","#1696d2"],"four-groups-cat-2":["#1696d2","#ec0008b","#fdbf11","#5c5859"],"four-groups-seq":["#cfe8f3","#73bf42","#1696d2","#0a4c6a"],"five-groups-cat-1":["#1696d2","#fdbf11","#d2d2d2","#ec008b","#000000"],"five-groups-cat-2":["#1696d2","#0a4c6a","#d2d2d2","#fdbf11","#332d2f"],"five-groups-seq":["#cfe8f3","#73bf42","#1696d2","#0a4c6a","#000000"],"six-groups-cat-1":["#1696d2","#ec008b","#fdbf11","#000000","#d2d2d2","#55b748"],"six-groups-cat-2":["#1696d2","#d2d2d2","#ec008b","#fdbf11","#332d2f","#0a4c6a"],"six-groups-seq":["#cfe8f3","#a2d4ec","#73bfe2","#46abdb","#1696d2","#12719e"],"diverging-colors":["#ca5800","#fdbf11","#fdd870","#fff2cf","#cfe8f3","#73bfe2","#1696d2","#0a4c6a"]},qn={background:"#FFFFFF",title:{anchor:"start",fontSize:18,font:jn},axisX:{domain:!0,domainColor:zn,domainWidth:1,grid:!1,labelFontSize:12,labelFont:Ln,labelAngle:0,tickColor:zn,tickSize:5,titleFontSize:12,titlePadding:10,titleFont:jn},axisY:{domain:!1,domainWidth:1,grid:!0,gridColor:"#DEDDDD",gridWidth:1,labelFontSize:12,labelFont:Ln,labelPadding:8,ticks:!1,titleFontSize:12,titlePadding:10,titleFont:jn,titleAngle:0,titleY:-10,titleX:18},legend:{labelFontSize:12,labelFont:Ln,symbolSize:100,titleFontSize:12,titlePadding:10,titleFont:jn,orient:"right",offset:10},view:{stroke:"transparent"},range:{category:Un["six-groups-cat-1"],diverging:Un["diverging-colors"],heatmap:Un["diverging-colors"],ordinal:Un["six-groups-seq"],ramp:Un["shades-blue"]},area:{fill:Bn},rect:{fill:Bn},line:{color:Bn,stroke:Bn,strokeWidth:5},trail:{color:Bn,stroke:Bn,strokeWidth:0,size:1},path:{stroke:Bn,strokeWidth:.5},point:{filled:!0},text:{font:In,color:Bn,fontSize:11,align:"center",fontWeight:400,size:11},style:{bar:{fill:Bn,stroke:null}},arc:{fill:Bn},shape:{stroke:Bn},symbol:{fill:Bn,size:30}},Wn="#3366CC",Hn="#ccc",Yn="Arial, sans-serif",Vn={arc:{fill:Wn},area:{fill:Wn},path:{stroke:Wn},rect:{fill:Wn},shape:{stroke:Wn},symbol:{stroke:Wn},circle:{fill:Wn},background:"#fff",padding:{top:10,right:10,bottom:10,left:10},style:{"guide-label":{font:Yn,fontSize:12},"guide-title":{font:Yn,fontSize:12},"group-title":{font:Yn,fontSize:12}},title:{font:Yn,fontSize:14,fontWeight:"bold",dy:-3,anchor:"start"},axis:{gridColor:Hn,tickColor:Hn,domain:!1,grid:!0},range:{category:["#4285F4","#DB4437","#F4B400","#0F9D58","#AB47BC","#00ACC1","#FF7043","#9E9D24","#5C6BC0","#F06292","#00796B","#C2185B"],heatmap:["#c6dafc","#5e97f6","#2a56c6"]}},Gn=fn.version;var $n=Object.freeze({__proto__:null,dark:hn,excel:gn,fivethirtyeight:xn,ggplot2:_n,googlecharts:Vn,latimes:Sn,quartz:Nn,urbaninstitute:qn,version:Gn,vox:Rn});function Xn(e,t,n){return e.fields=t||[],e.fname=n,e}function Jn(e){return 1===e.length?Qn(e[0]):Zn(e)}const Qn=e=>function(t){return t[e]},Zn=e=>{const t=e.length;return function(n){for(let r=0;r<t;++r)n=n[e[r]];return n}};function Kn(e){throw Error(e)}function er(e){const t=[],n=e.length;let r,i,o,a=null,s=0,u="";function c(){t.push(u+e.substring(r,i)),u="",r=i+1}for(e+="",r=i=0;i<n;++i)if(o=e[i],"\\"===o)u+=e.substring(r,i),u+=e.substring(++i,++i),r=i;else if(o===a)c(),a=null,s=-1;else{if(a)continue;r===s&&'"'===o||r===s&&"'"===o?(r=i+1,a=o):"."!==o||s?"["===o?(i>r&&c(),s=r=i+1):"]"===o&&(s||Kn("Access path missing open bracket: "+e),s>0&&c(),s=0,r=i+1):i>r?c():r=i+1}return s&&Kn("Access path missing closing bracket: "+e),a&&Kn("Access path missing closing quote: "+e),i>r&&(i++,c()),t}function tr(e,t,n){const r=er(e);return e=1===r.length?r[0]:e,Xn((n&&n.get||Jn)(r),[e],t||e)}tr("id"),Xn((e=>e),[],"identity"),Xn((()=>0),[],"zero"),Xn((()=>1),[],"one"),Xn((()=>!0),[],"true"),Xn((()=>!1),[],"false");var nr=Array.isArray;function rr(e){return e===Object(e)}function ir(e){return"string"===typeof e}var or="#vg-tooltip-element {\n  visibility: hidden;\n  padding: 8px;\n  position: fixed;\n  z-index: 1000;\n  font-family: sans-serif;\n  font-size: 11px;\n  border-radius: 3px;\n  box-shadow: 2px 2px 4px rgba(0, 0, 0, 0.1);\n  /* The default theme is the light theme. */\n  background-color: rgba(255, 255, 255, 0.95);\n  border: 1px solid #d9d9d9;\n  color: black; }\n  #vg-tooltip-element.visible {\n    visibility: visible; }\n  #vg-tooltip-element h2 {\n    margin-top: 0;\n    margin-bottom: 10px;\n    font-size: 13px; }\n  #vg-tooltip-element img {\n    max-width: 200px;\n    max-height: 200px; }\n  #vg-tooltip-element table {\n    border-spacing: 0; }\n    #vg-tooltip-element table tr {\n      border: none; }\n      #vg-tooltip-element table tr td {\n        overflow: hidden;\n        text-overflow: ellipsis;\n        padding-top: 2px;\n        padding-bottom: 2px; }\n        #vg-tooltip-element table tr td.key {\n          color: #808080;\n          max-width: 150px;\n          text-align: right;\n          padding-right: 4px; }\n        #vg-tooltip-element table tr td.value {\n          display: block;\n          max-width: 300px;\n          max-height: 7em;\n          text-align: left; }\n  #vg-tooltip-element.dark-theme {\n    background-color: rgba(32, 32, 32, 0.9);\n    border: 1px solid #f5f5f5;\n    color: white; }\n    #vg-tooltip-element.dark-theme td.key {\n      color: #bfbfbf; }\n";const ar="vg-tooltip-element",sr={offsetX:10,offsetY:10,id:ar,styleId:"vega-tooltip-style",theme:"light",disableDefaultStyle:!1,sanitize:ur,maxDepth:2};function ur(e){return String(e).replace(/&/g,"&amp;").replace(/</g,"&lt;")}function cr(e){if(!/^[A-Za-z]+[-:.\w]*$/.test(e))throw new Error("Invalid HTML ID");return or.toString().replace(ar,e)}function lr(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}function fr(e,t,n){if(nr(e))return"[".concat(e.map((e=>t(ir(e)?e:hr(e,n)))).join(", "),"]");if(rr(e)){let s="";const u=e,c=u.title,l=u.image,f=lr(u,["title","image"]);c&&(s+="<h2>".concat(t(c),"</h2>")),l&&(s+='<img src="'.concat(t(l),'">'));const d=Object.keys(f);if(d.length>0){s+="<table>";var r,o=i(d);try{for(o.s();!(r=o.n()).done;){const e=r.value;let i=f[e];void 0!==i&&(rr(i)&&(i=hr(i,n)),s+='<tr><td class="key">'.concat(t(e),':</td><td class="value">').concat(t(i),"</td></tr>"))}}catch(a){o.e(a)}finally{o.f()}s+="</table>"}return s||"{}"}return t(e)}function dr(e){const t=[];return function(n,r){if("object"!==typeof r||null===r)return r;const i=t.indexOf(this)+1;return t.length=i,t.length>e?"[Object]":t.indexOf(r)>=0?"[Circular]":(t.push(r),r)}}function hr(e,t){return JSON.stringify(e,dr(t))}function pr(e,t,n,r){let i=e.clientX+n;i+t.width>window.innerWidth&&(i=+e.clientX-n-t.width);let o=e.clientY+r;return o+t.height>window.innerHeight&&(o=+e.clientY-r-t.height),{x:i,y:o}}class gr{constructor(e){this.options=Object.assign(Object.assign({},sr),e);const t=this.options.id;if(this.call=this.tooltipHandler.bind(this),!this.options.disableDefaultStyle&&!document.getElementById(this.options.styleId)){const e=document.createElement("style");e.setAttribute("id",this.options.styleId),e.innerHTML=cr(t);const n=document.head;n.childNodes.length>0?n.insertBefore(e,n.childNodes[0]):n.appendChild(e)}this.el=document.getElementById(t),this.el||(this.el=document.createElement("div"),this.el.setAttribute("id",t),this.el.classList.add("vg-tooltip"),document.body.appendChild(this.el))}tooltipHandler(e,t,n,r){if(null==r||""===r)return void this.el.classList.remove("visible","".concat(this.options.theme,"-theme"));this.el.innerHTML=fr(r,this.options.sanitize,this.options.maxDepth),this.el.classList.add("visible","".concat(this.options.theme,"-theme"));const i=pr(t,this.el.getBoundingClientRect(),this.options.offsetX,this.options.offsetY),o=i.x,a=i.y;this.el.setAttribute("style","top: ".concat(a,"px; left: ").concat(o,"px"))}}function mr(e,t,n){var r=e.open(t),i=1e4,o=250,a=new URL(t).origin,s=~~(i/o);function u(t){t.source===r&&(s=0,e.removeEventListener("message",u,!1))}function c(){s<=0||(r.postMessage(n,a),setTimeout(c,o),s-=1)}e.addEventListener("message",u,!1),setTimeout(c,o)}var vr,yr='.vega-embed {\n  position: relative;\n  display: inline-block;\n  box-sizing: border-box; }\n  .vega-embed.has-actions {\n    padding-right: 38px; }\n  .vega-embed details:not([open]) > :not(summary) {\n    display: none !important; }\n  .vega-embed summary {\n    list-style: none;\n    position: absolute;\n    top: 0;\n    right: 0;\n    padding: 6px;\n    z-index: 1000;\n    background: white;\n    box-shadow: 1px 1px 3px rgba(0, 0, 0, 0.1);\n    color: #1b1e23;\n    border: 1px solid #aaa;\n    border-radius: 999px;\n    opacity: 0.2;\n    transition: opacity 0.4s ease-in;\n    outline: none;\n    cursor: pointer;\n    line-height: 0px; }\n    .vega-embed summary::-webkit-details-marker {\n      display: none; }\n    .vega-embed summary:active {\n      box-shadow: #aaa 0px 0px 0px 1px inset; }\n    .vega-embed summary svg {\n      width: 14px;\n      height: 14px; }\n  .vega-embed details[open] summary {\n    opacity: 0.7; }\n  .vega-embed:hover summary,\n  .vega-embed:focus summary {\n    opacity: 1 !important;\n    transition: opacity 0.2s ease; }\n  .vega-embed .vega-actions {\n    position: absolute;\n    z-index: 1001;\n    top: 35px;\n    right: -9px;\n    display: flex;\n    flex-direction: column;\n    padding-bottom: 8px;\n    padding-top: 8px;\n    border-radius: 4px;\n    box-shadow: 0 2px 8px 0 rgba(0, 0, 0, 0.2);\n    border: 1px solid #d9d9d9;\n    background: white;\n    animation-duration: 0.15s;\n    animation-name: scale-in;\n    animation-timing-function: cubic-bezier(0.2, 0, 0.13, 1.5);\n    text-align: left; }\n    .vega-embed .vega-actions a {\n      padding: 8px 16px;\n      font-family: sans-serif;\n      font-size: 14px;\n      font-weight: 600;\n      white-space: nowrap;\n      color: #434a56;\n      text-decoration: none; }\n      .vega-embed .vega-actions a:hover {\n        background-color: #f7f7f9;\n        color: black; }\n    .vega-embed .vega-actions::before, .vega-embed .vega-actions::after {\n      content: "";\n      display: inline-block;\n      position: absolute; }\n    .vega-embed .vega-actions::before {\n      left: auto;\n      right: 14px;\n      top: -16px;\n      border: 8px solid #0000;\n      border-bottom-color: #d9d9d9; }\n    .vega-embed .vega-actions::after {\n      left: auto;\n      right: 15px;\n      top: -14px;\n      border: 7px solid #0000;\n      border-bottom-color: #fff; }\n  .vega-embed .chart-wrapper {\n    width: 100%;\n    height: 100%; }\n\n.vega-embed-wrapper {\n  max-width: 100%;\n  overflow: auto;\n  padding-right: 14px; }\n\n@keyframes scale-in {\n  from {\n    opacity: 0;\n    transform: scale(0.6); }\n  to {\n    opacity: 1;\n    transform: scale(1); } }\n';function br(e){return e.startsWith("http://")||e.startsWith("https://")||e.startsWith("//")}function xr(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];for(var r=0,i=t;r<i.length;r++)wr(e,i[r]);return e}function wr(t,n){for(var r=0,i=Object.keys(n);r<i.length;r++){var o=i[r];e.writeConfig(t,o,n[o],!0)}}String.prototype.startsWith||(String.prototype.startsWith=function(e,t){return this.substr(!t||t<0?0:+t,e.length)===e});var _r=s,Ar=u,kr="undefined"!==typeof window?window:void 0;void 0===Ar&&(null===(vr=null===kr||void 0===kr?void 0:kr.vl)||void 0===vr?void 0:vr.compile)&&(Ar=kr.vl);var Er={export:{svg:!0,png:!0},source:!0,compiled:!0,editor:!0},Dr={CLICK_TO_VIEW_ACTIONS:"Click to view actions",COMPILED_ACTION:"View Compiled Vega",EDITOR_ACTION:"Open in Vega Editor",PNG_ACTION:"Save as PNG",SOURCE_ACTION:"View Source",SVG_ACTION:"Save as SVG"},Cr={vega:"Vega","vega-lite":"Vega-Lite"},Mr={vega:_r.version,"vega-lite":Ar?Ar.version:"not available"},Fr={vega:function(e){return e},"vega-lite":function(e,t){return Ar.compile(e,{config:t}).spec}},Sr='\n<svg viewBox="0 0 16 16" fill="currentColor" stroke="none" stroke-width="1" stroke-linecap="round" stroke-linejoin="round">\n  <circle r="2" cy="8" cx="2"></circle>\n  <circle r="2" cy="8" cx="8"></circle>\n  <circle r="2" cy="8" cx="14"></circle>\n</svg>',Tr="chart-wrapper";function Or(e){return"function"===typeof e}function Nr(e,t,n,r){var i="<html><head>"+t+'</head><body><pre><code class="json">',o="</code></pre>"+n+"</body></html>",a=window.open("");a.document.write(i+e+o),a.document.title=Cr[r]+" JSON Source"}function Pr(e,t){var n;if(e.$schema){var r=ln(e.$schema);t&&t!==r.library&&console.warn("The given visualization spec is written in "+Cr[r.library]+", but mode argument sets "+(null!==(n=Cr[t])&&void 0!==n?n:t)+".");var i=r.library;return cn.satisfies(Mr[i],"^"+r.version.slice(1))||console.warn("The input spec uses "+Cr[i]+" "+r.version+", but the current version of "+Cr[i]+" is v"+Mr[i]+"."),i}return"mark"in e||"encoding"in e||"layer"in e||"hconcat"in e||"vconcat"in e||"facet"in e||"repeat"in e?"vega-lite":"marks"in e||"signals"in e||"scales"in e||"axes"in e?"vega":null!==t&&void 0!==t?t:"vega"}function Rr(e){return!(!e||!("load"in e))}function Br(t,n,r){var i,o,a;return void 0===r&&(r={}),f(this,void 0,void 0,(function(){var s,u,c,f,h,p,g,m;return d(this,(function(d){switch(d.label){case 0:return s=Rr(r.loader)?r.loader:_r.loader(r.loader),e.isString(n)?(h=(f=JSON).parse,[4,s.load(n)]):[3,2];case 1:return c=h.apply(f,[d.sent()]),[3,3];case 2:c=n,d.label=3;case 3:return[4,zr(null!==(i=(u=c).usermeta&&u.usermeta.embedOptions)&&void 0!==i?i:{},s)];case 4:return p=d.sent(),[4,zr(r,s)];case 5:return g=d.sent(),m=l(l({},xr(g,p)),{config:e.mergeConfig(null!==(o=g.config)&&void 0!==o?o:{},null!==(a=p.config)&&void 0!==a?a:{})}),[4,Lr(t,u,m,s)];case 6:return[2,d.sent()]}}))}))}function zr(t,n){var r;return f(this,void 0,void 0,(function(){var i,o,a,s,u,c,f,h;return d(this,(function(d){switch(d.label){case 0:return e.isString(t.config)?(s=(a=JSON).parse,[4,n.load(t.config)]):[3,2];case 1:return o=s.apply(a,[d.sent()]),[3,3];case 2:o=null!==(r=t.config)&&void 0!==r?r:{},d.label=3;case 3:return i=o,e.isString(t.patch)?(h=(f=JSON).parse,[4,n.load(t.patch)]):[3,5];case 4:return c=h.apply(f,[d.sent()]),[3,6];case 5:c=t.patch,d.label=6;case 6:return u=c,[2,l(l(l({},t),u?{patch:u}:{}),i?{config:i}:{})]}}))}))}function jr(e){var t,n=e.getRootNode?e.getRootNode():document;return n instanceof ShadowRoot?{root:n,rootContainer:n}:{root:document,rootContainer:null!==(t=document.head)&&void 0!==t?t:document.body}}function Lr(t,n,r,i){var o,a,s,u,c,h;return void 0===r&&(r={}),f(this,void 0,void 0,(function(){function p(){q&&document.removeEventListener("click",q),B.finalize()}var g,m,v,y,b,x,w,_,A,k,E,D,C,M,F,T,O,N,P,R,B,z,j,L,I,U,q,W,H,Y,V,G,$,J,Q,Z,K,ee,te;return d(this,(function(ne){switch(ne.label){case 0:if(g=r.theme?e.mergeConfig($n[r.theme],null!==(o=r.config)&&void 0!==o?o:{}):r.config,m=e.isBoolean(r.actions)?r.actions:xr({},Er,null!==(a=r.actions)&&void 0!==a?a:{}),v=l(l({},Dr),r.i18n),y=null!==(s=r.renderer)&&void 0!==s?s:"canvas",b=null!==(u=r.logLevel)&&void 0!==u?u:_r.Warn,x=null!==(c=r.downloadFileName)&&void 0!==c?c:"visualization",!(w="string"===typeof t?document.querySelector(t):t))throw new Error(t+" does not exist");return!1!==r.defaultStyle&&(_="vega-embed-style",A=jr(w),k=A.root,E=A.rootContainer,k.getElementById(_)||((D=document.createElement("style")).id=_,D.innerText=void 0===r.defaultStyle||!0===r.defaultStyle?yr.toString():r.defaultStyle,E.appendChild(D))),C=Pr(n,r.mode),M=Fr[C](n,g),"vega-lite"===C&&M.$schema&&(F=ln(M.$schema),cn.satisfies(Mr.vega,"^"+F.version.slice(1))||console.warn("The compiled spec uses Vega "+F.version+", but current version is v"+Mr.vega+".")),w.classList.add("vega-embed"),m&&w.classList.add("has-actions"),w.innerHTML="",T=w,m&&((O=document.createElement("div")).classList.add(Tr),w.appendChild(O),T=O),(N=r.patch)&&(M=N instanceof Function?N(M):S(M,N,!0,!1).newDocument),r.formatLocale&&_r.formatLocale(r.formatLocale),r.timeFormatLocale&&_r.timeFormatLocale(r.timeFormatLocale),P=r.ast,R=_r.parse(M,"vega-lite"===C?{}:g,{ast:P}),B=new _r.View(R,l({loader:i,logLevel:b,renderer:y},P?{expr:_r.expressionInterpreter}:{})),!1!==r.tooltip&&(z=void 0,z=Or(r.tooltip)?r.tooltip:new gr(!0===r.tooltip?{}:r.tooltip).call,B.tooltip(z)),void 0===(j=r.hover)&&(j="vega"===C),j&&(I=(L="boolean"===typeof j?{}:j).hoverSet,U=L.updateSet,B.hover(I,U)),r&&(null!=r.width&&B.width(r.width),null!=r.height&&B.height(r.height),null!=r.padding&&B.padding(r.padding)),[4,B.initialize(T,r.bind).runAsync()];case 1:if(ne.sent(),!1!==m){if(W=w,!1!==r.defaultStyle&&((H=document.createElement("details")).title=v.CLICK_TO_VIEW_ACTIONS,w.append(H),W=H,(Y=document.createElement("summary")).innerHTML=Sr,H.append(Y),q=function(e){H.contains(e.target)||H.removeAttribute("open")},document.addEventListener("click",q)),V=document.createElement("div"),W.append(V),V.classList.add("vega-actions"),!0===m||!1!==m.export)for(G=function(e){if(!0===m||!0===m.export||m.export[e]){var t=v[e.toUpperCase()+"_ACTION"],n=document.createElement("a");n.text=t,n.href="#",n.target="_blank",n.download=x+"."+e,n.addEventListener("mousedown",(function(t){return f(this,void 0,void 0,(function(){var n;return d(this,(function(i){switch(i.label){case 0:return t.preventDefault(),[4,B.toImageURL(e,r.scaleFactor)];case 1:return n=i.sent(),this.href=n,[2]}}))}))})),V.append(n)}},$=0,J=["svg","png"];$<J.length;$++)Q=J[$],G(Q);!0!==m&&!1===m.source||((Z=document.createElement("a")).text=v.SOURCE_ACTION,Z.href="#",Z.addEventListener("click",(function(e){var t,i;Nr(X(n),null!==(t=r.sourceHeader)&&void 0!==t?t:"",null!==(i=r.sourceFooter)&&void 0!==i?i:"",C),e.preventDefault()})),V.append(Z)),"vega-lite"!==C||!0!==m&&!1===m.compiled||((K=document.createElement("a")).text=v.COMPILED_ACTION,K.href="#",K.addEventListener("click",(function(e){var t,n;Nr(X(M),null!==(t=r.sourceHeader)&&void 0!==t?t:"",null!==(n=r.sourceFooter)&&void 0!==n?n:"","vega"),e.preventDefault()})),V.append(K)),!0!==m&&!1===m.editor||(ee=null!==(h=r.editorUrl)&&void 0!==h?h:"https://vega.github.io/editor/",(te=document.createElement("a")).text=v.EDITOR_ACTION,te.href="#",te.addEventListener("click",(function(e){mr(window,ee,{config:g,mode:C,renderer:y,spec:X(n)}),e.preventDefault()})),V.append(te))}return[2,{view:B,spec:n,vgSpec:M,finalize:p}]}}))}))}function Ir(e,t){var n;return void 0===t&&(t={}),f(this,void 0,void 0,(function(){var r,i,o,a;return d(this,(function(s){switch(s.label){case 0:return(r=document.createElement("div")).classList.add("vega-embed-wrapper"),i=document.createElement("div"),r.appendChild(i),o=!0===t.actions||!1===t.actions?t.actions:l({export:!0,source:!1,compiled:!0,editor:!0},null!==(n=t.actions)&&void 0!==n?n:{}),[4,Br(i,e,l({actions:o},null!==t&&void 0!==t?t:{}))];case 1:return a=s.sent(),r.value=a.view,[2,r]}}))}))}function Ur(e){return e instanceof HTMLElement}var qr=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return t.length>1&&(e.isString(t[0])&&!br(t[0])||Ur(t[0])||3===t.length)?Br(t[0],t[1],t[2]):Ir(t[0],t[1])};return qr.vegaLite=Ar,qr.vl=Ar,qr.container=Ir,qr.embed=Br,qr.vega=_r,qr.default=Br,qr.version=c,qr}(n(1711),n(2365))}).call(this,n(48))},2329:function(e,t,n){!function(e){"use strict";function t(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function n(e,t){if((n=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var n,r=e.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+e.slice(n+1)]}function r(e){return(e=n(Math.abs(e)))?e[1]:NaN}function i(e,t){return function(n,r){for(var i=n.length,o=[],a=0,s=e[0],u=0;i>0&&s>0&&(u+s+1>r&&(s=Math.max(1,r-u)),o.push(n.substring(i-=s,i+s)),!((u+=s+1)>r));)s=e[a=(a+1)%e.length];return o.reverse().join(t)}}function o(e){return function(t){return t.replace(/[0-9]/g,(function(t){return e[+t]}))}}var a,s=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function u(e){if(!(t=s.exec(e)))throw new Error("invalid format: "+e);var t;return new c({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}function c(e){this.fill=void 0===e.fill?" ":e.fill+"",this.align=void 0===e.align?">":e.align+"",this.sign=void 0===e.sign?"-":e.sign+"",this.symbol=void 0===e.symbol?"":e.symbol+"",this.zero=!!e.zero,this.width=void 0===e.width?void 0:+e.width,this.comma=!!e.comma,this.precision=void 0===e.precision?void 0:+e.precision,this.trim=!!e.trim,this.type=void 0===e.type?"":e.type+""}function l(e){e:for(var t,n=e.length,r=1,i=-1;r<n;++r)switch(e[r]){case".":i=t=r;break;case"0":0===i&&(i=r),t=r;break;default:if(!+e[r])break e;i>0&&(i=0)}return i>0?e.slice(0,i)+e.slice(t+1):e}function f(e,t){var r=n(e,t);if(!r)return e+"";var i=r[0],o=r[1],s=o-(a=3*Math.max(-8,Math.min(8,Math.floor(o/3))))+1,u=i.length;return s===u?i:s>u?i+new Array(s-u+1).join("0"):s>0?i.slice(0,s)+"."+i.slice(s):"0."+new Array(1-s).join("0")+n(e,Math.max(0,t+s-1))[0]}function d(e,t){var r=n(e,t);if(!r)return e+"";var i=r[0],o=r[1];return o<0?"0."+new Array(-o).join("0")+i:i.length>o+1?i.slice(0,o+1)+"."+i.slice(o+1):i+new Array(o-i.length+2).join("0")}u.prototype=c.prototype,c.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(void 0===this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(void 0===this.precision?"":"."+Math.max(0,0|this.precision))+(this.trim?"~":"")+this.type};var h={"%":(e,t)=>(100*e).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:t,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>d(100*e,t),r:d,s:f,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function p(e){return e}var g,m=Array.prototype.map,v=["y","z","a","f","p","n","\xb5","m","","k","M","G","T","P","E","Z","Y"];function y(e){var t=void 0===e.grouping||void 0===e.thousands?p:i(m.call(e.grouping,Number),e.thousands+""),n=void 0===e.currency?"":e.currency[0]+"",s=void 0===e.currency?"":e.currency[1]+"",c=void 0===e.decimal?".":e.decimal+"",f=void 0===e.numerals?p:o(m.call(e.numerals,String)),d=void 0===e.percent?"%":e.percent+"",g=void 0===e.minus?"\u2212":e.minus+"",y=void 0===e.nan?"NaN":e.nan+"";function b(e){var r=(e=u(e)).fill,i=e.align,o=e.sign,p=e.symbol,m=e.zero,b=e.width,x=e.comma,w=e.precision,_=e.trim,A=e.type;"n"===A?(x=!0,A="g"):h[A]||(void 0===w&&(w=12),_=!0,A="g"),(m||"0"===r&&"="===i)&&(m=!0,r="0",i="=");var k="$"===p?n:"#"===p&&/[boxX]/.test(A)?"0"+A.toLowerCase():"",E="$"===p?s:/[%p]/.test(A)?d:"",D=h[A],C=/[defgprs%]/.test(A);function M(e){var n,s,u,d=k,h=E;if("c"===A)h=D(e)+h,e="";else{var p=(e=+e)<0||1/e<0;if(e=isNaN(e)?y:D(Math.abs(e),w),_&&(e=l(e)),p&&0===+e&&"+"!==o&&(p=!1),d=(p?"("===o?o:g:"-"===o||"("===o?"":o)+d,h=("s"===A?v[8+a/3]:"")+h+(p&&"("===o?")":""),C)for(n=-1,s=e.length;++n<s;)if(48>(u=e.charCodeAt(n))||u>57){h=(46===u?c+e.slice(n+1):e.slice(n))+h,e=e.slice(0,n);break}}x&&!m&&(e=t(e,1/0));var M=d.length+e.length+h.length,F=M<b?new Array(b-M+1).join(r):"";switch(x&&m&&(e=t(F+e,F.length?b-h.length:1/0),F=""),i){case"<":e=d+e+h+F;break;case"=":e=d+F+e+h;break;case"^":e=F.slice(0,M=F.length>>1)+d+e+h+F.slice(M);break;default:e=F+d+e+h}return f(e)}return w=void 0===w?6:/[gprs]/.test(A)?Math.max(1,Math.min(21,w)):Math.max(0,Math.min(20,w)),M.toString=function(){return e+""},M}function x(e,t){var n=b(((e=u(e)).type="f",e)),i=3*Math.max(-8,Math.min(8,Math.floor(r(t)/3))),o=Math.pow(10,-i),a=v[8+i/3];return function(e){return n(o*e)+a}}return{format:b,formatPrefix:x}}function b(t){return g=y(t),e.format=g.format,e.formatPrefix=g.formatPrefix,g}function x(e){return Math.max(0,-r(Math.abs(e)))}function w(e,t){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor(r(t)/3)))-r(Math.abs(e)))}function _(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,r(t)-r(e))+1}b({thousands:",",grouping:[3],currency:["$",""]}),e.FormatSpecifier=c,e.formatDefaultLocale=b,e.formatLocale=y,e.formatSpecifier=u,e.precisionFixed=x,e.precisionPrefix=w,e.precisionRound=_,Object.defineProperty(e,"__esModule",{value:!0})}(t)},2330:function(e,t,n){!function(e){"use strict";var t=new Date,n=new Date;function r(e,i,o,a){function s(t){return e(t=0===arguments.length?new Date:new Date(+t)),t}return s.floor=function(t){return e(t=new Date(+t)),t},s.ceil=function(t){return e(t=new Date(t-1)),i(t,1),e(t),t},s.round=function(e){var t=s(e),n=s.ceil(e);return e-t<n-e?t:n},s.offset=function(e,t){return i(e=new Date(+e),null==t?1:Math.floor(t)),e},s.range=function(t,n,r){var o,a=[];if(t=s.ceil(t),r=null==r?1:Math.floor(r),!(t<n)||!(r>0))return a;do{a.push(o=new Date(+t)),i(t,r),e(t)}while(o<t&&t<n);return a},s.filter=function(t){return r((function(n){if(n>=n)for(;e(n),!t(n);)n.setTime(n-1)}),(function(e,n){if(e>=e)if(n<0)for(;++n<=0;)for(;i(e,-1),!t(e););else for(;--n>=0;)for(;i(e,1),!t(e););}))},o&&(s.count=function(r,i){return t.setTime(+r),n.setTime(+i),e(t),e(n),Math.floor(o(t,n))},s.every=function(e){return e=Math.floor(e),isFinite(e)&&e>0?e>1?s.filter(a?function(t){return a(t)%e===0}:function(t){return s.count(0,t)%e===0}):s:null}),s}var i=r((function(){}),(function(e,t){e.setTime(+e+t)}),(function(e,t){return t-e}));i.every=function(e){return e=Math.floor(e),isFinite(e)&&e>0?e>1?r((function(t){t.setTime(Math.floor(t/e)*e)}),(function(t,n){t.setTime(+t+n*e)}),(function(t,n){return(n-t)/e})):i:null};var o=i.range,a=1e3,s=6e4,u=36e5,c=864e5,l=6048e5,f=r((function(e){e.setTime(e-e.getMilliseconds())}),(function(e,t){e.setTime(+e+t*a)}),(function(e,t){return(t-e)/a}),(function(e){return e.getUTCSeconds()})),d=f.range,h=r((function(e){e.setTime(e-e.getMilliseconds()-e.getSeconds()*a)}),(function(e,t){e.setTime(+e+t*s)}),(function(e,t){return(t-e)/s}),(function(e){return e.getMinutes()})),p=h.range,g=r((function(e){e.setTime(e-e.getMilliseconds()-e.getSeconds()*a-e.getMinutes()*s)}),(function(e,t){e.setTime(+e+t*u)}),(function(e,t){return(t-e)/u}),(function(e){return e.getHours()})),m=g.range,v=r((e=>e.setHours(0,0,0,0)),((e,t)=>e.setDate(e.getDate()+t)),((e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*s)/c),(e=>e.getDate()-1)),y=v.range;function b(e){return r((function(t){t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)}),(function(e,t){e.setDate(e.getDate()+7*t)}),(function(e,t){return(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*s)/l}))}var x=b(0),w=b(1),_=b(2),A=b(3),k=b(4),E=b(5),D=b(6),C=x.range,M=w.range,F=_.range,S=A.range,T=k.range,O=E.range,N=D.range,P=r((function(e){e.setDate(1),e.setHours(0,0,0,0)}),(function(e,t){e.setMonth(e.getMonth()+t)}),(function(e,t){return t.getMonth()-e.getMonth()+12*(t.getFullYear()-e.getFullYear())}),(function(e){return e.getMonth()})),R=P.range,B=r((function(e){e.setMonth(0,1),e.setHours(0,0,0,0)}),(function(e,t){e.setFullYear(e.getFullYear()+t)}),(function(e,t){return t.getFullYear()-e.getFullYear()}),(function(e){return e.getFullYear()}));B.every=function(e){return isFinite(e=Math.floor(e))&&e>0?r((function(t){t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)}),(function(t,n){t.setFullYear(t.getFullYear()+n*e)})):null};var z=B.range,j=r((function(e){e.setUTCSeconds(0,0)}),(function(e,t){e.setTime(+e+t*s)}),(function(e,t){return(t-e)/s}),(function(e){return e.getUTCMinutes()})),L=j.range,I=r((function(e){e.setUTCMinutes(0,0,0)}),(function(e,t){e.setTime(+e+t*u)}),(function(e,t){return(t-e)/u}),(function(e){return e.getUTCHours()})),U=I.range,q=r((function(e){e.setUTCHours(0,0,0,0)}),(function(e,t){e.setUTCDate(e.getUTCDate()+t)}),(function(e,t){return(t-e)/c}),(function(e){return e.getUTCDate()-1})),W=q.range;function H(e){return r((function(t){t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)}),(function(e,t){e.setUTCDate(e.getUTCDate()+7*t)}),(function(e,t){return(t-e)/l}))}var Y=H(0),V=H(1),G=H(2),$=H(3),X=H(4),J=H(5),Q=H(6),Z=Y.range,K=V.range,ee=G.range,te=$.range,ne=X.range,re=J.range,ie=Q.range,oe=r((function(e){e.setUTCDate(1),e.setUTCHours(0,0,0,0)}),(function(e,t){e.setUTCMonth(e.getUTCMonth()+t)}),(function(e,t){return t.getUTCMonth()-e.getUTCMonth()+12*(t.getUTCFullYear()-e.getUTCFullYear())}),(function(e){return e.getUTCMonth()})),ae=oe.range,se=r((function(e){e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)}),(function(e,t){e.setUTCFullYear(e.getUTCFullYear()+t)}),(function(e,t){return t.getUTCFullYear()-e.getUTCFullYear()}),(function(e){return e.getUTCFullYear()}));se.every=function(e){return isFinite(e=Math.floor(e))&&e>0?r((function(t){t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)}),(function(t,n){t.setUTCFullYear(t.getUTCFullYear()+n*e)})):null};var ue=se.range;e.timeDay=v,e.timeDays=y,e.timeFriday=E,e.timeFridays=O,e.timeHour=g,e.timeHours=m,e.timeInterval=r,e.timeMillisecond=i,e.timeMilliseconds=o,e.timeMinute=h,e.timeMinutes=p,e.timeMonday=w,e.timeMondays=M,e.timeMonth=P,e.timeMonths=R,e.timeSaturday=D,e.timeSaturdays=N,e.timeSecond=f,e.timeSeconds=d,e.timeSunday=x,e.timeSundays=C,e.timeThursday=k,e.timeThursdays=T,e.timeTuesday=_,e.timeTuesdays=F,e.timeWednesday=A,e.timeWednesdays=S,e.timeWeek=x,e.timeWeeks=C,e.timeYear=B,e.timeYears=z,e.utcDay=q,e.utcDays=W,e.utcFriday=J,e.utcFridays=re,e.utcHour=I,e.utcHours=U,e.utcMillisecond=i,e.utcMilliseconds=o,e.utcMinute=j,e.utcMinutes=L,e.utcMonday=V,e.utcMondays=K,e.utcMonth=oe,e.utcMonths=ae,e.utcSaturday=Q,e.utcSaturdays=ie,e.utcSecond=f,e.utcSeconds=d,e.utcSunday=Y,e.utcSundays=Z,e.utcThursday=X,e.utcThursdays=ne,e.utcTuesday=G,e.utcTuesdays=ee,e.utcWednesday=$,e.utcWednesdays=te,e.utcWeek=Y,e.utcWeeks=Z,e.utcYear=se,e.utcYears=ue,Object.defineProperty(e,"__esModule",{value:!0})}(t)},2331:function(e,t,n){!function(e,t){"use strict";function n(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function r(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function i(e,t,n){return{y:e,m:t,d:n,H:0,M:0,S:0,L:0}}function o(e){var o=e.dateTime,a=e.date,u=e.time,c=e.periods,l=e.days,f=e.shortDays,d=e.months,V=e.shortMonths,de=h(c),ke=p(c),Ee=h(l),De=p(l),Ce=h(f),Me=p(f),Fe=h(d),Se=p(d),Te=h(V),Oe=p(V),Ne={a:Ge,A:$e,b:Xe,B:Je,c:null,d:R,e:R,f:I,g:Q,G:K,H:B,I:z,j:j,L:L,m:U,M:q,p:Qe,q:Ze,Q:_e,s:Ae,S:W,u:H,U:Y,V:G,w:$,W:X,x:null,X:null,y:J,Y:Z,Z:ee,"%":we},Pe={a:Ke,A:et,b:tt,B:nt,c:null,d:te,e:te,f:ae,g:ve,G:be,H:ne,I:re,j:ie,L:oe,m:se,M:ue,p:rt,q:it,Q:_e,s:Ae,S:ce,u:le,U:fe,V:he,w:pe,W:ge,x:null,X:null,y:me,Y:ye,Z:xe,"%":we},Re={a:Ie,A:Ue,b:qe,B:We,c:He,d:E,e:E,f:T,g:w,G:x,H:C,I:C,j:D,L:S,m:k,M:M,p:Le,q:A,Q:N,s:P,S:F,u:m,U:v,V:y,w:g,W:b,x:Ye,X:Ve,y:w,Y:x,Z:_,"%":O};function Be(e,t){return function(n){var r,i,o,a=[],u=-1,c=0,l=e.length;for(n instanceof Date||(n=new Date(+n));++u<l;)37===e.charCodeAt(u)&&(a.push(e.slice(c,u)),null!=(i=s[r=e.charAt(++u)])?r=e.charAt(++u):i="e"===r?" ":"0",(o=t[r])&&(r=o(n,i)),a.push(r),c=u+1);return a.push(e.slice(c,u)),a.join("")}}function ze(e,o){return function(a){var s,u,c=i(1900,void 0,1);if(je(c,e,a+="",0)!=a.length)return null;if("Q"in c)return new Date(c.Q);if("s"in c)return new Date(1e3*c.s+("L"in c?c.L:0));if(o&&!("Z"in c)&&(c.Z=0),"p"in c&&(c.H=c.H%12+12*c.p),void 0===c.m&&(c.m="q"in c?c.q:0),"V"in c){if(c.V<1||c.V>53)return null;"w"in c||(c.w=1),"Z"in c?(u=(s=r(i(c.y,0,1))).getUTCDay(),s=u>4||0===u?t.utcMonday.ceil(s):t.utcMonday(s),s=t.utcDay.offset(s,7*(c.V-1)),c.y=s.getUTCFullYear(),c.m=s.getUTCMonth(),c.d=s.getUTCDate()+(c.w+6)%7):(u=(s=n(i(c.y,0,1))).getDay(),s=u>4||0===u?t.timeMonday.ceil(s):t.timeMonday(s),s=t.timeDay.offset(s,7*(c.V-1)),c.y=s.getFullYear(),c.m=s.getMonth(),c.d=s.getDate()+(c.w+6)%7)}else("W"in c||"U"in c)&&("w"in c||(c.w="u"in c?c.u%7:"W"in c?1:0),u="Z"in c?r(i(c.y,0,1)).getUTCDay():n(i(c.y,0,1)).getDay(),c.m=0,c.d="W"in c?(c.w+6)%7+7*c.W-(u+5)%7:c.w+7*c.U-(u+6)%7);return"Z"in c?(c.H+=c.Z/100|0,c.M+=c.Z%100,r(c)):n(c)}}function je(e,t,n,r){for(var i,o,a=0,u=t.length,c=n.length;a<u;){if(r>=c)return-1;if(37===(i=t.charCodeAt(a++))){if(i=t.charAt(a++),!(o=Re[i in s?t.charAt(a++):i])||(r=o(e,n,r))<0)return-1}else if(i!=n.charCodeAt(r++))return-1}return r}function Le(e,t,n){var r=de.exec(t.slice(n));return r?(e.p=ke.get(r[0].toLowerCase()),n+r[0].length):-1}function Ie(e,t,n){var r=Ce.exec(t.slice(n));return r?(e.w=Me.get(r[0].toLowerCase()),n+r[0].length):-1}function Ue(e,t,n){var r=Ee.exec(t.slice(n));return r?(e.w=De.get(r[0].toLowerCase()),n+r[0].length):-1}function qe(e,t,n){var r=Te.exec(t.slice(n));return r?(e.m=Oe.get(r[0].toLowerCase()),n+r[0].length):-1}function We(e,t,n){var r=Fe.exec(t.slice(n));return r?(e.m=Se.get(r[0].toLowerCase()),n+r[0].length):-1}function He(e,t,n){return je(e,o,t,n)}function Ye(e,t,n){return je(e,a,t,n)}function Ve(e,t,n){return je(e,u,t,n)}function Ge(e){return f[e.getDay()]}function $e(e){return l[e.getDay()]}function Xe(e){return V[e.getMonth()]}function Je(e){return d[e.getMonth()]}function Qe(e){return c[+(e.getHours()>=12)]}function Ze(e){return 1+~~(e.getMonth()/3)}function Ke(e){return f[e.getUTCDay()]}function et(e){return l[e.getUTCDay()]}function tt(e){return V[e.getUTCMonth()]}function nt(e){return d[e.getUTCMonth()]}function rt(e){return c[+(e.getUTCHours()>=12)]}function it(e){return 1+~~(e.getUTCMonth()/3)}return Ne.x=Be(a,Ne),Ne.X=Be(u,Ne),Ne.c=Be(o,Ne),Pe.x=Be(a,Pe),Pe.X=Be(u,Pe),Pe.c=Be(o,Pe),{format:function(e){var t=Be(e+="",Ne);return t.toString=function(){return e},t},parse:function(e){var t=ze(e+="",!1);return t.toString=function(){return e},t},utcFormat:function(e){var t=Be(e+="",Pe);return t.toString=function(){return e},t},utcParse:function(e){var t=ze(e+="",!0);return t.toString=function(){return e},t}}}var a,s={"-":"",_:" ",0:"0"},u=/^\s*\d+/,c=/^%/,l=/[\\^$*+?|[\]().{}]/g;function f(e,t,n){var r=e<0?"-":"",i=(r?-e:e)+"",o=i.length;return r+(o<n?new Array(n-o+1).join(t)+i:i)}function d(e){return e.replace(l,"\\$&")}function h(e){return new RegExp("^(?:"+e.map(d).join("|")+")","i")}function p(e){return new Map(e.map(((e,t)=>[e.toLowerCase(),t])))}function g(e,t,n){var r=u.exec(t.slice(n,n+1));return r?(e.w=+r[0],n+r[0].length):-1}function m(e,t,n){var r=u.exec(t.slice(n,n+1));return r?(e.u=+r[0],n+r[0].length):-1}function v(e,t,n){var r=u.exec(t.slice(n,n+2));return r?(e.U=+r[0],n+r[0].length):-1}function y(e,t,n){var r=u.exec(t.slice(n,n+2));return r?(e.V=+r[0],n+r[0].length):-1}function b(e,t,n){var r=u.exec(t.slice(n,n+2));return r?(e.W=+r[0],n+r[0].length):-1}function x(e,t,n){var r=u.exec(t.slice(n,n+4));return r?(e.y=+r[0],n+r[0].length):-1}function w(e,t,n){var r=u.exec(t.slice(n,n+2));return r?(e.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function _(e,t,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(n,n+6));return r?(e.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function A(e,t,n){var r=u.exec(t.slice(n,n+1));return r?(e.q=3*r[0]-3,n+r[0].length):-1}function k(e,t,n){var r=u.exec(t.slice(n,n+2));return r?(e.m=r[0]-1,n+r[0].length):-1}function E(e,t,n){var r=u.exec(t.slice(n,n+2));return r?(e.d=+r[0],n+r[0].length):-1}function D(e,t,n){var r=u.exec(t.slice(n,n+3));return r?(e.m=0,e.d=+r[0],n+r[0].length):-1}function C(e,t,n){var r=u.exec(t.slice(n,n+2));return r?(e.H=+r[0],n+r[0].length):-1}function M(e,t,n){var r=u.exec(t.slice(n,n+2));return r?(e.M=+r[0],n+r[0].length):-1}function F(e,t,n){var r=u.exec(t.slice(n,n+2));return r?(e.S=+r[0],n+r[0].length):-1}function S(e,t,n){var r=u.exec(t.slice(n,n+3));return r?(e.L=+r[0],n+r[0].length):-1}function T(e,t,n){var r=u.exec(t.slice(n,n+6));return r?(e.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function O(e,t,n){var r=c.exec(t.slice(n,n+1));return r?n+r[0].length:-1}function N(e,t,n){var r=u.exec(t.slice(n));return r?(e.Q=+r[0],n+r[0].length):-1}function P(e,t,n){var r=u.exec(t.slice(n));return r?(e.s=+r[0],n+r[0].length):-1}function R(e,t){return f(e.getDate(),t,2)}function B(e,t){return f(e.getHours(),t,2)}function z(e,t){return f(e.getHours()%12||12,t,2)}function j(e,n){return f(1+t.timeDay.count(t.timeYear(e),e),n,3)}function L(e,t){return f(e.getMilliseconds(),t,3)}function I(e,t){return L(e,t)+"000"}function U(e,t){return f(e.getMonth()+1,t,2)}function q(e,t){return f(e.getMinutes(),t,2)}function W(e,t){return f(e.getSeconds(),t,2)}function H(e){var t=e.getDay();return 0===t?7:t}function Y(e,n){return f(t.timeSunday.count(t.timeYear(e)-1,e),n,2)}function V(e){var n=e.getDay();return n>=4||0===n?t.timeThursday(e):t.timeThursday.ceil(e)}function G(e,n){return e=V(e),f(t.timeThursday.count(t.timeYear(e),e)+(4===t.timeYear(e).getDay()),n,2)}function $(e){return e.getDay()}function X(e,n){return f(t.timeMonday.count(t.timeYear(e)-1,e),n,2)}function J(e,t){return f(e.getFullYear()%100,t,2)}function Q(e,t){return f((e=V(e)).getFullYear()%100,t,2)}function Z(e,t){return f(e.getFullYear()%1e4,t,4)}function K(e,n){var r=e.getDay();return f((e=r>=4||0===r?t.timeThursday(e):t.timeThursday.ceil(e)).getFullYear()%1e4,n,4)}function ee(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+f(t/60|0,"0",2)+f(t%60,"0",2)}function te(e,t){return f(e.getUTCDate(),t,2)}function ne(e,t){return f(e.getUTCHours(),t,2)}function re(e,t){return f(e.getUTCHours()%12||12,t,2)}function ie(e,n){return f(1+t.utcDay.count(t.utcYear(e),e),n,3)}function oe(e,t){return f(e.getUTCMilliseconds(),t,3)}function ae(e,t){return oe(e,t)+"000"}function se(e,t){return f(e.getUTCMonth()+1,t,2)}function ue(e,t){return f(e.getUTCMinutes(),t,2)}function ce(e,t){return f(e.getUTCSeconds(),t,2)}function le(e){var t=e.getUTCDay();return 0===t?7:t}function fe(e,n){return f(t.utcSunday.count(t.utcYear(e)-1,e),n,2)}function de(e){var n=e.getUTCDay();return n>=4||0===n?t.utcThursday(e):t.utcThursday.ceil(e)}function he(e,n){return e=de(e),f(t.utcThursday.count(t.utcYear(e),e)+(4===t.utcYear(e).getUTCDay()),n,2)}function pe(e){return e.getUTCDay()}function ge(e,n){return f(t.utcMonday.count(t.utcYear(e)-1,e),n,2)}function me(e,t){return f(e.getUTCFullYear()%100,t,2)}function ve(e,t){return f((e=de(e)).getUTCFullYear()%100,t,2)}function ye(e,t){return f(e.getUTCFullYear()%1e4,t,4)}function be(e,n){var r=e.getUTCDay();return f((e=r>=4||0===r?t.utcThursday(e):t.utcThursday.ceil(e)).getUTCFullYear()%1e4,n,4)}function xe(){return"+0000"}function we(){return"%"}function _e(e){return+e}function Ae(e){return Math.floor(+e/1e3)}function ke(t){return a=o(t),e.timeFormat=a.format,e.timeParse=a.parse,e.utcFormat=a.utcFormat,e.utcParse=a.utcParse,a}ke({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});var Ee="%Y-%m-%dT%H:%M:%S.%LZ";function De(e){return e.toISOString()}var Ce=Date.prototype.toISOString?De:e.utcFormat(Ee);function Me(e){var t=new Date(e);return isNaN(t)?null:t}var Fe=+new Date("2000-01-01T00:00:00.000Z")?Me:e.utcParse(Ee);e.isoFormat=Ce,e.isoParse=Fe,e.timeFormatDefaultLocale=ke,e.timeFormatLocale=o,Object.defineProperty(e,"__esModule",{value:!0})}(t,n(2332))},2332:function(e,t,n){!function(e){"use strict";var t=new Date,n=new Date;function r(e,i,o,a){function s(t){return e(t=0===arguments.length?new Date:new Date(+t)),t}return s.floor=function(t){return e(t=new Date(+t)),t},s.ceil=function(t){return e(t=new Date(t-1)),i(t,1),e(t),t},s.round=function(e){var t=s(e),n=s.ceil(e);return e-t<n-e?t:n},s.offset=function(e,t){return i(e=new Date(+e),null==t?1:Math.floor(t)),e},s.range=function(t,n,r){var o,a=[];if(t=s.ceil(t),r=null==r?1:Math.floor(r),!(t<n)||!(r>0))return a;do{a.push(o=new Date(+t)),i(t,r),e(t)}while(o<t&&t<n);return a},s.filter=function(t){return r((function(n){if(n>=n)for(;e(n),!t(n);)n.setTime(n-1)}),(function(e,n){if(e>=e)if(n<0)for(;++n<=0;)for(;i(e,-1),!t(e););else for(;--n>=0;)for(;i(e,1),!t(e););}))},o&&(s.count=function(r,i){return t.setTime(+r),n.setTime(+i),e(t),e(n),Math.floor(o(t,n))},s.every=function(e){return e=Math.floor(e),isFinite(e)&&e>0?e>1?s.filter(a?function(t){return a(t)%e===0}:function(t){return s.count(0,t)%e===0}):s:null}),s}var i=r((function(){}),(function(e,t){e.setTime(+e+t)}),(function(e,t){return t-e}));i.every=function(e){return e=Math.floor(e),isFinite(e)&&e>0?e>1?r((function(t){t.setTime(Math.floor(t/e)*e)}),(function(t,n){t.setTime(+t+n*e)}),(function(t,n){return(n-t)/e})):i:null};var o=i.range,a=1e3,s=6e4,u=36e5,c=864e5,l=6048e5,f=r((function(e){e.setTime(e-e.getMilliseconds())}),(function(e,t){e.setTime(+e+t*a)}),(function(e,t){return(t-e)/a}),(function(e){return e.getUTCSeconds()})),d=f.range,h=r((function(e){e.setTime(e-e.getMilliseconds()-e.getSeconds()*a)}),(function(e,t){e.setTime(+e+t*s)}),(function(e,t){return(t-e)/s}),(function(e){return e.getMinutes()})),p=h.range,g=r((function(e){e.setTime(e-e.getMilliseconds()-e.getSeconds()*a-e.getMinutes()*s)}),(function(e,t){e.setTime(+e+t*u)}),(function(e,t){return(t-e)/u}),(function(e){return e.getHours()})),m=g.range,v=r((e=>e.setHours(0,0,0,0)),((e,t)=>e.setDate(e.getDate()+t)),((e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*s)/c),(e=>e.getDate()-1)),y=v.range;function b(e){return r((function(t){t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)}),(function(e,t){e.setDate(e.getDate()+7*t)}),(function(e,t){return(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*s)/l}))}var x=b(0),w=b(1),_=b(2),A=b(3),k=b(4),E=b(5),D=b(6),C=x.range,M=w.range,F=_.range,S=A.range,T=k.range,O=E.range,N=D.range,P=r((function(e){e.setDate(1),e.setHours(0,0,0,0)}),(function(e,t){e.setMonth(e.getMonth()+t)}),(function(e,t){return t.getMonth()-e.getMonth()+12*(t.getFullYear()-e.getFullYear())}),(function(e){return e.getMonth()})),R=P.range,B=r((function(e){e.setMonth(0,1),e.setHours(0,0,0,0)}),(function(e,t){e.setFullYear(e.getFullYear()+t)}),(function(e,t){return t.getFullYear()-e.getFullYear()}),(function(e){return e.getFullYear()}));B.every=function(e){return isFinite(e=Math.floor(e))&&e>0?r((function(t){t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)}),(function(t,n){t.setFullYear(t.getFullYear()+n*e)})):null};var z=B.range,j=r((function(e){e.setUTCSeconds(0,0)}),(function(e,t){e.setTime(+e+t*s)}),(function(e,t){return(t-e)/s}),(function(e){return e.getUTCMinutes()})),L=j.range,I=r((function(e){e.setUTCMinutes(0,0,0)}),(function(e,t){e.setTime(+e+t*u)}),(function(e,t){return(t-e)/u}),(function(e){return e.getUTCHours()})),U=I.range,q=r((function(e){e.setUTCHours(0,0,0,0)}),(function(e,t){e.setUTCDate(e.getUTCDate()+t)}),(function(e,t){return(t-e)/c}),(function(e){return e.getUTCDate()-1})),W=q.range;function H(e){return r((function(t){t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)}),(function(e,t){e.setUTCDate(e.getUTCDate()+7*t)}),(function(e,t){return(t-e)/l}))}var Y=H(0),V=H(1),G=H(2),$=H(3),X=H(4),J=H(5),Q=H(6),Z=Y.range,K=V.range,ee=G.range,te=$.range,ne=X.range,re=J.range,ie=Q.range,oe=r((function(e){e.setUTCDate(1),e.setUTCHours(0,0,0,0)}),(function(e,t){e.setUTCMonth(e.getUTCMonth()+t)}),(function(e,t){return t.getUTCMonth()-e.getUTCMonth()+12*(t.getUTCFullYear()-e.getUTCFullYear())}),(function(e){return e.getUTCMonth()})),ae=oe.range,se=r((function(e){e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)}),(function(e,t){e.setUTCFullYear(e.getUTCFullYear()+t)}),(function(e,t){return t.getUTCFullYear()-e.getUTCFullYear()}),(function(e){return e.getUTCFullYear()}));se.every=function(e){return isFinite(e=Math.floor(e))&&e>0?r((function(t){t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)}),(function(t,n){t.setUTCFullYear(t.getUTCFullYear()+n*e)})):null};var ue=se.range;e.timeDay=v,e.timeDays=y,e.timeFriday=E,e.timeFridays=O,e.timeHour=g,e.timeHours=m,e.timeInterval=r,e.timeMillisecond=i,e.timeMilliseconds=o,e.timeMinute=h,e.timeMinutes=p,e.timeMonday=w,e.timeMondays=M,e.timeMonth=P,e.timeMonths=R,e.timeSaturday=D,e.timeSaturdays=N,e.timeSecond=f,e.timeSeconds=d,e.timeSunday=x,e.timeSundays=C,e.timeThursday=k,e.timeThursdays=T,e.timeTuesday=_,e.timeTuesdays=F,e.timeWednesday=A,e.timeWednesdays=S,e.timeWeek=x,e.timeWeeks=C,e.timeYear=B,e.timeYears=z,e.utcDay=q,e.utcDays=W,e.utcFriday=J,e.utcFridays=re,e.utcHour=I,e.utcHours=U,e.utcMillisecond=i,e.utcMilliseconds=o,e.utcMinute=j,e.utcMinutes=L,e.utcMonday=V,e.utcMondays=K,e.utcMonth=oe,e.utcMonths=ae,e.utcSaturday=Q,e.utcSaturdays=ie,e.utcSecond=f,e.utcSeconds=d,e.utcSunday=Y,e.utcSundays=Z,e.utcThursday=X,e.utcThursdays=ne,e.utcTuesday=G,e.utcTuesdays=ee,e.utcWednesday=$,e.utcWednesdays=te,e.utcWeek=Y,e.utcWeeks=Z,e.utcYear=se,e.utcYears=ue,Object.defineProperty(e,"__esModule",{value:!0})}(t)},2333:function(e,t,n){var r=n(108);!function(e,t,n,i,o,a){"use strict";function s(e){return t=>{const n=e.length;let r=1,i=String(e[0](t));for(;r<n;++r)i+="|"+e[r](t);return i}}function u(e){return e&&e.length?1===e.length?e[0]:s(e):function(){return""}}function c(e,t,n){return n||e+(t?"_"+t:"")}const l=()=>{},f={init:l,add:l,rem:l,idx:0},d={values:{init:e=>e.cell.store=!0,value:e=>e.cell.data.values(),idx:-1},count:{value:e=>e.cell.num},__count__:{value:e=>e.missing+e.valid},missing:{value:e=>e.missing},valid:{value:e=>e.valid},sum:{init:e=>e.sum=0,value:e=>e.sum,add:(e,t)=>e.sum+=+t,rem:(e,t)=>e.sum-=t},product:{init:e=>e.product=1,value:e=>e.valid?e.product:void 0,add:(e,t)=>e.product*=t,rem:(e,t)=>e.product/=t},mean:{init:e=>e.mean=0,value:e=>e.valid?e.mean:void 0,add:(e,t)=>(e.mean_d=t-e.mean,e.mean+=e.mean_d/e.valid),rem:(e,t)=>(e.mean_d=t-e.mean,e.mean-=e.valid?e.mean_d/e.valid:e.mean)},average:{value:e=>e.valid?e.mean:void 0,req:["mean"],idx:1},variance:{init:e=>e.dev=0,value:e=>e.valid>1?e.dev/(e.valid-1):void 0,add:(e,t)=>e.dev+=e.mean_d*(t-e.mean),rem:(e,t)=>e.dev-=e.mean_d*(t-e.mean),req:["mean"],idx:1},variancep:{value:e=>e.valid>1?e.dev/e.valid:void 0,req:["variance"],idx:2},stdev:{value:e=>e.valid>1?Math.sqrt(e.dev/(e.valid-1)):void 0,req:["variance"],idx:2},stdevp:{value:e=>e.valid>1?Math.sqrt(e.dev/e.valid):void 0,req:["variance"],idx:2},stderr:{value:e=>e.valid>1?Math.sqrt(e.dev/(e.valid*(e.valid-1))):void 0,req:["variance"],idx:2},distinct:{value:e=>e.cell.data.distinct(e.get),req:["values"],idx:3},ci0:{value:e=>e.cell.data.ci0(e.get),req:["values"],idx:3},ci1:{value:e=>e.cell.data.ci1(e.get),req:["values"],idx:3},median:{value:e=>e.cell.data.q2(e.get),req:["values"],idx:3},q1:{value:e=>e.cell.data.q1(e.get),req:["values"],idx:3},q3:{value:e=>e.cell.data.q3(e.get),req:["values"],idx:3},min:{init:e=>e.min=void 0,value:e=>e.min=Number.isNaN(e.min)?e.cell.data.min(e.get):e.min,add:(e,t)=>{(t<e.min||void 0===e.min)&&(e.min=t)},rem:(e,t)=>{t<=e.min&&(e.min=NaN)},req:["values"],idx:4},max:{init:e=>e.max=void 0,value:e=>e.max=Number.isNaN(e.max)?e.cell.data.max(e.get):e.max,add:(e,t)=>{(t>e.max||void 0===e.max)&&(e.max=t)},rem:(e,t)=>{t>=e.max&&(e.max=NaN)},req:["values"],idx:4},argmin:{init:e=>e.argmin=void 0,value:e=>e.argmin||e.cell.data.argmin(e.get),add:(e,t,n)=>{t<e.min&&(e.argmin=n)},rem:(e,t)=>{t<=e.min&&(e.argmin=void 0)},req:["min","values"],idx:3},argmax:{init:e=>e.argmax=void 0,value:e=>e.argmax||e.cell.data.argmax(e.get),add:(e,t,n)=>{t>e.max&&(e.argmax=n)},rem:(e,t)=>{t>=e.max&&(e.argmax=void 0)},req:["max","values"],idx:3}},h=Object.keys(d);function p(e,n){return r=>t.extend({name:e,out:r||e},f,n)}function g(e,t){return d[e](t)}function m(e,t){return e.idx-t.idx}function v(e){const t={};e.forEach((e=>t[e.name]=e));const n=e=>{e.req&&e.req.forEach((e=>{t[e]||n(t[e]=d[e]())}))};return e.forEach(n),Object.values(t).sort(m)}function y(){this.valid=0,this.missing=0,this._ops.forEach((e=>e.init(this)))}function b(e,t){null!=e&&""!==e?e===e&&(++this.valid,this._ops.forEach((n=>n.add(this,e,t)))):++this.missing}function x(e,t){null!=e&&""!==e?e===e&&(--this.valid,this._ops.forEach((n=>n.rem(this,e,t)))):--this.missing}function w(e){return this._out.forEach((t=>e[t.out]=t.value(this))),e}function _(e,n){const r=n||t.identity,i=v(e),o=e.slice().sort(m);function a(e){this._ops=i,this._out=o,this.cell=e,this.init()}return a.prototype.init=y,a.prototype.add=b,a.prototype.rem=x,a.prototype.set=w,a.prototype.get=r,a.fields=e.map((e=>e.out)),a}function A(e){this._key=e?t.field(e):n.tupleid,this.reset()}h.forEach((e=>{d[e]=p(e,d[e])}));const k=A.prototype;function E(e){n.Transform.call(this,null,e),this._adds=[],this._mods=[],this._alen=0,this._mlen=0,this._drop=!0,this._cross=!1,this._dims=[],this._dnames=[],this._measures=[],this._countOnly=!1,this._counts=null,this._prev=null,this._inputs=null,this._outputs=null}k.reset=function(){this._add=[],this._rem=[],this._ext=null,this._get=null,this._q=null},k.add=function(e){this._add.push(e)},k.rem=function(e){this._rem.push(e)},k.values=function(){if(this._get=null,0===this._rem.length)return this._add;const e=this._add,t=this._rem,n=this._key,r=e.length,i=t.length,o=Array(r-i),a={};let s,u,c;for(s=0;s<i;++s)a[n(t[s])]=1;for(s=0,u=0;s<r;++s)a[n(c=e[s])]?a[n(c)]=0:o[u++]=c;return this._rem=[],this._add=o},k.distinct=function(e){const n=this.values(),r={};let i,o=n.length,a=0;for(;--o>=0;)i=e(n[o])+"",t.hasOwnProperty(r,i)||(r[i]=1,++a);return a},k.extent=function(e){if(this._get!==e||!this._ext){const n=this.values(),r=t.extentIndex(n,e);this._ext=[n[r[0]],n[r[1]]],this._get=e}return this._ext},k.argmin=function(e){return this.extent(e)[0]||{}},k.argmax=function(e){return this.extent(e)[1]||{}},k.min=function(e){const t=this.extent(e)[0];return null!=t?e(t):void 0},k.max=function(e){const t=this.extent(e)[1];return null!=t?e(t):void 0},k.quartile=function(e){return this._get===e&&this._q||(this._q=i.quartiles(this.values(),e),this._get=e),this._q},k.q1=function(e){return this.quartile(e)[0]},k.q2=function(e){return this.quartile(e)[1]},k.q3=function(e){return this.quartile(e)[2]},k.ci=function(e){return this._get===e&&this._ci||(this._ci=i.bootstrapCI(this.values(),1e3,.05,e),this._get=e),this._ci},k.ci0=function(e){return this.ci(e)[0]},k.ci1=function(e){return this.ci(e)[1]},E.Definition={type:"Aggregate",metadata:{generates:!0,changes:!0},params:[{name:"groupby",type:"field",array:!0},{name:"ops",type:"enum",array:!0,values:h},{name:"fields",type:"field",null:!0,array:!0},{name:"as",type:"string",null:!0,array:!0},{name:"drop",type:"boolean",default:!0},{name:"cross",type:"boolean",default:!1},{name:"key",type:"field"}]},t.inherits(E,n.Transform,{transform(e,t){const n=this,r=t.fork(t.NO_SOURCE|t.NO_FIELDS),i=e.modified();return n.stamp=r.stamp,n.value&&(i||t.modified(n._inputs,!0))?(n._prev=n.value,n.value=i?n.init(e):{},t.visit(t.SOURCE,(e=>n.add(e)))):(n.value=n.value||n.init(e),t.visit(t.REM,(e=>n.rem(e))),t.visit(t.ADD,(e=>n.add(e)))),r.modifies(n._outputs),n._drop=!1!==e.drop,e.cross&&n._dims.length>1&&(n._drop=!1,n.cross()),t.clean()&&n._drop&&r.clean(!0).runAfter((()=>this.clean())),n.changes(r)},cross(){const e=this,t=e.value,n=e._dnames,r=n.map((()=>({}))),i=n.length;function o(e){let t,o,a,s;for(t in e)for(a=e[t].tuple,o=0;o<i;++o)r[o][s=a[n[o]]]=s}function a(o,s,u){const c=n[u],l=r[u++];for(const n in l){const r=o?o+"|"+n:n;s[c]=l[n],u<i?a(r,s,u):t[r]||e.cell(r,s)}}o(e._prev),o(t),a("",{},0)},init(e){const n=this._inputs=[],r=this._outputs=[],i={};function o(e){const r=t.array(t.accessorFields(e)),o=r.length;let a,s=0;for(;s<o;++s)i[a=r[s]]||(i[a]=1,n.push(a))}this._dims=t.array(e.groupby),this._dnames=this._dims.map((e=>{const n=t.accessorName(e);return o(e),r.push(n),n})),this.cellkey=e.key?e.key:u(this._dims),this._countOnly=!0,this._counts=[],this._measures=[];const a=e.fields||[null],s=e.ops||["count"],l=e.as||[],f=a.length,d={};let h,p,m,v,y,b;for(f!==s.length&&t.error("Unmatched number of fields and aggregate ops."),b=0;b<f;++b)h=a[b],p=s[b],null==h&&"count"!==p&&t.error("Null aggregate field specified."),v=t.accessorName(h),y=c(p,v,l[b]),r.push(y),"count"!==p?(m=d[v],m||(o(h),m=d[v]=[],m.field=h,this._measures.push(m)),"count"!==p&&(this._countOnly=!1),m.push(g(p,y))):this._counts.push(y);return this._measures=this._measures.map((e=>_(e,e.field))),{}},cellkey:u(),cell(e,t){let n=this.value[e];return n?0===n.num&&this._drop&&n.stamp<this.stamp?(n.stamp=this.stamp,this._adds[this._alen++]=n):n.stamp<this.stamp&&(n.stamp=this.stamp,this._mods[this._mlen++]=n):(n=this.value[e]=this.newcell(e,t),this._adds[this._alen++]=n),n},newcell(e,t){const n={key:e,num:0,agg:null,tuple:this.newtuple(t,this._prev&&this._prev[e]),stamp:this.stamp,store:!1};if(!this._countOnly){const e=this._measures,t=e.length;n.agg=Array(t);for(let r=0;r<t;++r)n.agg[r]=new e[r](n)}return n.store&&(n.data=new A),n},newtuple(e,t){const r=this._dnames,i=this._dims,o=i.length,a={};for(let n=0;n<o;++n)a[r[n]]=i[n](e);return t?n.replace(t.tuple,a):n.ingest(a)},clean(){const e=this.value;for(const t in e)0===e[t].num&&delete e[t]},add(e){const t=this.cellkey(e),n=this.cell(t,e);if(n.num+=1,this._countOnly)return;n.store&&n.data.add(e);const r=n.agg;for(let i=0,o=r.length;i<o;++i)r[i].add(r[i].get(e),e)},rem(e){const t=this.cellkey(e),n=this.cell(t,e);if(n.num-=1,this._countOnly)return;n.store&&n.data.rem(e);const r=n.agg;for(let i=0,o=r.length;i<o;++i)r[i].rem(r[i].get(e),e)},celltuple(e){const t=e.tuple,n=this._counts;e.store&&e.data.values();for(let r=0,i=n.length;r<i;++r)t[n[r]]=e.num;if(!this._countOnly){const n=e.agg;for(let e=0,r=n.length;e<r;++e)n[e].set(t)}return t},changes(e){const t=this._adds,n=this._mods,r=this._prev,i=this._drop,o=e.add,a=e.rem,s=e.mod;let u,c,l,f;if(r)for(c in r)u=r[c],i&&!u.num||a.push(u.tuple);for(l=0,f=this._alen;l<f;++l)o.push(this.celltuple(t[l])),t[l]=null;for(l=0,f=this._mlen;l<f;++l)u=n[l],(0===u.num&&i?a:s).push(this.celltuple(u)),n[l]=null;return this._alen=this._mlen=0,this._prev=null,e}});const D=1e-14;function C(e){n.Transform.call(this,null,e)}function M(e,n,r){const i=e;let o=n||[],a=r||[],s={},u=0;return{add:e=>a.push(e),remove:e=>s[i(e)]=++u,size:()=>o.length,data:(e,n)=>(u&&(o=o.filter((e=>!s[i(e)])),s={},u=0),n&&e&&o.sort(e),a.length&&(o=e?t.merge(e,o,a.sort(e)):o.concat(a),a=[]),o)}}function F(e){n.Transform.call(this,[],e)}function S(e){n.Operator.call(this,null,T,e)}function T(e){return this.value&&!e.modified()?this.value:t.compare(e.fields,e.orders)}function O(e){n.Transform.call(this,null,e)}function N(e,t,n){switch(t){case"upper":e=e.toUpperCase();break;case"lower":e=e.toLowerCase()}return e.match(n)}function P(e){n.Transform.call(this,null,e)}function R(e,t,r,i){for(var o,a,s=[],u={},c=e.length,l=0;l<c;++l)for(u[t]=a=e[l],o=0;o<c;++o)u[r]=e[o],i(u)&&(s.push(n.ingest(u)),(u={})[t]=a);return s}C.Definition={type:"Bin",metadata:{modifies:!0},params:[{name:"field",type:"field",required:!0},{name:"interval",type:"boolean",default:!0},{name:"anchor",type:"number"},{name:"maxbins",type:"number",default:20},{name:"base",type:"number",default:10},{name:"divide",type:"number",array:!0,default:[5,2]},{name:"extent",type:"number",array:!0,length:2,required:!0},{name:"span",type:"number"},{name:"step",type:"number"},{name:"steps",type:"number",array:!0},{name:"minstep",type:"number",default:0},{name:"nice",type:"boolean",default:!0},{name:"name",type:"string"},{name:"as",type:"string",array:!0,length:2,default:["bin0","bin1"]}]},t.inherits(C,n.Transform,{transform(e,n){const r=!1!==e.interval,i=this._bins(e),o=i.start,a=i.step,s=e.as||["bin0","bin1"],u=s[0],c=s[1];let l;return l=e.modified()?(n=n.reflow(!0)).SOURCE:n.modified(t.accessorFields(e.field))?n.ADD_MOD:n.ADD,n.visit(l,r?e=>{const t=i(e);e[u]=t,e[c]=null==t?null:o+a*(1+(t-o)/a)}:e=>e[u]=i(e)),n.modifies(r?s:u)},_bins(e){if(this.value&&!e.modified())return this.value;const n=e.field,r=i.bin(e),o=r.step;let a,s,u=r.start,c=u+Math.ceil((r.stop-u)/o)*o;null!=(a=e.anchor)&&(s=a-(u+o*Math.floor((a-u)/o)),u+=s,c+=s);const l=function(e){let r=t.toNumber(n(e));return null==r?null:r<u?-1/0:r>c?1/0:(r=Math.max(u,Math.min(r,c-o)),u+o*Math.floor(D+(r-u)/o))};return l.start=u,l.stop=r.stop,l.step=o,this.value=t.accessor(l,t.accessorFields(n),e.name||"bin_"+t.accessorName(n))}}),F.Definition={type:"Collect",metadata:{source:!0},params:[{name:"sort",type:"compare"}]},t.inherits(F,n.Transform,{transform(e,t){const r=t.fork(t.ALL),i=M(n.tupleid,this.value,r.materialize(r.ADD).add),o=e.sort,a=t.changed()||o&&(e.modified("sort")||t.modified(o.fields));return r.visit(r.REM,i.remove),this.modified(a),this.value=r.source=i.data(n.stableCompare(o),a),t.source&&t.source.root&&(this.value.root=t.source.root),r}}),t.inherits(S,n.Operator),O.Definition={type:"CountPattern",metadata:{generates:!0,changes:!0},params:[{name:"field",type:"field",required:!0},{name:"case",type:"enum",values:["upper","lower","mixed"],default:"mixed"},{name:"pattern",type:"string",default:'[\\w"]+'},{name:"stopwords",type:"string",default:""},{name:"as",type:"string",array:!0,length:2,default:["text","count"]}]},t.inherits(O,n.Transform,{transform(e,t){const n=t=>n=>{for(var r,i=N(s(n),e.case,o)||[],u=0,c=i.length;u<c;++u)a.test(r=i[u])||t(r)},r=this._parameterCheck(e,t),i=this._counts,o=this._match,a=this._stop,s=e.field,u=e.as||["text","count"],c=n((e=>i[e]=1+(i[e]||0))),l=n((e=>i[e]-=1));return r?t.visit(t.SOURCE,c):(t.visit(t.ADD,c),t.visit(t.REM,l)),this._finish(t,u)},_parameterCheck(e,t){let n=!1;return!e.modified("stopwords")&&this._stop||(this._stop=new RegExp("^"+(e.stopwords||"")+"$","i"),n=!0),!e.modified("pattern")&&this._match||(this._match=new RegExp(e.pattern||"[\\w']+","g"),n=!0),(e.modified("field")||t.modified(e.field.fields))&&(n=!0),n&&(this._counts={}),n},_finish(e,t){const r=this._counts,i=this._tuples||(this._tuples={}),o=t[0],a=t[1],s=e.fork(e.NO_SOURCE|e.NO_FIELDS);let u,c,l;for(u in r)c=i[u],l=r[u]||0,!c&&l?(i[u]=c=n.ingest({}),c[o]=u,c[a]=l,s.add.push(c)):0===l?(c&&s.rem.push(c),r[u]=null,i[u]=null):c[a]!==l&&(c[a]=l,s.mod.push(c));return s.modifies(t)}}),P.Definition={type:"Cross",metadata:{generates:!0},params:[{name:"filter",type:"expr"},{name:"as",type:"string",array:!0,length:2,default:["a","b"]}]},t.inherits(P,n.Transform,{transform(e,n){const r=n.fork(n.NO_SOURCE),i=e.as||["a","b"],o=i[0],a=i[1],s=!this.value||n.changed(n.ADD_REM)||e.modified("as")||e.modified("filter");let u=this.value;return s?(u&&(r.rem=u),u=n.materialize(n.SOURCE).source,r.add=this.value=R(u,o,a,e.filter||t.truthy)):r.mod=u,r.source=this.value,r.modifies(i)}});const B={kde:i.randomKDE,mixture:i.randomMixture,normal:i.randomNormal,lognormal:i.randomLogNormal,uniform:i.randomUniform},z="distributions",j="function",L="field";function I(e,n){const r=e[j];t.hasOwnProperty(B,r)||t.error("Unknown distribution function: "+r);const i=B[r]();for(const t in e)t===L?i.data((e.from||n()).map(e[t])):t===z?i[t](e[t].map((e=>I(e,n)))):typeof i[t]===j&&i[t](e[t]);return i}function U(e){n.Transform.call(this,null,e)}const q=[{key:{function:"normal"},params:[{name:"mean",type:"number",default:0},{name:"stdev",type:"number",default:1}]},{key:{function:"lognormal"},params:[{name:"mean",type:"number",default:0},{name:"stdev",type:"number",default:1}]},{key:{function:"uniform"},params:[{name:"min",type:"number",default:0},{name:"max",type:"number",default:1}]},{key:{function:"kde"},params:[{name:"field",type:"field",required:!0},{name:"from",type:"data"},{name:"bandwidth",type:"number",default:0}]}],W={key:{function:"mixture"},params:[{name:"distributions",type:"param",array:!0,params:q},{name:"weights",type:"number",array:!0}]};function H(e){return()=>e.materialize(e.SOURCE).source}function Y(e,n){return e?e.map(((e,r)=>n[r]||t.accessorName(e))):null}function V(e,t,n){const r=[],i=e=>e(u);let o,a,s,u,c,l;if(null==t)r.push(e.map(n));else for(o={},a=0,s=e.length;a<s;++a)u=e[a],c=t.map(i),l=o[c],l||(o[c]=l=[],l.dims=c,r.push(l)),l.push(n(u));return r}U.Definition={type:"Density",metadata:{generates:!0},params:[{name:"extent",type:"number",array:!0,length:2},{name:"steps",type:"number"},{name:"minsteps",type:"number",default:25},{name:"maxsteps",type:"number",default:200},{name:"method",type:"string",default:"pdf",values:["pdf","cdf"]},{name:"distribution",type:"param",params:q.concat(W)},{name:"as",type:"string",array:!0,default:["value","density"]}]},t.inherits(U,n.Transform,{transform(e,r){const o=r.fork(r.NO_SOURCE|r.NO_FIELDS);if(!this.value||r.changed()||e.modified()){const a=I(e.distribution,H(r)),s=e.steps||e.minsteps||25,u=e.steps||e.maxsteps||200;let c=e.method||"pdf";"pdf"!==c&&"cdf"!==c&&t.error("Invalid density method: "+c),e.extent||a.data||t.error("Missing density extent parameter."),c=a[c];const l=e.as||["value","density"],f=e.extent||t.extent(a.data()),d=i.sampleCurve(c,f,s,u).map((e=>{const t={};return t[l[0]]=e[0],t[l[1]]=e[1],n.ingest(t)}));this.value&&(o.rem=this.value),this.value=o.add=o.source=d}return o}});const G="bin";function $(e){n.Transform.call(this,null,e)}$.Definition={type:"DotBin",metadata:{modifies:!0},params:[{name:"field",type:"field",required:!0},{name:"groupby",type:"field",array:!0},{name:"step",type:"number"},{name:"smooth",type:"boolean",default:!1},{name:"as",type:"string",default:G}]};const X=(e,n)=>t.span(t.extent(e,n))/30;function J(e){n.Operator.call(this,null,Q,e),this.modified(!0)}function Q(e){const n=e.expr;return this.value&&!e.modified("expr")?this.value:t.accessor((t=>n(t,e)),t.accessorFields(n),t.accessorName(n))}function Z(e){n.Transform.call(this,[void 0,void 0],e)}function K(e,t){n.Operator.call(this,e),this.parent=t,this.count=0}function ee(e){n.Transform.call(this,{},e),this._keys=t.fastmap();const r=this._targets=[];r.active=0,r.forEach=e=>{for(let t=0,n=r.active;t<n;++t)e(r[t],t,r)}}function te(e){n.Operator.call(this,null,ne,e)}function ne(e){return this.value&&!e.modified()?this.value:t.isArray(e.name)?t.array(e.name).map((e=>t.field(e))):t.field(e.name,e.as)}function re(e){n.Transform.call(this,t.fastmap(),e)}function ie(e){n.Transform.call(this,[],e)}function oe(e){n.Transform.call(this,[],e)}function ae(e){n.Transform.call(this,null,e)}function se(e){n.Transform.call(this,[],e)}t.inherits($,n.Transform,{transform(e,o){if(this.value&&!e.modified()&&!o.changed())return o;const a=o.materialize(o.SOURCE).source,s=V(o.source,e.groupby,t.identity),u=e.smooth||!1,c=e.field,l=e.step||X(a,c),f=n.stableCompare(((e,t)=>c(e)-c(t))),d=e.as||G,h=s.length;let p,g=1/0,m=-1/0,v=0;for(;v<h;++v){const e=s[v].sort(f);p=-1;var y,b=r(i.dotbin(e,l,u,c));try{for(b.s();!(y=b.n()).done;){const t=y.value;t<g&&(g=t),t>m&&(m=t),e[++p][d]=t}}catch(x){b.e(x)}finally{b.f()}}return this.value={start:g,stop:m,step:l},o.reflow(!0).modifies(d)}}),t.inherits(J,n.Operator),Z.Definition={type:"Extent",metadata:{},params:[{name:"field",type:"field",required:!0}]},t.inherits(Z,n.Transform,{transform(e,n){const r=this.value,i=e.field,o=n.changed()||n.modified(i.fields)||e.modified("field");let a=r[0],s=r[1];if((o||null==a)&&(a=1/0,s=-1/0),n.visit(o?n.SOURCE:n.ADD,(e=>{const n=t.toNumber(i(e));null!=n&&(n<a&&(a=n),n>s&&(s=n))})),!Number.isFinite(a)||!Number.isFinite(s)){let e=t.accessorName(i);e&&(e=' for field "'.concat(e,'"')),n.dataflow.warn("Infinite extent".concat(e,": [").concat(a,", ").concat(s,"]")),a=s=void 0}this.value=[a,s]}}),t.inherits(K,n.Operator,{connect(e){return this.detachSubflow=e.detachSubflow,this.targets().add(e),e.source=this},add(e){this.count+=1,this.value.add.push(e)},rem(e){this.count-=1,this.value.rem.push(e)},mod(e){this.value.mod.push(e)},init(e){this.value.init(e,e.NO_SOURCE)},evaluate(){return this.value}}),t.inherits(ee,n.Transform,{activate(e){this._targets[this._targets.active++]=e},subflow(e,n,r,i){const o=this.value;let a,s,u=t.hasOwnProperty(o,e)&&o[e];return u?u.value.stamp<r.stamp&&(u.init(r),this.activate(u)):(s=i||(s=this._group[e])&&s.tuple,a=r.dataflow,u=new K(r.fork(r.NO_SOURCE),this),a.add(u).connect(n(a,e,s)),o[e]=u,this.activate(u)),u},clean(){const e=this.value;for(const t in e)if(0===e[t].count){const n=e[t].detachSubflow;n&&n(),delete e[t]}},initTargets(){const e=this._targets,t=e.length;for(let n=0;n<t&&null!=e[n];++n)e[n]=null;e.active=0},transform(e,t){const r=t.dataflow,i=e.key,o=e.subflow,a=this._keys,s=e.modified("key"),u=e=>this.subflow(e,o,t);return this._group=e.group||{},this.initTargets(),t.visit(t.REM,(e=>{const t=n.tupleid(e),r=a.get(t);void 0!==r&&(a.delete(t),u(r).rem(e))})),t.visit(t.ADD,(e=>{const t=i(e);a.set(n.tupleid(e),t),u(t).add(e)})),s||t.modified(i.fields)?t.visit(t.MOD,(e=>{const t=n.tupleid(e),r=a.get(t),o=i(e);r===o?u(o).mod(e):(a.set(t,o),u(r).rem(e),u(o).add(e))})):t.changed(t.MOD)&&t.visit(t.MOD,(e=>{u(a.get(n.tupleid(e))).mod(e)})),s&&t.visit(t.REFLOW,(e=>{const t=n.tupleid(e),r=a.get(t),o=i(e);r!==o&&(a.set(t,o),u(r).rem(e),u(o).add(e))})),t.clean()?r.runAfter((()=>{this.clean(),a.clean()})):a.empty>r.cleanThreshold&&r.runAfter(a.clean),t}}),t.inherits(te,n.Operator),re.Definition={type:"Filter",metadata:{changes:!0},params:[{name:"expr",type:"expr",required:!0}]},t.inherits(re,n.Transform,{transform(e,t){const r=t.dataflow,i=this.value,o=t.fork(),a=o.add,s=o.rem,u=o.mod,c=e.expr;let l=!0;function f(t){const r=n.tupleid(t),o=c(t,e),f=i.get(r);o&&f?(i.delete(r),a.push(t)):o||f?l&&o&&!f&&u.push(t):(i.set(r,1),s.push(t))}return t.visit(t.REM,(e=>{const t=n.tupleid(e);i.has(t)?i.delete(t):s.push(e)})),t.visit(t.ADD,(t=>{c(t,e)?a.push(t):i.set(n.tupleid(t),1)})),t.visit(t.MOD,f),e.modified()&&(l=!1,t.visit(t.REFLOW,f)),i.empty>r.cleanThreshold&&r.runAfter(i.clean),o}}),ie.Definition={type:"Flatten",metadata:{generates:!0},params:[{name:"fields",type:"field",array:!0,required:!0},{name:"index",type:"string"},{name:"as",type:"string",array:!0}]},t.inherits(ie,n.Transform,{transform(e,t){const r=t.fork(t.NO_SOURCE),i=e.fields,o=Y(i,e.as||[]),a=e.index||null,s=o.length;return r.rem=this.value,t.visit(t.SOURCE,(e=>{const t=i.map((t=>t(e))),u=t.reduce(((e,t)=>Math.max(e,t.length)),0);let c,l,f,d=0;for(;d<u;++d){for(l=n.derive(e),c=0;c<s;++c)l[o[c]]=null==(f=t[c][d])?null:f;a&&(l[a]=d),r.add.push(l)}})),this.value=r.source=r.add,a&&r.modifies(a),r.modifies(o)}}),oe.Definition={type:"Fold",metadata:{generates:!0},params:[{name:"fields",type:"field",array:!0,required:!0},{name:"as",type:"string",array:!0,length:2,default:["key","value"]}]},t.inherits(oe,n.Transform,{transform(e,r){const i=r.fork(r.NO_SOURCE),o=e.fields,a=o.map(t.accessorName),s=e.as||["key","value"],u=s[0],c=s[1],l=o.length;return i.rem=this.value,r.visit(r.SOURCE,(e=>{for(let t,r=0;r<l;++r)t=n.derive(e),t[u]=a[r],t[c]=o[r](e),i.add.push(t)})),this.value=i.source=i.add,i.modifies(s)}}),ae.Definition={type:"Formula",metadata:{modifies:!0},params:[{name:"expr",type:"expr",required:!0},{name:"as",type:"string",required:!0},{name:"initonly",type:"boolean"}]},t.inherits(ae,n.Transform,{transform(e,t){const n=e.expr,r=e.as,i=e.modified(),o=e.initonly?t.ADD:i?t.SOURCE:t.modified(n.fields)||t.modified(r)?t.ADD_MOD:t.ADD;return i&&(t=t.materialize().reflow(!0)),e.initonly||t.modifies(r),t.visit(o,(t=>t[r]=n(t,e)))}}),t.inherits(se,n.Transform,{transform(e,t){const r=t.fork(t.ALL),i=e.generator;let o,a,s,u=this.value,c=e.size-u.length;if(c>0){for(o=[];--c>=0;)o.push(s=n.ingest(i(e))),u.push(s);r.add=r.add.length?r.materialize(r.ADD).add.concat(o):o}else a=u.slice(0,-c),r.rem=r.rem.length?r.materialize(r.REM).rem.concat(a):a,u=u.slice(-c);return r.source=this.value=u,r}});const ue={value:"value",median:o.median,mean:o.mean,min:o.min,max:o.max},ce=[];function le(e){n.Transform.call(this,[],e)}function fe(e){var n,r=e.method||ue.value;if(null!=ue[r])return r===ue.value?(n=void 0!==e.value?e.value:0,()=>n):ue[r];t.error("Unrecognized imputation method: "+r)}function de(e){const t=e.field;return e=>e?t(e):NaN}function he(e,t,n,r){var i,o,a,s,u,c,l,f,d=e=>e(f),h=[],p=r?r.slice():[],g={},m={};for(p.forEach(((e,t)=>g[e]=t+1)),s=0,l=e.length;s<l;++s)c=n(f=e[s]),u=g[c]||(g[c]=p.push(c)),(a=m[o=(i=t?t.map(d):ce)+""])||(a=m[o]=[],h.push(a),a.values=i),a[u-1]=f;return h.domain=p,h}function pe(e){E.call(this,e)}function ge(e){n.Transform.call(this,null,e)}function me(e){n.Operator.call(this,null,ve,e)}function ve(e){return this.value&&!e.modified()?this.value:t.key(e.fields,e.flat)}function ye(e){n.Transform.call(this,[],e),this._pending=null}function be(e){return e.modified("async")&&!(e.modified("values")||e.modified("url")||e.modified("format"))}function xe(e,t,r){r.forEach(n.ingest);const i=t.fork(t.NO_FIELDS&t.NO_SOURCE);return i.rem=e.value,e.value=i.source=i.add=r,e._pending=null,i.rem.length&&i.clean(!0),i}function we(e){n.Transform.call(this,{},e)}function _e(e){n.Operator.call(this,null,Ae,e)}function Ae(e){if(this.value&&!e.modified())return this.value;const t=e.extents,n=t.length;let r,i,o=1/0,a=-1/0;for(r=0;r<n;++r)i=t[r],i[0]<o&&(o=i[0]),i[1]>a&&(a=i[1]);return[o,a]}function ke(e){n.Operator.call(this,null,Ee,e)}function Ee(e){return this.value&&!e.modified()?this.value:e.values.reduce(((e,t)=>e.concat(t)),[])}function De(e){n.Transform.call(this,null,e)}function Ce(e){E.call(this,e)}function Me(e,n){const r=e.field,i=e.value,o=("count"===e.op?"__count__":e.op)||"sum",a=t.accessorFields(r).concat(t.accessorFields(i)),s=Se(r,e.limit||0,n);return n.changed()&&e.set("__pivot__",null,null,!0),{key:e.key,groupby:e.groupby,ops:s.map((()=>o)),fields:s.map((e=>Fe(e,r,i,a))),as:s.map((e=>e+"")),modified:e.modified.bind(e)}}function Fe(e,n,r,i){return t.accessor((t=>n(t)===e?r(t):NaN),i,e+"")}function Se(e,n,r){const i={},o=[];return r.visit(r.SOURCE,(t=>{const n=e(t);i[n]||(i[n]=1,o.push(n))})),o.sort(t.ascending),n?o.slice(0,n):o}function Te(e){ee.call(this,e)}function Oe(e){n.Transform.call(this,null,e)}function Ne(e,t,n,r){for(let i=0,o=n.length;i<o;++i)t[r[i]]=n[i](e);return t}function Pe(e){n.Transform.call(this,null,e)}function Re(e){n.Transform.call(this,null,e)}le.Definition={type:"Impute",metadata:{changes:!0},params:[{name:"field",type:"field",required:!0},{name:"key",type:"field",required:!0},{name:"keyvals",array:!0},{name:"groupby",type:"field",array:!0},{name:"method",type:"enum",default:"value",values:["value","mean","median","max","min"]},{name:"value",default:0}]},t.inherits(le,n.Transform,{transform(e,r){var i,o,a,s,u,c,l,f,d,h,p=r.fork(r.ALL),g=fe(e),m=de(e),v=t.accessorName(e.field),y=t.accessorName(e.key),b=(e.groupby||[]).map(t.accessorName),x=he(r.source,e.groupby,e.key,e.keyvals),w=[],_=this.value,A=x.domain.length;for(u=0,f=x.length;u<f;++u)for(a=(i=x[u]).values,o=NaN,l=0;l<A;++l)if(null==i[l]){for(s=x.domain[l],h={_impute:!0},c=0,d=a.length;c<d;++c)h[b[c]]=a[c];h[y]=s,h[v]=Number.isNaN(o)?o=g(i,m):o,w.push(n.ingest(h))}return w.length&&(p.add=p.materialize(p.ADD).add.concat(w)),_.length&&(p.rem=p.materialize(p.REM).rem.concat(_)),this.value=w,p}}),pe.Definition={type:"JoinAggregate",metadata:{modifies:!0},params:[{name:"groupby",type:"field",array:!0},{name:"fields",type:"field",null:!0,array:!0},{name:"ops",type:"enum",array:!0,values:h},{name:"as",type:"string",null:!0,array:!0},{name:"key",type:"field"}]},t.inherits(pe,E,{transform(e,n){const r=this,i=e.modified();let o;return r.value&&(i||n.modified(r._inputs,!0))?(o=r.value=i?r.init(e):{},n.visit(n.SOURCE,(e=>r.add(e)))):(o=r.value=r.value||this.init(e),n.visit(n.REM,(e=>r.rem(e))),n.visit(n.ADD,(e=>r.add(e)))),r.changes(),n.visit(n.SOURCE,(e=>{t.extend(e,o[r.cellkey(e)].tuple)})),n.reflow(i).modifies(this._outputs)},changes(){const e=this._adds,t=this._mods;let n,r;for(n=0,r=this._alen;n<r;++n)this.celltuple(e[n]),e[n]=null;for(n=0,r=this._mlen;n<r;++n)this.celltuple(t[n]),t[n]=null;this._alen=this._mlen=0}}),ge.Definition={type:"KDE",metadata:{generates:!0},params:[{name:"groupby",type:"field",array:!0},{name:"field",type:"field",required:!0},{name:"cumulative",type:"boolean",default:!1},{name:"counts",type:"boolean",default:!1},{name:"bandwidth",type:"number",default:0},{name:"extent",type:"number",array:!0,length:2},{name:"resolve",type:"enum",values:["shared","independent"],default:"independent"},{name:"steps",type:"number"},{name:"minsteps",type:"number",default:25},{name:"maxsteps",type:"number",default:200},{name:"as",type:"string",array:!0,default:["value","density"]}]},t.inherits(ge,n.Transform,{transform(e,r){const o=r.fork(r.NO_SOURCE|r.NO_FIELDS);if(!this.value||r.changed()||e.modified()){const a=r.materialize(r.SOURCE).source,s=V(a,e.groupby,e.field),u=(e.groupby||[]).map(t.accessorName),c=e.bandwidth,l=e.cumulative?"cdf":"pdf",f=e.as||["value","density"],d=[];let h=e.extent,p=e.steps||e.minsteps||25,g=e.steps||e.maxsteps||200;"pdf"!==l&&"cdf"!==l&&t.error("Invalid density method: "+l),"shared"===e.resolve&&(h||(h=t.extent(a,e.field)),p=g=e.steps||g),s.forEach((r=>{const o=i.randomKDE(r,c)[l],a=e.counts?r.length:1,s=h||t.extent(r);i.sampleCurve(o,s,p,g).forEach((e=>{const t={};for(let n=0;n<u.length;++n)t[u[n]]=r.dims[n];t[f[0]]=e[0],t[f[1]]=e[1]*a,d.push(n.ingest(t))}))})),this.value&&(o.rem=this.value),this.value=o.add=o.source=d}return o}}),t.inherits(me,n.Operator),t.inherits(ye,n.Transform,{transform(e,n){const r=n.dataflow;return this._pending?xe(this,n,this._pending):be(e)?n.StopPropagation:e.values?xe(this,n,r.parse(e.values,e.format)):e.async?{async:r.request(e.url,e.format).then((e=>(this._pending=t.array(e.data),e=>e.touch(this))))}:r.request(e.url,e.format).then((e=>xe(this,n,t.array(e.data))))}}),we.Definition={type:"Lookup",metadata:{modifies:!0},params:[{name:"index",type:"index",params:[{name:"from",type:"data",required:!0},{name:"key",type:"field",required:!0}]},{name:"values",type:"field",array:!0},{name:"fields",type:"field",array:!0,required:!0},{name:"as",type:"string",array:!0},{name:"default",default:null}]},t.inherits(we,n.Transform,{transform(e,n){const r=e.fields,i=e.index,o=e.values,a=null==e.default?null:e.default,s=e.modified(),u=r.length;let c,l,f,d=s?n.SOURCE:n.ADD,h=n,p=e.as;return o?(l=o.length,u>1&&!p&&t.error('Multi-field lookup requires explicit "as" parameter.'),p&&p.length!==u*l&&t.error('The "as" parameter has too few output field names.'),p=p||o.map(t.accessorName),c=function(e){for(var t,n,s=0,c=0;s<u;++s)if(null==(n=i.get(r[s](e))))for(t=0;t<l;++t,++c)e[p[c]]=a;else for(t=0;t<l;++t,++c)e[p[c]]=o[t](n)}):(p||t.error("Missing output field names."),c=function(e){for(var t,n=0;n<u;++n)t=i.get(r[n](e)),e[p[n]]=null==t?a:t}),s?h=n.reflow(!0):(f=r.some((e=>n.modified(e.fields))),d|=f?n.MOD:0),n.visit(d,c),h.modifies(p)}}),t.inherits(_e,n.Operator),t.inherits(ke,n.Operator),t.inherits(De,n.Transform,{transform(e,t){return this.modified(e.modified()),this.value=e,t.fork(t.NO_SOURCE|t.NO_FIELDS)}}),Ce.Definition={type:"Pivot",metadata:{generates:!0,changes:!0},params:[{name:"groupby",type:"field",array:!0},{name:"field",type:"field",required:!0},{name:"value",type:"field",required:!0},{name:"op",type:"enum",values:h,default:"sum"},{name:"limit",type:"number",default:0},{name:"key",type:"field"}]},t.inherits(Ce,E,{_transform:E.prototype.transform,transform(e,t){return this._transform(Me(e,t),t)}}),t.inherits(Te,ee,{transform(e,r){const i=e.subflow,o=e.field,a=e=>this.subflow(n.tupleid(e),i,r,e);return(e.modified("field")||o&&r.modified(t.accessorFields(o)))&&t.error("PreFacet does not support field modification."),this.initTargets(),o?(r.visit(r.MOD,(e=>{const t=a(e);o(e).forEach((e=>t.mod(e)))})),r.visit(r.ADD,(e=>{const t=a(e);o(e).forEach((e=>t.add(n.ingest(e))))})),r.visit(r.REM,(e=>{const t=a(e);o(e).forEach((e=>t.rem(e)))}))):(r.visit(r.MOD,(e=>a(e).mod(e))),r.visit(r.ADD,(e=>a(e).add(e))),r.visit(r.REM,(e=>a(e).rem(e)))),r.clean()&&r.runAfter((()=>this.clean())),r}}),Oe.Definition={type:"Project",metadata:{generates:!0,changes:!0},params:[{name:"fields",type:"field",array:!0},{name:"as",type:"string",null:!0,array:!0}]},t.inherits(Oe,n.Transform,{transform(e,t){const r=t.fork(t.NO_SOURCE),i=e.fields,o=Y(e.fields,e.as||[]),a=i?(e,t)=>Ne(e,t,i,o):n.rederive;let s;return this.value?s=this.value:(t=t.addAll(),s=this.value={}),t.visit(t.REM,(e=>{const t=n.tupleid(e);r.rem.push(s[t]),s[t]=null})),t.visit(t.ADD,(e=>{const t=a(e,n.ingest({}));s[n.tupleid(e)]=t,r.add.push(t)})),t.visit(t.MOD,(e=>{r.mod.push(a(e,s[n.tupleid(e)]))})),r}}),t.inherits(Pe,n.Transform,{transform(e,t){return this.value=e.value,e.modified("value")?t.fork(t.NO_SOURCE|t.NO_FIELDS):t.StopPropagation}}),Re.Definition={type:"Quantile",metadata:{generates:!0,changes:!0},params:[{name:"groupby",type:"field",array:!0},{name:"field",type:"field",required:!0},{name:"probs",type:"number",array:!0},{name:"step",type:"number",default:.01},{name:"as",type:"string",array:!0,default:["prob","value"]}]};const Be=1e-14;function ze(e){n.Transform.call(this,null,e)}function je(e){n.Transform.call(this,[],e),this.count=0}function Le(e){n.Transform.call(this,null,e)}function Ie(e){n.Transform.call(this,null,e),this.modified(!0)}function Ue(e){n.Transform.call(this,null,e)}t.inherits(Re,n.Transform,{transform(e,r){const a=r.fork(r.NO_SOURCE|r.NO_FIELDS),s=e.as||["prob","value"];if(this.value&&!e.modified()&&!r.changed())return a.source=this.value,a;const u=V(r.materialize(r.SOURCE).source,e.groupby,e.field),c=(e.groupby||[]).map(t.accessorName),l=[],f=e.step||.01,d=e.probs||o.range(f/2,1-Be,f),h=d.length;return u.forEach((e=>{const t=i.quantiles(e,d);for(let r=0;r<h;++r){const i={};for(let t=0;t<c.length;++t)i[c[t]]=e.dims[t];i[s[0]]=d[r],i[s[1]]=t[r],l.push(n.ingest(i))}})),this.value&&(a.rem=this.value),this.value=a.add=a.source=l,a}}),t.inherits(ze,n.Transform,{transform(e,t){let r,i;return this.value?i=this.value:(r=t=t.addAll(),i=this.value={}),e.derive&&(r=t.fork(t.NO_SOURCE),t.visit(t.REM,(e=>{const t=n.tupleid(e);r.rem.push(i[t]),i[t]=null})),t.visit(t.ADD,(e=>{const t=n.derive(e);i[n.tupleid(e)]=t,r.add.push(t)})),t.visit(t.MOD,(e=>{const t=i[n.tupleid(e)];for(const n in e)t[n]=e[n],r.modifies(n);r.mod.push(t)}))),r}}),je.Definition={type:"Sample",metadata:{},params:[{name:"size",type:"number",default:1e3}]},t.inherits(je,n.Transform,{transform(e,t){const r=t.fork(t.NO_SOURCE),o=e.modified("size"),a=e.size,s=this.value.reduce(((e,t)=>(e[n.tupleid(t)]=1,e)),{});let u=this.value,c=this.count,l=0;function f(e){let t,o;u.length<a?u.push(e):(o=~~((c+1)*i.random()),o<u.length&&o>=l&&(t=u[o],s[n.tupleid(t)]&&r.rem.push(t),u[o]=e)),++c}if(t.rem.length&&(t.visit(t.REM,(e=>{const t=n.tupleid(e);s[t]&&(s[t]=-1,r.rem.push(e)),--c})),u=u.filter((e=>-1!==s[n.tupleid(e)]))),(t.rem.length||o)&&u.length<a&&t.source&&(l=c=u.length,t.visit(t.SOURCE,(e=>{s[n.tupleid(e)]||f(e)})),l=-1),o&&u.length>a){const e=u.length-a;for(let t=0;t<e;++t)s[n.tupleid(u[t])]=-1,r.rem.push(u[t]);u=u.slice(e)}return t.mod.length&&t.visit(t.MOD,(e=>{s[n.tupleid(e)]&&r.mod.push(e)})),t.add.length&&t.visit(t.ADD,f),(t.add.length||l<0)&&(r.add=u.filter((e=>!s[n.tupleid(e)]))),this.count=c,this.value=r.source=u,r}}),Le.Definition={type:"Sequence",metadata:{generates:!0,changes:!0},params:[{name:"start",type:"number",required:!0},{name:"stop",type:"number",required:!0},{name:"step",type:"number",default:1},{name:"as",type:"string",default:"data"}]},t.inherits(Le,n.Transform,{transform(e,t){if(this.value&&!e.modified())return;const r=t.materialize().fork(t.MOD),i=e.as||"data";return r.rem=this.value?t.rem.concat(this.value):t.rem,this.value=o.range(e.start,e.stop,e.step||1).map((e=>{const t={};return t[i]=e,n.ingest(t)})),r.add=t.add.concat(this.value),r}}),t.inherits(Ie,n.Transform,{transform(e,t){return this.value=t.source,t.changed()?t.fork(t.NO_SOURCE|t.NO_FIELDS):t.StopPropagation}});const qe=["unit0","unit1"];function We(e){n.Transform.call(this,t.fastmap(),e)}function He(e){n.Transform.call(this,null,e)}function Ye(e,n,r,i){const o=Ve[e](n,r);return{init:o.init||t.zero,update:function(e,t){t[i]=o.next(e)}}}Ue.Definition={type:"TimeUnit",metadata:{modifies:!0},params:[{name:"field",type:"field",required:!0},{name:"interval",type:"boolean",default:!0},{name:"units",type:"enum",values:a.TIME_UNITS,array:!0},{name:"step",type:"number",default:1},{name:"maxbins",type:"number",default:40},{name:"extent",type:"date",array:!0},{name:"timezone",type:"enum",default:"local",values:["local","utc"]},{name:"as",type:"string",array:!0,length:2,default:qe}]},t.inherits(Ue,n.Transform,{transform(e,n){const r=e.field,i=!1!==e.interval,o="utc"===e.timezone,s=this._floor(e,n),u=(o?a.utcInterval:a.timeInterval)(s.unit).offset,c=e.as||qe,l=c[0],f=c[1],d=s.step;let h=s.start||1/0,p=s.stop||-1/0,g=n.ADD;return(e.modified()||n.modified(t.accessorFields(r)))&&(g=(n=n.reflow(!0)).SOURCE,h=1/0,p=-1/0),n.visit(g,(e=>{const t=r(e);let n,o;null==t?(e[l]=null,i&&(e[f]=null)):(e[l]=n=o=s(t),i&&(e[f]=o=u(n,d)),n<h&&(h=n),o>p&&(p=o))})),s.start=h,s.stop=p,n.modifies(i?c:l)},_floor(e,n){const r="utc"===e.timezone,i=e.units?{units:e.units,step:e.step||1}:a.timeBin({extent:e.extent||t.extent(n.materialize(n.SOURCE).source,e.field),maxbins:e.maxbins}),o=i.units,s=i.step,u=a.timeUnits(o),c=this.value||{},l=(r?a.utcFloor:a.timeFloor)(u,s);return l.unit=t.peek(u),l.units=u,l.step=s,l.start=c.start,l.stop=c.stop,this.value=l}}),t.inherits(We,n.Transform,{transform(e,t){const n=t.dataflow,r=e.field,i=this.value,o=e=>i.set(r(e),e);let a=!0;return e.modified("field")||t.modified(r.fields)?(i.clear(),t.visit(t.SOURCE,o)):t.changed()?(t.visit(t.REM,(e=>i.delete(r(e)))),t.visit(t.ADD,o)):a=!1,this.modified(a),i.empty>n.cleanThreshold&&n.runAfter(i.clean),t.fork()}}),t.inherits(He,n.Transform,{transform(e,t){(!this.value||e.modified("field")||e.modified("sort")||t.changed()||e.sort&&t.modified(e.sort.fields))&&(this.value=(e.sort?t.source.slice().sort(n.stableCompare(e.sort)):t.source).map(e.field))}});const Ve={row_number:function(){return{next:e=>e.index+1}},rank:function(){let e;return{init:()=>e=1,next:t=>{const n=t.index,r=t.data;return n&&t.compare(r[n-1],r[n])?e=n+1:e}}},dense_rank:function(){let e;return{init:()=>e=1,next:t=>{const n=t.index,r=t.data;return n&&t.compare(r[n-1],r[n])?++e:e}}},percent_rank:function(){const e=Ve.rank(),t=e.next;return{init:e.init,next:e=>(t(e)-1)/(e.data.length-1)}},cume_dist:function(){let e;return{init:()=>e=0,next:t=>{const n=t.data,r=t.compare;let i=t.index;if(e<i){for(;i+1<n.length&&!r(n[i],n[i+1]);)++i;e=i}return(1+e)/n.length}}},ntile:function(e,n){(n=+n)>0||t.error("ntile num must be greater than zero.");const r=Ve.cume_dist(),i=r.next;return{init:r.init,next:e=>Math.ceil(n*i(e))}},lag:function(e,t){return t=+t||1,{next:n=>{const r=n.index-t;return r>=0?e(n.data[r]):null}}},lead:function(e,t){return t=+t||1,{next:n=>{const r=n.index+t,i=n.data;return r<i.length?e(i[r]):null}}},first_value:function(e){return{next:t=>e(t.data[t.i0])}},last_value:function(e){return{next:t=>e(t.data[t.i1-1])}},nth_value:function(e,n){return(n=+n)>0||t.error("nth_value nth must be greater than zero."),{next:t=>{const r=t.i0+(n-1);return r<t.i1?e(t.data[r]):null}}},prev_value:function(e){let t;return{init:()=>t=null,next:n=>{const r=e(n.data[n.index]);return null!=r?t=r:t}}},next_value:function(e){let t,n;return{init:()=>(t=null,n=-1),next:r=>{const i=r.data;return r.index<=n?t:(n=Ge(e,i,r.index))<0?(n=i.length,t=null):t=e(i[n])}}}};function Ge(e,t,n){for(let r=t.length;n<r;++n)if(null!=e(t[n]))return n;return-1}const $e=Object.keys(Ve);function Xe(e){const n=t.array(e.ops),r=t.array(e.fields),i=t.array(e.params),o=t.array(e.as),a=this.outputs=[],s=this.windows=[],u={},l={},f=[],d=[];let h=!0;function p(e){t.array(t.accessorFields(e)).forEach((e=>u[e]=1))}p(e.sort),n.forEach(((e,n)=>{const u=r[n],m=t.accessorName(u),v=c(e,m,o[n]);if(p(u),a.push(v),t.hasOwnProperty(Ve,e))s.push(Ye(e,r[n],i[n],v));else{if(null==u&&"count"!==e&&t.error("Null aggregate field specified."),"count"===e)return void f.push(v);h=!1;let n=l[m];n||(n=l[m]=[],n.field=u,d.push(n)),n.push(g(e,v))}})),(f.length||d.length)&&(this.cell=Qe(d,f,h)),this.inputs=Object.keys(u)}const Je=Xe.prototype;function Qe(e,t,n){e=e.map((e=>_(e,e.field)));const r={num:0,agg:null,store:!1,count:t};if(!n)for(var i=e.length,o=r.agg=Array(i),a=0;a<i;++a)o[a]=new e[a](r);if(r.store)var s=r.data=new A;return r.add=function(e){if(r.num+=1,!n){s&&s.add(e);for(let t=0;t<i;++t)o[t].add(o[t].get(e),e)}},r.rem=function(e){if(r.num-=1,!n){s&&s.rem(e);for(let t=0;t<i;++t)o[t].rem(o[t].get(e),e)}},r.set=function(e){let i,a;for(s&&s.values(),i=0,a=t.length;i<a;++i)e[t[i]]=r.num;if(!n)for(i=0,a=o.length;i<a;++i)o[i].set(e)},r.init=function(){r.num=0,s&&s.reset();for(let e=0;e<i;++e)o[e].init()},r}function Ze(e){n.Transform.call(this,{},e),this._mlen=0,this._mods=[]}function Ke(e,n,r,i){const a=i.sort,s=a&&!i.ignorePeers,u=i.frame||[null,0],c=e.data(r),l=c.length,f=s?o.bisector(a):null,d={i0:0,i1:0,p0:0,p1:0,index:0,data:c,compare:a||t.constant(-1)};n.init();for(let t=0;t<l;++t)et(d,u,t,l),s&&tt(d,f),n.update(d,c[t])}function et(e,t,n,r){e.p0=e.i0,e.p1=e.i1,e.i0=null==t[0]?0:Math.max(0,n-Math.abs(t[0])),e.i1=null==t[1]?r:Math.min(r,n+Math.abs(t[1])+1),e.index=n}function tt(e,t){const n=e.i0,r=e.i1-1,i=e.compare,o=e.data,a=o.length-1;n>0&&!i(o[n],o[n-1])&&(e.i0=t.left(o,o[n])),r<a&&!i(o[r],o[r+1])&&(e.i1=t.right(o,o[r]))}Je.init=function(){this.windows.forEach((e=>e.init())),this.cell&&this.cell.init()},Je.update=function(e,t){const n=this.cell,r=this.windows,i=e.data,o=r&&r.length;let a;if(n){for(a=e.p0;a<e.i0;++a)n.rem(i[a]);for(a=e.p1;a<e.i1;++a)n.add(i[a]);n.set(t)}for(a=0;a<o;++a)r[a].update(e,t)},Ze.Definition={type:"Window",metadata:{modifies:!0},params:[{name:"sort",type:"compare"},{name:"groupby",type:"field",array:!0},{name:"ops",type:"enum",array:!0,values:$e.concat(h)},{name:"params",type:"number",null:!0,array:!0},{name:"fields",type:"field",null:!0,array:!0},{name:"as",type:"string",null:!0,array:!0},{name:"frame",type:"number",null:!0,array:!0,length:2,default:[null,0]},{name:"ignorePeers",type:"boolean",default:!1}]},t.inherits(Ze,n.Transform,{transform(e,t){this.stamp=t.stamp;const r=e.modified(),i=n.stableCompare(e.sort),o=u(e.groupby),a=e=>this.group(o(e));let s=this.state;s&&!r||(s=this.state=new Xe(e)),r||t.modified(s.inputs)?(this.value={},t.visit(t.SOURCE,(e=>a(e).add(e)))):(t.visit(t.REM,(e=>a(e).remove(e))),t.visit(t.ADD,(e=>a(e).add(e))));for(let n=0,u=this._mlen;n<u;++n)Ke(this._mods[n],s,i,e);return this._mlen=0,this._mods=[],t.reflow(r).modifies(s.outputs)},group(e){let t=this.value[e];return t||(t=this.value[e]=M(n.tupleid),t.stamp=-1),t.stamp<this.stamp&&(t.stamp=this.stamp,this._mods[this._mlen++]=t),t}}),e.aggregate=E,e.bin=C,e.collect=F,e.compare=S,e.countpattern=O,e.cross=P,e.density=U,e.dotbin=$,e.expression=J,e.extent=Z,e.facet=ee,e.field=te,e.filter=re,e.flatten=ie,e.fold=oe,e.formula=ae,e.generate=se,e.impute=le,e.joinaggregate=pe,e.kde=ge,e.key=me,e.load=ye,e.lookup=we,e.multiextent=_e,e.multivalues=ke,e.params=De,e.pivot=Ce,e.prefacet=Te,e.project=Oe,e.proxy=Pe,e.quantile=Re,e.relay=ze,e.sample=je,e.sequence=Le,e.sieve=Ie,e.subflow=K,e.timeunit=Ue,e.tupleindex=We,e.values=He,e.window=Ze,Object.defineProperty(e,"__esModule",{value:!0})}(t,n(1176),n(1183),n(1282),n(1190),n(1322))},2334:function(e,t,n){!function(e,t,n,r){"use strict";const i="top",o="left",a="right",s="bottom",u="top-left",c="top-right",l="bottom-left",f="bottom-right",d="start",h="middle",p="end",g="x",m="y",v="group",y="axis",b="title",x="frame",w="scope",_="legend",A="row-header",k="row-footer",E="row-title",D="column-header",C="column-footer",M="column-title",F="padding",S="symbol",T="fit",O="fit-x",N="fit-y",P="pad",R="none",B="all",z="each",j="flush",L="column",I="row";function U(e){t.Transform.call(this,null,e)}function q(e,t,n){return t(e.bounds.clear(),e,n)}r.inherits(U,t.Transform,{transform(e,t){const r=t.dataflow,i=e.mark,o=i.marktype,a=n.Marks[o],s=a.bound;let u,c=i.bounds;if(a.nested)i.items.length&&r.dirty(i.items[0]),c=q(i,s),i.items.forEach((e=>{e.bounds.clear().union(c)}));else if(o===v||e.modified())switch(t.visit(t.MOD,(e=>r.dirty(e))),c.clear(),i.items.forEach((e=>c.union(q(e,s)))),i.role){case y:case _:case b:t.reflow()}else u=t.changed(t.REM),t.visit(t.ADD,(e=>{c.union(q(e,s))})),t.visit(t.MOD,(e=>{u=u||c.alignsWith(e.bounds),r.dirty(e),c.union(q(e,s))})),u&&(c.clear(),i.items.forEach((e=>c.union(e.bounds))));return n.boundClip(i),t.modifies("bounds")}});const W=":vega_identifier:";function H(e){t.Transform.call(this,0,e)}function Y(e){return e._signals[W]||(e._signals[W]=e.add(0))}function V(e){t.Transform.call(this,null,e)}function G(e){const t=e.groups,n=e.parent;return t&&1===t.size?t.get(Object.keys(t.object)[0]):t&&n?t.lookup(n):null}function $(e){t.Transform.call(this,null,e)}H.Definition={type:"Identifier",metadata:{modifies:!0},params:[{name:"as",type:"string",required:!0}]},r.inherits(H,t.Transform,{transform(e,t){const n=Y(t.dataflow),r=e.as;let i=n.value;return t.visit(t.ADD,(e=>e[r]=e[r]||++i)),n.set(this.value=i),t}}),r.inherits(V,t.Transform,{transform(e,t){let r=this.value;r||(r=t.dataflow.scenegraph().mark(e.markdef,G(e),e.index),r.group.context=e.context,e.context.group||(e.context.group=r.group),r.source=this.source,r.clip=e.clip,r.interactive=e.interactive,this.value=r);const i=r.marktype===v?n.GroupItem:n.Item;return t.visit(t.ADD,(e=>i.call(e,r))),(e.modified("clip")||e.modified("interactive"))&&(r.clip=e.clip,r.interactive=!!e.interactive,r.zdirty=!0,t.reflow()),r.items=t.source,t}});const X={parity:e=>e.filter(((e,t)=>t%2?e.opacity=0:1)),greedy:(e,t)=>{let n;return e.filter(((e,r)=>r&&J(n.bounds,e.bounds,t)?e.opacity=0:(n=e,1)))}},J=(e,t,n)=>n>Math.max(t.x1-e.x2,e.x1-t.x2,t.y1-e.y2,e.y1-t.y2),Q=(e,t)=>{for(var n,r=1,i=e.length,o=e[0].bounds;r<i;o=n,++r)if(J(o,n=e[r].bounds,t))return!0},Z=e=>{const t=e.bounds;return t.width()>1&&t.height()>1},K=(e,t,r)=>{var o=e.range(),a=new n.Bounds;return t===i||t===s?a.set(o[0],-1/0,o[1],1/0):a.set(-1/0,o[0],1/0,o[1]),a.expand(r||1),e=>a.encloses(e.bounds)},ee=e=>(e.forEach((e=>e.opacity=1)),e),te=(e,t)=>e.reflow(t.modified()).modifies("opacity");function ne(e){t.Transform.call(this,null,e)}r.inherits($,t.Transform,{transform(e,t){const n=X[e.method]||X.parity,i=e.separation||0;let o,a,s=t.materialize(t.SOURCE).source;if(!s||!s.length)return;if(!e.method)return e.modified("method")&&(ee(s),t=te(t,e)),t;if(s=s.filter(Z),!s.length)return;if(e.sort&&(s=s.slice().sort(e.sort)),o=ee(s),t=te(t,e),o.length>=3&&Q(o,i)){do{o=n(o,i)}while(o.length>=3&&Q(o,i));o.length<3&&!r.peek(s).opacity&&(o.length>1&&(r.peek(o).opacity=0),r.peek(s).opacity=1)}e.boundScale&&e.boundTolerance>=0&&(a=K(e.boundScale,e.boundOrient,+e.boundTolerance),s.forEach((e=>{a(e)||(e.opacity=0)})));const u=o[0].mark.bounds.clear();return s.forEach((e=>{e.opacity&&u.union(e.bounds)})),t}}),r.inherits(ne,t.Transform,{transform(e,t){const n=t.dataflow;if(t.visit(t.ALL,(e=>n.dirty(e))),t.fields&&t.fields.zindex){const e=t.source&&t.source[0];e&&(e.mark.zdirty=!0)}}});const re=new n.Bounds;function ie(e,t,n){return e[t]===n?0:(e[t]=n,1)}function oe(e){var t=e.items[0].orient;return t===o||t===a}function ae(e){let t=+e.grid;return[e.ticks?t++:-1,e.labels?t++:-1,t+ +e.domain]}function se(e,t,r,u){var c,l,f=t.items[0],d=f.datum,h=null!=f.translate?f.translate:.5,p=f.orient,g=ae(d),m=f.range,v=f.offset,y=f.position,b=f.minExtent,x=f.maxExtent,w=d.title&&f.items[g[2]].items[0],_=f.titlePadding,A=f.bounds,k=w&&n.multiLineOffset(w),E=0,D=0;switch(re.clear().union(A),A.clear(),(c=g[0])>-1&&A.union(f.items[c].bounds),(c=g[1])>-1&&A.union(f.items[c].bounds),p){case i:E=y||0,D=-v,l=Math.max(b,Math.min(x,-A.y1)),A.add(0,-l).add(m,0),w&&ue(e,w,l,_,k,0,-1,A);break;case o:E=-v,D=y||0,l=Math.max(b,Math.min(x,-A.x1)),A.add(-l,0).add(0,m),w&&ue(e,w,l,_,k,1,-1,A);break;case a:E=r+v,D=y||0,l=Math.max(b,Math.min(x,A.x2)),A.add(0,0).add(l,m),w&&ue(e,w,l,_,k,1,1,A);break;case s:E=y||0,D=u+v,l=Math.max(b,Math.min(x,A.y2)),A.add(0,0).add(m,l),w&&ue(e,w,l,_,0,0,1,A);break;default:E=f.x,D=f.y}return n.boundStroke(A.translate(E,D),f),ie(f,"x",E+h)|ie(f,"y",D+h)&&(f.bounds=re,e.dirty(f),f.bounds=A,e.dirty(f)),f.mark.bounds.clear().union(A)}function ue(e,t,n,r,i,o,a,s){const u=t.bounds;if(t.auto){const s=a*(n+i+r);let c=0,l=0;e.dirty(t),o?c=(t.x||0)-(t.x=s):l=(t.y||0)-(t.y=s),t.mark.bounds.clear().union(u.translate(-c,-l)),e.dirty(t)}s.union(u)}const ce=(e,t)=>Math.floor(Math.min(e,t)),le=(e,t)=>Math.ceil(Math.max(e,t));function fe(e){var t,n,r=e.items,i=r.length,o=0;const a={marks:[],rowheaders:[],rowfooters:[],colheaders:[],colfooters:[],rowtitle:null,coltitle:null};for(;o<i;++o)if(n=(t=r[o]).items,t.marktype===v)switch(t.role){case y:case _:case b:break;case A:a.rowheaders.push(...n);break;case k:a.rowfooters.push(...n);break;case D:a.colheaders.push(...n);break;case C:a.colfooters.push(...n);break;case E:a.rowtitle=n[0];break;case M:a.coltitle=n[0];break;default:a.marks.push(...n)}return a}function de(e){return(new n.Bounds).set(0,0,e.width||0,e.height||0)}function he(e){const t=e.bounds.clone();return t.empty()?t.set(0,0,0,0):t.translate(-(e.x||0),-(e.y||0))}function pe(e,t,n){const i=r.isObject(e)?e[t]:e;return null!=i?i:void 0!==n?n:0}function ge(e){return e<0?Math.ceil(-e):0}function me(e,t,n){var r,i,o,a,s,u,c,l,f,d,v,y=!n.nodirty,b=n.bounds===j?de:he,x=re.set(0,0,0,0),w=pe(n.align,L),_=pe(n.align,I),A=pe(n.padding,L),k=pe(n.padding,I),E=n.columns||t.length,D=E<=0?1:Math.ceil(t.length/E),C=t.length,M=Array(C),F=Array(E),S=0,T=Array(C),O=Array(D),N=0,P=Array(C),R=Array(C),U=Array(C);for(i=0;i<E;++i)F[i]=0;for(i=0;i<D;++i)O[i]=0;for(i=0;i<C;++i)u=t[i],s=U[i]=b(u),u.x=u.x||0,P[i]=0,u.y=u.y||0,R[i]=0,o=i%E,a=~~(i/E),S=Math.max(S,c=Math.ceil(s.x2)),N=Math.max(N,l=Math.ceil(s.y2)),F[o]=Math.max(F[o],c),O[a]=Math.max(O[a],l),M[i]=A+ge(s.x1),T[i]=k+ge(s.y1),y&&e.dirty(t[i]);for(i=0;i<C;++i)i%E===0&&(M[i]=0),i<E&&(T[i]=0);if(w===z)for(o=1;o<E;++o){for(v=0,i=o;i<C;i+=E)v<M[i]&&(v=M[i]);for(i=o;i<C;i+=E)M[i]=v+F[o-1]}else if(w===B){for(v=0,i=0;i<C;++i)i%E&&v<M[i]&&(v=M[i]);for(i=0;i<C;++i)i%E&&(M[i]=v+S)}else for(w=!1,o=1;o<E;++o)for(i=o;i<C;i+=E)M[i]+=F[o-1];if(_===z)for(a=1;a<D;++a){for(v=0,r=(i=a*E)+E;i<r;++i)v<T[i]&&(v=T[i]);for(i=a*E;i<r;++i)T[i]=v+O[a-1]}else if(_===B){for(v=0,i=E;i<C;++i)v<T[i]&&(v=T[i]);for(i=E;i<C;++i)T[i]=v+N}else for(_=!1,a=1;a<D;++a)for(r=(i=a*E)+E;i<r;++i)T[i]+=O[a-1];for(f=0,i=0;i<C;++i)f=M[i]+(i%E?f:0),P[i]+=f-t[i].x;for(o=0;o<E;++o)for(d=0,i=o;i<C;i+=E)d+=T[i],R[i]+=d-t[i].y;if(w&&pe(n.center,L)&&D>1)for(i=0;i<C;++i)(f=(s=w===B?S:F[i%E])-U[i].x2-t[i].x-P[i])>0&&(P[i]+=f/2);if(_&&pe(n.center,I)&&1!==E)for(i=0;i<C;++i)(d=(s=_===B?N:O[~~(i/E)])-U[i].y2-t[i].y-R[i])>0&&(R[i]+=d/2);for(i=0;i<C;++i)x.union(U[i].translate(P[i],R[i]));switch(f=pe(n.anchor,g),d=pe(n.anchor,m),pe(n.anchor,L)){case p:f-=x.width();break;case h:f-=x.width()/2}switch(pe(n.anchor,I)){case p:d-=x.height();break;case h:d-=x.height()/2}for(f=Math.round(f),d=Math.round(d),x.clear(),i=0;i<C;++i)t[i].mark.bounds.clear();for(i=0;i<C;++i)(u=t[i]).x+=P[i]+=f,u.y+=R[i]+=d,x.union(u.mark.bounds.union(u.bounds.translate(P[i],R[i]))),y&&e.dirty(u);return x}function ve(e,t,n){var r,i,o,a,s,u,c,l=fe(t),f=l.marks,d=n.bounds===j?ye:be,h=n.offset,g=n.columns||f.length,m=g<=0?1:Math.ceil(f.length/g),v=m*g;const y=me(e,f,n);y.empty()&&y.set(0,0,0,0),l.rowheaders&&(u=pe(n.headerBand,I,null),r=xe(e,l.rowheaders,f,g,m,-pe(h,"rowHeader"),ce,0,d,"x1",0,g,1,u)),l.colheaders&&(u=pe(n.headerBand,L,null),i=xe(e,l.colheaders,f,g,g,-pe(h,"columnHeader"),ce,1,d,"y1",0,1,g,u)),l.rowfooters&&(u=pe(n.footerBand,I,null),o=xe(e,l.rowfooters,f,g,m,pe(h,"rowFooter"),le,0,d,"x2",g-1,g,1,u)),l.colfooters&&(u=pe(n.footerBand,L,null),a=xe(e,l.colfooters,f,g,g,pe(h,"columnFooter"),le,1,d,"y2",v-g,1,g,u)),l.rowtitle&&(s=pe(n.titleAnchor,I),c=pe(h,"rowTitle"),c=s===p?o+c:r-c,u=pe(n.titleBand,I,.5),we(e,l.rowtitle,c,0,y,u)),l.coltitle&&(s=pe(n.titleAnchor,L),c=pe(h,"columnTitle"),c=s===p?a+c:i-c,u=pe(n.titleBand,L,.5),we(e,l.coltitle,c,1,y,u))}function ye(e,t){return"x1"===t?e.x||0:"y1"===t?e.y||0:"x2"===t?(e.x||0)+(e.width||0):"y2"===t?(e.y||0)+(e.height||0):void 0}function be(e,t){return e.bounds[t]}function xe(e,t,n,r,i,o,a,s,u,c,l,f,d,h){var p,g,m,v,y,b,x,w,_,A=n.length,k=0,E=0;if(!A)return k;for(p=l;p<A;p+=f)n[p]&&(k=a(k,u(n[p],c)));if(!t.length)return k;for(t.length>i&&(e.warn("Grid headers exceed limit: "+i),t=t.slice(0,i)),k+=o,g=0,v=t.length;g<v;++g)e.dirty(t[g]),t[g].mark.bounds.clear();for(p=l,g=0,v=t.length;g<v;++g,p+=f){for(y=(b=t[g]).mark.bounds,m=p;m>=0&&null==(x=n[m]);m-=d);s?(w=null==h?x.x:Math.round(x.bounds.x1+h*x.bounds.width()),_=k):(w=k,_=null==h?x.y:Math.round(x.bounds.y1+h*x.bounds.height())),y.union(b.bounds.translate(w-(b.x||0),_-(b.y||0))),b.x=w,b.y=_,e.dirty(b),E=a(E,y[c])}return E}function we(e,t,n,r,i,o){if(t){e.dirty(t);var a=n,s=n;r?a=Math.round(i.x1+o*i.width()):s=Math.round(i.y1+o*i.height()),t.bounds.translate(a-(t.x||0),s-(t.y||0)),t.mark.bounds.clear().union(t.bounds),t.x=a,t.y=s,e.dirty(t)}}function _e(e,t){const n=e[t]||{};return(t,r)=>null!=n[t]?n[t]:null!=e[t]?e[t]:r}function Ae(e,t){let n=-1/0;return e.forEach((e=>{null!=e.offset&&(n=Math.max(n,e.offset))})),n>-1/0?n:t}function ke(e,t,n,r,g,m,v){const y=_e(n,t),b=Ae(e,y("offset",0)),x=y("anchor",d),w=x===p?1:x===h?.5:0,_={align:z,bounds:y("bounds",j),columns:"vertical"===y("direction")?1:e.length,padding:y("margin",8),center:y("center"),nodirty:!0};switch(t){case o:_.anchor={x:Math.floor(r.x1)-b,column:p,y:w*(v||r.height()+2*r.y1),row:x};break;case a:_.anchor={x:Math.ceil(r.x2)+b,y:w*(v||r.height()+2*r.y1),row:x};break;case i:_.anchor={y:Math.floor(g.y1)-b,row:p,x:w*(m||g.width()+2*g.x1),column:x};break;case s:_.anchor={y:Math.ceil(g.y2)+b,x:w*(m||g.width()+2*g.x1),column:x};break;case u:_.anchor={x:b,y:b};break;case c:_.anchor={x:m-b,y:b,column:p};break;case l:_.anchor={x:b,y:v-b,row:p};break;case f:_.anchor={x:m-b,y:v-b,column:p,row:p}}return _}function Ee(e,t){var r,i,o=t.items[0],a=o.datum,s=o.orient,u=o.bounds,c=o.x,l=o.y;return o._bounds?o._bounds.clear().union(u):o._bounds=u.clone(),u.clear(),Ce(e,o,o.items[0].items[0]),u=De(o,u),r=2*o.padding,i=2*o.padding,u.empty()||(r=Math.ceil(u.width()+r),i=Math.ceil(u.height()+i)),a.type===S&&Se(o.items[0].items[0].items[0].items),s!==R&&(o.x=c=0,o.y=l=0),o.width=r,o.height=i,n.boundStroke(u.set(c,l,c+r,l+i),o),o.mark.bounds.clear().union(u),o}function De(e,t){return e.items.forEach((e=>t.union(e.bounds))),t.x1=e.padding,t.y1=e.padding,t}function Ce(e,t,n){var r=t.padding,i=r-n.x,u=r-n.y;if(t.datum.title){var c=t.items[1].items[0],l=c.anchor,f=t.titlePadding||0,d=r-c.x,h=r-c.y;switch(c.orient){case o:i+=Math.ceil(c.bounds.width())+f;break;case a:case s:break;default:u+=c.bounds.height()+f}switch((i||u)&&Fe(e,n,i,u),c.orient){case o:h+=Me(t,n,c,l,1,1);break;case a:d+=Me(t,n,c,p,0,0)+f,h+=Me(t,n,c,l,1,1);break;case s:d+=Me(t,n,c,l,0,0),h+=Me(t,n,c,p,-1,0,1)+f;break;default:d+=Me(t,n,c,l,0,0)}(d||h)&&Fe(e,c,d,h),(d=Math.round(c.bounds.x1-r))<0&&(Fe(e,n,-d,0),Fe(e,c,-d,0))}else(i||u)&&Fe(e,n,i,u)}function Me(e,t,r,i,o,a,s){const u="symbol"!==e.datum.type,c=r.datum.vgrad,l=(!u||!a&&c||s?t:t.items[0]).bounds[o?"y2":"x2"]-e.padding,f=c&&a?l:0,h=c&&a?0:l,g=o<=0?0:n.multiLineOffset(r);return Math.round(i===d?f:i===p?h-g:.5*(l-g))}function Fe(e,t,n,r){t.x+=n,t.y+=r,t.bounds.translate(n,r),t.mark.bounds.translate(n,r),e.dirty(t)}function Se(e){const t=e.reduce(((e,t)=>(e[t.column]=Math.max(t.bounds.x2-t.x,e[t.column]||0),e)),{});e.forEach((e=>{e.width=t[e.column],e.height=e.bounds.y2-e.y}))}function Te(e,t,n,r,u){var c,l=t.items[0],f=l.frame,h=l.orient,g=l.anchor,m=l.offset,y=l.padding,b=l.items[0].items[0],x=l.items[1]&&l.items[1].items[0],w=h===o||h===a?r:n,_=0,A=0,k=0,E=0,D=0;if(f!==v?h===o?(_=u.y2,w=u.y1):h===a?(_=u.y1,w=u.y2):(_=u.x1,w=u.x2):h===o&&(_=r,w=0),c=g===d?_:g===p?w:(_+w)/2,x&&x.text){switch(h){case i:case s:D=b.bounds.height()+y;break;case o:E=b.bounds.width()+y;break;case a:E=-b.bounds.width()-y}re.clear().union(x.bounds),re.translate(E-(x.x||0),D-(x.y||0)),ie(x,"x",E)|ie(x,"y",D)&&(e.dirty(x),x.bounds.clear().union(re),x.mark.bounds.clear().union(re),e.dirty(x)),re.clear().union(x.bounds)}else re.clear();switch(re.union(b.bounds),h){case i:A=c,k=u.y1-re.height()-m;break;case o:A=u.x1-re.width()-m,k=c;break;case a:A=u.x2+re.width()+m,k=c;break;case s:A=c,k=u.y2+m;break;default:A=l.x,k=l.y}return ie(l,"x",A)|ie(l,"y",k)&&(re.translate(A,k),e.dirty(l),l.bounds.clear().union(re),t.bounds.clear().union(re),e.dirty(l)),l.bounds}function Oe(e){t.Transform.call(this,null,e)}function Ne(e){return e&&"legend-entry"!==e.mark.role}function Pe(e,t,r){var u,c,l,f,d,h=t.items,p=Math.max(0,t.width||0),g=Math.max(0,t.height||0),m=(new n.Bounds).set(0,0,p,g),v=m.clone(),F=m.clone(),S=[];for(f=0,d=h.length;f<d;++f)switch((c=h[f]).role){case y:(oe(c)?v:F).union(se(e,c,p,g));break;case b:u=c;break;case _:S.push(Ee(e,c));break;case x:case w:case A:case k:case E:case D:case C:case M:v.union(c.bounds),F.union(c.bounds);break;default:m.union(c.bounds)}if(S.length){const t={};S.forEach((e=>{(l=e.orient||a)!==R&&(t[l]||(t[l]=[])).push(e)}));for(const n in t){const i=t[n];me(e,i,ke(i,n,r.legends,v,F,p,g))}S.forEach((t=>{const n=t.bounds;if(n.equals(t._bounds)||(t.bounds=t._bounds,e.dirty(t),t.bounds=n,e.dirty(t)),r.autosize&&r.autosize.type===T)switch(t.orient){case o:case a:m.add(n.x1,0).add(n.x2,0);break;case i:case s:m.add(0,n.y1).add(0,n.y2)}else m.union(n)}))}m.union(v).union(F),u&&m.union(Te(e,u,p,g,m)),t.clip&&m.set(0,0,t.width||0,t.height||0),Re(e,t,m,r)}function Re(e,t,n,r){const i=r.autosize||{},o=i.type;if(e._autosize<1||!o)return;let a=e._width,s=e._height,u=Math.max(0,t.width||0),c=Math.max(0,Math.ceil(-n.x1)),l=Math.max(0,t.height||0),f=Math.max(0,Math.ceil(-n.y1));const d=Math.max(0,Math.ceil(n.x2-u)),h=Math.max(0,Math.ceil(n.y2-l));if(i.contains===F){const t=e.padding();a-=t.left+t.right,s-=t.top+t.bottom}o===R?(c=0,f=0,u=a,l=s):o===T?(u=Math.max(0,a-c-d),l=Math.max(0,s-f-h)):o===O?(u=Math.max(0,a-c-d),s=l+f+h):o===N?(a=u+c+d,l=Math.max(0,s-f-h)):o===P&&(a=u+c+d,s=l+f+h),e._resizeView(a,s,u,l,[c,f],i.resize)}r.inherits(Oe,t.Transform,{transform(e,t){const n=t.dataflow;return e.mark.items.forEach((t=>{e.layout&&ve(n,t,e.layout),Pe(n,t,e)})),Ne(e.mark.group)?t.reflow():t}}),e.bound=U,e.identifier=H,e.mark=V,e.overlap=$,e.render=ne,e.viewlayout=Oe,Object.defineProperty(e,"__esModule",{value:!0})}(t,n(1183),n(1323),n(1176))},2335:function(e,t,n){var r=n(108);!function(e,t){"use strict";function n(e){return function(){return e}}var i=Math.abs,o=Math.atan2,a=Math.cos,s=Math.max,u=Math.min,c=Math.sin,l=Math.sqrt,f=1e-12,d=Math.PI,h=d/2,p=2*d;function g(e){return e>1?0:e<-1?d:Math.acos(e)}function m(e){return e>=1?h:e<=-1?-h:Math.asin(e)}function v(e){return e.innerRadius}function y(e){return e.outerRadius}function b(e){return e.startAngle}function x(e){return e.endAngle}function w(e){return e&&e.padAngle}function _(e,t,n,r,i,o,a,s){var u=n-e,c=r-t,l=a-i,d=s-o,h=d*u-l*c;if(!(h*h<f))return[e+(h=(l*(t-o)-d*(e-i))/h)*u,t+h*c]}function A(e,t,n,r,i,o,a){var u=e-n,c=t-r,f=(a?o:-o)/l(u*u+c*c),d=f*c,h=-f*u,p=e+d,g=t+h,m=n+d,v=r+h,y=(p+m)/2,b=(g+v)/2,x=m-p,w=v-g,_=x*x+w*w,A=i-o,k=p*v-m*g,E=(w<0?-1:1)*l(s(0,A*A*_-k*k)),D=(k*w-x*E)/_,C=(-k*x-w*E)/_,M=(k*w+x*E)/_,F=(-k*x+w*E)/_,S=D-y,T=C-b,O=M-y,N=F-b;return S*S+T*T>O*O+N*N&&(D=M,C=F),{cx:D,cy:C,x01:-d,y01:-h,x11:D*(i/A-1),y11:C*(i/A-1)}}function k(){var e=v,r=y,s=n(0),k=null,E=b,D=x,C=w,M=null;function F(){var n,v,y=+e.apply(this,arguments),b=+r.apply(this,arguments),x=E.apply(this,arguments)-h,w=D.apply(this,arguments)-h,F=i(w-x),S=w>x;if(M||(M=n=t.path()),b<y&&(v=b,b=y,y=v),b>f)if(F>p-f)M.moveTo(b*a(x),b*c(x)),M.arc(0,0,b,x,w,!S),y>f&&(M.moveTo(y*a(w),y*c(w)),M.arc(0,0,y,w,x,S));else{var T,O,N=x,P=w,R=x,B=w,z=F,j=F,L=C.apply(this,arguments)/2,I=L>f&&(k?+k.apply(this,arguments):l(y*y+b*b)),U=u(i(b-y)/2,+s.apply(this,arguments)),q=U,W=U;if(I>f){var H=m(I/y*c(L)),Y=m(I/b*c(L));(z-=2*H)>f?(R+=H*=S?1:-1,B-=H):(z=0,R=B=(x+w)/2),(j-=2*Y)>f?(N+=Y*=S?1:-1,P-=Y):(j=0,N=P=(x+w)/2)}var V=b*a(N),G=b*c(N),$=y*a(B),X=y*c(B);if(U>f){var J,Q=b*a(P),Z=b*c(P),K=y*a(R),ee=y*c(R);if(F<d&&(J=_(V,G,K,ee,Q,Z,$,X))){var te=V-J[0],ne=G-J[1],re=Q-J[0],ie=Z-J[1],oe=1/c(g((te*re+ne*ie)/(l(te*te+ne*ne)*l(re*re+ie*ie)))/2),ae=l(J[0]*J[0]+J[1]*J[1]);q=u(U,(y-ae)/(oe-1)),W=u(U,(b-ae)/(oe+1))}}j>f?W>f?(T=A(K,ee,V,G,b,W,S),O=A(Q,Z,$,X,b,W,S),M.moveTo(T.cx+T.x01,T.cy+T.y01),W<U?M.arc(T.cx,T.cy,W,o(T.y01,T.x01),o(O.y01,O.x01),!S):(M.arc(T.cx,T.cy,W,o(T.y01,T.x01),o(T.y11,T.x11),!S),M.arc(0,0,b,o(T.cy+T.y11,T.cx+T.x11),o(O.cy+O.y11,O.cx+O.x11),!S),M.arc(O.cx,O.cy,W,o(O.y11,O.x11),o(O.y01,O.x01),!S))):(M.moveTo(V,G),M.arc(0,0,b,N,P,!S)):M.moveTo(V,G),y>f&&z>f?q>f?(T=A($,X,Q,Z,y,-q,S),O=A(V,G,K,ee,y,-q,S),M.lineTo(T.cx+T.x01,T.cy+T.y01),q<U?M.arc(T.cx,T.cy,q,o(T.y01,T.x01),o(O.y01,O.x01),!S):(M.arc(T.cx,T.cy,q,o(T.y01,T.x01),o(T.y11,T.x11),!S),M.arc(0,0,y,o(T.cy+T.y11,T.cx+T.x11),o(O.cy+O.y11,O.cx+O.x11),S),M.arc(O.cx,O.cy,q,o(O.y11,O.x11),o(O.y01,O.x01),!S))):M.arc(0,0,y,B,R,S):M.lineTo($,X)}else M.moveTo(0,0);if(M.closePath(),n)return M=null,n+""||null}return F.centroid=function(){var t=(+e.apply(this,arguments)+ +r.apply(this,arguments))/2,n=(+E.apply(this,arguments)+ +D.apply(this,arguments))/2-d/2;return[a(n)*t,c(n)*t]},F.innerRadius=function(t){return arguments.length?(e="function"===typeof t?t:n(+t),F):e},F.outerRadius=function(e){return arguments.length?(r="function"===typeof e?e:n(+e),F):r},F.cornerRadius=function(e){return arguments.length?(s="function"===typeof e?e:n(+e),F):s},F.padRadius=function(e){return arguments.length?(k=null==e?null:"function"===typeof e?e:n(+e),F):k},F.startAngle=function(e){return arguments.length?(E="function"===typeof e?e:n(+e),F):E},F.endAngle=function(e){return arguments.length?(D="function"===typeof e?e:n(+e),F):D},F.padAngle=function(e){return arguments.length?(C="function"===typeof e?e:n(+e),F):C},F.context=function(e){return arguments.length?(M=null==e?null:e,F):M},F}var E=Array.prototype.slice;function D(e){return"object"===typeof e&&"length"in e?e:Array.from(e)}function C(e){this._context=e}function M(e){return new C(e)}function F(e){return e[0]}function S(e){return e[1]}function T(e,r){var i=n(!0),o=null,a=M,s=null;function u(n){var u,c,l,f=(n=D(n)).length,d=!1;for(null==o&&(s=a(l=t.path())),u=0;u<=f;++u)!(u<f&&i(c=n[u],u,n))===d&&((d=!d)?s.lineStart():s.lineEnd()),d&&s.point(+e(c,u,n),+r(c,u,n));if(l)return s=null,l+""||null}return e="function"===typeof e?e:void 0===e?F:n(e),r="function"===typeof r?r:void 0===r?S:n(r),u.x=function(t){return arguments.length?(e="function"===typeof t?t:n(+t),u):e},u.y=function(e){return arguments.length?(r="function"===typeof e?e:n(+e),u):r},u.defined=function(e){return arguments.length?(i="function"===typeof e?e:n(!!e),u):i},u.curve=function(e){return arguments.length?(a=e,null!=o&&(s=a(o)),u):a},u.context=function(e){return arguments.length?(null==e?o=s=null:s=a(o=e),u):o},u}function O(e,r,i){var o=null,a=n(!0),s=null,u=M,c=null;function l(n){var l,f,d,h,p,g=(n=D(n)).length,m=!1,v=new Array(g),y=new Array(g);for(null==s&&(c=u(p=t.path())),l=0;l<=g;++l){if(!(l<g&&a(h=n[l],l,n))===m)if(m=!m)f=l,c.areaStart(),c.lineStart();else{for(c.lineEnd(),c.lineStart(),d=l-1;d>=f;--d)c.point(v[d],y[d]);c.lineEnd(),c.areaEnd()}m&&(v[l]=+e(h,l,n),y[l]=+r(h,l,n),c.point(o?+o(h,l,n):v[l],i?+i(h,l,n):y[l]))}if(p)return c=null,p+""||null}function f(){return T().defined(a).curve(u).context(s)}return e="function"===typeof e?e:void 0===e?F:n(+e),r="function"===typeof r?r:n(void 0===r?0:+r),i="function"===typeof i?i:void 0===i?S:n(+i),l.x=function(t){return arguments.length?(e="function"===typeof t?t:n(+t),o=null,l):e},l.x0=function(t){return arguments.length?(e="function"===typeof t?t:n(+t),l):e},l.x1=function(e){return arguments.length?(o=null==e?null:"function"===typeof e?e:n(+e),l):o},l.y=function(e){return arguments.length?(r="function"===typeof e?e:n(+e),i=null,l):r},l.y0=function(e){return arguments.length?(r="function"===typeof e?e:n(+e),l):r},l.y1=function(e){return arguments.length?(i=null==e?null:"function"===typeof e?e:n(+e),l):i},l.lineX0=l.lineY0=function(){return f().x(e).y(r)},l.lineY1=function(){return f().x(e).y(i)},l.lineX1=function(){return f().x(o).y(r)},l.defined=function(e){return arguments.length?(a="function"===typeof e?e:n(!!e),l):a},l.curve=function(e){return arguments.length?(u=e,null!=s&&(c=u(s)),l):u},l.context=function(e){return arguments.length?(null==e?s=c=null:c=u(s=e),l):s},l}function N(e,t){return t<e?-1:t>e?1:t>=e?0:NaN}function P(e){return e}function R(){var e=P,t=N,r=null,i=n(0),o=n(p),a=n(0);function s(n){var s,u,c,l,f,d=(n=D(n)).length,h=0,g=new Array(d),m=new Array(d),v=+i.apply(this,arguments),y=Math.min(p,Math.max(-p,o.apply(this,arguments)-v)),b=Math.min(Math.abs(y)/d,a.apply(this,arguments)),x=b*(y<0?-1:1);for(s=0;s<d;++s)(f=m[g[s]=s]=+e(n[s],s,n))>0&&(h+=f);for(null!=t?g.sort((function(e,n){return t(m[e],m[n])})):null!=r&&g.sort((function(e,t){return r(n[e],n[t])})),s=0,c=h?(y-d*x)/h:0;s<d;++s,v=l)u=g[s],l=v+((f=m[u])>0?f*c:0)+x,m[u]={data:n[u],index:s,value:f,startAngle:v,endAngle:l,padAngle:b};return m}return s.value=function(t){return arguments.length?(e="function"===typeof t?t:n(+t),s):e},s.sortValues=function(e){return arguments.length?(t=e,r=null,s):t},s.sort=function(e){return arguments.length?(r=e,t=null,s):r},s.startAngle=function(e){return arguments.length?(i="function"===typeof e?e:n(+e),s):i},s.endAngle=function(e){return arguments.length?(o="function"===typeof e?e:n(+e),s):o},s.padAngle=function(e){return arguments.length?(a="function"===typeof e?e:n(+e),s):a},s}C.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t)}}};var B=j(M);function z(e){this._curve=e}function j(e){function t(t){return new z(e(t))}return t._curve=e,t}function L(e){var t=e.curve;return e.angle=e.x,delete e.x,e.radius=e.y,delete e.y,e.curve=function(e){return arguments.length?t(j(e)):t()._curve},e}function I(){return L(T().curve(B))}function U(){var e=O().curve(B),t=e.curve,n=e.lineX0,r=e.lineX1,i=e.lineY0,o=e.lineY1;return e.angle=e.x,delete e.x,e.startAngle=e.x0,delete e.x0,e.endAngle=e.x1,delete e.x1,e.radius=e.y,delete e.y,e.innerRadius=e.y0,delete e.y0,e.outerRadius=e.y1,delete e.y1,e.lineStartAngle=function(){return L(n())},delete e.lineX0,e.lineEndAngle=function(){return L(r())},delete e.lineX1,e.lineInnerRadius=function(){return L(i())},delete e.lineY0,e.lineOuterRadius=function(){return L(o())},delete e.lineY1,e.curve=function(e){return arguments.length?t(j(e)):t()._curve},e}function q(e,t){return[(t=+t)*Math.cos(e-=Math.PI/2),t*Math.sin(e)]}function W(e){return e.source}function H(e){return e.target}function Y(e){var r=W,i=H,o=F,a=S,s=null;function u(){var n,u=E.call(arguments),c=r.apply(this,u),l=i.apply(this,u);if(s||(s=n=t.path()),e(s,+o.apply(this,(u[0]=c,u)),+a.apply(this,u),+o.apply(this,(u[0]=l,u)),+a.apply(this,u)),n)return s=null,n+""||null}return u.source=function(e){return arguments.length?(r=e,u):r},u.target=function(e){return arguments.length?(i=e,u):i},u.x=function(e){return arguments.length?(o="function"===typeof e?e:n(+e),u):o},u.y=function(e){return arguments.length?(a="function"===typeof e?e:n(+e),u):a},u.context=function(e){return arguments.length?(s=null==e?null:e,u):s},u}function V(e,t,n,r,i){e.moveTo(t,n),e.bezierCurveTo(t=(t+r)/2,n,t,i,r,i)}function G(e,t,n,r,i){e.moveTo(t,n),e.bezierCurveTo(t,n=(n+i)/2,r,n,r,i)}function $(e,t,n,r,i){var o=q(t,n),a=q(t,n=(n+i)/2),s=q(r,n),u=q(r,i);e.moveTo(o[0],o[1]),e.bezierCurveTo(a[0],a[1],s[0],s[1],u[0],u[1])}function X(){return Y(V)}function J(){return Y(G)}function Q(){var e=Y($);return e.angle=e.x,delete e.x,e.radius=e.y,delete e.y,e}z.prototype={areaStart:function(){this._curve.areaStart()},areaEnd:function(){this._curve.areaEnd()},lineStart:function(){this._curve.lineStart()},lineEnd:function(){this._curve.lineEnd()},point:function(e,t){this._curve.point(t*Math.sin(e),t*-Math.cos(e))}};var Z={draw:function(e,t){var n=Math.sqrt(t/d);e.moveTo(n,0),e.arc(0,0,n,0,p)}},K={draw:function(e,t){var n=Math.sqrt(t/5)/2;e.moveTo(-3*n,-n),e.lineTo(-n,-n),e.lineTo(-n,-3*n),e.lineTo(n,-3*n),e.lineTo(n,-n),e.lineTo(3*n,-n),e.lineTo(3*n,n),e.lineTo(n,n),e.lineTo(n,3*n),e.lineTo(-n,3*n),e.lineTo(-n,n),e.lineTo(-3*n,n),e.closePath()}},ee=Math.sqrt(1/3),te=2*ee,ne={draw:function(e,t){var n=Math.sqrt(t/te),r=n*ee;e.moveTo(0,-n),e.lineTo(r,0),e.lineTo(0,n),e.lineTo(-r,0),e.closePath()}},re=.8908130915292852,ie=Math.sin(d/10)/Math.sin(7*d/10),oe=Math.sin(p/10)*ie,ae=-Math.cos(p/10)*ie,se={draw:function(e,t){var n=Math.sqrt(t*re),r=oe*n,i=ae*n;e.moveTo(0,-n),e.lineTo(r,i);for(var o=1;o<5;++o){var a=p*o/5,s=Math.cos(a),u=Math.sin(a);e.lineTo(u*n,-s*n),e.lineTo(s*r-u*i,u*r+s*i)}e.closePath()}},ue={draw:function(e,t){var n=Math.sqrt(t),r=-n/2;e.rect(r,r,n,n)}},ce=Math.sqrt(3),le={draw:function(e,t){var n=-Math.sqrt(t/(3*ce));e.moveTo(0,2*n),e.lineTo(-ce*n,-n),e.lineTo(ce*n,-n),e.closePath()}},fe=-.5,de=Math.sqrt(3)/2,he=1/Math.sqrt(12),pe=3*(he/2+1),ge={draw:function(e,t){var n=Math.sqrt(t/pe),r=n/2,i=n*he,o=r,a=n*he+n,s=-o,u=a;e.moveTo(r,i),e.lineTo(o,a),e.lineTo(s,u),e.lineTo(fe*r-de*i,de*r+fe*i),e.lineTo(fe*o-de*a,de*o+fe*a),e.lineTo(fe*s-de*u,de*s+fe*u),e.lineTo(fe*r+de*i,fe*i-de*r),e.lineTo(fe*o+de*a,fe*a-de*o),e.lineTo(fe*s+de*u,fe*u-de*s),e.closePath()}},me=[Z,K,ne,ue,se,le,ge];function ve(e,r){var i=null;function o(){var n;if(i||(i=n=t.path()),e.apply(this,arguments).draw(i,+r.apply(this,arguments)),n)return i=null,n+""||null}return e="function"===typeof e?e:n(e||Z),r="function"===typeof r?r:n(void 0===r?64:+r),o.type=function(t){return arguments.length?(e="function"===typeof t?t:n(t),o):e},o.size=function(e){return arguments.length?(r="function"===typeof e?e:n(+e),o):r},o.context=function(e){return arguments.length?(i=null==e?null:e,o):i},o}function ye(){}function be(e,t,n){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+n)/6)}function xe(e){this._context=e}function we(e){return new xe(e)}function _e(e){this._context=e}function Ae(e){return new _e(e)}function ke(e){this._context=e}function Ee(e){return new ke(e)}function De(e,t){this._basis=new xe(e),this._beta=t}xe.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:be(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:be(this,e,t)}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}},_e.prototype={areaStart:ye,areaEnd:ye,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x2,this._y2),this._context.closePath();break;case 2:this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break;case 3:this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4)}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:be(this,e,t)}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}},ke.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+e)/6,r=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(n,r):this._context.moveTo(n,r);break;case 3:this._point=4;default:be(this,e,t)}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}},De.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var e=this._x,t=this._y,n=e.length-1;if(n>0)for(var r,i=e[0],o=t[0],a=e[n]-i,s=t[n]-o,u=-1;++u<=n;)r=u/n,this._basis.point(this._beta*e[u]+(1-this._beta)*(i+r*a),this._beta*t[u]+(1-this._beta)*(o+r*s));this._x=this._y=null,this._basis.lineEnd()},point:function(e,t){this._x.push(+e),this._y.push(+t)}};var Ce=function e(t){function n(e){return 1===t?new xe(e):new De(e,t)}return n.beta=function(t){return e(+t)},n}(.85);function Me(e,t,n){e._context.bezierCurveTo(e._x1+e._k*(e._x2-e._x0),e._y1+e._k*(e._y2-e._y0),e._x2+e._k*(e._x1-t),e._y2+e._k*(e._y1-n),e._x2,e._y2)}function Fe(e,t){this._context=e,this._k=(1-t)/6}Fe.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:Me(this,this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2,this._x1=e,this._y1=t;break;case 2:this._point=3;default:Me(this,e,t)}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};var Se=function e(t){function n(e){return new Fe(e,t)}return n.tension=function(t){return e(+t)},n}(0);function Te(e,t){this._context=e,this._k=(1-t)/6}Te.prototype={areaStart:ye,areaEnd:ye,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x3,this._y3),this._context.closePath();break;case 2:this._context.lineTo(this._x3,this._y3),this._context.closePath();break;case 3:this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5)}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x3=e,this._y3=t;break;case 1:this._point=2,this._context.moveTo(this._x4=e,this._y4=t);break;case 2:this._point=3,this._x5=e,this._y5=t;break;default:Me(this,e,t)}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};var Oe=function e(t){function n(e){return new Te(e,t)}return n.tension=function(t){return e(+t)},n}(0);function Ne(e,t){this._context=e,this._k=(1-t)/6}Ne.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:Me(this,e,t)}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};var Pe=function e(t){function n(e){return new Ne(e,t)}return n.tension=function(t){return e(+t)},n}(0);function Re(e,t,n){var r=e._x1,i=e._y1,o=e._x2,a=e._y2;if(e._l01_a>f){var s=2*e._l01_2a+3*e._l01_a*e._l12_a+e._l12_2a,u=3*e._l01_a*(e._l01_a+e._l12_a);r=(r*s-e._x0*e._l12_2a+e._x2*e._l01_2a)/u,i=(i*s-e._y0*e._l12_2a+e._y2*e._l01_2a)/u}if(e._l23_a>f){var c=2*e._l23_2a+3*e._l23_a*e._l12_a+e._l12_2a,l=3*e._l23_a*(e._l23_a+e._l12_a);o=(o*c+e._x1*e._l23_2a-t*e._l12_2a)/l,a=(a*c+e._y1*e._l23_2a-n*e._l12_2a)/l}e._context.bezierCurveTo(r,i,o,a,e._x2,e._y2)}function Be(e,t){this._context=e,this._alpha=t}Be.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,r=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3;default:Re(this,e,t)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};var ze=function e(t){function n(e){return t?new Be(e,t):new Fe(e,0)}return n.alpha=function(t){return e(+t)},n}(.5);function je(e,t){this._context=e,this._alpha=t}je.prototype={areaStart:ye,areaEnd:ye,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x3,this._y3),this._context.closePath();break;case 2:this._context.lineTo(this._x3,this._y3),this._context.closePath();break;case 3:this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5)}},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,r=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=e,this._y3=t;break;case 1:this._point=2,this._context.moveTo(this._x4=e,this._y4=t);break;case 2:this._point=3,this._x5=e,this._y5=t;break;default:Re(this,e,t)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};var Le=function e(t){function n(e){return t?new je(e,t):new Te(e,0)}return n.alpha=function(t){return e(+t)},n}(.5);function Ie(e,t){this._context=e,this._alpha=t}Ie.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,r=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:Re(this,e,t)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};var Ue=function e(t){function n(e){return t?new Ie(e,t):new Ne(e,0)}return n.alpha=function(t){return e(+t)},n}(.5);function qe(e){this._context=e}function We(e){return new qe(e)}function He(e){return e<0?-1:1}function Ye(e,t,n){var r=e._x1-e._x0,i=t-e._x1,o=(e._y1-e._y0)/(r||i<0&&-0),a=(n-e._y1)/(i||r<0&&-0),s=(o*i+a*r)/(r+i);return(He(o)+He(a))*Math.min(Math.abs(o),Math.abs(a),.5*Math.abs(s))||0}function Ve(e,t){var n=e._x1-e._x0;return n?(3*(e._y1-e._y0)/n-t)/2:t}function Ge(e,t,n){var r=e._x0,i=e._y0,o=e._x1,a=e._y1,s=(o-r)/3;e._context.bezierCurveTo(r+s,i+s*t,o-s,a-s*n,o,a)}function $e(e){this._context=e}function Xe(e){this._context=new Je(e)}function Je(e){this._context=e}function Qe(e){return new $e(e)}function Ze(e){return new Xe(e)}function Ke(e){this._context=e}function et(e){var t,n,r=e.length-1,i=new Array(r),o=new Array(r),a=new Array(r);for(i[0]=0,o[0]=2,a[0]=e[0]+2*e[1],t=1;t<r-1;++t)i[t]=1,o[t]=4,a[t]=4*e[t]+2*e[t+1];for(i[r-1]=2,o[r-1]=7,a[r-1]=8*e[r-1]+e[r],t=1;t<r;++t)n=i[t]/o[t-1],o[t]-=n,a[t]-=n*a[t-1];for(i[r-1]=a[r-1]/o[r-1],t=r-2;t>=0;--t)i[t]=(a[t]-i[t+1])/o[t];for(o[r-1]=(e[r]+i[r-1])/2,t=0;t<r-1;++t)o[t]=2*e[t+1]-i[t+1];return[i,o]}function tt(e){return new Ke(e)}function nt(e,t){this._context=e,this._t=t}function rt(e){return new nt(e,.5)}function it(e){return new nt(e,0)}function ot(e){return new nt(e,1)}function at(e,t){if((i=e.length)>1)for(var n,r,i,o=1,a=e[t[0]],s=a.length;o<i;++o)for(r=a,a=e[t[o]],n=0;n<s;++n)a[n][1]+=a[n][0]=isNaN(r[n][1])?r[n][0]:r[n][1]}function st(e){for(var t=e.length,n=new Array(t);--t>=0;)n[t]=t;return n}function ut(e,t){return e[t]}function ct(e){const t=[];return t.key=e,t}function lt(){var e=n([]),t=st,i=at,o=ut;function a(n){var a,s,u,c=Array.from(e.apply(this,arguments),ct),l=c.length,f=-1,d=r(n);try{for(d.s();!(u=d.n()).done;){const e=u.value;for(a=0,++f;a<l;++a)(c[a][f]=[0,+o(e,c[a].key,f,n)]).data=e}}catch(h){d.e(h)}finally{d.f()}for(a=0,s=D(t(c));a<l;++a)c[s[a]].index=a;return i(c,s),c}return a.keys=function(t){return arguments.length?(e="function"===typeof t?t:n(Array.from(t)),a):e},a.value=function(e){return arguments.length?(o="function"===typeof e?e:n(+e),a):o},a.order=function(e){return arguments.length?(t=null==e?st:"function"===typeof e?e:n(Array.from(e)),a):t},a.offset=function(e){return arguments.length?(i=null==e?at:e,a):i},a}function ft(e,t){if((r=e.length)>0){for(var n,r,i,o=0,a=e[0].length;o<a;++o){for(i=n=0;n<r;++n)i+=e[n][o][1]||0;if(i)for(n=0;n<r;++n)e[n][o][1]/=i}at(e,t)}}function dt(e,t){if((s=e.length)>0)for(var n,r,i,o,a,s,u=0,c=e[t[0]].length;u<c;++u)for(o=a=0,n=0;n<s;++n)(i=(r=e[t[n]][u])[1]-r[0])>0?(r[0]=o,r[1]=o+=i):i<0?(r[1]=a,r[0]=a+=i):(r[0]=0,r[1]=i)}function ht(e,t){if((n=e.length)>0){for(var n,r=0,i=e[t[0]],o=i.length;r<o;++r){for(var a=0,s=0;a<n;++a)s+=e[a][r][1]||0;i[r][1]+=i[r][0]=-s/2}at(e,t)}}function pt(e,t){if((i=e.length)>0&&(r=(n=e[t[0]]).length)>0){for(var n,r,i,o=0,a=1;a<r;++a){for(var s=0,u=0,c=0;s<i;++s){for(var l=e[t[s]],f=l[a][1]||0,d=(f-(l[a-1][1]||0))/2,h=0;h<s;++h){var p=e[t[h]];d+=(p[a][1]||0)-(p[a-1][1]||0)}u+=f,c+=d*f}n[a-1][1]+=n[a-1][0]=o,u&&(o-=c/u)}n[a-1][1]+=n[a-1][0]=o,at(e,t)}}function gt(e){var t=e.map(mt);return st(e).sort((function(e,n){return t[e]-t[n]}))}function mt(e){for(var t,n=-1,r=0,i=e.length,o=-1/0;++n<i;)(t=+e[n][1])>o&&(o=t,r=n);return r}function vt(e){var t=e.map(yt);return st(e).sort((function(e,n){return t[e]-t[n]}))}function yt(e){for(var t,n=0,r=-1,i=e.length;++r<i;)(t=+e[r][1])&&(n+=t);return n}function bt(e){return vt(e).reverse()}function xt(e){var t,n,r=e.length,i=e.map(yt),o=gt(e),a=0,s=0,u=[],c=[];for(t=0;t<r;++t)n=o[t],a<s?(a+=i[n],u.push(n)):(s+=i[n],c.push(n));return c.reverse().concat(u)}function wt(e){return st(e).reverse()}qe.prototype={areaStart:ye,areaEnd:ye,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}},$e.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:Ge(this,this._t0,Ve(this,this._t0))}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var n=NaN;if(t=+t,(e=+e)!==this._x1||t!==this._y1){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,Ge(this,Ve(this,n=Ye(this,e,t)),n);break;default:Ge(this,this._t0,n=Ye(this,e,t))}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=n}}},(Xe.prototype=Object.create($e.prototype)).point=function(e,t){$e.prototype.point.call(this,t,e)},Je.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,n,r,i,o){this._context.bezierCurveTo(t,e,r,n,o,i)}},Ke.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,n=e.length;if(n)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),2===n)this._context.lineTo(e[1],t[1]);else for(var r=et(e),i=et(t),o=0,a=1;a<n;++o,++a)this._context.bezierCurveTo(r[0][o],i[0][o],r[1][o],i[1][o],e[a],t[a]);(this._line||0!==this._line&&1===n)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}},nt.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&2===this._point&&this._context.lineTo(this._x,this._y),(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var n=this._x*(1-this._t)+e*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,t)}}this._x=e,this._y=t}},e.arc=k,e.area=O,e.areaRadial=U,e.curveBasis=we,e.curveBasisClosed=Ae,e.curveBasisOpen=Ee,e.curveBundle=Ce,e.curveCardinal=Se,e.curveCardinalClosed=Oe,e.curveCardinalOpen=Pe,e.curveCatmullRom=ze,e.curveCatmullRomClosed=Le,e.curveCatmullRomOpen=Ue,e.curveLinear=M,e.curveLinearClosed=We,e.curveMonotoneX=Qe,e.curveMonotoneY=Ze,e.curveNatural=tt,e.curveStep=rt,e.curveStepAfter=ot,e.curveStepBefore=it,e.line=T,e.lineRadial=I,e.linkHorizontal=X,e.linkRadial=Q,e.linkVertical=J,e.pie=R,e.pointRadial=q,e.radialArea=U,e.radialLine=I,e.stack=lt,e.stackOffsetDiverging=dt,e.stackOffsetExpand=ft,e.stackOffsetNone=at,e.stackOffsetSilhouette=ht,e.stackOffsetWiggle=pt,e.stackOrderAppearance=gt,e.stackOrderAscending=vt,e.stackOrderDescending=bt,e.stackOrderInsideOut=xt,e.stackOrderNone=st,e.stackOrderReverse=wt,e.symbol=ve,e.symbolCircle=Z,e.symbolCross=K,e.symbolDiamond=ne,e.symbolSquare=ue,e.symbolStar=se,e.symbolTriangle=le,e.symbolWye=ge,e.symbols=me,Object.defineProperty(e,"__esModule",{value:!0})}(t,n(1712))},2336:function(e,t,n){var r=n(163),i=n(108);!function(e,t,n,o,a,s){"use strict";function u(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e)}return this}function c(e,t){switch(arguments.length){case 0:break;case 1:"function"===typeof e?this.interpolator(e):this.range(e);break;default:this.domain(e),"function"===typeof t?this.interpolator(t):this.range(t)}return this}const l=Symbol("implicit");function f(){var e=new Map,t=[],n=[],r=l;function o(i){var o=i+"",a=e.get(o);if(!a){if(r!==l)return r;e.set(o,a=t.push(i))}return n[(a-1)%n.length]}return o.domain=function(n){if(!arguments.length)return t.slice();t=[],e=new Map;var r,a=i(n);try{for(a.s();!(r=a.n()).done;){const n=r.value,i=n+"";e.has(i)||e.set(i,t.push(n))}}catch(s){a.e(s)}finally{a.f()}return o},o.range=function(e){return arguments.length?(n=Array.from(e),o):n.slice()},o.unknown=function(e){return arguments.length?(r=e,o):r},o.copy=function(){return f(t,n).unknown(r)},u.apply(o,arguments),o}function d(){var e,n,i=f().unknown(void 0),o=i.domain,a=i.range,s=0,c=1,l=!1,h=0,p=0,g=.5;function m(){var r=o().length,i=c<s,u=i?c:s,f=i?s:c;e=(f-u)/Math.max(1,r-h+2*p),l&&(e=Math.floor(e)),u+=(f-u-e*(r-h))*g,n=e*(1-h),l&&(u=Math.round(u),n=Math.round(n));var d=t.range(r).map((function(t){return u+e*t}));return a(i?d.reverse():d)}return delete i.unknown,i.domain=function(e){return arguments.length?(o(e),m()):o()},i.range=function(e){var t;return arguments.length?(t=r(e,2),s=t[0],c=t[1],s=+s,c=+c,m()):[s,c]},i.rangeRound=function(e){var t;return t=r(e,2),s=t[0],c=t[1],s=+s,c=+c,l=!0,m()},i.bandwidth=function(){return n},i.step=function(){return e},i.round=function(e){return arguments.length?(l=!!e,m()):l},i.padding=function(e){return arguments.length?(h=Math.min(1,p=+e),m()):h},i.paddingInner=function(e){return arguments.length?(h=Math.min(1,e),m()):h},i.paddingOuter=function(e){return arguments.length?(p=+e,m()):p},i.align=function(e){return arguments.length?(g=Math.max(0,Math.min(1,e)),m()):g},i.copy=function(){return d(o(),[s,c]).round(l).paddingInner(h).paddingOuter(p).align(g)},u.apply(m(),arguments)}function h(e){var t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,delete e.paddingOuter,e.copy=function(){return h(t())},e}function p(){return h(d.apply(null,arguments).paddingInner(1))}function g(e){return function(){return e}}function m(e){return+e}var v=[0,1];function y(e){return e}function b(e,t){return(t-=e=+e)?function(n){return(n-e)/t}:g(isNaN(t)?NaN:.5)}function x(e,t){var n;return e>t&&(n=e,e=t,t=n),function(n){return Math.max(e,Math.min(t,n))}}function w(e,t,n){var r=e[0],i=e[1],o=t[0],a=t[1];return i<r?(r=b(i,r),o=n(a,o)):(r=b(r,i),o=n(o,a)),function(e){return o(r(e))}}function _(e,n,r){var i=Math.min(e.length,n.length)-1,o=new Array(i),a=new Array(i),s=-1;for(e[i]<e[0]&&(e=e.slice().reverse(),n=n.slice().reverse());++s<i;)o[s]=b(e[s],e[s+1]),a[s]=r(n[s],n[s+1]);return function(n){var r=t.bisect(e,n,1,i)-1;return a[r](o[r](n))}}function A(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function k(){var e,t,r,i,o,a,s=v,u=v,c=n.interpolate,l=y;function f(){var e=Math.min(s.length,u.length);return l!==y&&(l=x(s[0],s[e-1])),i=e>2?_:w,o=a=null,d}function d(t){return isNaN(t=+t)?r:(o||(o=i(s.map(e),u,c)))(e(l(t)))}return d.invert=function(r){return l(t((a||(a=i(u,s.map(e),n.interpolateNumber)))(r)))},d.domain=function(e){return arguments.length?(s=Array.from(e,m),f()):s.slice()},d.range=function(e){return arguments.length?(u=Array.from(e),f()):u.slice()},d.rangeRound=function(e){return u=Array.from(e),c=n.interpolateRound,f()},d.clamp=function(e){return arguments.length?(l=!!e||y,f()):l!==y},d.interpolate=function(e){return arguments.length?(c=e,f()):c},d.unknown=function(e){return arguments.length?(r=e,d):r},function(n,r){return e=n,t=r,f()}}function E(){return k()(y,y)}function D(e,n,r,i){var a,s=t.tickStep(e,n,r);switch((i=o.formatSpecifier(null==i?",f":i)).type){case"s":var u=Math.max(Math.abs(e),Math.abs(n));return null!=i.precision||isNaN(a=o.precisionPrefix(s,u))||(i.precision=a),o.formatPrefix(i,u);case"":case"e":case"g":case"p":case"r":null!=i.precision||isNaN(a=o.precisionRound(s,Math.max(Math.abs(e),Math.abs(n))))||(i.precision=a-("e"===i.type));break;case"f":case"%":null!=i.precision||isNaN(a=o.precisionFixed(s))||(i.precision=a-2*("%"===i.type))}return o.format(i)}function C(e){var n=e.domain;return e.ticks=function(e){var r=n();return t.ticks(r[0],r[r.length-1],null==e?10:e)},e.tickFormat=function(e,t){var r=n();return D(r[0],r[r.length-1],null==e?10:e,t)},e.nice=function(r){null==r&&(r=10);var i,o,a=n(),s=0,u=a.length-1,c=a[s],l=a[u],f=10;for(l<c&&(o=c,c=l,l=o,o=s,s=u,u=o);f-- >0;){if((o=t.tickIncrement(c,l,r))===i)return a[s]=c,a[u]=l,n(a);if(o>0)c=Math.floor(c/o)*o,l=Math.ceil(l/o)*o;else{if(!(o<0))break;c=Math.ceil(c*o)/o,l=Math.floor(l*o)/o}i=o}return e},e}function M(){var e=E();return e.copy=function(){return A(e,M())},u.apply(e,arguments),C(e)}function F(e){var t;function n(e){return isNaN(e=+e)?t:e}return n.invert=n,n.domain=n.range=function(t){return arguments.length?(e=Array.from(t,m),n):e.slice()},n.unknown=function(e){return arguments.length?(t=e,n):t},n.copy=function(){return F(e).unknown(t)},e=arguments.length?Array.from(e,m):[0,1],C(n)}function S(e,t){var n,r=0,i=(e=e.slice()).length-1,o=e[r],a=e[i];return a<o&&(n=r,r=i,i=n,n=o,o=a,a=n),e[r]=t.floor(o),e[i]=t.ceil(a),e}function T(e){return Math.log(e)}function O(e){return Math.exp(e)}function N(e){return-Math.log(-e)}function P(e){return-Math.exp(-e)}function R(e){return isFinite(e)?+("1e"+e):e<0?0:e}function B(e){return 10===e?R:e===Math.E?Math.exp:function(t){return Math.pow(e,t)}}function z(e){return e===Math.E?Math.log:10===e&&Math.log10||2===e&&Math.log2||(e=Math.log(e),function(t){return Math.log(t)/e})}function j(e){return function(t){return-e(-t)}}function L(e){var n,r,i=e(T,O),a=i.domain,s=10;function u(){return n=z(s),r=B(s),a()[0]<0?(n=j(n),r=j(r),e(N,P)):e(T,O),i}return i.base=function(e){return arguments.length?(s=+e,u()):s},i.domain=function(e){return arguments.length?(a(e),u()):a()},i.ticks=function(e){var i,o=a(),u=o[0],c=o[o.length-1];(i=c<u)&&(h=u,u=c,c=h);var l,f,d,h=n(u),p=n(c),g=null==e?10:+e,m=[];if(!(s%1)&&p-h<g){if(h=Math.floor(h),p=Math.ceil(p),u>0){for(;h<=p;++h)for(f=1,l=r(h);f<s;++f)if(!((d=l*f)<u)){if(d>c)break;m.push(d)}}else for(;h<=p;++h)for(f=s-1,l=r(h);f>=1;--f)if(!((d=l*f)<u)){if(d>c)break;m.push(d)}2*m.length<g&&(m=t.ticks(u,c,g))}else m=t.ticks(h,p,Math.min(p-h,g)).map(r);return i?m.reverse():m},i.tickFormat=function(e,t){if(null==t&&(t=10===s?".0e":","),"function"!==typeof t&&(t=o.format(t)),e===1/0)return t;null==e&&(e=10);var a=Math.max(1,s*e/i.ticks().length);return function(e){var i=e/r(Math.round(n(e)));return i*s<s-.5&&(i*=s),i<=a?t(e):""}},i.nice=function(){return a(S(a(),{floor:function(e){return r(Math.floor(n(e)))},ceil:function(e){return r(Math.ceil(n(e)))}}))},i}function I(){var e=L(k()).domain([1,10]);return e.copy=function(){return A(e,I()).base(e.base())},u.apply(e,arguments),e}function U(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function q(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function W(e){var t=1,n=e(U(t),q(t));return n.constant=function(n){return arguments.length?e(U(t=+n),q(t)):t},C(n)}function H(){var e=W(k());return e.copy=function(){return A(e,H()).constant(e.constant())},u.apply(e,arguments)}function Y(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function V(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function G(e){return e<0?-e*e:e*e}function $(e){var t=e(y,y),n=1;function r(){return 1===n?e(y,y):.5===n?e(V,G):e(Y(n),Y(1/n))}return t.exponent=function(e){return arguments.length?(n=+e,r()):n},C(t)}function X(){var e=$(k());return e.copy=function(){return A(e,X()).exponent(e.exponent())},u.apply(e,arguments),e}function J(){return X.apply(null,arguments).exponent(.5)}function Q(e){return Math.sign(e)*e*e}function Z(e){return Math.sign(e)*Math.sqrt(Math.abs(e))}function K(){var e,t=E(),n=[0,1],r=!1;function i(n){var i=Z(t(n));return isNaN(i)?e:r?Math.round(i):i}return i.invert=function(e){return t.invert(Q(e))},i.domain=function(e){return arguments.length?(t.domain(e),i):t.domain()},i.range=function(e){return arguments.length?(t.range((n=Array.from(e,m)).map(Q)),i):n.slice()},i.rangeRound=function(e){return i.range(e).round(!0)},i.round=function(e){return arguments.length?(r=!!e,i):r},i.clamp=function(e){return arguments.length?(t.clamp(e),i):t.clamp()},i.unknown=function(t){return arguments.length?(e=t,i):e},i.copy=function(){return K(t.domain(),n).round(r).clamp(t.clamp()).unknown(e)},u.apply(i,arguments),C(i)}function ee(){var e,n=[],r=[],o=[];function a(){var e=0,i=Math.max(1,r.length);for(o=new Array(i-1);++e<i;)o[e-1]=t.quantileSorted(n,e/i);return s}function s(n){return isNaN(n=+n)?e:r[t.bisect(o,n)]}return s.invertExtent=function(e){var t=r.indexOf(e);return t<0?[NaN,NaN]:[t>0?o[t-1]:n[0],t<o.length?o[t]:n[n.length-1]]},s.domain=function(e){if(!arguments.length)return n.slice();n=[];var r,o=i(e);try{for(o.s();!(r=o.n()).done;){let e=r.value;null==e||isNaN(e=+e)||n.push(e)}}catch(s){o.e(s)}finally{o.f()}return n.sort(t.ascending),a()},s.range=function(e){return arguments.length?(r=Array.from(e),a()):r.slice()},s.unknown=function(t){return arguments.length?(e=t,s):e},s.quantiles=function(){return o.slice()},s.copy=function(){return ee().domain(n).range(r).unknown(e)},u.apply(s,arguments)}function te(){var e,n=0,i=1,o=1,a=[.5],s=[0,1];function c(n){return n<=n?s[t.bisect(a,n,0,o)]:e}function l(){var e=-1;for(a=new Array(o);++e<o;)a[e]=((e+1)*i-(e-o)*n)/(o+1);return c}return c.domain=function(e){var t;return arguments.length?(t=r(e,2),n=t[0],i=t[1],n=+n,i=+i,l()):[n,i]},c.range=function(e){return arguments.length?(o=(s=Array.from(e)).length-1,l()):s.slice()},c.invertExtent=function(e){var t=s.indexOf(e);return t<0?[NaN,NaN]:t<1?[n,a[0]]:t>=o?[a[o-1],i]:[a[t-1],a[t]]},c.unknown=function(t){return arguments.length?(e=t,c):c},c.thresholds=function(){return a.slice()},c.copy=function(){return te().domain([n,i]).range(s).unknown(e)},u.apply(C(c),arguments)}function ne(){var e,n=[.5],r=[0,1],i=1;function o(o){return o<=o?r[t.bisect(n,o,0,i)]:e}return o.domain=function(e){return arguments.length?(n=Array.from(e),i=Math.min(n.length,r.length-1),o):n.slice()},o.range=function(e){return arguments.length?(r=Array.from(e),i=Math.min(n.length,r.length-1),o):r.slice()},o.invertExtent=function(e){var t=r.indexOf(e);return[n[t-1],n[t]]},o.unknown=function(t){return arguments.length?(e=t,o):e},o.copy=function(){return ne().domain(n).range(r).unknown(e)},u.apply(o,arguments)}var re=1e3,ie=60*re,oe=60*ie,ae=24*oe,se=7*ae,ue=30*ae,ce=365*ae;function le(e){return new Date(e)}function fe(e){return e instanceof Date?+e:+new Date(+e)}function de(e,n,r,i,o,a,s,u,c){var l=E(),f=l.invert,d=l.domain,h=c(".%L"),p=c(":%S"),g=c("%I:%M"),m=c("%I %p"),v=c("%a %d"),y=c("%b %d"),b=c("%B"),x=c("%Y"),w=[[s,1,re],[s,5,5*re],[s,15,15*re],[s,30,30*re],[a,1,ie],[a,5,5*ie],[a,15,15*ie],[a,30,30*ie],[o,1,oe],[o,3,3*oe],[o,6,6*oe],[o,12,12*oe],[i,1,ae],[i,2,2*ae],[r,1,se],[n,1,ue],[n,3,3*ue],[e,1,ce]];function _(t){return(s(t)<t?h:a(t)<t?p:o(t)<t?g:i(t)<t?m:n(t)<t?r(t)<t?v:y:e(t)<t?b:x)(t)}function k(n,r,i){if(null==n&&(n=10),"number"===typeof n){var o,a=Math.abs(i-r)/n,s=t.bisector((function(e){return e[2]})).right(w,a);return s===w.length?(o=t.tickStep(r/ce,i/ce,n),n=e):s?(o=(s=w[a/w[s-1][2]<w[s][2]/a?s-1:s])[1],n=s[0]):(o=Math.max(t.tickStep(r,i,n),1),n=u),n.every(o)}return n}return l.invert=function(e){return new Date(f(e))},l.domain=function(e){return arguments.length?d(Array.from(e,fe)):d().map(le)},l.ticks=function(e){var t,n=d(),r=n[0],i=n[n.length-1],o=i<r;return o&&(t=r,r=i,i=t),t=(t=k(e,r,i))?t.range(r,i+1):[],o?t.reverse():t},l.tickFormat=function(e,t){return null==t?_:c(t)},l.nice=function(e){var t=d();return(e=k(e,t[0],t[t.length-1]))?d(S(t,e)):l},l.copy=function(){return A(l,de(e,n,r,i,o,a,s,u,c))},l}function he(){return u.apply(de(a.timeYear,a.timeMonth,a.timeWeek,a.timeDay,a.timeHour,a.timeMinute,a.timeSecond,a.timeMillisecond,s.timeFormat).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function pe(){return u.apply(de(a.utcYear,a.utcMonth,a.utcWeek,a.utcDay,a.utcHour,a.utcMinute,a.utcSecond,a.utcMillisecond,s.utcFormat).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function ge(){var e,t,i,o,a,s=0,u=1,c=y,l=!1;function f(t){return isNaN(t=+t)?a:c(0===i?.5:(t=(o(t)-e)*i,l?Math.max(0,Math.min(1,t)):t))}function d(e){return function(t){var n,i,o;return arguments.length?(i=(n=r(t,2))[0],o=n[1],c=e(i,o),f):[c(0),c(1)]}}return f.domain=function(n){var a;return arguments.length?(a=r(n,2),s=a[0],u=a[1],e=o(s=+s),t=o(u=+u),i=e===t?0:1/(t-e),f):[s,u]},f.clamp=function(e){return arguments.length?(l=!!e,f):l},f.interpolator=function(e){return arguments.length?(c=e,f):c},f.range=d(n.interpolate),f.rangeRound=d(n.interpolateRound),f.unknown=function(e){return arguments.length?(a=e,f):a},function(n){return o=n,e=n(s),t=n(u),i=e===t?0:1/(t-e),f}}function me(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function ve(){var e=C(ge()(y));return e.copy=function(){return me(e,ve())},c.apply(e,arguments)}function ye(){var e=L(ge()).domain([1,10]);return e.copy=function(){return me(e,ye()).base(e.base())},c.apply(e,arguments)}function be(){var e=W(ge());return e.copy=function(){return me(e,be()).constant(e.constant())},c.apply(e,arguments)}function xe(){var e=$(ge());return e.copy=function(){return me(e,xe()).exponent(e.exponent())},c.apply(e,arguments)}function we(){return xe.apply(null,arguments).exponent(.5)}function _e(){var e=[],n=y;function r(r){if(!isNaN(r=+r))return n((t.bisect(e,r,1)-1)/(e.length-1))}return r.domain=function(n){if(!arguments.length)return e.slice();e=[];var o,a=i(n);try{for(a.s();!(o=a.n()).done;){let t=o.value;null==t||isNaN(t=+t)||e.push(t)}}catch(s){a.e(s)}finally{a.f()}return e.sort(t.ascending),r},r.interpolator=function(e){return arguments.length?(n=e,r):n},r.range=function(){return e.map(((t,r)=>n(r/(e.length-1))))},r.quantiles=function(n){return Array.from({length:n+1},((r,i)=>t.quantile(e,i/n)))},r.copy=function(){return _e(n).domain(e)},c.apply(r,arguments)}function Ae(){var e,t,i,o,a,s,u,c=0,l=.5,f=1,d=1,h=y,p=!1;function g(e){return isNaN(e=+e)?u:(e=.5+((e=+s(e))-t)*(d*e<d*t?o:a),h(p?Math.max(0,Math.min(1,e)):e))}function m(e){return function(t){var i,o,a,s;return arguments.length?(o=(i=r(t,3))[0],a=i[1],s=i[2],h=n.piecewise(e,[o,a,s]),g):[h(0),h(.5),h(1)]}}return g.domain=function(n){var u;return arguments.length?(u=r(n,3),c=u[0],l=u[1],f=u[2],e=s(c=+c),t=s(l=+l),i=s(f=+f),o=e===t?0:.5/(t-e),a=t===i?0:.5/(i-t),d=t<e?-1:1,g):[c,l,f]},g.clamp=function(e){return arguments.length?(p=!!e,g):p},g.interpolator=function(e){return arguments.length?(h=e,g):h},g.range=m(n.interpolate),g.rangeRound=m(n.interpolateRound),g.unknown=function(e){return arguments.length?(u=e,g):u},function(n){return s=n,e=n(c),t=n(l),i=n(f),o=e===t?0:.5/(t-e),a=t===i?0:.5/(i-t),d=t<e?-1:1,g}}function ke(){var e=C(Ae()(y));return e.copy=function(){return me(e,ke())},c.apply(e,arguments)}function Ee(){var e=L(Ae()).domain([.1,1,10]);return e.copy=function(){return me(e,Ee()).base(e.base())},c.apply(e,arguments)}function De(){var e=W(Ae());return e.copy=function(){return me(e,De()).constant(e.constant())},c.apply(e,arguments)}function Ce(){var e=$(Ae());return e.copy=function(){return me(e,Ce()).exponent(e.exponent())},c.apply(e,arguments)}function Me(){return Ce.apply(null,arguments).exponent(.5)}e.scaleBand=d,e.scaleDiverging=ke,e.scaleDivergingLog=Ee,e.scaleDivergingPow=Ce,e.scaleDivergingSqrt=Me,e.scaleDivergingSymlog=De,e.scaleIdentity=F,e.scaleImplicit=l,e.scaleLinear=M,e.scaleLog=I,e.scaleOrdinal=f,e.scalePoint=p,e.scalePow=X,e.scaleQuantile=ee,e.scaleQuantize=te,e.scaleRadial=K,e.scaleSequential=ve,e.scaleSequentialLog=ye,e.scaleSequentialPow=xe,e.scaleSequentialQuantile=_e,e.scaleSequentialSqrt=we,e.scaleSequentialSymlog=be,e.scaleSqrt=J,e.scaleSymlog=H,e.scaleThreshold=ne,e.scaleTime=he,e.scaleUtc=pe,e.tickFormat=D,Object.defineProperty(e,"__esModule",{value:!0})}(t,n(1190),n(1713),n(2338),n(1714),n(2339))},2337:function(e,t,n){!function(e){"use strict";function t(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function n(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function r(){}var i=.7,o=1/i,a="\\s*([+-]?\\d+)\\s*",s="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",u="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",c=/^#([0-9a-f]{3,8})$/,l=new RegExp("^rgb\\("+[a,a,a]+"\\)$"),f=new RegExp("^rgb\\("+[u,u,u]+"\\)$"),d=new RegExp("^rgba\\("+[a,a,a,s]+"\\)$"),h=new RegExp("^rgba\\("+[u,u,u,s]+"\\)$"),p=new RegExp("^hsl\\("+[s,u,u]+"\\)$"),g=new RegExp("^hsla\\("+[s,u,u,s]+"\\)$"),m={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function v(){return this.rgb().formatHex()}function y(){return S(this).formatHsl()}function b(){return this.rgb().formatRgb()}function x(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=c.exec(e))?(n=t[1].length,t=parseInt(t[1],16),6===n?w(t):3===n?new E(t>>8&15|t>>4&240,t>>4&15|240&t,(15&t)<<4|15&t,1):8===n?_(t>>24&255,t>>16&255,t>>8&255,(255&t)/255):4===n?_(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|240&t,((15&t)<<4|15&t)/255):null):(t=l.exec(e))?new E(t[1],t[2],t[3],1):(t=f.exec(e))?new E(255*t[1]/100,255*t[2]/100,255*t[3]/100,1):(t=d.exec(e))?_(t[1],t[2],t[3],t[4]):(t=h.exec(e))?_(255*t[1]/100,255*t[2]/100,255*t[3]/100,t[4]):(t=p.exec(e))?F(t[1],t[2]/100,t[3]/100,1):(t=g.exec(e))?F(t[1],t[2]/100,t[3]/100,t[4]):m.hasOwnProperty(e)?w(m[e]):"transparent"===e?new E(NaN,NaN,NaN,0):null}function w(e){return new E(e>>16&255,e>>8&255,255&e,1)}function _(e,t,n,r){return r<=0&&(e=t=n=NaN),new E(e,t,n,r)}function A(e){return e instanceof r||(e=x(e)),e?new E((e=e.rgb()).r,e.g,e.b,e.opacity):new E}function k(e,t,n,r){return 1===arguments.length?A(e):new E(e,t,n,null==r?1:r)}function E(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}function D(){return"#"+M(this.r)+M(this.g)+M(this.b)}function C(){var e=this.opacity;return(1===(e=isNaN(e)?1:Math.max(0,Math.min(1,e)))?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(1===e?")":", "+e+")")}function M(e){return((e=Math.max(0,Math.min(255,Math.round(e)||0)))<16?"0":"")+e.toString(16)}function F(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new O(e,t,n,r)}function S(e){if(e instanceof O)return new O(e.h,e.s,e.l,e.opacity);if(e instanceof r||(e=x(e)),!e)return new O;if(e instanceof O)return e;var t=(e=e.rgb()).r/255,n=e.g/255,i=e.b/255,o=Math.min(t,n,i),a=Math.max(t,n,i),s=NaN,u=a-o,c=(a+o)/2;return u?(s=t===a?(n-i)/u+6*(n<i):n===a?(i-t)/u+2:(t-n)/u+4,u/=c<.5?a+o:2-a-o,s*=60):u=c>0&&c<1?0:s,new O(s,u,c,e.opacity)}function T(e,t,n,r){return 1===arguments.length?S(e):new O(e,t,n,null==r?1:r)}function O(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}function N(e,t,n){return 255*(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)}t(r,x,{copy:function(e){return Object.assign(new this.constructor,this,e)},displayable:function(){return this.rgb().displayable()},hex:v,formatHex:v,formatHsl:y,formatRgb:b,toString:b}),t(E,k,n(r,{brighter:function(e){return e=null==e?o:Math.pow(o,e),new E(this.r*e,this.g*e,this.b*e,this.opacity)},darker:function(e){return e=null==e?i:Math.pow(i,e),new E(this.r*e,this.g*e,this.b*e,this.opacity)},rgb:function(){return this},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:D,formatHex:D,formatRgb:C,toString:C})),t(O,T,n(r,{brighter:function(e){return e=null==e?o:Math.pow(o,e),new O(this.h,this.s,this.l*e,this.opacity)},darker:function(e){return e=null==e?i:Math.pow(i,e),new O(this.h,this.s,this.l*e,this.opacity)},rgb:function(){var e=this.h%360+360*(this.h<0),t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,i=2*n-r;return new E(N(e>=240?e-240:e+120,i,r),N(e,i,r),N(e<120?e+240:e-120,i,r),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var e=this.opacity;return(1===(e=isNaN(e)?1:Math.max(0,Math.min(1,e)))?"hsl(":"hsla(")+(this.h||0)+", "+100*(this.s||0)+"%, "+100*(this.l||0)+"%"+(1===e?")":", "+e+")")}}));const P=Math.PI/180,R=180/Math.PI,B=18,z=.96422,j=1,L=.82521,I=4/29,U=6/29,q=3*U*U,W=U*U*U;function H(e){if(e instanceof G)return new G(e.l,e.a,e.b,e.opacity);if(e instanceof te)return ne(e);e instanceof E||(e=A(e));var t,n,r=Q(e.r),i=Q(e.g),o=Q(e.b),a=$((.2225045*r+.7168786*i+.0606169*o)/j);return r===i&&i===o?t=n=a:(t=$((.4360747*r+.3850649*i+.1430804*o)/z),n=$((.0139322*r+.0971045*i+.7141733*o)/L)),new G(116*a-16,500*(t-a),200*(a-n),e.opacity)}function Y(e,t){return new G(e,0,0,null==t?1:t)}function V(e,t,n,r){return 1===arguments.length?H(e):new G(e,t,n,null==r?1:r)}function G(e,t,n,r){this.l=+e,this.a=+t,this.b=+n,this.opacity=+r}function $(e){return e>W?Math.pow(e,1/3):e/q+I}function X(e){return e>U?e*e*e:q*(e-I)}function J(e){return 255*(e<=.0031308?12.92*e:1.055*Math.pow(e,1/2.4)-.055)}function Q(e){return(e/=255)<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)}function Z(e){if(e instanceof te)return new te(e.h,e.c,e.l,e.opacity);if(e instanceof G||(e=H(e)),0===e.a&&0===e.b)return new te(NaN,0<e.l&&e.l<100?0:NaN,e.l,e.opacity);var t=Math.atan2(e.b,e.a)*R;return new te(t<0?t+360:t,Math.sqrt(e.a*e.a+e.b*e.b),e.l,e.opacity)}function K(e,t,n,r){return 1===arguments.length?Z(e):new te(n,t,e,null==r?1:r)}function ee(e,t,n,r){return 1===arguments.length?Z(e):new te(e,t,n,null==r?1:r)}function te(e,t,n,r){this.h=+e,this.c=+t,this.l=+n,this.opacity=+r}function ne(e){if(isNaN(e.h))return new G(e.l,0,0,e.opacity);var t=e.h*P;return new G(e.l,Math.cos(t)*e.c,Math.sin(t)*e.c,e.opacity)}t(G,V,n(r,{brighter:function(e){return new G(this.l+B*(null==e?1:e),this.a,this.b,this.opacity)},darker:function(e){return new G(this.l-B*(null==e?1:e),this.a,this.b,this.opacity)},rgb:function(){var e=(this.l+16)/116,t=isNaN(this.a)?e:e+this.a/500,n=isNaN(this.b)?e:e-this.b/200;return new E(J(3.1338561*(t=z*X(t))-1.6168667*(e=j*X(e))-.4906146*(n=L*X(n))),J(-.9787684*t+1.9161415*e+.033454*n),J(.0719453*t-.2289914*e+1.4052427*n),this.opacity)}})),t(te,ee,n(r,{brighter:function(e){return new te(this.h,this.c,this.l+B*(null==e?1:e),this.opacity)},darker:function(e){return new te(this.h,this.c,this.l-B*(null==e?1:e),this.opacity)},rgb:function(){return ne(this).rgb()}}));var re=-.14861,ie=1.78277,oe=-.29227,ae=-.90649,se=1.97294,ue=se*ae,ce=se*ie,le=ie*oe-ae*re;function fe(e){if(e instanceof he)return new he(e.h,e.s,e.l,e.opacity);e instanceof E||(e=A(e));var t=e.r/255,n=e.g/255,r=e.b/255,i=(le*r+ue*t-ce*n)/(le+ue-ce),o=r-i,a=(se*(n-i)-oe*o)/ae,s=Math.sqrt(a*a+o*o)/(se*i*(1-i)),u=s?Math.atan2(a,o)*R-120:NaN;return new he(u<0?u+360:u,s,i,e.opacity)}function de(e,t,n,r){return 1===arguments.length?fe(e):new he(e,t,n,null==r?1:r)}function he(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}t(he,de,n(r,{brighter:function(e){return e=null==e?o:Math.pow(o,e),new he(this.h,this.s,this.l*e,this.opacity)},darker:function(e){return e=null==e?i:Math.pow(i,e),new he(this.h,this.s,this.l*e,this.opacity)},rgb:function(){var e=isNaN(this.h)?0:(this.h+120)*P,t=+this.l,n=isNaN(this.s)?0:this.s*t*(1-t),r=Math.cos(e),i=Math.sin(e);return new E(255*(t+n*(re*r+ie*i)),255*(t+n*(oe*r+ae*i)),255*(t+n*(se*r)),this.opacity)}})),e.color=x,e.cubehelix=de,e.gray=Y,e.hcl=ee,e.hsl=T,e.lab=V,e.lch=K,e.rgb=k,Object.defineProperty(e,"__esModule",{value:!0})}(t)},2338:function(e,t,n){!function(e){"use strict";function t(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function n(e,t){if((n=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var n,r=e.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+e.slice(n+1)]}function r(e){return(e=n(Math.abs(e)))?e[1]:NaN}function i(e,t){return function(n,r){for(var i=n.length,o=[],a=0,s=e[0],u=0;i>0&&s>0&&(u+s+1>r&&(s=Math.max(1,r-u)),o.push(n.substring(i-=s,i+s)),!((u+=s+1)>r));)s=e[a=(a+1)%e.length];return o.reverse().join(t)}}function o(e){return function(t){return t.replace(/[0-9]/g,(function(t){return e[+t]}))}}var a,s=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function u(e){if(!(t=s.exec(e)))throw new Error("invalid format: "+e);var t;return new c({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}function c(e){this.fill=void 0===e.fill?" ":e.fill+"",this.align=void 0===e.align?">":e.align+"",this.sign=void 0===e.sign?"-":e.sign+"",this.symbol=void 0===e.symbol?"":e.symbol+"",this.zero=!!e.zero,this.width=void 0===e.width?void 0:+e.width,this.comma=!!e.comma,this.precision=void 0===e.precision?void 0:+e.precision,this.trim=!!e.trim,this.type=void 0===e.type?"":e.type+""}function l(e){e:for(var t,n=e.length,r=1,i=-1;r<n;++r)switch(e[r]){case".":i=t=r;break;case"0":0===i&&(i=r),t=r;break;default:if(!+e[r])break e;i>0&&(i=0)}return i>0?e.slice(0,i)+e.slice(t+1):e}function f(e,t){var r=n(e,t);if(!r)return e+"";var i=r[0],o=r[1],s=o-(a=3*Math.max(-8,Math.min(8,Math.floor(o/3))))+1,u=i.length;return s===u?i:s>u?i+new Array(s-u+1).join("0"):s>0?i.slice(0,s)+"."+i.slice(s):"0."+new Array(1-s).join("0")+n(e,Math.max(0,t+s-1))[0]}function d(e,t){var r=n(e,t);if(!r)return e+"";var i=r[0],o=r[1];return o<0?"0."+new Array(-o).join("0")+i:i.length>o+1?i.slice(0,o+1)+"."+i.slice(o+1):i+new Array(o-i.length+2).join("0")}u.prototype=c.prototype,c.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(void 0===this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(void 0===this.precision?"":"."+Math.max(0,0|this.precision))+(this.trim?"~":"")+this.type};var h={"%":(e,t)=>(100*e).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:t,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>d(100*e,t),r:d,s:f,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function p(e){return e}var g,m=Array.prototype.map,v=["y","z","a","f","p","n","\xb5","m","","k","M","G","T","P","E","Z","Y"];function y(e){var t=void 0===e.grouping||void 0===e.thousands?p:i(m.call(e.grouping,Number),e.thousands+""),n=void 0===e.currency?"":e.currency[0]+"",s=void 0===e.currency?"":e.currency[1]+"",c=void 0===e.decimal?".":e.decimal+"",f=void 0===e.numerals?p:o(m.call(e.numerals,String)),d=void 0===e.percent?"%":e.percent+"",g=void 0===e.minus?"\u2212":e.minus+"",y=void 0===e.nan?"NaN":e.nan+"";function b(e){var r=(e=u(e)).fill,i=e.align,o=e.sign,p=e.symbol,m=e.zero,b=e.width,x=e.comma,w=e.precision,_=e.trim,A=e.type;"n"===A?(x=!0,A="g"):h[A]||(void 0===w&&(w=12),_=!0,A="g"),(m||"0"===r&&"="===i)&&(m=!0,r="0",i="=");var k="$"===p?n:"#"===p&&/[boxX]/.test(A)?"0"+A.toLowerCase():"",E="$"===p?s:/[%p]/.test(A)?d:"",D=h[A],C=/[defgprs%]/.test(A);function M(e){var n,s,u,d=k,h=E;if("c"===A)h=D(e)+h,e="";else{var p=(e=+e)<0||1/e<0;if(e=isNaN(e)?y:D(Math.abs(e),w),_&&(e=l(e)),p&&0===+e&&"+"!==o&&(p=!1),d=(p?"("===o?o:g:"-"===o||"("===o?"":o)+d,h=("s"===A?v[8+a/3]:"")+h+(p&&"("===o?")":""),C)for(n=-1,s=e.length;++n<s;)if(48>(u=e.charCodeAt(n))||u>57){h=(46===u?c+e.slice(n+1):e.slice(n))+h,e=e.slice(0,n);break}}x&&!m&&(e=t(e,1/0));var M=d.length+e.length+h.length,F=M<b?new Array(b-M+1).join(r):"";switch(x&&m&&(e=t(F+e,F.length?b-h.length:1/0),F=""),i){case"<":e=d+e+h+F;break;case"=":e=d+F+e+h;break;case"^":e=F.slice(0,M=F.length>>1)+d+e+h+F.slice(M);break;default:e=F+d+e+h}return f(e)}return w=void 0===w?6:/[gprs]/.test(A)?Math.max(1,Math.min(21,w)):Math.max(0,Math.min(20,w)),M.toString=function(){return e+""},M}function x(e,t){var n=b(((e=u(e)).type="f",e)),i=3*Math.max(-8,Math.min(8,Math.floor(r(t)/3))),o=Math.pow(10,-i),a=v[8+i/3];return function(e){return n(o*e)+a}}return{format:b,formatPrefix:x}}function b(t){return g=y(t),e.format=g.format,e.formatPrefix=g.formatPrefix,g}function x(e){return Math.max(0,-r(Math.abs(e)))}function w(e,t){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor(r(t)/3)))-r(Math.abs(e)))}function _(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,r(t)-r(e))+1}b({thousands:",",grouping:[3],currency:["$",""]}),e.FormatSpecifier=c,e.formatDefaultLocale=b,e.formatLocale=y,e.formatSpecifier=u,e.precisionFixed=x,e.precisionPrefix=w,e.precisionRound=_,Object.defineProperty(e,"__esModule",{value:!0})}(t)},2339:function(e,t,n){!function(e,t){"use strict";function n(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function r(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function i(e,t,n){return{y:e,m:t,d:n,H:0,M:0,S:0,L:0}}function o(e){var o=e.dateTime,a=e.date,u=e.time,c=e.periods,l=e.days,f=e.shortDays,d=e.months,V=e.shortMonths,de=h(c),ke=p(c),Ee=h(l),De=p(l),Ce=h(f),Me=p(f),Fe=h(d),Se=p(d),Te=h(V),Oe=p(V),Ne={a:Ge,A:$e,b:Xe,B:Je,c:null,d:R,e:R,f:I,g:Q,G:K,H:B,I:z,j:j,L:L,m:U,M:q,p:Qe,q:Ze,Q:_e,s:Ae,S:W,u:H,U:Y,V:G,w:$,W:X,x:null,X:null,y:J,Y:Z,Z:ee,"%":we},Pe={a:Ke,A:et,b:tt,B:nt,c:null,d:te,e:te,f:ae,g:ve,G:be,H:ne,I:re,j:ie,L:oe,m:se,M:ue,p:rt,q:it,Q:_e,s:Ae,S:ce,u:le,U:fe,V:he,w:pe,W:ge,x:null,X:null,y:me,Y:ye,Z:xe,"%":we},Re={a:Ie,A:Ue,b:qe,B:We,c:He,d:E,e:E,f:T,g:w,G:x,H:C,I:C,j:D,L:S,m:k,M:M,p:Le,q:A,Q:N,s:P,S:F,u:m,U:v,V:y,w:g,W:b,x:Ye,X:Ve,y:w,Y:x,Z:_,"%":O};function Be(e,t){return function(n){var r,i,o,a=[],u=-1,c=0,l=e.length;for(n instanceof Date||(n=new Date(+n));++u<l;)37===e.charCodeAt(u)&&(a.push(e.slice(c,u)),null!=(i=s[r=e.charAt(++u)])?r=e.charAt(++u):i="e"===r?" ":"0",(o=t[r])&&(r=o(n,i)),a.push(r),c=u+1);return a.push(e.slice(c,u)),a.join("")}}function ze(e,o){return function(a){var s,u,c=i(1900,void 0,1);if(je(c,e,a+="",0)!=a.length)return null;if("Q"in c)return new Date(c.Q);if("s"in c)return new Date(1e3*c.s+("L"in c?c.L:0));if(o&&!("Z"in c)&&(c.Z=0),"p"in c&&(c.H=c.H%12+12*c.p),void 0===c.m&&(c.m="q"in c?c.q:0),"V"in c){if(c.V<1||c.V>53)return null;"w"in c||(c.w=1),"Z"in c?(u=(s=r(i(c.y,0,1))).getUTCDay(),s=u>4||0===u?t.utcMonday.ceil(s):t.utcMonday(s),s=t.utcDay.offset(s,7*(c.V-1)),c.y=s.getUTCFullYear(),c.m=s.getUTCMonth(),c.d=s.getUTCDate()+(c.w+6)%7):(u=(s=n(i(c.y,0,1))).getDay(),s=u>4||0===u?t.timeMonday.ceil(s):t.timeMonday(s),s=t.timeDay.offset(s,7*(c.V-1)),c.y=s.getFullYear(),c.m=s.getMonth(),c.d=s.getDate()+(c.w+6)%7)}else("W"in c||"U"in c)&&("w"in c||(c.w="u"in c?c.u%7:"W"in c?1:0),u="Z"in c?r(i(c.y,0,1)).getUTCDay():n(i(c.y,0,1)).getDay(),c.m=0,c.d="W"in c?(c.w+6)%7+7*c.W-(u+5)%7:c.w+7*c.U-(u+6)%7);return"Z"in c?(c.H+=c.Z/100|0,c.M+=c.Z%100,r(c)):n(c)}}function je(e,t,n,r){for(var i,o,a=0,u=t.length,c=n.length;a<u;){if(r>=c)return-1;if(37===(i=t.charCodeAt(a++))){if(i=t.charAt(a++),!(o=Re[i in s?t.charAt(a++):i])||(r=o(e,n,r))<0)return-1}else if(i!=n.charCodeAt(r++))return-1}return r}function Le(e,t,n){var r=de.exec(t.slice(n));return r?(e.p=ke.get(r[0].toLowerCase()),n+r[0].length):-1}function Ie(e,t,n){var r=Ce.exec(t.slice(n));return r?(e.w=Me.get(r[0].toLowerCase()),n+r[0].length):-1}function Ue(e,t,n){var r=Ee.exec(t.slice(n));return r?(e.w=De.get(r[0].toLowerCase()),n+r[0].length):-1}function qe(e,t,n){var r=Te.exec(t.slice(n));return r?(e.m=Oe.get(r[0].toLowerCase()),n+r[0].length):-1}function We(e,t,n){var r=Fe.exec(t.slice(n));return r?(e.m=Se.get(r[0].toLowerCase()),n+r[0].length):-1}function He(e,t,n){return je(e,o,t,n)}function Ye(e,t,n){return je(e,a,t,n)}function Ve(e,t,n){return je(e,u,t,n)}function Ge(e){return f[e.getDay()]}function $e(e){return l[e.getDay()]}function Xe(e){return V[e.getMonth()]}function Je(e){return d[e.getMonth()]}function Qe(e){return c[+(e.getHours()>=12)]}function Ze(e){return 1+~~(e.getMonth()/3)}function Ke(e){return f[e.getUTCDay()]}function et(e){return l[e.getUTCDay()]}function tt(e){return V[e.getUTCMonth()]}function nt(e){return d[e.getUTCMonth()]}function rt(e){return c[+(e.getUTCHours()>=12)]}function it(e){return 1+~~(e.getUTCMonth()/3)}return Ne.x=Be(a,Ne),Ne.X=Be(u,Ne),Ne.c=Be(o,Ne),Pe.x=Be(a,Pe),Pe.X=Be(u,Pe),Pe.c=Be(o,Pe),{format:function(e){var t=Be(e+="",Ne);return t.toString=function(){return e},t},parse:function(e){var t=ze(e+="",!1);return t.toString=function(){return e},t},utcFormat:function(e){var t=Be(e+="",Pe);return t.toString=function(){return e},t},utcParse:function(e){var t=ze(e+="",!0);return t.toString=function(){return e},t}}}var a,s={"-":"",_:" ",0:"0"},u=/^\s*\d+/,c=/^%/,l=/[\\^$*+?|[\]().{}]/g;function f(e,t,n){var r=e<0?"-":"",i=(r?-e:e)+"",o=i.length;return r+(o<n?new Array(n-o+1).join(t)+i:i)}function d(e){return e.replace(l,"\\$&")}function h(e){return new RegExp("^(?:"+e.map(d).join("|")+")","i")}function p(e){return new Map(e.map(((e,t)=>[e.toLowerCase(),t])))}function g(e,t,n){var r=u.exec(t.slice(n,n+1));return r?(e.w=+r[0],n+r[0].length):-1}function m(e,t,n){var r=u.exec(t.slice(n,n+1));return r?(e.u=+r[0],n+r[0].length):-1}function v(e,t,n){var r=u.exec(t.slice(n,n+2));return r?(e.U=+r[0],n+r[0].length):-1}function y(e,t,n){var r=u.exec(t.slice(n,n+2));return r?(e.V=+r[0],n+r[0].length):-1}function b(e,t,n){var r=u.exec(t.slice(n,n+2));return r?(e.W=+r[0],n+r[0].length):-1}function x(e,t,n){var r=u.exec(t.slice(n,n+4));return r?(e.y=+r[0],n+r[0].length):-1}function w(e,t,n){var r=u.exec(t.slice(n,n+2));return r?(e.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function _(e,t,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(n,n+6));return r?(e.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function A(e,t,n){var r=u.exec(t.slice(n,n+1));return r?(e.q=3*r[0]-3,n+r[0].length):-1}function k(e,t,n){var r=u.exec(t.slice(n,n+2));return r?(e.m=r[0]-1,n+r[0].length):-1}function E(e,t,n){var r=u.exec(t.slice(n,n+2));return r?(e.d=+r[0],n+r[0].length):-1}function D(e,t,n){var r=u.exec(t.slice(n,n+3));return r?(e.m=0,e.d=+r[0],n+r[0].length):-1}function C(e,t,n){var r=u.exec(t.slice(n,n+2));return r?(e.H=+r[0],n+r[0].length):-1}function M(e,t,n){var r=u.exec(t.slice(n,n+2));return r?(e.M=+r[0],n+r[0].length):-1}function F(e,t,n){var r=u.exec(t.slice(n,n+2));return r?(e.S=+r[0],n+r[0].length):-1}function S(e,t,n){var r=u.exec(t.slice(n,n+3));return r?(e.L=+r[0],n+r[0].length):-1}function T(e,t,n){var r=u.exec(t.slice(n,n+6));return r?(e.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function O(e,t,n){var r=c.exec(t.slice(n,n+1));return r?n+r[0].length:-1}function N(e,t,n){var r=u.exec(t.slice(n));return r?(e.Q=+r[0],n+r[0].length):-1}function P(e,t,n){var r=u.exec(t.slice(n));return r?(e.s=+r[0],n+r[0].length):-1}function R(e,t){return f(e.getDate(),t,2)}function B(e,t){return f(e.getHours(),t,2)}function z(e,t){return f(e.getHours()%12||12,t,2)}function j(e,n){return f(1+t.timeDay.count(t.timeYear(e),e),n,3)}function L(e,t){return f(e.getMilliseconds(),t,3)}function I(e,t){return L(e,t)+"000"}function U(e,t){return f(e.getMonth()+1,t,2)}function q(e,t){return f(e.getMinutes(),t,2)}function W(e,t){return f(e.getSeconds(),t,2)}function H(e){var t=e.getDay();return 0===t?7:t}function Y(e,n){return f(t.timeSunday.count(t.timeYear(e)-1,e),n,2)}function V(e){var n=e.getDay();return n>=4||0===n?t.timeThursday(e):t.timeThursday.ceil(e)}function G(e,n){return e=V(e),f(t.timeThursday.count(t.timeYear(e),e)+(4===t.timeYear(e).getDay()),n,2)}function $(e){return e.getDay()}function X(e,n){return f(t.timeMonday.count(t.timeYear(e)-1,e),n,2)}function J(e,t){return f(e.getFullYear()%100,t,2)}function Q(e,t){return f((e=V(e)).getFullYear()%100,t,2)}function Z(e,t){return f(e.getFullYear()%1e4,t,4)}function K(e,n){var r=e.getDay();return f((e=r>=4||0===r?t.timeThursday(e):t.timeThursday.ceil(e)).getFullYear()%1e4,n,4)}function ee(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+f(t/60|0,"0",2)+f(t%60,"0",2)}function te(e,t){return f(e.getUTCDate(),t,2)}function ne(e,t){return f(e.getUTCHours(),t,2)}function re(e,t){return f(e.getUTCHours()%12||12,t,2)}function ie(e,n){return f(1+t.utcDay.count(t.utcYear(e),e),n,3)}function oe(e,t){return f(e.getUTCMilliseconds(),t,3)}function ae(e,t){return oe(e,t)+"000"}function se(e,t){return f(e.getUTCMonth()+1,t,2)}function ue(e,t){return f(e.getUTCMinutes(),t,2)}function ce(e,t){return f(e.getUTCSeconds(),t,2)}function le(e){var t=e.getUTCDay();return 0===t?7:t}function fe(e,n){return f(t.utcSunday.count(t.utcYear(e)-1,e),n,2)}function de(e){var n=e.getUTCDay();return n>=4||0===n?t.utcThursday(e):t.utcThursday.ceil(e)}function he(e,n){return e=de(e),f(t.utcThursday.count(t.utcYear(e),e)+(4===t.utcYear(e).getUTCDay()),n,2)}function pe(e){return e.getUTCDay()}function ge(e,n){return f(t.utcMonday.count(t.utcYear(e)-1,e),n,2)}function me(e,t){return f(e.getUTCFullYear()%100,t,2)}function ve(e,t){return f((e=de(e)).getUTCFullYear()%100,t,2)}function ye(e,t){return f(e.getUTCFullYear()%1e4,t,4)}function be(e,n){var r=e.getUTCDay();return f((e=r>=4||0===r?t.utcThursday(e):t.utcThursday.ceil(e)).getUTCFullYear()%1e4,n,4)}function xe(){return"+0000"}function we(){return"%"}function _e(e){return+e}function Ae(e){return Math.floor(+e/1e3)}function ke(t){return a=o(t),e.timeFormat=a.format,e.timeParse=a.parse,e.utcFormat=a.utcFormat,e.utcParse=a.utcParse,a}ke({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});var Ee="%Y-%m-%dT%H:%M:%S.%LZ";function De(e){return e.toISOString()}var Ce=Date.prototype.toISOString?De:e.utcFormat(Ee);function Me(e){var t=new Date(e);return isNaN(t)?null:t}var Fe=+new Date("2000-01-01T00:00:00.000Z")?Me:e.utcParse(Ee);e.isoFormat=Ce,e.isoParse=Fe,e.timeFormatDefaultLocale=ke,e.timeFormatLocale=o,Object.defineProperty(e,"__esModule",{value:!0})}(t,n(1714))},2340:function(e,t,n){!function(e,t,n,r,i,o){"use strict";function a(e){t.Transform.call(this,null,e)}function s(e){t.Transform.call(this,null,e)}function u(){return t.ingest({})}function c(e){const t=r.fastmap().test((e=>e.exit));return t.lookup=n=>t.get(e(n)),t}function l(e){t.Transform.call(this,null,e)}function f(e){t.Transform.call(this,[],e)}r.inherits(a,t.Transform,{transform(e,r){if(this.value&&!e.modified())return r.StopPropagation;var i=r.dataflow.locale(),o=r.fork(r.NO_SOURCE|r.NO_FIELDS),a=this.value,s=e.scale,u=null==e.count?e.values?e.values.length:10:e.count,c=n.tickCount(s,u,e.minstep),l=e.format||n.tickFormat(i,s,c,e.formatSpecifier,e.formatType,!!e.values),f=e.values?n.validTicks(s,e.values,c):n.tickValues(s,c);return a&&(o.rem=a),a=f.map(((e,n)=>t.ingest({index:n/(f.length-1||1),value:e,label:l(e)}))),e.extra&&a.length&&a.push(t.ingest({index:-1,extra:{value:a[0].value},label:""})),o.source=a,o.add=a,this.value=a,o}}),r.inherits(s,t.Transform,{transform(e,n){var i=n.dataflow,o=n.fork(n.NO_SOURCE|n.NO_FIELDS),a=e.item||u,s=e.key||t.tupleid,l=this.value;return r.isArray(o.encode)&&(o.encode=null),l&&(e.modified("key")||n.modified(s))&&r.error("DataJoin does not support modified key function or fields."),l||(n=n.addAll(),this.value=l=c(s)),n.visit(n.ADD,(e=>{const t=s(e);let n=l.get(t);n?n.exit?(l.empty--,o.add.push(n)):o.mod.push(n):(n=a(e),l.set(t,n),o.add.push(n)),n.datum=e,n.exit=!1})),n.visit(n.MOD,(e=>{const t=s(e),n=l.get(t);n&&(n.datum=e,o.mod.push(n))})),n.visit(n.REM,(e=>{const t=s(e),n=l.get(t);e!==n.datum||n.exit||(o.rem.push(n),n.exit=!0,++l.empty)})),n.changed(n.ADD_MOD)&&o.modifies("datum"),(n.clean()||e.clean&&l.empty>i.cleanThreshold)&&i.runAfter(l.clean),o}}),r.inherits(l,t.Transform,{transform(e,t){var n=t.fork(t.ADD_REM),i=e.mod||!1,o=e.encoders,a=t.encode;if(r.isArray(a)){if(!n.changed()&&!a.every((e=>o[e])))return t.StopPropagation;a=a[0],n.encode=null}var s="enter"===a,u=o.update||r.falsy,c=o.enter||r.falsy,l=o.exit||r.falsy,f=(a&&!s?o[a]:u)||r.falsy;if(t.changed(t.ADD)&&(t.visit(t.ADD,(t=>{c(t,e),u(t,e)})),n.modifies(c.output),n.modifies(u.output),f!==r.falsy&&f!==u&&(t.visit(t.ADD,(t=>{f(t,e)})),n.modifies(f.output))),t.changed(t.REM)&&l!==r.falsy&&(t.visit(t.REM,(t=>{l(t,e)})),n.modifies(l.output)),s||f!==r.falsy){const r=t.MOD|(e.modified()?t.REFLOW:0);s?(t.visit(r,(t=>{const r=c(t,e)||i;(f(t,e)||r)&&n.mod.push(t)})),n.mod.length&&n.modifies(c.output)):t.visit(r,(t=>{(f(t,e)||i)&&n.mod.push(t)})),n.mod.length&&n.modifies(f.output)}return n.changed()?n:t.StopPropagation}}),r.inherits(f,t.Transform,{transform(e,i){if(null!=this.value&&!e.modified())return i.StopPropagation;var o,a,s,u,c,l=i.dataflow.locale(),f=i.fork(i.NO_SOURCE|i.NO_FIELDS),d=this.value,h=e.type||n.SymbolLegend,p=e.scale,g=+e.limit,m=n.tickCount(p,null==e.count?5:e.count,e.minstep),v=!!e.values||h===n.SymbolLegend,y=e.format||n.labelFormat(l,p,m,h,e.formatSpecifier,e.formatType,v),b=e.values||n.labelValues(p,m);return d&&(f.rem=d),h===n.SymbolLegend?(g&&b.length>g?(i.dataflow.warn("Symbol legend count exceeds limit, filtering items."),d=b.slice(0,g-1),c=!0):d=b,r.isFunction(s=e.size)?(e.values||0!==p(d[0])||(d=d.slice(1)),u=d.reduce(((t,n)=>Math.max(t,s(n,e))),0)):s=r.constant(u=s||8),d=d.map(((n,r)=>t.ingest({index:r,label:y(n,r,d),value:n,offset:u,size:s(n,e)}))),c&&(c=b[d.length],d.push(t.ingest({index:d.length,label:"\u2026".concat(b.length-d.length," entries"),value:c,offset:u,size:s(c,e)})))):h===n.GradientLegend?(o=p.domain(),a=n.scaleFraction(p,o[0],r.peek(o)),b.length<3&&!e.values&&o[0]!==r.peek(o)&&(b=[o[0],r.peek(o)]),d=b.map(((e,n)=>t.ingest({index:n,label:y(e,n,b),value:e,perc:a(e)})))):(s=b.length-1,a=n.labelFraction(p),d=b.map(((e,n)=>t.ingest({index:n,label:y(e,n,b),value:e,perc:n?a(e):0,perc2:n===s?1:a(b[n+1])})))),f.source=d,f.add=d,this.value=d,f}});const d=e=>e.source.x,h=e=>e.source.y,p=e=>e.target.x,g=e=>e.target.y;function m(e){t.Transform.call(this,{},e)}m.Definition={type:"LinkPath",metadata:{modifies:!0},params:[{name:"sourceX",type:"field",default:"source.x"},{name:"sourceY",type:"field",default:"source.y"},{name:"targetX",type:"field",default:"target.x"},{name:"targetY",type:"field",default:"target.y"},{name:"orient",type:"enum",default:"vertical",values:["horizontal","vertical","radial"]},{name:"shape",type:"enum",default:"line",values:["line","arc","curve","diagonal","orthogonal"]},{name:"require",type:"signal"},{name:"as",type:"string",default:"path"}]},r.inherits(m,t.Transform,{transform(e,t){var n=e.sourceX||d,i=e.sourceY||h,o=e.targetX||p,a=e.targetY||g,s=e.as||"path",u=e.orient||"vertical",c=e.shape||"line",l=F.get(c+"-"+u)||F.get(c);return l||r.error("LinkPath unsupported type: "+e.shape+(e.orient?"-"+e.orient:"")),t.visit(t.SOURCE,(e=>{e[s]=l(n(e),i(e),o(e),a(e))})),t.reflow(e.modified()).modifies(s)}});const v=(e,t,n,r)=>"M"+e+","+t+"L"+n+","+r,y=(e,t,n,r)=>v(t*Math.cos(e),t*Math.sin(e),r*Math.cos(n),r*Math.sin(n)),b=(e,t,n,r)=>{var i=n-e,o=r-t,a=Math.sqrt(i*i+o*o)/2;return"M"+e+","+t+"A"+a+","+a+" "+180*Math.atan2(o,i)/Math.PI+" 0 1 "+n+","+r},x=(e,t,n,r)=>b(t*Math.cos(e),t*Math.sin(e),r*Math.cos(n),r*Math.sin(n)),w=(e,t,n,r)=>{const i=n-e,o=r-t,a=.2*(i+o),s=.2*(o-i);return"M"+e+","+t+"C"+(e+a)+","+(t+s)+" "+(n+s)+","+(r-a)+" "+n+","+r},_=(e,t,n,r)=>w(t*Math.cos(e),t*Math.sin(e),r*Math.cos(n),r*Math.sin(n)),A=(e,t,n,r)=>"M"+e+","+t+"V"+r+"H"+n,k=(e,t,n,r)=>"M"+e+","+t+"H"+n+"V"+r,E=(e,t,n,r)=>{const i=Math.cos(e),o=Math.sin(e),a=Math.cos(n),s=Math.sin(n);return"M"+t*i+","+t*o+"A"+t+","+t+" 0 0,"+((Math.abs(n-e)>Math.PI?n<=e:n>e)?1:0)+" "+t*a+","+t*s+"L"+r*a+","+r*s},D=(e,t,n,r)=>{const i=(e+n)/2;return"M"+e+","+t+"C"+i+","+t+" "+i+","+r+" "+n+","+r},C=(e,t,n,r)=>{const i=(t+r)/2;return"M"+e+","+t+"C"+e+","+i+" "+n+","+i+" "+n+","+r},M=(e,t,n,r)=>{const i=Math.cos(e),o=Math.sin(e),a=Math.cos(n),s=Math.sin(n),u=(t+r)/2;return"M"+t*i+","+t*o+"C"+u*i+","+u*o+" "+u*a+","+u*s+" "+r*a+","+r*s},F=r.fastmap({line:v,"line-radial":y,arc:b,"arc-radial":x,curve:w,"curve-radial":_,"orthogonal-horizontal":A,"orthogonal-vertical":k,"orthogonal-radial":E,"diagonal-horizontal":D,"diagonal-vertical":C,"diagonal-radial":M});function S(e){t.Transform.call(this,null,e)}S.Definition={type:"Pie",metadata:{modifies:!0},params:[{name:"field",type:"field"},{name:"startAngle",type:"number",default:0},{name:"endAngle",type:"number",default:6.283185307179586},{name:"sort",type:"boolean",default:!1},{name:"as",type:"string",array:!0,length:2,default:["startAngle","endAngle"]}]},r.inherits(S,t.Transform,{transform(e,t){var n,o,a,s=e.as||["startAngle","endAngle"],u=s[0],c=s[1],l=e.field||r.one,f=e.startAngle||0,d=null!=e.endAngle?e.endAngle:2*Math.PI,h=t.source,p=h.map(l),g=p.length,m=f,v=(d-f)/i.sum(p),y=i.range(g);for(e.sort&&y.sort(((e,t)=>p[e]-p[t])),n=0;n<g;++n)a=p[y[n]],(o=h[y[n]])[u]=m,o[c]=m+=a*v;return this.value=p,t.reflow(e.modified()).modifies(s)}});const T=5;function O(e){const t=e.type;return!e.bins&&(t===n.Linear||t===n.Pow||t===n.Sqrt)}function N(e){return n.isContinuous(e)&&e!==n.Sequential}const P=r.toSet(["set","modified","clear","type","scheme","schemeExtent","schemeCount","domain","domainMin","domainMid","domainMax","domainRaw","domainImplicit","nice","zero","bins","range","rangeStep","round","reverse","interpolate","interpolateGamma"]);function R(e){t.Transform.call(this,null,e),this.modified(!0)}function B(e){var t,r=e.type,i="";return r===n.Sequential?n.Sequential+"-"+n.Linear:(z(e)&&(i=2===(t=e.rawDomain?e.rawDomain.length:e.domain?e.domain.length+ +(null!=e.domainMid):0)?n.Sequential+"-":3===t?n.Diverging+"-":""),(i+r||n.Linear).toLowerCase())}function z(e){const t=e.type;return n.isContinuous(t)&&t!==n.Time&&t!==n.UTC&&(e.scheme||e.range&&e.range.length&&e.range.every(r.isString))}function j(e,t,i){const o=L(e,t.domainRaw,i);if(o>-1)return o;var a,s,u=t.domain,c=e.type,l=t.zero||void 0===t.zero&&O(e);if(!u)return 0;if(N(c)&&t.padding&&u[0]!==r.peek(u)&&(u=I(c,u,t.range,t.padding,t.exponent,t.constant)),(l||null!=t.domainMin||null!=t.domainMax||null!=t.domainMid)&&(a=(u=u.slice()).length-1||1,l&&(u[0]>0&&(u[0]=0),u[a]<0&&(u[a]=0)),null!=t.domainMin&&(u[0]=t.domainMin),null!=t.domainMax&&(u[a]=t.domainMax),null!=t.domainMid)){const e=(s=t.domainMid)>u[a]?a+1:s<u[0]?0:a;e!==a&&i.warn("Scale domainMid exceeds domain min or max.",s),u.splice(e,0,s)}return e.domain(U(c,u,i)),c===n.Ordinal&&e.unknown(t.domainImplicit?n.scaleImplicit:void 0),t.nice&&e.nice&&e.nice(!0!==t.nice&&n.tickCount(e,t.nice)||null),u.length}function L(e,t,n){return t?(e.domain(U(e.type,t,n)),t.length):-1}function I(e,t,i,o,a,s){var u=Math.abs(r.peek(i)-i[0]),c=u/(u-2*o),l=e===n.Log?r.zoomLog(t,null,c):e===n.Sqrt?r.zoomPow(t,null,c,.5):e===n.Pow?r.zoomPow(t,null,c,a||1):e===n.Symlog?r.zoomSymlog(t,null,c,s||1):r.zoomLinear(t,null,c);return(t=t.slice())[0]=l[0],t[t.length-1]=l[1],t}function U(e,t,i){return n.isLogarithmic(e)&&Math.abs(t.reduce(((e,t)=>e+(t<0?-1:t>0?1:0)),0))!==t.length&&i.warn("Log scale domain includes zero: "+r.stringValue(t)),t}function q(e,t,o){let a=t.bins;if(a&&!r.isArray(a)){const t=e.domain(),n=t[0],o=r.peek(t),s=a.step;let u=null==a.start?n:a.start,c=null==a.stop?o:a.stop;s||r.error("Scale bins parameter missing step property."),u<n&&(u=s*Math.ceil(n/s)),c>o&&(c=s*Math.floor(o/s)),a=i.range(u,c+s/2,s)}return a?e.bins=a:e.bins&&delete e.bins,e.type===n.BinOrdinal&&(a?t.domain||t.domainRaw||(e.domain(a),o=a.length):e.bins=e.domain()),o}function W(e,t,i){var a=e.type,s=t.round||!1,u=t.range;if(null!=t.rangeStep)u=H(a,t,i);else if(t.scheme&&(u=Y(a,t,i),r.isFunction(u))){if(e.interpolator)return e.interpolator(u);r.error("Scale type ".concat(a," does not support interpolating color schemes."))}if(u&&n.isInterpolating(a))return e.interpolator(n.interpolateColors(G(u,t.reverse),t.interpolate,t.interpolateGamma));u&&t.interpolate&&e.interpolate?e.interpolate(n.interpolate(t.interpolate,t.interpolateGamma)):r.isFunction(e.round)?e.round(s):r.isFunction(e.rangeRound)&&e.interpolate(s?o.interpolateRound:o.interpolate),u&&e.range(G(u,t.reverse))}function H(e,t,i){e!==n.Band&&e!==n.Point&&r.error("Only band and point scales support rangeStep.");var o=(null!=t.paddingOuter?t.paddingOuter:t.padding)||0,a=e===n.Point?1:(null!=t.paddingInner?t.paddingInner:t.padding)||0;return[0,t.rangeStep*n.bandSpace(i,a,o)]}function Y(e,t,i){var o,a,s=t.schemeExtent;return r.isArray(t.scheme)?a=n.interpolateColors(t.scheme,t.interpolate,t.interpolateGamma):(o=t.scheme.toLowerCase(),(a=n.scheme(o))||r.error("Unrecognized scheme name: ".concat(t.scheme))),i=e===n.Threshold?i+1:e===n.BinOrdinal?i-1:e===n.Quantile||e===n.Quantize?+t.schemeCount||T:i,n.isInterpolating(e)?V(a,s,t.reverse):r.isFunction(a)?n.quantizeInterpolator(V(a,s),i):e===n.Ordinal?a:a.slice(0,i)}function V(e,t,i){return r.isFunction(e)&&(t||i)?n.interpolateRange(e,G(t||[0,1],i)):e}function G(e,t){return t?e.slice().reverse():e}function $(e){t.Transform.call(this,null,e)}r.inherits(R,t.Transform,{transform(e,t){var i=t.dataflow,o=this.value,a=B(e);for(a in o&&a===o.type||(this.value=o=n.scale(a)()),e)if(!P[a]){if("padding"===a&&N(o.type))continue;r.isFunction(o[a])?o[a](e[a]):i.warn("Unsupported scale property: "+a)}return W(o,e,q(o,e,j(o,e,i))),t.fork(t.NO_SOURCE|t.NO_FIELDS)}}),r.inherits($,t.Transform,{transform(e,n){const r=e.modified("sort")||n.changed(n.ADD)||n.modified(e.sort.fields)||n.modified("datum");return r&&n.source.sort(t.stableCompare(e.sort)),this.modified(r),n}});const X="zero",J="center",Q="normalize",Z=["y0","y1"];function K(e){t.Transform.call(this,null,e)}function ee(e,t,n,r,i){for(var o,a=(t-e.sum)/2,s=e.length,u=0;u<s;++u)(o=e[u])[r]=a,o[i]=a+=Math.abs(n(o))}function te(e,t,n,r,i){for(var o,a=1/e.sum,s=0,u=e.length,c=0,l=0;c<u;++c)(o=e[c])[r]=s,o[i]=s=a*(l+=Math.abs(n(o)))}function ne(e,t,n,r,i){for(var o,a,s=0,u=0,c=e.length,l=0;l<c;++l)(o=+n(a=e[l]))<0?(a[r]=u,a[i]=u+=o):(a[r]=s,a[i]=s+=o)}function re(e,t,n,r){var i,o,a,s,u,c,l,f,d,h=[],p=e=>e(u);if(null==t)h.push(e.slice());else for(i={},o=0,a=e.length;o<a;++o)u=e[o],(l=i[c=t.map(p)])||(i[c]=l=[],h.push(l)),l.push(u);for(c=0,d=0,s=h.length;c<s;++c){for(o=0,f=0,a=(l=h[c]).length;o<a;++o)f+=Math.abs(r(l[o]));l.sum=f,f>d&&(d=f),n&&l.sort(n)}return h.max=d,h}K.Definition={type:"Stack",metadata:{modifies:!0},params:[{name:"field",type:"field"},{name:"groupby",type:"field",array:!0},{name:"sort",type:"compare"},{name:"offset",type:"enum",default:X,values:[X,J,Q]},{name:"as",type:"string",array:!0,length:2,default:Z}]},r.inherits(K,t.Transform,{transform(e,n){var i,o,a,s,u=e.as||Z,c=u[0],l=u[1],f=t.stableCompare(e.sort),d=e.field||r.one,h=e.offset===J?ee:e.offset===Q?te:ne;for(o=0,a=(i=re(n.source,e.groupby,f,d)).length,s=i.max;o<a;++o)h(i[o],s,d,c,l);return n.reflow(e.modified()).modifies(u)}}),e.axisticks=a,e.datajoin=s,e.encode=l,e.legendentries=f,e.linkpath=m,e.pie=S,e.scale=R,e.sortitems=$,e.stack=K,Object.defineProperty(e,"__esModule",{value:!0})}(t,n(1183),n(1283),n(1176),n(1190),n(2341))},2341:function(e,t,n){!function(e,t){"use strict";function n(e,t,n,r,i){var o=e*e,a=o*e;return((1-3*e+3*o-a)*t+(4-6*o+3*a)*n+(1+3*e+3*o-3*a)*r+a*i)/6}function r(e){var t=e.length-1;return function(r){var i=r<=0?r=0:r>=1?(r=1,t-1):Math.floor(r*t),o=e[i],a=e[i+1],s=i>0?e[i-1]:2*o-a,u=i<t-1?e[i+2]:2*a-o;return n((r-i/t)*t,s,o,a,u)}}function i(e){var t=e.length;return function(r){var i=Math.floor(((r%=1)<0?++r:r)*t),o=e[(i+t-1)%t],a=e[i%t],s=e[(i+1)%t],u=e[(i+2)%t];return n((r-i/t)*t,o,a,s,u)}}var o=e=>()=>e;function a(e,t){return function(n){return e+n*t}}function s(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}function u(e,t){var n=t-e;return n?a(e,n>180||n<-180?n-360*Math.round(n/360):n):o(isNaN(e)?t:e)}function c(e){return 1===(e=+e)?l:function(t,n){return n-t?s(t,n,e):o(isNaN(t)?n:t)}}function l(e,t){var n=t-e;return n?a(e,n):o(isNaN(e)?t:e)}var f=function e(n){var r=c(n);function i(e,n){var i=r((e=t.rgb(e)).r,(n=t.rgb(n)).r),o=r(e.g,n.g),a=r(e.b,n.b),s=l(e.opacity,n.opacity);return function(t){return e.r=i(t),e.g=o(t),e.b=a(t),e.opacity=s(t),e+""}}return i.gamma=e,i}(1);function d(e){return function(n){var r,i,o=n.length,a=new Array(o),s=new Array(o),u=new Array(o);for(r=0;r<o;++r)i=t.rgb(n[r]),a[r]=i.r||0,s[r]=i.g||0,u[r]=i.b||0;return a=e(a),s=e(s),u=e(u),i.opacity=1,function(e){return i.r=a(e),i.g=s(e),i.b=u(e),i+""}}}var h=d(r),p=d(i);function g(e,t){t||(t=[]);var n,r=e?Math.min(t.length,e.length):0,i=t.slice();return function(o){for(n=0;n<r;++n)i[n]=e[n]*(1-o)+t[n]*o;return i}}function m(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function v(e,t){return(m(t)?g:y)(e,t)}function y(e,t){var n,r=t?t.length:0,i=e?Math.min(r,e.length):0,o=new Array(i),a=new Array(r);for(n=0;n<i;++n)o[n]=C(e[n],t[n]);for(;n<r;++n)a[n]=t[n];return function(e){for(n=0;n<i;++n)a[n]=o[n](e);return a}}function b(e,t){var n=new Date;return e=+e,t=+t,function(r){return n.setTime(e*(1-r)+t*r),n}}function x(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function w(e,t){var n,r={},i={};for(n in null!==e&&"object"===typeof e||(e={}),null!==t&&"object"===typeof t||(t={}),t)n in e?r[n]=C(e[n],t[n]):i[n]=t[n];return function(e){for(n in r)i[n]=r[n](e);return i}}var _=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,A=new RegExp(_.source,"g");function k(e){return function(){return e}}function E(e){return function(t){return e(t)+""}}function D(e,t){var n,r,i,o=_.lastIndex=A.lastIndex=0,a=-1,s=[],u=[];for(e+="",t+="";(n=_.exec(e))&&(r=A.exec(t));)(i=r.index)>o&&(i=t.slice(o,i),s[a]?s[a]+=i:s[++a]=i),(n=n[0])===(r=r[0])?s[a]?s[a]+=r:s[++a]=r:(s[++a]=null,u.push({i:a,x:x(n,r)})),o=A.lastIndex;return o<t.length&&(i=t.slice(o),s[a]?s[a]+=i:s[++a]=i),s.length<2?u[0]?E(u[0].x):k(t):(t=u.length,function(e){for(var n,r=0;r<t;++r)s[(n=u[r]).i]=n.x(e);return s.join("")})}function C(e,n){var r,i=typeof n;return null==n||"boolean"===i?o(n):("number"===i?x:"string"===i?(r=t.color(n))?(n=r,f):D:n instanceof t.color?f:n instanceof Date?b:m(n)?g:Array.isArray(n)?y:"function"!==typeof n.valueOf&&"function"!==typeof n.toString||isNaN(n)?w:x)(e,n)}function M(e){var t=e.length;return function(n){return e[Math.max(0,Math.min(t-1,Math.floor(n*t)))]}}function F(e,t){var n=u(+e,+t);return function(e){var t=n(e);return t-360*Math.floor(t/360)}}function S(e,t){return e=+e,t=+t,function(n){return Math.round(e*(1-n)+t*n)}}var T,O=180/Math.PI,N={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function P(e,t,n,r,i,o){var a,s,u;return(a=Math.sqrt(e*e+t*t))&&(e/=a,t/=a),(u=e*n+t*r)&&(n-=e*u,r-=t*u),(s=Math.sqrt(n*n+r*r))&&(n/=s,r/=s,u/=s),e*r<t*n&&(e=-e,t=-t,u=-u,a=-a),{translateX:i,translateY:o,rotate:Math.atan2(t,e)*O,skewX:Math.atan(u)*O,scaleX:a,scaleY:s}}function R(e){const t=new("function"===typeof DOMMatrix?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?N:P(t.a,t.b,t.c,t.d,t.e,t.f)}function B(e){return null==e?N:(T||(T=document.createElementNS("http://www.w3.org/2000/svg","g")),T.setAttribute("transform",e),(e=T.transform.baseVal.consolidate())?P((e=e.matrix).a,e.b,e.c,e.d,e.e,e.f):N)}function z(e,t,n,r){function i(e){return e.length?e.pop()+" ":""}function o(e,r,i,o,a,s){if(e!==i||r!==o){var u=a.push("translate(",null,t,null,n);s.push({i:u-4,x:x(e,i)},{i:u-2,x:x(r,o)})}else(i||o)&&a.push("translate("+i+t+o+n)}function a(e,t,n,o){e!==t?(e-t>180?t+=360:t-e>180&&(e+=360),o.push({i:n.push(i(n)+"rotate(",null,r)-2,x:x(e,t)})):t&&n.push(i(n)+"rotate("+t+r)}function s(e,t,n,o){e!==t?o.push({i:n.push(i(n)+"skewX(",null,r)-2,x:x(e,t)}):t&&n.push(i(n)+"skewX("+t+r)}function u(e,t,n,r,o,a){if(e!==n||t!==r){var s=o.push(i(o)+"scale(",null,",",null,")");a.push({i:s-4,x:x(e,n)},{i:s-2,x:x(t,r)})}else 1===n&&1===r||o.push(i(o)+"scale("+n+","+r+")")}return function(t,n){var r=[],i=[];return t=e(t),n=e(n),o(t.translateX,t.translateY,n.translateX,n.translateY,r,i),a(t.rotate,n.rotate,r,i),s(t.skewX,n.skewX,r,i),u(t.scaleX,t.scaleY,n.scaleX,n.scaleY,r,i),t=n=null,function(e){for(var t,n=-1,o=i.length;++n<o;)r[(t=i[n]).i]=t.x(e);return r.join("")}}}var j=z(R,"px, ","px)","deg)"),L=z(B,", ",")",")"),I=1e-12;function U(e){return((e=Math.exp(e))+1/e)/2}function q(e){return((e=Math.exp(e))-1/e)/2}function W(e){return((e=Math.exp(2*e))-1)/(e+1)}var H=function e(t,n,r){function i(e,i){var o,a,s=e[0],u=e[1],c=e[2],l=i[0],f=i[1],d=i[2],h=l-s,p=f-u,g=h*h+p*p;if(g<I)a=Math.log(d/c)/t,o=function(e){return[s+e*h,u+e*p,c*Math.exp(t*e*a)]};else{var m=Math.sqrt(g),v=(d*d-c*c+r*g)/(2*c*n*m),y=(d*d-c*c-r*g)/(2*d*n*m),b=Math.log(Math.sqrt(v*v+1)-v),x=Math.log(Math.sqrt(y*y+1)-y);a=(x-b)/t,o=function(e){var r=e*a,i=U(b),o=c/(n*m)*(i*W(t*r+b)-q(b));return[s+o*h,u+o*p,c*i/U(t*r+b)]}}return o.duration=1e3*a*t/Math.SQRT2,o}return i.rho=function(t){var n=Math.max(.001,+t),r=n*n;return e(n,r,r*r)},i}(Math.SQRT2,2,4);function Y(e){return function(n,r){var i=e((n=t.hsl(n)).h,(r=t.hsl(r)).h),o=l(n.s,r.s),a=l(n.l,r.l),s=l(n.opacity,r.opacity);return function(e){return n.h=i(e),n.s=o(e),n.l=a(e),n.opacity=s(e),n+""}}}var V=Y(u),G=Y(l);function $(e,n){var r=l((e=t.lab(e)).l,(n=t.lab(n)).l),i=l(e.a,n.a),o=l(e.b,n.b),a=l(e.opacity,n.opacity);return function(t){return e.l=r(t),e.a=i(t),e.b=o(t),e.opacity=a(t),e+""}}function X(e){return function(n,r){var i=e((n=t.hcl(n)).h,(r=t.hcl(r)).h),o=l(n.c,r.c),a=l(n.l,r.l),s=l(n.opacity,r.opacity);return function(e){return n.h=i(e),n.c=o(e),n.l=a(e),n.opacity=s(e),n+""}}}var J=X(u),Q=X(l);function Z(e){return function n(r){function i(n,i){var o=e((n=t.cubehelix(n)).h,(i=t.cubehelix(i)).h),a=l(n.s,i.s),s=l(n.l,i.l),u=l(n.opacity,i.opacity);return function(e){return n.h=o(e),n.s=a(e),n.l=s(Math.pow(e,r)),n.opacity=u(e),n+""}}return r=+r,i.gamma=n,i}(1)}var K=Z(u),ee=Z(l);function te(e,t){void 0===t&&(t=e,e=C);for(var n=0,r=t.length-1,i=t[0],o=new Array(r<0?0:r);n<r;)o[n]=e(i,i=t[++n]);return function(e){var t=Math.max(0,Math.min(r-1,Math.floor(e*=r)));return o[t](e-t)}}function ne(e,t){for(var n=new Array(t),r=0;r<t;++r)n[r]=e(r/(t-1));return n}e.interpolate=C,e.interpolateArray=v,e.interpolateBasis=r,e.interpolateBasisClosed=i,e.interpolateCubehelix=K,e.interpolateCubehelixLong=ee,e.interpolateDate=b,e.interpolateDiscrete=M,e.interpolateHcl=J,e.interpolateHclLong=Q,e.interpolateHsl=V,e.interpolateHslLong=G,e.interpolateHue=F,e.interpolateLab=$,e.interpolateNumber=x,e.interpolateNumberArray=g,e.interpolateObject=w,e.interpolateRgb=f,e.interpolateRgbBasis=h,e.interpolateRgbBasisClosed=p,e.interpolateRound=S,e.interpolateString=D,e.interpolateTransformCss=j,e.interpolateTransformSvg=L,e.interpolateZoom=H,e.piecewise=te,e.quantize=ne,Object.defineProperty(e,"__esModule",{value:!0})}(t,n(2342))},2342:function(e,t,n){!function(e){"use strict";function t(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function n(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function r(){}var i=.7,o=1/i,a="\\s*([+-]?\\d+)\\s*",s="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",u="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",c=/^#([0-9a-f]{3,8})$/,l=new RegExp("^rgb\\("+[a,a,a]+"\\)$"),f=new RegExp("^rgb\\("+[u,u,u]+"\\)$"),d=new RegExp("^rgba\\("+[a,a,a,s]+"\\)$"),h=new RegExp("^rgba\\("+[u,u,u,s]+"\\)$"),p=new RegExp("^hsl\\("+[s,u,u]+"\\)$"),g=new RegExp("^hsla\\("+[s,u,u,s]+"\\)$"),m={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function v(){return this.rgb().formatHex()}function y(){return S(this).formatHsl()}function b(){return this.rgb().formatRgb()}function x(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=c.exec(e))?(n=t[1].length,t=parseInt(t[1],16),6===n?w(t):3===n?new E(t>>8&15|t>>4&240,t>>4&15|240&t,(15&t)<<4|15&t,1):8===n?_(t>>24&255,t>>16&255,t>>8&255,(255&t)/255):4===n?_(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|240&t,((15&t)<<4|15&t)/255):null):(t=l.exec(e))?new E(t[1],t[2],t[3],1):(t=f.exec(e))?new E(255*t[1]/100,255*t[2]/100,255*t[3]/100,1):(t=d.exec(e))?_(t[1],t[2],t[3],t[4]):(t=h.exec(e))?_(255*t[1]/100,255*t[2]/100,255*t[3]/100,t[4]):(t=p.exec(e))?F(t[1],t[2]/100,t[3]/100,1):(t=g.exec(e))?F(t[1],t[2]/100,t[3]/100,t[4]):m.hasOwnProperty(e)?w(m[e]):"transparent"===e?new E(NaN,NaN,NaN,0):null}function w(e){return new E(e>>16&255,e>>8&255,255&e,1)}function _(e,t,n,r){return r<=0&&(e=t=n=NaN),new E(e,t,n,r)}function A(e){return e instanceof r||(e=x(e)),e?new E((e=e.rgb()).r,e.g,e.b,e.opacity):new E}function k(e,t,n,r){return 1===arguments.length?A(e):new E(e,t,n,null==r?1:r)}function E(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}function D(){return"#"+M(this.r)+M(this.g)+M(this.b)}function C(){var e=this.opacity;return(1===(e=isNaN(e)?1:Math.max(0,Math.min(1,e)))?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(1===e?")":", "+e+")")}function M(e){return((e=Math.max(0,Math.min(255,Math.round(e)||0)))<16?"0":"")+e.toString(16)}function F(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new O(e,t,n,r)}function S(e){if(e instanceof O)return new O(e.h,e.s,e.l,e.opacity);if(e instanceof r||(e=x(e)),!e)return new O;if(e instanceof O)return e;var t=(e=e.rgb()).r/255,n=e.g/255,i=e.b/255,o=Math.min(t,n,i),a=Math.max(t,n,i),s=NaN,u=a-o,c=(a+o)/2;return u?(s=t===a?(n-i)/u+6*(n<i):n===a?(i-t)/u+2:(t-n)/u+4,u/=c<.5?a+o:2-a-o,s*=60):u=c>0&&c<1?0:s,new O(s,u,c,e.opacity)}function T(e,t,n,r){return 1===arguments.length?S(e):new O(e,t,n,null==r?1:r)}function O(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}function N(e,t,n){return 255*(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)}t(r,x,{copy:function(e){return Object.assign(new this.constructor,this,e)},displayable:function(){return this.rgb().displayable()},hex:v,formatHex:v,formatHsl:y,formatRgb:b,toString:b}),t(E,k,n(r,{brighter:function(e){return e=null==e?o:Math.pow(o,e),new E(this.r*e,this.g*e,this.b*e,this.opacity)},darker:function(e){return e=null==e?i:Math.pow(i,e),new E(this.r*e,this.g*e,this.b*e,this.opacity)},rgb:function(){return this},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:D,formatHex:D,formatRgb:C,toString:C})),t(O,T,n(r,{brighter:function(e){return e=null==e?o:Math.pow(o,e),new O(this.h,this.s,this.l*e,this.opacity)},darker:function(e){return e=null==e?i:Math.pow(i,e),new O(this.h,this.s,this.l*e,this.opacity)},rgb:function(){var e=this.h%360+360*(this.h<0),t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,i=2*n-r;return new E(N(e>=240?e-240:e+120,i,r),N(e,i,r),N(e<120?e+240:e-120,i,r),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var e=this.opacity;return(1===(e=isNaN(e)?1:Math.max(0,Math.min(1,e)))?"hsl(":"hsla(")+(this.h||0)+", "+100*(this.s||0)+"%, "+100*(this.l||0)+"%"+(1===e?")":", "+e+")")}}));const P=Math.PI/180,R=180/Math.PI,B=18,z=.96422,j=1,L=.82521,I=4/29,U=6/29,q=3*U*U,W=U*U*U;function H(e){if(e instanceof G)return new G(e.l,e.a,e.b,e.opacity);if(e instanceof te)return ne(e);e instanceof E||(e=A(e));var t,n,r=Q(e.r),i=Q(e.g),o=Q(e.b),a=$((.2225045*r+.7168786*i+.0606169*o)/j);return r===i&&i===o?t=n=a:(t=$((.4360747*r+.3850649*i+.1430804*o)/z),n=$((.0139322*r+.0971045*i+.7141733*o)/L)),new G(116*a-16,500*(t-a),200*(a-n),e.opacity)}function Y(e,t){return new G(e,0,0,null==t?1:t)}function V(e,t,n,r){return 1===arguments.length?H(e):new G(e,t,n,null==r?1:r)}function G(e,t,n,r){this.l=+e,this.a=+t,this.b=+n,this.opacity=+r}function $(e){return e>W?Math.pow(e,1/3):e/q+I}function X(e){return e>U?e*e*e:q*(e-I)}function J(e){return 255*(e<=.0031308?12.92*e:1.055*Math.pow(e,1/2.4)-.055)}function Q(e){return(e/=255)<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)}function Z(e){if(e instanceof te)return new te(e.h,e.c,e.l,e.opacity);if(e instanceof G||(e=H(e)),0===e.a&&0===e.b)return new te(NaN,0<e.l&&e.l<100?0:NaN,e.l,e.opacity);var t=Math.atan2(e.b,e.a)*R;return new te(t<0?t+360:t,Math.sqrt(e.a*e.a+e.b*e.b),e.l,e.opacity)}function K(e,t,n,r){return 1===arguments.length?Z(e):new te(n,t,e,null==r?1:r)}function ee(e,t,n,r){return 1===arguments.length?Z(e):new te(e,t,n,null==r?1:r)}function te(e,t,n,r){this.h=+e,this.c=+t,this.l=+n,this.opacity=+r}function ne(e){if(isNaN(e.h))return new G(e.l,0,0,e.opacity);var t=e.h*P;return new G(e.l,Math.cos(t)*e.c,Math.sin(t)*e.c,e.opacity)}t(G,V,n(r,{brighter:function(e){return new G(this.l+B*(null==e?1:e),this.a,this.b,this.opacity)},darker:function(e){return new G(this.l-B*(null==e?1:e),this.a,this.b,this.opacity)},rgb:function(){var e=(this.l+16)/116,t=isNaN(this.a)?e:e+this.a/500,n=isNaN(this.b)?e:e-this.b/200;return new E(J(3.1338561*(t=z*X(t))-1.6168667*(e=j*X(e))-.4906146*(n=L*X(n))),J(-.9787684*t+1.9161415*e+.033454*n),J(.0719453*t-.2289914*e+1.4052427*n),this.opacity)}})),t(te,ee,n(r,{brighter:function(e){return new te(this.h,this.c,this.l+B*(null==e?1:e),this.opacity)},darker:function(e){return new te(this.h,this.c,this.l-B*(null==e?1:e),this.opacity)},rgb:function(){return ne(this).rgb()}}));var re=-.14861,ie=1.78277,oe=-.29227,ae=-.90649,se=1.97294,ue=se*ae,ce=se*ie,le=ie*oe-ae*re;function fe(e){if(e instanceof he)return new he(e.h,e.s,e.l,e.opacity);e instanceof E||(e=A(e));var t=e.r/255,n=e.g/255,r=e.b/255,i=(le*r+ue*t-ce*n)/(le+ue-ce),o=r-i,a=(se*(n-i)-oe*o)/ae,s=Math.sqrt(a*a+o*o)/(se*i*(1-i)),u=s?Math.atan2(a,o)*R-120:NaN;return new he(u<0?u+360:u,s,i,e.opacity)}function de(e,t,n,r){return 1===arguments.length?fe(e):new he(e,t,n,null==r?1:r)}function he(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}t(he,de,n(r,{brighter:function(e){return e=null==e?o:Math.pow(o,e),new he(this.h,this.s,this.l*e,this.opacity)},darker:function(e){return e=null==e?i:Math.pow(i,e),new he(this.h,this.s,this.l*e,this.opacity)},rgb:function(){var e=isNaN(this.h)?0:(this.h+120)*P,t=+this.l,n=isNaN(this.s)?0:this.s*t*(1-t),r=Math.cos(e),i=Math.sin(e);return new E(255*(t+n*(re*r+ie*i)),255*(t+n*(oe*r+ae*i)),255*(t+n*(se*r)),this.opacity)}})),e.color=x,e.cubehelix=de,e.gray=Y,e.hcl=ee,e.hsl=T,e.lab=V,e.lch=K,e.rgb=k,Object.defineProperty(e,"__esModule",{value:!0})}(t)},2343:function(e,t,n){!function(e,t,n,r,i,o,a,s,u){"use strict";function c(){}const l=[[],[[[1,1.5],[.5,1]]],[[[1.5,1],[1,1.5]]],[[[1.5,1],[.5,1]]],[[[1,.5],[1.5,1]]],[[[1,1.5],[.5,1]],[[1,.5],[1.5,1]]],[[[1,.5],[1,1.5]]],[[[1,.5],[.5,1]]],[[[.5,1],[1,.5]]],[[[1,1.5],[1,.5]]],[[[.5,1],[1,.5]],[[1.5,1],[1,1.5]]],[[[1.5,1],[1,.5]]],[[[.5,1],[1.5,1]]],[[[1,1.5],[1.5,1]]],[[[.5,1],[1,1.5]]],[]];function f(){var e=1,t=1,r=u;function i(e,t){return t.map((t=>o(e,t)))}function o(e,t){var n=[],i=[];return a(e,t,(o=>{r(o,e,t),d(o)>0?n.push([o]):i.push(o)})),i.forEach((e=>{for(var t,r=0,i=n.length;r<i;++r)if(-1!==h((t=n[r])[0],e))return void t.push(e)})),{type:"MultiPolygon",value:t,coordinates:n}}function a(n,r,i){var o,a,u,c,f,d,h=new Array,p=new Array;for(o=a=-1,c=n[0]>=r,l[c<<1].forEach(g);++o<e-1;)u=c,c=n[o+1]>=r,l[u|c<<1].forEach(g);for(l[c<<0].forEach(g);++a<t-1;){for(o=-1,c=n[a*e+e]>=r,f=n[a*e]>=r,l[c<<1|f<<2].forEach(g);++o<e-1;)u=c,c=n[a*e+e+o+1]>=r,d=f,f=n[a*e+o+1]>=r,l[u|c<<1|f<<2|d<<3].forEach(g);l[c|f<<3].forEach(g)}for(o=-1,f=n[a*e]>=r,l[f<<2].forEach(g);++o<e-1;)d=f,f=n[a*e+o+1]>=r,l[f<<2|d<<3].forEach(g);function g(e){var t,n,r=[e[0][0]+o,e[0][1]+a],u=[e[1][0]+o,e[1][1]+a],c=s(r),l=s(u);(t=p[c])?(n=h[l])?(delete p[t.end],delete h[n.start],t===n?(t.ring.push(u),i(t.ring)):h[t.start]=p[n.end]={start:t.start,end:n.end,ring:t.ring.concat(n.ring)}):(delete p[t.end],t.ring.push(u),p[t.end=l]=t):(t=h[l])?(n=p[c])?(delete h[t.start],delete p[n.end],t===n?(t.ring.push(u),i(t.ring)):h[n.start]=p[t.end]={start:n.start,end:t.end,ring:n.ring.concat(t.ring)}):(delete h[t.start],t.ring.unshift(r),h[t.start=c]=t):h[c]=p[l]={start:c,end:l,ring:[r,u]}}l[f<<3].forEach(g)}function s(t){return 2*t[0]+t[1]*(e+1)*4}function u(n,r,i){n.forEach((n=>{var o,a=n[0],s=n[1],u=0|a,c=0|s,l=r[c*e+u];a>0&&a<e&&u===a&&(o=r[c*e+u-1],n[0]=a+(i-o)/(l-o)-.5),s>0&&s<t&&c===s&&(o=r[(c-1)*e+u],n[1]=s+(i-o)/(l-o)-.5)}))}return i.contour=o,i.size=function(r){if(!arguments.length)return[e,t];var o=Math.floor(r[0]),a=Math.floor(r[1]);return o>=0&&a>=0||n.error("invalid size"),e=o,t=a,i},i.smooth=function(e){return arguments.length?(r=e?u:c,i):r===u},i}function d(e){for(var t=0,n=e.length,r=e[n-1][1]*e[0][0]-e[n-1][0]*e[0][1];++t<n;)r+=e[t-1][1]*e[t][0]-e[t-1][0]*e[t][1];return r}function h(e,t){for(var n,r=-1,i=t.length;++r<i;)if(n=p(e,t[r]))return n;return 0}function p(e,t){for(var n=t[0],r=t[1],i=-1,o=0,a=e.length,s=a-1;o<a;s=o++){var u=e[o],c=u[0],l=u[1],f=e[s],d=f[0],h=f[1];if(g(u,f,t))return 0;l>r!==h>r&&n<(d-c)*(r-l)/(h-l)+c&&(i=-i)}return i}function g(e,t,n){var r;return m(e,t,n)&&v(e[r=+(e[0]===t[0])],n[r],t[r])}function m(e,t,n){return(t[0]-e[0])*(n[1]-e[1])===(n[0]-e[0])*(t[1]-e[1])}function v(e,t,n){return e<=t&&t<=n||n<=t&&t<=e}function y(e,t,i){return function(o){var a=n.extent(o),s=i?Math.min(a[0],0):a[0],u=a[1],c=u-s,l=t?r.tickStep(s,u,e):c/(e+1);return r.range(s+l,u,l)}}function b(e){t.Transform.call(this,null,e)}function x(e,t,n){const i=y(n.levels||10,n.nice,!1!==n.zero);return"shared"!==n.resolve?i:i(e.map((e=>r.max(t(e).values))))}function w(e,t,r,i){let o=i.scale||t.scale,a=i.translate||t.translate;if(n.isFunction(o)&&(o=o(r,i)),n.isFunction(a)&&(a=a(r,i)),(1===o||null==o)&&!a)return;const s=(n.isNumber(o)?o:o[0])||1,u=(n.isNumber(o)?o:o[1])||1,c=a&&a[0]||0,l=a&&a[1]||0;e.forEach(_(t,s,u,c,l))}function _(e,t,n,r,i){const o=e.x1||0,a=e.y1||0,s=t*n<0;function u(e){e.forEach(c)}function c(e){s&&e.reverse(),e.forEach(l)}function l(e){e[0]=(e[0]-o)*t+r,e[1]=(e[1]-a)*n+i}return function(e){return e.coordinates.forEach(u),e}}function A(e,t,n){const r=e>=0?e:i.bandwidthNRD(t,n);return Math.round((Math.sqrt(4*r*r+1)-1)/2)}function k(e){return n.isFunction(e)?e:n.constant(+e)}function E(){var e=e=>e[0],t=e=>e[1],i=n.one,o=[-1,-1],a=960,s=500,u=2;function c(n,c){const l=A(o[0],n,e)>>u,f=A(o[1],n,t)>>u,d=l?l+2:0,h=f?f+2:0,p=2*d+(a>>u),g=2*h+(s>>u),m=new Float32Array(p*g),v=new Float32Array(p*g);let y=m;n.forEach((n=>{const r=d+(+e(n)>>u),o=h+(+t(n)>>u);r>=0&&r<p&&o>=0&&o<g&&(m[r+o*p]+=+i(n))})),l>0&&f>0?(D(p,g,m,v,l),C(p,g,v,m,f),D(p,g,m,v,l),C(p,g,v,m,f),D(p,g,m,v,l),C(p,g,v,m,f)):l>0?(D(p,g,m,v,l),D(p,g,v,m,l),D(p,g,m,v,l),y=v):f>0&&(C(p,g,m,v,f),C(p,g,v,m,f),C(p,g,m,v,f),y=v);const b=c?Math.pow(2,-2*u):1/r.sum(y);for(let e=0,t=p*g;e<t;++e)y[e]*=b;return{values:y,scale:1<<u,width:p,height:g,x1:d,y1:h,x2:d+(a>>u),y2:h+(s>>u)}}return c.x=function(t){return arguments.length?(e=k(t),c):e},c.y=function(e){return arguments.length?(t=k(e),c):t},c.weight=function(e){return arguments.length?(i=k(e),c):i},c.size=function(e){if(!arguments.length)return[a,s];var t=+e[0],r=+e[1];return t>=0&&r>=0||n.error("invalid size"),a=t,s=r,c},c.cellSize=function(e){return arguments.length?((e=+e)>=1||n.error("invalid cell size"),u=Math.floor(Math.log(e)/Math.LN2),c):1<<u},c.bandwidth=function(e){return arguments.length?(1===(e=n.array(e)).length&&(e=[+e[0],+e[0]]),2!==e.length&&n.error("invalid bandwidth"),o=e,c):o},c}function D(e,t,n,r,i){const o=1+(i<<1);for(let a=0;a<t;++a)for(let t=0,s=0;t<e+i;++t)t<e&&(s+=n[t+a*e]),t>=i&&(t>=o&&(s-=n[t-o+a*e]),r[t-i+a*e]=s/Math.min(t+1,e-1+o-t,o))}function C(e,t,n,r,i){const o=1+(i<<1);for(let a=0;a<e;++a)for(let s=0,u=0;s<t+i;++s)s<t&&(u+=n[a+s*e]),s>=i&&(s>=o&&(u-=n[a+(s-o)*e]),r[a+(s-i)*e]=u/Math.min(s+1,t-1+o-s,o))}function M(e){t.Transform.call(this,null,e)}b.Definition={type:"Isocontour",metadata:{generates:!0},params:[{name:"field",type:"field"},{name:"thresholds",type:"number",array:!0},{name:"levels",type:"number"},{name:"nice",type:"boolean",default:!1},{name:"resolve",type:"enum",values:["shared","independent"],default:"independent"},{name:"zero",type:"boolean",default:!0},{name:"smooth",type:"boolean",default:!0},{name:"scale",type:"number",expr:!0},{name:"translate",type:"number",array:!0,expr:!0},{name:"as",type:"string",null:!0,default:"contour"}]},n.inherits(b,t.Transform,{transform(e,r){if(this.value&&!r.changed()&&!e.modified())return r.StopPropagation;var i=r.fork(r.NO_SOURCE|r.NO_FIELDS),o=r.materialize(r.SOURCE).source,a=e.field||n.identity,s=f().smooth(!1!==e.smooth),u=e.thresholds||x(o,a,e),c=null===e.as?null:e.as||"contour",l=[];return o.forEach((r=>{const i=a(r),o=s.size([i.width,i.height])(i.values,n.isArray(u)?u:u(i.values));w(o,i,r,e),o.forEach((e=>{l.push(t.rederive(r,t.ingest(null!=c?{[c]:e}:e)))}))})),this.value&&(i.rem=this.value),this.value=i.source=i.add=l,i}}),M.Definition={type:"KDE2D",metadata:{generates:!0},params:[{name:"size",type:"number",array:!0,length:2,required:!0},{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"weight",type:"field"},{name:"groupby",type:"field",array:!0},{name:"cellSize",type:"number"},{name:"bandwidth",type:"number",array:!0,length:2},{name:"counts",type:"boolean",default:!1},{name:"as",type:"string",default:"grid"}]};const F=["x","y","weight","size","cellSize","bandwidth"];function S(e,t){return F.forEach((n=>null!=t[n]?e[n](t[n]):0)),e}function T(e,t){var n,r,i,o,a,s,u=[],c=e=>e(o);if(null==t)u.push(e);else for(n={},r=0,i=e.length;r<i;++r)o=e[r],(s=n[a=t.map(c)])||(n[a]=s=[],s.dims=a,u.push(s)),s.push(o);return u}function O(e){t.Transform.call(this,null,e)}n.inherits(M,t.Transform,{transform(e,r){if(this.value&&!r.changed()&&!e.modified())return r.StopPropagation;var i=r.fork(r.NO_SOURCE|r.NO_FIELDS),o=T(r.materialize(r.SOURCE).source,e.groupby),a=(e.groupby||[]).map(n.accessorName),s=S(E(),e),u=e.as||"grid",c=[];function l(e,t){for(let n=0;n<a.length;++n)e[a[n]]=t[n];return e}return c=o.map((n=>t.ingest(l({[u]:s(n,e.counts)},n.dims)))),this.value&&(i.rem=this.value),this.value=i.source=i.add=c,i}}),O.Definition={type:"Contour",metadata:{generates:!0},params:[{name:"size",type:"number",array:!0,length:2,required:!0},{name:"values",type:"number",array:!0},{name:"x",type:"field"},{name:"y",type:"field"},{name:"weight",type:"field"},{name:"cellSize",type:"number"},{name:"bandwidth",type:"number"},{name:"count",type:"number"},{name:"nice",type:"boolean",default:!1},{name:"thresholds",type:"number",array:!0},{name:"smooth",type:"boolean",default:!0}]},n.inherits(O,t.Transform,{transform(e,r){if(this.value&&!r.changed()&&!e.modified())return r.StopPropagation;var i,o,a=r.fork(r.NO_SOURCE|r.NO_FIELDS),s=f().smooth(!1!==e.smooth),u=e.values,c=e.thresholds||y(e.count||10,e.nice,!!u),l=e.size;return u||(u=r.materialize(r.SOURCE).source,o=_(i=S(E(),e)(u,!0),i.scale||1,i.scale||1,0,0),l=[i.width,i.height],u=i.values),c=n.isArray(c)?c:c(u),u=s.size(l)(u,c),o&&u.forEach(o),this.value&&(a.rem=this.value),this.value=a.source=a.add=(u||[]).map(t.ingest),a}});const N="Feature",P="FeatureCollection",R="MultiPoint";function B(e){t.Transform.call(this,null,e)}function z(e){t.Transform.call(this,null,e)}function j(e,t){const n=e.pointRadius();return e.context(null),null!=t&&e.pointRadius(t),n}function L(e){t.Transform.call(this,null,e)}function I(e){t.Transform.call(this,null,e)}function U(e,t,n){const r=null==n?n=>e(t(n)):r=>{var i=e.pointRadius(),o=e.pointRadius(n)(t(r));return e.pointRadius(i),o};return r.context=t=>(e.context(t),r),r}function q(e){t.Transform.call(this,[],e),this.generator=a.geoGraticule()}function W(e){t.Transform.call(this,null,e)}function H(e,t){let r;return n.isFunction(e)?(r=n=>s.rgb(e(n,t)),r.dep=V(e)):r=n.constant(s.rgb(e||"#888")),r}function Y(e,t){let r;return n.isFunction(e)?(r=n=>e(n,t),r.dep=V(e)):e?r=n.constant(e):(r=e=>e.$value/e.$max||0,r.dep=!0),r}function V(e){if(!n.isFunction(e))return!1;const t=n.toSet(n.accessorFields(e));return t.$x||t.$y||t.$value||t.$max}function G(e,t,r,i){const o=e.width,a=e.height,s=e.x1||0,c=e.y1||0,l=e.x2||o,f=e.y2||a,d=e.values,h=d?e=>d[e]:n.zero,p=u.canvas(l-s,f-c),g=p.getContext("2d"),m=g.getImageData(0,0,l-s,f-c),v=m.data;for(let n=c,u=0;n<f;++n){t.$y=n-c;for(let e=s,a=n*o;e<l;++e,u+=4){t.$x=e-s,t.$value=h(e+a);const n=r(t);v[u+0]=n.r,v[u+1]=n.g,v[u+2]=n.b,v[u+3]=~~(255*i(t))}}return g.putImageData(m,0,0),p}function $(e){t.Transform.call(this,null,e),this.modified(!0)}function X(e,t){const n=Z(t.fit);t.extent?e.fitExtent(t.extent,n):t.size&&e.fitSize(t.size,n)}function J(e){const t=o.projection((e||"mercator").toLowerCase());return t||n.error("Unrecognized projection type: "+e),t()}function Q(e,t,r){n.isFunction(e[t])&&e[t](r)}function Z(e){return 1===(e=n.array(e)).length?e[0]:{type:P,features:e.reduce(((e,t)=>e.concat(K(t))),[])}}function K(e){return e.type===P?e.features:n.array(e).filter((e=>null!=e)).map((e=>e.type===N?e:{type:N,geometry:e}))}B.Definition={type:"GeoJSON",metadata:{},params:[{name:"fields",type:"field",array:!0,length:2},{name:"geojson",type:"field"}]},n.inherits(B,t.Transform,{transform(e,t){var r,i=this._features,o=this._points,a=e.fields,s=a&&a[0],u=a&&a[1],c=e.geojson||!a&&n.identity,l=t.ADD;r=e.modified()||t.changed(t.REM)||t.modified(n.accessorFields(c))||s&&t.modified(n.accessorFields(s))||u&&t.modified(n.accessorFields(u)),this.value&&!r||(l=t.SOURCE,this._features=i=[],this._points=o=[]),c&&t.visit(l,(e=>i.push(c(e)))),s&&u&&(t.visit(l,(e=>{var t=s(e),n=u(e);null!=t&&null!=n&&(t=+t)===t&&(n=+n)===n&&o.push([t,n])})),i=i.concat({type:N,geometry:{type:R,coordinates:o}})),this.value={type:P,features:i}}}),z.Definition={type:"GeoPath",metadata:{modifies:!0},params:[{name:"projection",type:"projection"},{name:"field",type:"field"},{name:"pointRadius",type:"number",expr:!0},{name:"as",type:"string",default:"path"}]},n.inherits(z,t.Transform,{transform(e,t){var r=t.fork(t.ALL),i=this.value,a=e.field||n.identity,s=e.as||"path",u=r.SOURCE;!i||e.modified()?(this.value=i=o.getProjectionPath(e.projection),r.materialize().reflow()):u=a===n.identity||t.modified(a.fields)?r.ADD_MOD:r.ADD;const c=j(i,e.pointRadius);return r.visit(u,(e=>e[s]=i(a(e)))),i.pointRadius(c),r.modifies(s)}}),L.Definition={type:"GeoPoint",metadata:{modifies:!0},params:[{name:"projection",type:"projection",required:!0},{name:"fields",type:"field",array:!0,required:!0,length:2},{name:"as",type:"string",array:!0,length:2,default:["x","y"]}]},n.inherits(L,t.Transform,{transform(e,t){var n,r=e.projection,i=e.fields[0],o=e.fields[1],a=e.as||["x","y"],s=a[0],u=a[1];function c(e){const t=r([i(e),o(e)]);t?(e[s]=t[0],e[u]=t[1]):(e[s]=void 0,e[u]=void 0)}return e.modified()?t=t.materialize().reflow(!0).visit(t.SOURCE,c):(n=t.modified(i.fields)||t.modified(o.fields),t.visit(n?t.ADD_MOD:t.ADD,c)),t.modifies(a)}}),I.Definition={type:"GeoShape",metadata:{modifies:!0,nomod:!0},params:[{name:"projection",type:"projection"},{name:"field",type:"field",default:"datum"},{name:"pointRadius",type:"number",expr:!0},{name:"as",type:"string",default:"shape"}]},n.inherits(I,t.Transform,{transform(e,t){var r=t.fork(t.ALL),i=this.value,a=e.as||"shape",s=r.ADD;return i&&!e.modified()||(this.value=i=U(o.getProjectionPath(e.projection),e.field||n.field("datum"),e.pointRadius),r.materialize().reflow(),s=r.SOURCE),r.visit(s,(e=>e[a]=i)),r.modifies(a)}}),q.Definition={type:"Graticule",metadata:{changes:!0,generates:!0},params:[{name:"extent",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"extentMajor",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"extentMinor",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"step",type:"number",array:!0,length:2},{name:"stepMajor",type:"number",array:!0,length:2,default:[90,360]},{name:"stepMinor",type:"number",array:!0,length:2,default:[10,10]},{name:"precision",type:"number",default:2.5}]},n.inherits(q,t.Transform,{transform(e,r){var i,o=this.value,a=this.generator;if(!o.length||e.modified())for(const t in e)n.isFunction(a[t])&&a[t](e[t]);return i=a(),o.length?r.mod.push(t.replace(o[0],i)):r.add.push(t.ingest(i)),o[0]=i,r}}),W.Definition={type:"heatmap",metadata:{modifies:!0},params:[{name:"field",type:"field"},{name:"color",type:"string",expr:!0},{name:"opacity",type:"number",expr:!0},{name:"resolve",type:"enum",values:["shared","independent"],default:"independent"},{name:"as",type:"string",default:"image"}]},n.inherits(W,t.Transform,{transform(e,t){if(!t.changed()&&!e.modified())return t.StopPropagation;var i=t.materialize(t.SOURCE).source,o="shared"===e.resolve,a=e.field||n.identity,s=Y(e.opacity,e),u=H(e.color,e),c=e.as||"image",l={$x:0,$y:0,$value:0,$max:o?r.max(i.map((e=>r.max(a(e).values)))):0};return i.forEach((e=>{const t=a(e),i=n.extend({},e,l);o||(i.$max=r.max(t.values||[])),e[c]=G(t,i,u.dep?u:n.constant(u(i)),s.dep?s:n.constant(s(i)))})),t.reflow(!0).modifies(c)}}),n.inherits($,t.Transform,{transform(e,t){let n=this.value;return!n||e.modified("type")?(this.value=n=J(e.type),o.projectionProperties.forEach((t=>{null!=e[t]&&Q(n,t,e[t])}))):o.projectionProperties.forEach((t=>{e.modified(t)&&Q(n,t,e[t])})),null!=e.pointRadius&&n.path.pointRadius(e.pointRadius),e.fit&&X(n,e),t.fork(t.NO_SOURCE|t.NO_FIELDS)}}),e.contour=O,e.geojson=B,e.geopath=z,e.geopoint=L,e.geoshape=I,e.graticule=q,e.heatmap=W,e.isocontour=b,e.kde2d=M,e.projection=$,Object.defineProperty(e,"__esModule",{value:!0})}(t,n(1183),n(1176),n(1190),n(1282),n(1715),n(1370),n(2345),n(1369))},2344:function(e,t,n){!function(e,t,n){"use strict";var r=Math.abs,i=Math.atan,o=Math.atan2,a=Math.cos,s=Math.exp,u=Math.floor,c=Math.log,l=Math.max,f=Math.min,d=Math.pow,h=Math.round,p=Math.sign||function(e){return e>0?1:e<0?-1:0},g=Math.sin,m=Math.tan,v=1e-6,y=1e-12,b=Math.PI,x=b/2,w=b/4,_=Math.SQRT1_2,A=T(2),k=T(b),E=2*b,D=180/b,C=b/180;function M(e){return e?e/Math.sin(e):1}function F(e){return e>1?x:e<-1?-x:Math.asin(e)}function S(e){return e>1?0:e<-1?b:Math.acos(e)}function T(e){return e>0?Math.sqrt(e):0}function O(e){return((e=s(2*e))-1)/(e+1)}function N(e){return(s(e)-s(-e))/2}function P(e){return(s(e)+s(-e))/2}function R(e){return c(e+T(e*e+1))}function B(e){return c(e+T(e*e-1))}function z(e){var t=m(e/2),n=2*c(a(e/2))/(t*t);function i(e,t){var r=a(e),i=a(t),o=g(t),s=i*r,u=-((1-s?c((1+s)/2)/(1-s):-.5)+n/(1+s));return[u*i*g(e),u*o]}return i.invert=function(t,i){var s,u=T(t*t+i*i),l=-e/2,f=50;if(!u)return[0,0];do{var d=l/2,h=a(d),p=g(d),m=p/h,y=-c(r(h));l-=s=(2/m*y-n*m-u)/(-y/(p*p)+1-n/(2*h*h))*(h<0?.7:1)}while(r(s)>v&&--f>0);var b=g(l);return[o(t*b,u*a(l)),F(i*b/u)]},i}function j(){var e=x,n=t.geoProjectionMutator(z),r=n(e);return r.radius=function(t){return arguments.length?n(e=t*C):e*D},r.scale(179.976).clipAngle(147)}function L(e,t){var n=a(t),r=M(S(n*a(e/=2)));return[2*n*g(e)*r,g(t)*r]}function I(){return t.geoProjection(L).scale(152.63)}function U(e){var t=g(e),n=a(e),i=e>=0?1:-1,s=m(i*e),u=(1+t-n)/2;function c(e,r){var c=a(r),l=a(e/=2);return[(1+c)*g(e),(i*r>-o(l,s)-.001?0:10*-i)+u+g(r)*n-(1+c)*t*l]}return c.invert=function(e,c){var l=0,f=0,d=50;do{var h=a(l),p=g(l),m=a(f),y=g(f),b=1+m,x=b*p-e,w=u+y*n-b*t*h-c,_=b*h/2,A=-p*y,k=t*b*p/2,E=n*m+t*h*y,D=A*k-E*_,C=(w*A-x*E)/D/2,M=(x*k-w*_)/D;r(M)>2&&(M/=2),l-=C,f-=M}while((r(C)>v||r(M)>v)&&--d>0);return i*f>-o(a(l),s)-.001?[2*l,f]:null},c}function q(){var e=20*C,n=e>=0?1:-1,r=m(n*e),i=t.geoProjectionMutator(U),s=i(e),u=s.stream;return s.parallel=function(t){return arguments.length?(r=m((n=(e=t*C)>=0?1:-1)*e),i(e)):e*D},s.stream=function(t){var i=s.rotate(),c=u(t),l=(s.rotate([0,0]),u(t)),f=s.precision();return s.rotate(i),c.sphere=function(){l.polygonStart(),l.lineStart();for(var t=-180*n;n*t<180;t+=90*n)l.point(t,90*n);if(e)for(;n*(t-=3*n*f)>=-180;)l.point(t,n*-o(a(t*C/2),r)*D);l.lineEnd(),l.polygonEnd()},c},s.scale(218.695).center([0,28.0974])}function W(e,t){var n=m(t/2),r=T(1-n*n),i=1+r*a(e/=2),o=g(e)*r/i,s=n/i,u=o*o,c=s*s;return[4/3*o*(3+u-3*c),4/3*s*(3+3*u-c)]}function H(){return t.geoProjection(W).scale(66.1603)}L.invert=function(e,t){if(!(e*e+4*t*t>b*b+v)){var n=e,i=t,o=25;do{var s,u=g(n),c=g(n/2),l=a(n/2),f=g(i),d=a(i),h=g(2*i),p=f*f,m=d*d,y=c*c,x=1-m*l*l,w=x?S(d*l)*T(s=1/x):s=0,_=2*w*d*c-e,A=w*f-t,k=s*(m*y+w*d*l*p),E=s*(.5*u*h-2*w*f*c),D=.25*s*(h*c-w*f*m*u),C=s*(p*l+w*y*d),M=E*D-C*k;if(!M)break;var F=(A*E-_*C)/M,O=(_*D-A*k)/M;n-=F,i-=O}while((r(F)>v||r(O)>v)&&--o>0);return[n,i]}},W.invert=function(e,t){if(t*=3/8,!(e*=3/8)&&r(t)>1)return null;var n=1+e*e+t*t,i=T((n-T(n*n-4*t*t))/2),s=F(i)/3,u=i?B(r(t/i))/3:R(r(e))/3,c=a(s),l=P(u),f=l*l-c*c;return[2*p(e)*o(N(u)*c,.25-f),2*p(t)*o(l*g(s),.25+f)]};var Y=T(8),V=c(1+A);function G(e,t){var n=r(t);return n<w?[e,c(m(w+t/2))]:[e*a(n)*(2*A-1/g(n)),p(t)*(2*A*(n-w)-c(m(n/2)))]}function $(){return t.geoProjection(G).scale(112.314)}function X(e){var n=2*b/e;function s(e,i){var s=t.geoAzimuthalEquidistantRaw(e,i);if(r(e)>x){var u=o(s[1],s[0]),c=T(s[0]*s[0]+s[1]*s[1]),l=n*h((u-x)/n)+x,f=o(g(u-=l),2-a(u));u=l+F(b/c*g(f))-f,s[0]=c*a(u),s[1]=c*g(u)}return s}return s.invert=function(e,r){var s=T(e*e+r*r);if(s>x){var u=o(r,e),c=n*h((u-x)/n)+x,l=u>c?-1:1,f=s*a(c-u),d=1/m(l*S((f-b)/T(b*(b-2*f)+s*s)));u=c+2*i((d+l*T(d*d-3))/3),e=s*a(u),r=s*g(u)}return t.geoAzimuthalEquidistantRaw.invert(e,r)},s}function J(){var e=5,n=t.geoProjectionMutator(X),r=n(e),i=r.stream,s=.01,u=-a(s*C),c=g(s*C);return r.lobes=function(t){return arguments.length?n(e=+t):e},r.stream=function(t){var n=r.rotate(),l=i(t),f=(r.rotate([0,0]),i(t));return r.rotate(n),l.sphere=function(){f.polygonStart(),f.lineStart();for(var t=0,n=360/e,r=2*b/e,i=90-180/e,l=x;t<e;++t,i-=n,l-=r)f.point(o(c*a(l),u)*D,F(c*g(l))*D),i<-90?(f.point(-90,-180-i-s),f.point(-90,-180-i+s)):(f.point(90,i+s),f.point(90,i-s));f.lineEnd(),f.polygonEnd()},l},r.scale(87.8076).center([0,17.1875]).clipAngle(179.999)}function Q(e,n){if(arguments.length<2&&(n=e),1===n)return t.geoAzimuthalEqualAreaRaw;if(n===1/0)return Z;function r(r,i){var o=t.geoAzimuthalEqualAreaRaw(r/n,i);return o[0]*=e,o}return r.invert=function(r,i){var o=t.geoAzimuthalEqualAreaRaw.invert(r/e,i);return o[0]*=n,o},r}function Z(e,t){return[e*a(t)/a(t/=2),2*g(t)]}function K(){var e=2,n=t.geoProjectionMutator(Q),r=n(e);return r.coefficient=function(t){return arguments.length?n(e=+t):e},r.scale(169.529)}function ee(e,t,n){var i,o,a,s=100;n=void 0===n?0:+n,t=+t;do{(o=e(n))===(a=e(n+v))&&(a=o+v),n-=i=-1*v*(o-t)/(o-a)}while(s-- >0&&r(i)>v);return s<0?NaN:n}function te(e,t,n){return void 0===t&&(t=40),void 0===n&&(n=y),function(i,o,a,s){var u,c,l;a=void 0===a?0:+a,s=void 0===s?0:+s;for(var f=0;f<t;f++){var d=e(a,s),h=d[0]-i,p=d[1]-o;if(r(h)<n&&r(p)<n)break;var g=h*h+p*p;if(g>u)a-=c/=2,s-=l/=2;else{u=g;var m=(a>0?-1:1)*n,v=(s>0?-1:1)*n,y=e(a+m,s),b=e(a,s+v),x=(y[0]-d[0])/m,w=(y[1]-d[1])/m,_=(b[0]-d[0])/v,A=(b[1]-d[1])/v,k=A*x-w*_,E=(r(k)<.5?.5:1)/k;if(a+=c=(p*_-h*A)*E,s+=l=(h*w-p*x)*E,r(c)<n&&r(l)<n)break}}return[a,s]}}function ne(){var e=Q(1.68,2),t=1.4,n=12;function r(r,i){if(r+i<-t){var o=(r-i+1.6)*(r+i+t)/8;r+=o,i-=.8*o*g(i+b/2)}var s=e(r,i),u=(1-a(r*i))/n;return s[1]<0&&(s[0]*=1+u),s[1]>0&&(s[1]*=1+u/1.5*s[0]*s[0]),s}return r.invert=te(r),r}function re(){return t.geoProjection(ne()).rotate([-16.5,-42]).scale(176.57).center([7.93,.09])}function ie(e,t){var n,i=e*g(t),o=30;do{t-=n=(t+g(t)-i)/(1+a(t))}while(r(n)>v&&--o>0);return t/2}function oe(e,t,n){function r(r,i){return[e*r*a(i=ie(n,i)),t*g(i)]}return r.invert=function(r,i){return i=F(i/t),[r/(e*a(i)),F((2*i+g(2*i))/n)]},r}G.invert=function(e,t){if((o=r(t))<V)return[e,2*i(s(t))-x];var n,o,u=w,l=25;do{var f=a(u/2),d=m(u/2);u-=n=(Y*(u-w)-c(d)-o)/(Y-f*f/(2*d))}while(r(n)>y&&--l>0);return[e/(a(u)*(Y-1/g(u))),p(t)*u]},Z.invert=function(e,t){var n=2*F(t/2);return[e*a(n/2)/a(n),n]};var ae=oe(A/x,A,b);function se(){return t.geoProjection(ae).scale(169.529)}var ue=2.00276,ce=1.11072;function le(e,t){var n=ie(b,t);return[ue*e/(1/a(t)+ce/a(n)),(t+A*g(n))/ue]}function fe(){return t.geoProjection(le).scale(160.857)}function de(e){var n=0,r=t.geoProjectionMutator(e),i=r(n);return i.parallel=function(e){return arguments.length?r(n=e*C):n*D},i}function he(e,t){return[e*a(t),t]}function pe(){return t.geoProjection(he).scale(152.63)}function ge(e){if(!e)return he;var t=1/m(e);function n(n,r){var i=t+e-r,o=i?n*a(r)/i:i;return[i*g(o),t-i*a(o)]}return n.invert=function(n,r){var i=T(n*n+(r=t-r)*r),s=t+e-i;return[i/a(s)*o(n,r),s]},n}function me(){return de(ge).scale(123.082).center([0,26.1441]).parallel(45)}function ve(e){function t(t,n){var r=x-n,i=r?t*e*g(r)/r:r;return[r*g(i)/e,x-r*a(i)]}return t.invert=function(t,n){var r=t*e,i=x-n,a=T(r*r+i*i),s=o(r,i);return[(a?a/g(a):1)*s/e,x-a]},t}function ye(){var e=.5,n=t.geoProjectionMutator(ve),r=n(e);return r.fraction=function(t){return arguments.length?n(e=+t):e},r.scale(158.837)}le.invert=function(e,t){var n,i,o=ue*t,s=t<0?-w:w,u=25;do{i=o-A*g(s),s-=n=(g(2*s)+2*s-b*g(i))/(2*a(2*s)+2+b*a(i)*A*a(s))}while(r(n)>v&&--u>0);return i=o-A*g(s),[e*(1/a(i)+ce/a(s))/ue,i]},he.invert=function(e,t){return[e/a(t),t]};var be=oe(1,4/b,b);function xe(){return t.geoProjection(be).scale(152.63)}function we(e,t,n,i,s,u){var c,l=a(u);if(r(e)>1||r(u)>1)c=S(n*s+t*i*l);else{var f=g(e/2),d=g(u/2);c=2*F(T(f*f+t*i*d*d))}return r(c)>v?[c,o(i*g(u),t*s-n*i*l)]:[0,0]}function _e(e,t,n){return S((e*e+t*t-n*n)/(2*e*t))}function Ae(e){return e-2*b*u((e+b)/(2*b))}function ke(e,t,n){for(var r,i=[[e[0],e[1],g(e[1]),a(e[1])],[t[0],t[1],g(t[1]),a(t[1])],[n[0],n[1],g(n[1]),a(n[1])]],o=i[2],s=0;s<3;++s,o=r)r=i[s],o.v=we(r[1]-o[1],o[3],o[2],r[3],r[2],r[0]-o[0]),o.point=[0,0];var u=_e(i[0].v[0],i[2].v[0],i[1].v[0]),c=_e(i[0].v[0],i[1].v[0],i[2].v[0]),l=b-u;i[2].point[1]=0,i[0].point[0]=-(i[1].point[0]=i[0].v[0]/2);var f=[i[2].point[0]=i[0].point[0]+i[2].v[0]*a(u),2*(i[0].point[1]=i[1].point[1]=i[2].v[0]*g(u))];function d(e,t){var n,r=g(t),o=a(t),s=new Array(3);for(n=0;n<3;++n){var u=i[n];if(s[n]=we(t-u[1],u[3],u[2],o,r,e-u[0]),!s[n][0])return u.point;s[n][1]=Ae(s[n][1]-u.v[1])}var d=f.slice();for(n=0;n<3;++n){var h=2==n?0:n+1,p=_e(i[n].v[0],s[n][0],s[h][0]);s[n][1]<0&&(p=-p),n?1==n?(p=c-p,d[0]-=s[n][0]*a(p),d[1]-=s[n][0]*g(p)):(p=l-p,d[0]+=s[n][0]*a(p),d[1]+=s[n][0]*g(p)):(d[0]+=s[n][0]*a(p),d[1]-=s[n][0]*g(p))}return d[0]/=3,d[1]/=3,d}return d}function Ee(e){return e[0]*=C,e[1]*=C,e}function De(){return Ce([0,22],[45,22],[22.5,-22]).scale(380).center([22.5,2])}function Ce(e,n,r){var i=t.geoCentroid({type:"MultiPoint",coordinates:[e,n,r]}),o=[-i[0],-i[1]],a=t.geoRotation(o),s=ke(Ee(a(e)),Ee(a(n)),Ee(a(r)));s.invert=te(s);var u=t.geoProjection(s).rotate(o),c=u.center;return delete u.rotate,u.center=function(e){return arguments.length?c(a(e)):a.invert(c())},u.clipAngle(90)}function Me(e,t){var n=T(1-g(t));return[2/k*e*n,k*(1-n)]}function Fe(){return t.geoProjection(Me).scale(95.6464).center([0,30])}function Se(e){var t=m(e);function n(e,n){return[e,(e?e/g(e):1)*(g(n)*a(e)-t*a(n))]}return n.invert=t?function(e,n){e&&(n*=g(e)/e);var r=a(e);return[e,2*o(T(r*r+t*t-n*n)-r,t-n)]}:function(e,t){return[e,F(e?t*m(e)/e:t)]},n}function Te(){return de(Se).scale(249.828).clipAngle(90)}Me.invert=function(e,t){var n=(n=t/k-1)*n;return[n>0?e*T(b/n)/2:0,F(1-n)]};var Oe=T(3);function Ne(e,t){return[Oe*e*(2*a(2*t/3)-1)/k,Oe*k*g(t/3)]}function Pe(){return t.geoProjection(Ne).scale(156.19)}function Re(e){var t=a(e);function n(e,n){return[e*t,g(n)/t]}return n.invert=function(e,n){return[e/t,F(n*t)]},n}function Be(){return de(Re).parallel(38.58).scale(195.044)}function ze(e){var t=a(e);function n(e,n){return[e*t,(1+t)*m(n/2)]}return n.invert=function(e,n){return[e/t,2*i(n/(1+t))]},n}function je(){return de(ze).scale(124.75)}function Le(e,t){var n=T(8/(3*b));return[n*e*(1-r(t)/b),n*t]}function Ie(){return t.geoProjection(Le).scale(165.664)}function Ue(e,t){var n=T(4-3*g(r(t)));return[2/T(6*b)*e*n,p(t)*T(2*b/3)*(2-n)]}function qe(){return t.geoProjection(Ue).scale(165.664)}function We(e,t){var n=T(b*(4+b));return[2/n*e*(1+T(1-4*t*t/(b*b))),4/n*t]}function He(){return t.geoProjection(We).scale(180.739)}function Ye(e,t){var n=(2+x)*g(t);t/=2;for(var i=0,o=1/0;i<10&&r(o)>v;i++){var s=a(t);t-=o=(t+g(t)*(s+2)-n)/(2*s*(1+s))}return[2/T(b*(4+b))*e*(1+a(t)),2*T(b/(4+b))*g(t)]}function Ve(){return t.geoProjection(Ye).scale(180.739)}function Ge(e,t){return[e*(1+a(t))/T(2+b),2*t/T(2+b)]}function $e(){return t.geoProjection(Ge).scale(173.044)}function Xe(e,t){for(var n=(1+x)*g(t),i=0,o=1/0;i<10&&r(o)>v;i++)t-=o=(t+g(t)-n)/(1+a(t));return n=T(2+b),[e*(1+a(t))/n,2*t/n]}function Je(){return t.geoProjection(Xe).scale(173.044)}Ne.invert=function(e,t){var n=3*F(t/(Oe*k));return[k*e/(Oe*(2*a(2*n/3)-1)),n]},Le.invert=function(e,t){var n=T(8/(3*b)),i=t/n;return[e/(n*(1-r(i)/b)),i]},Ue.invert=function(e,t){var n=2-r(t)/T(2*b/3);return[e*T(6*b)/(2*n),p(t)*F((4-n*n)/3)]},We.invert=function(e,t){var n=T(b*(4+b))/2;return[e*n/(1+T(1-t*t*(4+b)/(4*b))),t*n/2]},Ye.invert=function(e,t){var n=t*T((4+b)/b)/2,r=F(n),i=a(r);return[e/(2/T(b*(4+b))*(1+i)),F((r+n*(i+2))/(2+x))]},Ge.invert=function(e,t){var n=T(2+b),r=t*n/2;return[n*e/(1+a(r)),r]},Xe.invert=function(e,t){var n=1+x,r=T(n/2);return[2*e*r/(1+a(t*=r)),F((t+g(t))/n)]};var Qe=3+2*A;function Ze(e,t){var n=g(e/=2),r=a(e),o=T(a(t)),s=a(t/=2),u=g(t)/(s+A*r*o),l=T(2/(1+u*u)),f=T((A*s+(r+n)*o)/(A*s+(r-n)*o));return[Qe*(l*(f-1/f)-2*c(f)),Qe*(l*u*(f+1/f)-2*i(u))]}function Ke(){return t.geoProjection(Ze).scale(62.5271)}Ze.invert=function(e,t){if(!(n=W.invert(e/1.2,1.065*t)))return null;var n,o=n[0],s=n[1],u=20;e/=Qe,t/=Qe;do{var d=o/2,h=s/2,p=g(d),m=a(d),y=g(h),b=a(h),w=a(s),k=T(w),E=y/(b+A*m*k),D=E*E,C=T(2/(1+D)),M=(A*b+(m+p)*k)/(A*b+(m-p)*k),F=T(M),S=F-1/F,O=F+1/F,N=C*S-2*c(F)-e,P=C*E*O-2*i(E)-t,R=y&&_*k*p*D/y,B=(A*m*b+k)/(2*(b+A*m*k)*(b+A*m*k)*k),z=-.5*E*C*C*C,j=z*R,L=z*B,I=(I=2*b+A*k*(m-p))*I*F,U=(A*m*b*k+w)/I,q=-A*p*y/(k*I),H=S*j-2*U/F+C*(U+U/M),Y=S*L-2*q/F+C*(q+q/M),V=E*O*j-2*R/(1+D)+C*O*R+C*E*(U-U/M),G=E*O*L-2*B/(1+D)+C*O*B+C*E*(q-q/M),$=Y*V-G*H;if(!$)break;var X=(P*Y-N*G)/$,J=(N*V-P*H)/$;o-=X,s=l(-x,f(x,s-J))}while((r(X)>v||r(J)>v)&&--u>0);return r(r(s)-x)<v?[0,s]:u&&[o,s]};var et=a(35*C);function tt(e,t){var n=m(t/2);return[e*et*T(1-n*n),(1+et)*n]}function nt(){return t.geoProjection(tt).scale(137.152)}function rt(e,t){var n=t/2,r=a(n);return[2*e/k*a(t)*r*r,k*m(n)]}function it(){return t.geoProjection(rt).scale(135.264)}function ot(e){var t=1-e,n=i(b,0)[0]-i(-b,0)[0],r=T(2*(i(0,x)[1]-i(0,-x)[1])/n);function i(n,r){var i=a(r),o=g(r);return[i/(t+e*i)*n,t*r+e*o]}function o(e,t){var n=i(e,t);return[n[0]*r,n[1]/r]}function s(e){return o(0,e)[1]}return o.invert=function(n,i){var o=ee(s,i);return[n/r*(e+t/a(o)),o]},o}function at(){var e=.5,n=t.geoProjectionMutator(ot),r=n(e);return r.alpha=function(t){return arguments.length?n(e=+t):e},r.scale(168.725)}function st(e){return[e[0]/2,F(m(e[1]/2*C))*D]}function ut(e){return[2*e[0],2*i(g(e[1]*C))*D]}function ct(e){null==e&&(e=t.geoOrthographic);var n=e(),r=t.geoEquirectangular().scale(D).precision(0).clipAngle(null).translate([0,0]);function i(e){return n(st(e))}function o(e){i[e]=function(){return arguments.length?(n[e].apply(n,arguments),i):n[e]()}}return n.invert&&(i.invert=function(e){return ut(n.invert(e))}),i.stream=function(e){var t=n.stream(e),i=r.stream({point:function(e,n){t.point(e/2,F(m(-n/2*C))*D)},lineStart:function(){t.lineStart()},lineEnd:function(){t.lineEnd()},polygonStart:function(){t.polygonStart()},polygonEnd:function(){t.polygonEnd()}});return i.sphere=t.sphere,i},i.rotate=function(e){return arguments.length?(r.rotate(e),i):r.rotate()},i.center=function(e){return arguments.length?(n.center(st(e)),i):ut(n.center())},o("angle"),o("clipAngle"),o("clipExtent"),o("fitExtent"),o("fitHeight"),o("fitSize"),o("fitWidth"),o("scale"),o("translate"),o("precision"),i.scale(249.5)}function lt(e,n){var i=2*b/n,s=e*e;function u(n,u){var c=t.geoAzimuthalEquidistantRaw(n,u),l=c[0],f=c[1],d=l*l+f*f;if(d>s){var p=T(d),m=o(f,l),y=i*h(m/i),w=m-y,_=e*a(w),A=(e*g(w)-w*g(_))/(x-_),k=ft(w,A),E=(b-e)/dt(k,_,b);l=p;var D,C=50;do{l-=D=(e+dt(k,_,l)*E-p)/(k(l)*E)}while(r(D)>v&&--C>0);f=w*g(l),l<x&&(f-=A*(l-x));var M=g(y),F=a(y);c[0]=l*F-f*M,c[1]=l*M+f*F}return c}return u.invert=function(n,u){var c=n*n+u*u;if(c>s){var l=T(c),f=o(u,n),d=i*h(f/i),p=f-d;n=l*a(p),u=l*g(p);for(var m=n-x,v=g(n),w=u/v,_=n<x?1/0:0,A=10;;){var k=e*g(w),E=e*a(w),D=g(E),C=x-E,M=(k-w*D)/C,F=ft(w,M);if(r(_)<y||!--A)break;w-=_=(w*v-M*m-u)/(v-2*m*(C*(E+w*k*a(E)-D)-k*(k-w*D))/(C*C))}n=(l=e+dt(F,E,n)*(b-e)/dt(F,E,b))*a(f=d+w),u=l*g(f)}return t.geoAzimuthalEquidistantRaw.invert(n,u)},u}function ft(e,t){return function(n){var r=e*a(n);return n<x&&(r-=t),T(1+r*r)}}function dt(e,t,n){for(var r=50,i=(n-t)/r,o=e(t)+e(n),a=1,s=t;a<r;++a)o+=2*e(s+=i);return.5*o*i}function ht(){var e=6,n=30*C,r=a(n),i=g(n),s=t.geoProjectionMutator(lt),u=s(n,e),c=u.stream,l=.01,f=-a(l*C),d=g(l*C);return u.radius=function(t){return arguments.length?(r=a(n=t*C),i=g(n),s(n,e)):n*D},u.lobes=function(t){return arguments.length?s(n,e=+t):e},u.stream=function(t){var n=u.rotate(),s=c(t),l=(u.rotate([0,0]),c(t));return u.rotate(n),s.sphere=function(){l.polygonStart(),l.lineStart();for(var t=0,n=2*b/e,s=0;t<e;++t,s-=n)l.point(o(d*a(s),f)*D,F(d*g(s))*D),l.point(o(i*a(s-n/2),r)*D,F(i*g(s-n/2))*D);l.lineEnd(),l.polygonEnd()},s},u.rotate([90,-40]).scale(91.7095).clipAngle(179.999)}function pt(e,t,n,i,o,s,u,c){function l(r,l){if(!l)return[e*r/b,0];var f=l*l,d=e+f*(t+f*(n+f*i)),h=l*(o-1+f*(s-c+f*u)),p=(d*d+h*h)/(2*h),m=r*F(d/p)/b;return[p*g(m),l*(1+f*c)+p*(1-a(m))]}return arguments.length<8&&(c=0),l.invert=function(l,f){var d,h,p=b*l/e,m=f,y=50;do{var x=m*m,w=e+x*(t+x*(n+x*i)),_=m*(o-1+x*(s-c+x*u)),A=w*w+_*_,k=2*_,E=A/k,D=E*E,C=F(w/E)/b,M=p*C,S=w*w,O=(2*t+x*(4*n+6*x*i))*m,N=o+x*(3*s+5*x*u),P=(2*(w*O+_*(N-1))*k-A*(2*(N-1)))/(k*k),R=a(M),B=g(M),z=E*R,j=E*B,L=p/b*(1/T(1-S/D))*(O*E-w*P)/D,I=j-l,U=m*(1+x*c)+E-z-f,q=P*B+z*L,W=z*C,H=1+P-(P*R-j*L),Y=j*C,V=q*Y-H*W;if(!V)break;p-=d=(U*q-I*H)/V,m-=h=(I*Y-U*W)/V}while((r(d)>v||r(h)>v)&&--y>0);return[p,m]},l}tt.invert=function(e,t){var n=t/(1+et);return[e&&e/(et*T(1-n*n)),2*i(n)]},rt.invert=function(e,t){var n=i(t/k),r=a(n),o=2*n;return[e*k/2/(a(o)*r*r),o]};var gt=pt(2.8284,-1.6988,.75432,-.18071,1.76003,-.38914,.042555);function mt(){return t.geoProjection(gt).scale(149.995)}var vt=pt(2.583819,-.835827,.170354,-.038094,1.543313,-.411435,.082742);function yt(){return t.geoProjection(vt).scale(153.93)}var bt=pt(5/6*b,-.62636,-.0344,0,1.3493,-.05524,0,.045);function xt(){return t.geoProjection(bt).scale(130.945)}function wt(e,t){var n=e*e,r=t*t;return[e*(1-.162388*r)*(.87-952426e-9*n*n),t*(1+r/12)]}function _t(){return t.geoProjection(wt).scale(131.747)}wt.invert=function(e,t){var n,i=e,o=t,a=50;do{var s=o*o;o-=n=(o*(1+s/12)-t)/(1+s/4)}while(r(n)>v&&--a>0);a=50,e/=1-.162388*s;do{var u=(u=i*i)*u;i-=n=(i*(.87-952426e-9*u)-e)/(.87-.00476213*u)}while(r(n)>v&&--a>0);return[i,o]};var At=pt(2.6516,-.76534,.19123,-.047094,1.36289,-.13965,.031762);function kt(){return t.geoProjection(At).scale(131.087)}function Et(e){var t=e(x,0)[0]-e(-x,0)[0];function n(n,r){var i=n>0?-.5:.5,o=e(n+i*b,r);return o[0]-=i*t,o}return e.invert&&(n.invert=function(n,r){var i=n>0?-.5:.5,o=e.invert(n+i*t,r),a=o[0]-i*b;return a<-b?a+=2*b:a>b&&(a-=2*b),o[0]=a,o}),n}function Dt(e,t){var n=p(e),i=p(t),s=a(t),u=a(e)*s,c=g(e)*s,l=g(i*t);e=r(o(c,l)),t=F(u),r(e-x)>v&&(e%=x);var f=Ct(e>b/4?x-e:e,t);return e>b/4&&(l=f[0],f[0]=-f[1],f[1]=-l),f[0]*=n,f[1]*=-i,f}function Ct(e,t){if(t===x)return[0,0];var n,i,o=g(t),s=o*o,u=s*s,c=1+u,l=1+3*u,f=1-u,d=F(1/T(c)),h=f+s*c*d,p=(1-o)/h,m=T(p),y=p*c,w=T(y),_=m*f;if(0===e)return[0,-(_+s*w)];var A,k=a(t),E=1/k,D=2*o*k,C=(-h*k-(-3*s+d*l)*D*(1-o))/(h*h),M=-E*D,S=-E*(s*c*C+p*l*D),O=-2*E*(f*(.5*C/m)-2*s*m*D),N=4*e/b;if(e>.222*b||t<b/4&&e>.175*b){if(n=(_+s*T(y*(1+u)-_*_))/(1+u),e>b/4)return[n,n];var P=n,R=.5*n;n=.5*(R+P),i=50;do{var B=n*(O+M*T(y-n*n))+S*F(n/w)-N;if(!B)break;B<0?R=n:P=n,n=.5*(R+P)}while(r(P-R)>v&&--i>0)}else{n=v,i=25;do{var z=n*n,j=T(y-z),L=O+M*j,I=n*L+S*F(n/w)-N;n-=A=j?I/(L+(S-M*z)/j):0}while(r(A)>v&&--i>0)}return[n,-_-s*T(y-n*n)]}function Mt(e,t){for(var n=0,i=1,o=.5,s=50;;){var u=o*o,c=T(o),l=F(1/T(1+u)),f=1-u+o*(1+u)*l,d=(1-c)/f,h=T(d),p=d*(1+u),g=h*(1-u),m=T(p-e*e),v=t+g+o*m;if(r(i-n)<y||0===--s||0===v)break;v>0?n=o:i=o,o=.5*(n+i)}if(!s)return null;var x=F(c),w=a(x),_=1/w,A=2*c*w,k=(-f*w-(-3*o+l*(1+3*u))*A*(1-c))/(f*f);return[b/4*(e*(-2*_*(.5*k/h*(1-u)-2*o*h*A)+-_*A*m)+-_*(o*(1+u)*k+d*(1+3*u)*A)*F(e/T(p))),x]}function Ft(){return t.geoProjection(Et(Dt)).scale(239.75)}function St(e,t,n){var r,i,o;return e?(r=Tt(e,n),t?(o=(i=Tt(t,1-n))[1]*i[1]+n*r[0]*r[0]*i[0]*i[0],[[r[0]*i[2]/o,r[1]*r[2]*i[0]*i[1]/o],[r[1]*i[1]/o,-r[0]*r[2]*i[0]*i[2]/o],[r[2]*i[1]*i[2]/o,-n*r[0]*r[1]*i[0]/o]]):[[r[0],0],[r[1],0],[r[2],0]]):[[0,(i=Tt(t,1-n))[0]/i[1]],[1/i[1],0],[i[2]/i[1],0]]}function Tt(e,t){var n,o,u,c,l;if(t<v)return[(c=g(e))-(n=t*(e-c*(o=a(e)))/4)*o,o+n*c,1-t*c*c/2,e-n];if(t>=1-v)return n=(1-t)/4,u=1/(o=P(e)),[(c=O(e))+n*((l=o*N(e))-e)/(o*o),u-n*c*u*(l-e),u+n*c*u*(l+e),2*i(s(e))-x+n*(l-e)/o];var f=[1,0,0,0,0,0,0,0,0],d=[T(t),0,0,0,0,0,0,0,0],h=0;for(o=T(1-t),l=1;r(d[h]/f[h])>v&&h<8;)n=f[h++],d[h]=(n-o)/2,f[h]=(n+o)/2,o=T(n*o),l*=2;u=l*f[h]*e;do{u=(F(c=d[h]*g(o=u)/f[h])+u)/2}while(--h);return[g(u),c=a(u),c/a(u-o),u]}function Ot(e,t,n){var o=r(e),a=N(r(t));if(o){var s=1/g(o),u=1/(m(o)*m(o)),c=-(u+n*(a*a*s*s)-1+n),l=(-c+T(c*c-(n-1)*u*4))/2;return[Nt(i(1/T(l)),n)*p(e),Nt(i(T((l/u-1)/n)),1-n)*p(t)]}return[0,Nt(i(a),1-n)*p(t)]}function Nt(e,t){if(!t)return e;if(1===t)return c(m(e/2+w));for(var n=1,o=T(1-t),a=T(t),s=0;r(a)>v;s++){if(e%b){var u=i(o*m(e)/n);u<0&&(u+=b),e+=u+~~(e/b)*b}else e+=e;a=(n+o)/2,o=T(n*o),a=((n=a)-o)/2}return e/(d(2,s)*n)}function Pt(e,t){var n=(A-1)/(A+1),i=T(1-n*n),o=Nt(x,i*i),u=-1,l=c(m(b/4+r(t)/2)),f=s(u*l)/T(n),d=Rt(f*a(u*e),f*g(u*e)),h=Ot(d[0],d[1],i*i);return[-h[1],(t>=0?1:-1)*(.5*o-h[0])]}function Rt(e,t){var n=e*e,r=t+1,i=1-n-t*t;return[.5*((e>=0?x:-x)-o(i,2*e)),-.25*c(i*i+4*n)+.5*c(r*r+n)]}function Bt(e,t){var n=t[0]*t[0]+t[1]*t[1];return[(e[0]*t[0]+e[1]*t[1])/n,(e[1]*t[0]-e[0]*t[1])/n]}function zt(){return t.geoProjection(Et(Pt)).scale(151.496)}function jt(e){var t=g(e),n=a(e),i=Lt(e);function s(e,o){var s=i(e,o);e=s[0],o=s[1];var u=g(o),c=a(o),l=a(e),f=S(t*u+n*c*l),d=g(f),h=r(d)>v?f/d:1;return[h*n*g(e),(r(e)>x?h:-h)*(t*c-n*u*l)]}return i.invert=Lt(-e),s.invert=function(e,n){var r=T(e*e+n*n),s=-g(r),u=a(r),c=r*u,l=-n*s,f=r*t,d=T(c*c+l*l-f*f),h=o(c*f+l*d,l*f-c*d),p=(r>x?-1:1)*o(e*s,r*a(h)*u+n*g(h)*s);return i.invert(p,h)},s}function Lt(e){var t=g(e),n=a(e);return function(e,r){var i=a(r),s=a(e)*i,u=g(e)*i,c=g(r);return[o(u,s*n-c*t),F(c*n+s*t)]}}function It(){var e=0,n=t.geoProjectionMutator(jt),r=n(e),i=r.rotate,o=r.stream,a=t.geoCircle();return r.parallel=function(t){if(!arguments.length)return e*D;var i=r.rotate();return n(e=t*C).rotate(i)},r.rotate=function(t){return arguments.length?(i.call(r,[t[0],t[1]-e*D]),a.center([-t[0],-t[1]]),r):((t=i.call(r))[1]+=e*D,t)},r.stream=function(e){return(e=o(e)).sphere=function(){e.polygonStart();var t,n=.01,r=a.radius(90-n)().coordinates[0],i=r.length-1,o=-1;for(e.lineStart();++o<i;)e.point((t=r[o])[0],t[1]);for(e.lineEnd(),i=(r=a.radius(90+n)().coordinates[0]).length-1,e.lineStart();--o>=0;)e.point((t=r[o])[0],t[1]);e.lineEnd(),e.polygonEnd()},e},r.scale(79.4187).parallel(45).clipAngle(179.999)}Dt.invert=function(e,t){r(e)>1&&(e=2*p(e)-e),r(t)>1&&(t=2*p(t)-t);var n=p(e),i=p(t),s=-n*e,u=-i*t,c=u/s<1,l=Mt(c?u:s,c?s:u),f=l[0],d=l[1],h=a(d);return c&&(f=-x-f),[n*(o(g(f)*h,-g(d))+b),i*F(a(f)*h)]},Pt.invert=function(e,t){var n=(A-1)/(A+1),r=T(1-n*n),a=-1,u=St(.5*Nt(x,r*r)-t,-e,r*r),l=Bt(u[0],u[1]);return[o(l[1],l[0])/a,2*i(s(.5/a*c(n*l[0]*l[0]+n*l[1]*l[1])))-x]};var Ut=F(1-1/3)*D,qt=Re(0);function Wt(e){var t=Ut*C,n=Me(b,t)[0]-Me(-b,t)[0],i=qt(0,t)[1],o=Me(0,t)[1],a=k-o,s=E/e,c=4/E,d=i+a*a*4/E;function h(h,p){var g,m=r(p);if(m>t){var v=f(e-1,l(0,u((h+b)/s)));(g=Me(h+=b*(e-1)/e-v*s,m))[0]=g[0]*E/n-E*(e-1)/(2*e)+v*E/e,g[1]=i+4*(g[1]-o)*a/E,p<0&&(g[1]=-g[1])}else g=qt(h,p);return g[0]*=c,g[1]/=d,g}return h.invert=function(t,h){t/=c;var p=r(h*=d);if(p>i){var g=f(e-1,l(0,u((t+b)/s)));t=(t+b*(e-1)/e-g*s)*n/E;var m=Me.invert(t,.25*(p-i)*E/a+o);return m[0]-=b*(e-1)/e-g*s,h<0&&(m[1]=-m[1]),m}return qt.invert(t,h)},h}function Ht(e,t){return[e,1&t?90-v:Ut]}function Yt(e,t){return[e,1&t?-90+v:-Ut]}function Vt(e){return[e[0]*(1-v),e[1]]}function Gt(e){var t=[].concat(n.range(-180,180+e/2,e).map(Ht),n.range(180,-180-e/2,-e).map(Yt));return{type:"Polygon",coordinates:[180===e?t.map(Vt):t]}}function $t(){var e=4,n=t.geoProjectionMutator(Wt),r=n(e),i=r.stream;return r.lobes=function(t){return arguments.length?n(e=+t):e},r.stream=function(n){var o=r.rotate(),a=i(n),s=(r.rotate([0,0]),i(n));return r.rotate(o),a.sphere=function(){t.geoStream(Gt(180/e),s)},a},r.scale(239.75)}function Xt(e){var t,n=1+e,i=F(g(1/n)),s=2*T(b/(t=b+4*i*n)),u=.5*s*(n+T(e*(2+e))),c=e*e,l=n*n;function f(f,d){var h,p,m=1-g(d);if(m&&m<2){var v,w=x-d,_=25;do{var A=g(w),k=a(w),E=i+o(A,n-k),D=1+l-2*n*k;w-=v=(w-c*i-n*A+D*E-.5*m*t)/(2*n*A*E)}while(r(v)>y&&--_>0);h=s*T(D),p=f*E/b}else h=s*(e+m),p=f*i/b;return[h*g(p),u-h*a(p)]}return f.invert=function(e,r){var a=e*e+(r-=u)*r,f=(1+l-a/(s*s))/(2*n),d=S(f),h=g(d),p=i+o(h,n-f);return[F(e/T(a))*b/p,F(1-2*(d-c*i-n*h+(1+l-2*n*f)*p)/t)]},f}function Jt(){var e=1,n=t.geoProjectionMutator(Xt),r=n(e);return r.ratio=function(t){return arguments.length?n(e=+t):e},r.scale(167.774).center([0,18.67])}var Qt=.7109889596207567,Zt=.0528035274542;function Kt(e,t){return t>-Qt?((e=ae(e,t))[1]+=Zt,e):he(e,t)}function en(){return t.geoProjection(Kt).rotate([-20,-55]).scale(164.263).center([0,-5.4036])}function tn(e,t){return r(t)>Qt?((e=ae(e,t))[1]-=t>0?Zt:-Zt,e):he(e,t)}function nn(){return t.geoProjection(tn).scale(152.63)}function rn(e,t,n,r){var i=T(4*b/(2*n+(1+e-t/2)*g(2*n)+(e+t)/2*g(4*n)+t/2*g(6*n))),o=T(r*g(n)*T((1+e*a(2*n)+t*a(4*n))/(1+e+t))),s=n*c(1);function u(n){return T(1+e*a(2*n)+t*a(4*n))}function c(r){var i=r*n;return(2*i+(1+e-t/2)*g(2*i)+(e+t)/2*g(4*i)+t/2*g(6*i))/n}function l(e){return u(e)*g(e)}var f=function(e,t){var r=n*ee(c,s*g(t)/n,t/b);isNaN(r)&&(r=n*p(t));var l=i*u(r);return[l*o*e/b*a(r),l/o*g(r)]};return f.invert=function(e,t){var r=ee(l,t*o/i);return[e*b/(a(r)*i*o*u(r)),F(n*c(r/n)/s)]},0===n&&(i=T(r/b),(f=function(e,t){return[e*i,g(t)/i]}).invert=function(e,t){return[e/i,F(t*i)]}),f}function on(){var e=1,n=0,r=45*C,i=2,o=t.geoProjectionMutator(rn),a=o(e,n,r,i);return a.a=function(t){return arguments.length?o(e=+t,n,r,i):e},a.b=function(t){return arguments.length?o(e,n=+t,r,i):n},a.psiMax=function(t){return arguments.length?o(e,n,r=+t*C,i):r*D},a.ratio=function(t){return arguments.length?o(e,n,r,i=+t):i},a.scale(180.739)}function an(e,t,n,r,i,o,a,s,u,c,l){if(l.nanEncountered)return NaN;var f,d,h,p,g,m,v,y,b,x;if(d=e(t+.25*(f=n-t)),h=e(n-.25*f),isNaN(d))l.nanEncountered=!0;else{if(!isNaN(h))return x=((m=(p=f*(r+4*d+i)/12)+(g=f*(i+4*h+o)/12))-a)/15,c>u?(l.maxDepthCount++,m+x):Math.abs(x)<s?m+x:(y=an(e,t,v=t+.5*f,r,d,i,p,.5*s,u,c+1,l),isNaN(y)?(l.nanEncountered=!0,NaN):(b=an(e,v,n,i,h,o,g,.5*s,u,c+1,l),isNaN(b)?(l.nanEncountered=!0,NaN):y+b));l.nanEncountered=!0}}function sn(e,t,n,r,i){var o={maxDepthCount:0,nanEncountered:!1};void 0===r&&(r=1e-8),void 0===i&&(i=20);var a=e(t),s=e(.5*(t+n)),u=e(n);return an(e,t,n,a,s,u,(a+4*s+u)*(n-t)/6,r,i,1,o)}function un(e,t,n){function i(n){return e+(1-e)*d(1-d(n,t),1/t)}function o(e){return sn(i,0,e,1e-4)}for(var a=1/o(1),s=1e3,u=(1+1e-8)*a,c=[],l=0;l<=s;l++)c.push(o(l/s)*u);function f(e){var t=0,n=s,r=s>>1;do{c[r]>e?n=r:t=r,r=t+n>>1}while(r>t);var i=c[r+1]-c[r];return i&&(i=(e-c[r+1])/i),(r+1+i)/s}var h=2*f(1)/b*a/n,m=function(e,t){var n=f(r(g(t))),o=i(n)*e;return n/=h,[o,t>=0?n:-n]};return m.invert=function(e,t){var n;return r(t*=h)<1&&(n=p(t)*F(o(r(t))*a)),[e/i(r(t)),n]},m}function cn(){var e=0,n=2.5,r=1.183136,i=t.geoProjectionMutator(un),o=i(e,n,r);return o.alpha=function(t){return arguments.length?i(e=+t,n,r):e},o.k=function(t){return arguments.length?i(e,n=+t,r):n},o.gamma=function(t){return arguments.length?i(e,n,r=+t):r},o.scale(152.63)}function ln(e,t){return r(e[0]-t[0])<v&&r(e[1]-t[1])<v}function fn(e,t){for(var n,r,i,o=-1,a=e.length,s=e[0],u=[];++o<a;){r=((n=e[o])[0]-s[0])/t,i=(n[1]-s[1])/t;for(var c=0;c<t;++c)u.push([s[0]+c*r,s[1]+c*i]);s=n}return u.push(n),u}function dn(e){var t,r,i,o,a,s,u,c=[],l=e[0].length;for(u=0;u<l;++u)r=(t=e[0][u])[0][0],i=t[0][1],o=t[1][1],a=t[2][0],s=t[2][1],c.push(fn([[r+v,i+v],[r+v,o-v],[a-v,o-v],[a-v,s+v]],30));for(u=e[1].length-1;u>=0;--u)r=(t=e[1][u])[0][0],i=t[0][1],o=t[1][1],a=t[2][0],s=t[2][1],c.push(fn([[a-v,s-v],[a-v,o+v],[r+v,o+v],[r+v,i-v]],30));return{type:"Polygon",coordinates:[n.merge(c)]}}function hn(e,n,r){var i,o;function a(t,r){for(var i=r<0?-1:1,o=n[+(r<0)],a=0,s=o.length-1;a<s&&t>o[a][2][0];++a);var u=e(t-o[a][1][0],r);return u[0]+=e(o[a][1][0],i*r>i*o[a][0][1]?o[a][0][1]:r)[0],u}r?a.invert=r(a):e.invert&&(a.invert=function(t,r){for(var i=o[+(r<0)],s=n[+(r<0)],u=0,c=i.length;u<c;++u){var l=i[u];if(l[0][0]<=t&&t<l[1][0]&&l[0][1]<=r&&r<l[1][1]){var f=e.invert(t-e(s[u][1][0],0)[0],r);return f[0]+=s[u][1][0],ln(a(f[0],f[1]),[t,r])?f:null}}});var s=t.geoProjection(a),u=s.stream;return s.stream=function(e){var n=s.rotate(),r=u(e),o=(s.rotate([0,0]),u(e));return s.rotate(n),r.sphere=function(){t.geoStream(i,o)},r},s.lobes=function(t){return arguments.length?(i=dn(t),n=t.map((function(e){return e.map((function(e){return[[e[0][0]*C,e[0][1]*C],[e[1][0]*C,e[1][1]*C],[e[2][0]*C,e[2][1]*C]]}))})),o=n.map((function(t){return t.map((function(t){var n,r=e(t[0][0],t[0][1])[0],i=e(t[2][0],t[2][1])[0],o=e(t[1][0],t[0][1])[1],a=e(t[1][0],t[1][1])[1];return o>a&&(n=o,o=a,a=n),[[r,o],[i,a]]}))})),s):n.map((function(e){return e.map((function(e){return[[e[0][0]*D,e[0][1]*D],[e[1][0]*D,e[1][1]*D],[e[2][0]*D,e[2][1]*D]]}))}))},null!=n&&s.lobes(n),s}Kt.invert=function(e,t){return t>-Qt?ae.invert(e,t-Zt):he.invert(e,t)},tn.invert=function(e,t){return r(t)>Qt?ae.invert(e,t+(t>0?Zt:-Zt)):he.invert(e,t)};var pn=[[[[-180,0],[-100,90],[-40,0]],[[-40,0],[30,90],[180,0]]],[[[-180,0],[-160,-90],[-100,0]],[[-100,0],[-60,-90],[-20,0]],[[-20,0],[20,-90],[80,0]],[[80,0],[140,-90],[180,0]]]];function gn(){return hn(le,pn).scale(160.857)}var mn=[[[[-180,0],[-100,90],[-40,0]],[[-40,0],[30,90],[180,0]]],[[[-180,0],[-160,-90],[-100,0]],[[-100,0],[-60,-90],[-20,0]],[[-20,0],[20,-90],[80,0]],[[80,0],[140,-90],[180,0]]]];function vn(){return hn(tn,mn).scale(152.63)}var yn=[[[[-180,0],[-100,90],[-40,0]],[[-40,0],[30,90],[180,0]]],[[[-180,0],[-160,-90],[-100,0]],[[-100,0],[-60,-90],[-20,0]],[[-20,0],[20,-90],[80,0]],[[80,0],[140,-90],[180,0]]]];function bn(){return hn(ae,yn).scale(169.529)}var xn=[[[[-180,0],[-90,90],[0,0]],[[0,0],[90,90],[180,0]]],[[[-180,0],[-90,-90],[0,0]],[[0,0],[90,-90],[180,0]]]];function wn(){return hn(ae,xn).scale(169.529).rotate([20,0])}var _n=[[[[-180,35],[-30,90],[0,35]],[[0,35],[30,90],[180,35]]],[[[-180,-10],[-102,-90],[-65,-10]],[[-65,-10],[5,-90],[77,-10]],[[77,-10],[103,-90],[180,-10]]]];function An(){return hn(Kt,_n,te).rotate([-20,-55]).scale(164.263).center([0,-5.4036])}var kn=[[[[-180,0],[-110,90],[-40,0]],[[-40,0],[0,90],[40,0]],[[40,0],[110,90],[180,0]]],[[[-180,0],[-110,-90],[-40,0]],[[-40,0],[0,-90],[40,0]],[[40,0],[110,-90],[180,0]]]];function En(){return hn(he,kn).scale(152.63).rotate([-20,0])}function Dn(e,t){return[3/E*e*T(b*b/3-t*t),t]}function Cn(){return t.geoProjection(Dn).scale(158.837)}function Mn(e){function t(t,n){if(r(r(n)-x)<v)return[0,n<0?-2:2];var i=g(n),o=d((1+i)/(1-i),e/2),s=.5*(o+1/o)+a(t*=e);return[2*g(t)/s,(o-1/o)/s]}return t.invert=function(t,n){var i=r(n);if(r(i-2)<v)return t?null:[0,p(n)*x];if(i>2)return null;var a=(t/=2)*t,s=(n/=2)*n,u=2*n/(1+a+s);return u=d((1+u)/(1-u),1/e),[o(2*t,1-a-s)/e,F((u-1)/(u+1))]},t}function Fn(){var e=.5,n=t.geoProjectionMutator(Mn),r=n(e);return r.spacing=function(t){return arguments.length?n(e=+t):e},r.scale(124.75)}Dn.invert=function(e,t){return[E/3*e/T(b*b/3-t*t),t]};var Sn=b/A;function Tn(e,t){return[e*(1+T(a(t)))/2,t/(a(t/2)*a(e/6))]}function On(){return t.geoProjection(Tn).scale(97.2672)}function Nn(e,t){var n=e*e,r=t*t;return[e*(.975534+r*(-.0143059*n-.119161+-.0547009*r)),t*(1.00384+n*(.0802894+-.02855*r+199025e-9*n)+r*(.0998909+-.0491032*r))]}function Pn(){return t.geoProjection(Nn).scale(139.98)}function Rn(e,t){return[g(e)/a(t),m(t)*a(e)]}function Bn(){return t.geoProjection(Rn).scale(144.049).clipAngle(89.999)}function zn(e){var t=a(e),n=m(w+e/2);function i(i,o){var a=o-e,s=r(a)<v?i*t:r(s=w+o/2)<v||r(r(s)-x)<v?0:i*a/c(m(s)/n);return[s,a]}return i.invert=function(i,o){var a,s=o+e;return[r(o)<v?i/t:r(a=w+s/2)<v||r(r(a)-x)<v?0:i*c(m(a)/n)/o,s]},i}function jn(){return de(zn).parallel(40).scale(158.837)}function Ln(e,t){return[e,1.25*c(m(w+.4*t))]}function In(){return t.geoProjection(Ln).scale(108.318)}function Un(e){var t=e.length-1;function n(n,r){for(var i,o=a(r),s=2/(1+o*a(n)),u=s*o*g(n),c=s*g(r),l=t,f=e[l],d=f[0],h=f[1];--l>=0;)d=(f=e[l])[0]+u*(i=d)-c*h,h=f[1]+u*h+c*i;return[d=u*(i=d)-c*h,h=u*h+c*i]}return n.invert=function(n,s){var u=20,c=n,l=s;do{for(var f,d=t,h=e[d],p=h[0],m=h[1],y=0,b=0;--d>=0;)y=p+c*(f=y)-l*b,b=m+c*b+l*f,p=(h=e[d])[0]+c*(f=p)-l*m,m=h[1]+c*m+l*f;var x,w,_=(y=p+c*(f=y)-l*b)*y+(b=m+c*b+l*f)*b;c-=x=((p=c*(f=p)-l*m-n)*y+(m=c*m+l*f-s)*b)/_,l-=w=(m*y-p*b)/_}while(r(x)+r(w)>v*v&&--u>0);if(u){var A=T(c*c+l*l),k=2*i(.5*A),E=g(k);return[o(c*E,A*a(k)),A?F(l*E/A):0]}},n}Tn.invert=function(e,t){var n=r(e),i=r(t),o=v,s=x;i<Sn?s*=i/Sn:o+=6*S(Sn/i);for(var u=0;u<25;u++){var c=g(s),l=T(a(s)),f=g(s/2),d=a(s/2),h=g(o/6),p=a(o/6),m=.5*o*(1+l)-n,y=s/(d*p)-i,b=l?-.25*o*c/l:0,w=.5*(1+l),_=(1+.5*s*f/d)/(d*p),A=s/d*(h/6)/(p*p),k=b*A-_*w,E=(m*A-y*w)/k,D=(y*b-m*_)/k;if(s-=E,o-=D,r(E)<v&&r(D)<v)break}return[e<0?-o:o,t<0?-s:s]},Nn.invert=function(e,t){var n=p(e)*b,i=t/2,o=50;do{var a=n*n,s=i*i,u=n*i,c=n*(.975534+s*(-.0143059*a-.119161+-.0547009*s))-e,l=i*(1.00384+a*(.0802894+-.02855*s+199025e-9*a)+s*(.0998909+-.0491032*s))-t,f=.975534-s*(.119161+3*a*.0143059+.0547009*s),d=-u*(.238322+.2188036*s+.0286118*a),h=u*(.1605788+7961e-7*a+-.0571*s),g=1.00384+a*(.0802894+199025e-9*a)+s*(3*(.0998909-.02855*a)-.245516*s),m=d*h-g*f,y=(l*d-c*g)/m,x=(c*h-l*f)/m;n-=y,i-=x}while((r(y)>v||r(x)>v)&&--o>0);return o&&[n,i]},Rn.invert=function(e,t){var n=e*e,r=t*t+1,i=n+r,o=e?_*T((i-T(i*i-4*n))/n):1/T(r);return[F(e*o),p(t)*S(o)]},Ln.invert=function(e,t){return[e,2.5*i(s(.8*t))-.625*b]};var qn=[[.9972523,0],[.0052513,-.0041175],[.0074606,.0048125],[-.0153783,-.1968253],[.0636871,-.1408027],[.3660976,-.2937382]],Wn=[[.98879,0],[0,0],[-.050909,0],[0,0],[.075528,0]],Hn=[[.984299,0],[.0211642,.0037608],[-.1036018,-.0575102],[-.0329095,-.0320119],[.0499471,.1223335],[.026046,.0899805],[7388e-7,-.1435792],[.0075848,-.1334108],[-.0216473,.0776645],[-.0225161,.0853673]],Yn=[[.9245,0],[0,0],[.01943,0]],Vn=[[.721316,0],[0,0],[-.00881625,-.00617325]];function Gn(){return Zn(qn,[152,-64]).scale(1400).center([-160.908,62.4864]).clipAngle(30).angle(7.8)}function $n(){return Zn(Wn,[95,-38]).scale(1e3).clipAngle(55).center([-96.5563,38.8675])}function Xn(){return Zn(Hn,[120,-45]).scale(359.513).clipAngle(55).center([-117.474,53.0628])}function Jn(){return Zn(Yn,[-20,-18]).scale(209.091).center([20,16.7214]).clipAngle(82)}function Qn(){return Zn(Vn,[165,10]).scale(250).clipAngle(130).center([-165,-10])}function Zn(e,n){var r=t.geoProjection(Un(e)).rotate(n).clipAngle(90),i=t.geoRotation(n),o=r.center;return delete r.rotate,r.center=function(e){return arguments.length?o(i(e)):i.invert(o())},r}var Kn=T(6),er=T(7);function tr(e,t){var n=F(7*g(t)/(3*Kn));return[Kn*e*(2*a(2*n/3)-1)/er,9*g(n/3)/er]}function nr(){return t.geoProjection(tr).scale(164.859)}function rr(e,t){for(var n,i=(1+_)*g(t),o=t,s=0;s<25&&(o-=n=(g(o/2)+g(o)-i)/(.5*a(o/2)+a(o)),!(r(n)<v));s++);return[e*(1+2*a(o)/a(o/2))/(3*A),2*T(3)*g(o/2)/T(2+A)]}function ir(){return t.geoProjection(rr).scale(188.209)}function or(e,t){for(var n,i=T(6/(4+b)),o=(1+b/4)*g(t),s=t/2,u=0;u<25&&(s-=n=(s/2+g(s)-o)/(.5+a(s)),!(r(n)<v));u++);return[i*(.5+a(s))*e/1.5,i*s]}function ar(){return t.geoProjection(or).scale(166.518)}function sr(e,t){var n=t*t,r=n*n,i=n*r;return[e*(.84719-.13063*n+i*i*(.05494*n-.04515-.02326*r+.00331*i)),t*(1.01183+r*r*(.01926*n-.02625-.00396*r))]}function ur(){return t.geoProjection(sr).scale(175.295)}function cr(e,t){return[e*(1+a(t))/2,2*(t-m(t/2))]}function lr(){return t.geoProjection(cr).scale(152.63)}tr.invert=function(e,t){var n=3*F(t*er/9);return[e*er/(Kn*(2*a(2*n/3)-1)),F(3*g(n)*Kn/7)]},rr.invert=function(e,t){var n=t*T(2+A)/(2*T(3)),r=2*F(n);return[3*A*e/(1+2*a(r)/a(r/2)),F((n+g(r))/(1+_))]},or.invert=function(e,t){var n=T(6/(4+b)),i=t/n;return r(r(i)-x)<v&&(i=i<0?-x:x),[1.5*e/(n*(.5+a(i))),F((i/2+g(i))/(1+b/4))]},sr.invert=function(e,t){var n,i,o,a,s=t,u=25;do{s-=n=(s*(1.01183+(o=(i=s*s)*i)*o*(.01926*i-.02625-.00396*o))-t)/(1.01183+o*o*(.21186*i-.23625+-.05148*o))}while(r(n)>y&&--u>0);return[e/(.84719-.13063*(i=s*s)+(a=i*(o=i*i))*a*(.05494*i-.04515-.02326*o+.00331*a)),s]},cr.invert=function(e,t){for(var n=t/2,i=0,o=1/0;i<10&&r(o)>v;++i){var s=a(t/2);t-=o=(t-m(t/2)-n)/(1-.5/(s*s))}return[2*e/(1+a(t)),t]};var fr=[[[[-180,0],[-90,90],[0,0]],[[0,0],[90,90],[180,0]]],[[[-180,0],[-90,-90],[0,0]],[[0,0],[90,-90],[180,0]]]];function dr(){return hn(Q(1/0),fr).rotate([20,0]).scale(152.63)}function hr(e,t){var n=g(t),i=a(t),o=p(e);if(0===e||r(t)===x)return[0,t];if(0===t)return[e,0];if(r(e)===x)return[e*i,x*n];var s=b/(2*e)-2*e/b,u=2*t/b,c=(1-u*u)/(n-u),l=s*s,f=c*c,d=1+l/f,h=1+f/l,m=(s*n/c-s/2)/d,v=(f*n/l+c/2)/h,y=v*v-(f*n*n/l+c*n-1)/h;return[x*(m+T(m*m+i*i/d)*o),x*(v+T(y<0?0:y)*p(-t*s)*o)]}function pr(){return t.geoProjection(hr).scale(127.267)}hr.invert=function(e,t){var n=(e/=x)*e,r=n+(t/=x)*t,i=b*b;return[e?(r-1+T((1-r)*(1-r)+4*n))/(2*e)*x:0,ee((function(e){return r*(b*g(e)-2*e)*b+4*e*e*(t-g(e))+2*b*e-i*t}),0)]};var gr=1.0148,mr=.23185,vr=-.14499,yr=.02406,br=gr,xr=5*mr,wr=7*vr,_r=9*yr,Ar=1.790857183;function kr(e,t){var n=t*t;return[e,t*(gr+n*n*(mr+n*(vr+yr*n)))]}function Er(){return t.geoProjection(kr).scale(139.319)}function Dr(e,t){if(r(t)<v)return[e,0];var n=m(t),i=e*g(t);return[g(i)/n,t+(1-a(i))/n]}function Cr(){return t.geoProjection(Dr).scale(103.74)}function Mr(e,t){var n=Tr(e[1],e[0]),r=Tr(t[1],t[0]),i=Nr(n,r),o=Or(n)/Or(r);return Sr([1,0,e[0][0],0,1,e[0][1]],Sr([o,0,0,0,o,0],Sr([a(i),g(i),0,-g(i),a(i),0],[1,0,-t[0][0],0,1,-t[0][1]])))}function Fr(e){var t=1/(e[0]*e[4]-e[1]*e[3]);return[t*e[4],-t*e[1],t*(e[1]*e[5]-e[2]*e[4]),-t*e[3],t*e[0],t*(e[2]*e[3]-e[0]*e[5])]}function Sr(e,t){return[e[0]*t[0]+e[1]*t[3],e[0]*t[1]+e[1]*t[4],e[0]*t[2]+e[1]*t[5]+e[2],e[3]*t[0]+e[4]*t[3],e[3]*t[1]+e[4]*t[4],e[3]*t[2]+e[4]*t[5]+e[5]]}function Tr(e,t){return[e[0]-t[0],e[1]-t[1]]}function Or(e){return T(e[0]*e[0]+e[1]*e[1])}function Nr(e,t){return o(e[0]*t[1]-e[1]*t[0],e[0]*t[0]+e[1]*t[1])}function Pr(e,n){function r(e,t){if(e.edges=jr(e.face),t.face){var n=e.shared=zr(e.face,t.face),i=Mr(n.map(t.project),n.map(e.project));e.transform=t.transform?Sr(t.transform,i):i;for(var o=t.edges,a=0,s=o.length;a<s;++a)Br(n[0],o[a][1])&&Br(n[1],o[a][0])&&(o[a]=e),Br(n[0],o[a][0])&&Br(n[1],o[a][1])&&(o[a]=e);for(a=0,s=(o=e.edges).length;a<s;++a)Br(n[0],o[a][0])&&Br(n[1],o[a][1])&&(o[a]=t),Br(n[0],o[a][1])&&Br(n[1],o[a][0])&&(o[a]=t)}else e.transform=t.transform;return e.children&&e.children.forEach((function(t){r(t,e)})),e}function i(e,t){var r,i=n(e,t),o=i.project([e*D,t*D]);return(r=i.transform)?[r[0]*o[0]+r[1]*o[1]+r[2],-(r[3]*o[0]+r[4]*o[1]+r[5])]:(o[1]=-o[1],o)}function o(e,t){var n=e.project.invert,r=e.transform,i=t;if(r&&(i=[(r=Fr(r))[0]*i[0]+r[1]*i[1]+r[2],r[3]*i[0]+r[4]*i[1]+r[5]]),n&&e===a(s=n(i)))return s;for(var s,u=e.children,c=0,l=u&&u.length;c<l;++c)if(s=o(u[c],t))return s}function a(e){return n(e[0]*C,e[1]*C)}r(e,{transform:null}),Lr(e)&&(i.invert=function(t,n){var r=o(e,[t,-n]);return r&&(r[0]*=C,r[1]*=C,r)});var s=t.geoProjection(i),u=s.stream;return s.stream=function(t){var n=s.rotate(),r=u(t),i=(s.rotate([0,0]),u(t));return s.rotate(n),r.sphere=function(){i.polygonStart(),i.lineStart(),Rr(i,e),i.lineEnd(),i.polygonEnd()},r},s.angle(-30)}function Rr(e,n,i){var o,a,s=n.edges,u=s.length,c={type:"MultiPoint",coordinates:n.face},l=n.face.filter((function(e){return 90!==r(e[1])})),f=t.geoBounds({type:"MultiPoint",coordinates:l}),d=!1,h=-1,p=f[1][0]-f[0][0],g=180===p||360===p?[(f[0][0]+f[1][0])/2,(f[0][1]+f[1][1])/2]:t.geoCentroid(c);if(i)for(;++h<u&&s[h]!==i;);++h;for(var m=0;m<u;++m)a=s[(m+h)%u],Array.isArray(a)?(d||(e.point((o=t.geoInterpolate(a[0],g)(v))[0],o[1]),d=!0),e.point((o=t.geoInterpolate(a[1],g)(v))[0],o[1])):(d=!1,a!==i&&Rr(e,a,n))}function Br(e,t){return e&&t&&e[0]===t[0]&&e[1]===t[1]}function zr(e,t){for(var n,r,i=e.length,o=null,a=0;a<i;++a){n=e[a];for(var s=t.length;--s>=0;)if(r=t[s],n[0]===r[0]&&n[1]===r[1]){if(o)return[o,n];o=n}}}function jr(e){for(var t=e.length,n=[],r=e[t-1],i=0;i<t;++i)n.push([r,r=e[i]]);return n}function Lr(e){return e.project.invert||e.children&&e.children.some(Lr)}kr.invert=function(e,t){t>Ar?t=Ar:t<-Ar&&(t=-Ar);var n,i=t;do{var o=i*i;i-=n=(i*(gr+o*o*(mr+o*(vr+yr*o)))-t)/(br+o*o*(xr+o*(wr+_r*o)))}while(r(n)>v);return[e,i]},Dr.invert=function(e,t){if(r(t)<v)return[e,0];var n,i=e*e+t*t,o=.5*t,s=10;do{var u=m(o),c=1/a(o),l=i-2*t*o+o*o;o-=n=(u*l+2*(o-t))/(2+l*c*c+2*(o-t)*u)}while(r(n)>v&&--s>0);return u=m(o),[(r(t)<r(o+1/u)?F(e*u):p(t)*p(e)*(S(r(e*u))+x))/g(o),o]};var Ir=[[0,90],[-90,0],[0,0],[90,0],[180,0],[0,-90]],Ur=[[0,2,1],[0,3,2],[5,1,2],[5,2,3],[0,1,4],[0,4,3],[5,4,1],[5,3,4]].map((function(e){return e.map((function(e){return Ir[e]}))}));function qr(e){e=e||function(e){var n=t.geoCentroid({type:"MultiPoint",coordinates:e});return t.geoGnomonic().scale(1).translate([0,0]).rotate([-n[0],-n[1]])};var n=Ur.map((function(t){return{face:t,project:e(t)}}));return[-1,0,0,1,0,1,4,5].forEach((function(e,t){var r=n[e];r&&(r.children||(r.children=[])).push(n[t])})),Pr(n[0],(function(e,t){return n[e<-b/2?t<0?6:4:e<0?t<0?2:0:e<b/2?t<0?3:1:t<0?7:5]})).angle(-30).scale(101.858).center([0,45])}var Wr=2/T(3);function Hr(e,t){var n=Me(e,t);return[n[0]*Wr,n[1]]}function Yr(e){e=e||function(e){var n=t.geoCentroid({type:"MultiPoint",coordinates:e});return t.geoProjection(Hr).translate([0,0]).scale(1).rotate(n[1]>0?[-n[0],0]:[180-n[0],180])};var n=Ur.map((function(t){return{face:t,project:e(t)}}));return[-1,0,0,1,0,1,4,5].forEach((function(e,t){var r=n[e];r&&(r.children||(r.children=[])).push(n[t])})),Pr(n[0],(function(e,t){return n[e<-b/2?t<0?6:4:e<0?t<0?2:0:e<b/2?t<0?3:1:t<0?7:5]})).angle(-30).scale(121.906).center([0,48.5904])}function Vr(e){e=e||function(e){var n=6===e.length?t.geoCentroid({type:"MultiPoint",coordinates:e}):e[0];return t.geoGnomonic().scale(1).translate([0,0]).rotate([-n[0],-n[1]])};var n=Ur.map((function(e){for(var t,n=e.map(Jr),r=n.length,i=n[r-1],o=[],a=0;a<r;++a)t=n[a],o.push(Xr([.9486832980505138*i[0]+.31622776601683794*t[0],.9486832980505138*i[1]+.31622776601683794*t[1],.9486832980505138*i[2]+.31622776601683794*t[2]]),Xr([.9486832980505138*t[0]+.31622776601683794*i[0],.9486832980505138*t[1]+.31622776601683794*i[1],.9486832980505138*t[2]+.31622776601683794*i[2]])),i=t;return o})),r=[],i=[-1,0,0,1,0,1,4,5];n.forEach((function(e,t){for(var o=Ur[t],a=o.length,s=r[t]=[],u=0;u<a;++u)n.push([o[u],e[(2*u+2)%(2*a)],e[(2*u+1)%(2*a)]]),i.push(t),s.push($r(Jr(e[(2*u+2)%(2*a)]),Jr(e[(2*u+1)%(2*a)])))}));var o=n.map((function(t){return{project:e(t),face:t}}));function s(e,t){var n=a(t),i=[n*a(e),n*g(e),g(t)],s=e<-b/2?t<0?6:4:e<0?t<0?2:0:e<b/2?t<0?3:1:t<0?7:5,u=r[s];return o[Gr(u[0],i)<0?8+3*s:Gr(u[1],i)<0?8+3*s+1:Gr(u[2],i)<0?8+3*s+2:s]}return i.forEach((function(e,t){var n=o[e];n&&(n.children||(n.children=[])).push(o[t])})),Pr(o[0],s).angle(-30).scale(110.625).center([0,45])}function Gr(e,t){for(var n=0,r=e.length,i=0;n<r;++n)i+=e[n]*t[n];return i}function $r(e,t){return[e[1]*t[2]-e[2]*t[1],e[2]*t[0]-e[0]*t[2],e[0]*t[1]-e[1]*t[0]]}function Xr(e){return[o(e[1],e[0])*D,F(l(-1,f(1,e[2])))*D]}function Jr(e){var t=e[0]*C,n=e[1]*C,r=a(n);return[r*a(t),r*g(t),g(n)]}Hr.invert=function(e,t){return Me.invert(e/Wr,t)};var Qr=()=>{};function Zr(e){if((t=e.length)<4)return!1;for(var t,n=0,r=e[t-1][1]*e[0][0]-e[t-1][0]*e[0][1];++n<t;)r+=e[n-1][1]*e[n][0]-e[n-1][0]*e[n][1];return r<=0}function Kr(e,t){for(var n=t[0],r=t[1],i=!1,o=0,a=e.length,s=a-1;o<a;s=o++){var u=e[o],c=u[0],l=u[1],f=e[s],d=f[0],h=f[1];l>r^h>r&&n<(d-c)*(r-l)/(h-l)+c&&(i=!i)}return i}function ei(e,t){var n,r=t.stream;if(!r)throw new Error("invalid projection");switch(e&&e.type){case"Feature":n=ni;break;case"FeatureCollection":n=ti;break;default:n=ii}return n(e,r)}function ti(e,t){return{type:"FeatureCollection",features:e.features.map((function(e){return ni(e,t)}))}}function ni(e,t){return{type:"Feature",id:e.id,properties:e.properties,geometry:ii(e.geometry,t)}}function ri(e,t){return{type:"GeometryCollection",geometries:e.geometries.map((function(e){return ii(e,t)}))}}function ii(e,n){if(!e)return null;if("GeometryCollection"===e.type)return ri(e,n);var r;switch(e.type){case"Point":case"MultiPoint":r=si;break;case"LineString":case"MultiLineString":r=ui;break;case"Polygon":case"MultiPolygon":case"Sphere":r=ci;break;default:return null}return t.geoStream(e,n(r)),r.result()}var oi=[],ai=[],si={point:function(e,t){oi.push([e,t])},result:function(){var e=oi.length?oi.length<2?{type:"Point",coordinates:oi[0]}:{type:"MultiPoint",coordinates:oi}:null;return oi=[],e}},ui={lineStart:Qr,point:function(e,t){oi.push([e,t])},lineEnd:function(){oi.length&&(ai.push(oi),oi=[])},result:function(){var e=ai.length?ai.length<2?{type:"LineString",coordinates:ai[0]}:{type:"MultiLineString",coordinates:ai}:null;return ai=[],e}},ci={polygonStart:Qr,lineStart:Qr,point:function(e,t){oi.push([e,t])},lineEnd:function(){var e=oi.length;if(e){do{oi.push(oi[0].slice())}while(++e<4);ai.push(oi),oi=[]}},polygonEnd:Qr,result:function(){if(!ai.length)return null;var e=[],t=[];return ai.forEach((function(n){Zr(n)?e.push([n]):t.push(n)})),t.forEach((function(t){var n=t[0];e.some((function(e){if(Kr(e[0],n))return e.push(t),!0}))||e.push([t])})),ai=[],e.length?e.length>1?{type:"MultiPolygon",coordinates:e}:{type:"Polygon",coordinates:e[0]}:null}};function li(e){var n=e(x,0)[0]-e(-x,0)[0];function i(t,i){var o=r(t)<x,a=e(o?t:t>0?t-b:t+b,i),s=(a[0]-a[1])*_,u=(a[0]+a[1])*_;if(o)return[s,u];var c=n*_,l=s>0^u>0?-1:1;return[l*s-p(u)*c,l*u-p(s)*c]}return e.invert&&(i.invert=function(t,i){var o=(t+i)*_,a=(i-t)*_,s=r(o)<.5*n&&r(a)<.5*n;if(!s){var u=n*_,c=o>0^a>0?-1:1,l=-c*t+(a>0?1:-1)*u,f=-c*i+(o>0?1:-1)*u;o=(-l-f)*_,a=(l-f)*_}var d=e.invert(o,a);return s||(d[0]+=o>0?b:-b),d}),t.geoProjection(i).rotate([-90,-90,45]).clipAngle(179.999)}function fi(){return li(Dt).scale(176.423)}function di(){return li(Pt).scale(111.48)}function hi(e,t){if(!(0<=(t=+t)&&t<=20))throw new Error("invalid digits");function n(e){var n=e.length,r=2,i=new Array(n);for(i[0]=+e[0].toFixed(t),i[1]=+e[1].toFixed(t);r<n;)i[r]=e[r],++r;return i}function r(e){return e.map(n)}function i(e){for(var t=n(e[0]),r=[t],i=1;i<e.length;i++){var o=n(e[i]);(o.length>2||o[0]!=t[0]||o[1]!=t[1])&&(r.push(o),t=o)}return 1===r.length&&e.length>1&&r.push(n(e[e.length-1])),r}function o(e){return e.map(i)}function a(e){if(null==e)return e;var t;switch(e.type){case"GeometryCollection":t={type:"GeometryCollection",geometries:e.geometries.map(a)};break;case"Point":t={type:"Point",coordinates:n(e.coordinates)};break;case"MultiPoint":t={type:e.type,coordinates:r(e.coordinates)};break;case"LineString":t={type:e.type,coordinates:i(e.coordinates)};break;case"MultiLineString":case"Polygon":t={type:e.type,coordinates:o(e.coordinates)};break;case"MultiPolygon":t={type:"MultiPolygon",coordinates:e.coordinates.map(o)};break;default:return e}return null!=e.bbox&&(t.bbox=e.bbox),t}function s(e){var t={type:"Feature",properties:e.properties,geometry:a(e.geometry)};return null!=e.id&&(t.id=e.id),null!=e.bbox&&(t.bbox=e.bbox),t}if(null!=e)switch(e.type){case"Feature":return s(e);case"FeatureCollection":var u={type:"FeatureCollection",features:e.features.map(s)};return null!=e.bbox&&(u.bbox=e.bbox),u;default:return a(e)}return e}function pi(e){var t=g(e);function n(n,r){var o=t?m(n*t/2)/t:n/2;if(!r)return[2*o,-e];var s=2*i(o*g(r)),u=1/m(r);return[g(s)*u,r+(1-a(s))*u-e]}return n.invert=function(n,o){if(r(o+=e)<v)return[t?2*i(t*n/2)/t:n,0];var s,u=n*n+o*o,c=0,l=10;do{var f=m(c),d=1/a(c),h=u-2*o*c+c*c;c-=s=(f*h+2*(c-o))/(2+h*d*d+2*(c-o)*f)}while(r(s)>v&&--l>0);var p=n*(f=m(c)),y=m(r(o)<r(c+1/f)?.5*F(p):.5*S(p)+b/4)/g(c);return[t?2*i(t*y)/t:2*y,c]},n}function gi(){return de(pi).scale(131.215)}var mi=[[.9986,-.062],[1,0],[.9986,.062],[.9954,.124],[.99,.186],[.9822,.248],[.973,.31],[.96,.372],[.9427,.434],[.9216,.4958],[.8962,.5571],[.8679,.6176],[.835,.6769],[.7986,.7346],[.7597,.7903],[.7186,.8435],[.6732,.8936],[.6213,.9394],[.5722,.9761],[.5322,1]];function vi(e,t){var n,i=f(18,36*r(t)/b),o=u(i),a=i-o,s=(n=mi[o])[0],c=n[1],l=(n=mi[++o])[0],d=n[1],h=(n=mi[f(19,++o)])[0],p=n[1];return[e*(l+a*(h-s)/2+a*a*(h-2*l+s)/2),(t>0?x:-x)*(d+a*(p-c)/2+a*a*(p-2*d+c)/2)]}function yi(){return t.geoProjection(vi).scale(152.63)}function bi(e){function t(t,n){var r=a(n),i=(e-1)/(e-r*a(t));return[i*r*g(t),i*g(n)]}return t.invert=function(t,n){var r=t*t+n*n,i=T(r),a=(e-T(1-r*(e+1)/(e-1)))/((e-1)/i+i/(e-1));return[o(t*a,i*T(1-a*a)),i?F(n*a/i):0]},t}function xi(e,t){var n=bi(e);if(!t)return n;var r=a(t),i=g(t);function o(t,o){var a=n(t,o),s=a[1],u=s*i/(e-1)+r;return[a[0]*r/u,s/u]}return o.invert=function(t,o){var a=(e-1)/(e-1-o*i);return n.invert(a*t,a*o*r)},o}function wi(){var e=2,n=0,r=t.geoProjectionMutator(xi),i=r(e,n);return i.distance=function(t){return arguments.length?r(e=+t,n):e},i.tilt=function(t){return arguments.length?r(e,n=t*C):n*D},i.scale(432.147).clipAngle(S(1/e)*D-1e-6)}mi.forEach((function(e){e[1]*=1.0144})),vi.invert=function(e,t){var n=t/x,i=90*n,o=f(18,r(i/5)),a=l(0,u(o));do{var s=mi[a][1],c=mi[a+1][1],d=mi[f(19,a+2)][1],h=d-s,p=d-2*c+s,g=2*(r(n)-c)/h,m=p/h,v=g*(1-m*g*(1-2*m*g));if(v>=0||1===a){i=(t>=0?5:-5)*(v+o);var b,w=50;do{v=(o=f(18,r(i)/5))-(a=u(o)),s=mi[a][1],c=mi[a+1][1],d=mi[f(19,a+2)][1],i-=(b=(t>=0?x:-x)*(c+v*(d-s)/2+v*v*(d-2*c+s)/2)-t)*D}while(r(b)>y&&--w>0);break}}while(--a>=0);var _=mi[a][0],A=mi[a+1][0],k=mi[f(19,a+2)][0];return[e/(A+v*(k-_)/2+v*v*(k-2*A+_)/2),i*C]};var _i=1e-4,Ai=1e4,ki=-180,Ei=ki+_i,Di=180,Ci=Di-_i,Mi=-90,Fi=Mi+_i,Si=90,Ti=Si-_i;function Oi(e){return e.length>0}function Ni(e){return Math.floor(e*Ai)/Ai}function Pi(e){return e===Mi||e===Si?[0,e]:[ki,Ni(e)]}function Ri(e){var t=e[0],n=e[1],r=!1;return t<=Ei?(t=ki,r=!0):t>=Ci&&(t=Di,r=!0),n<=Fi?(n=Mi,r=!0):n>=Ti&&(n=Si,r=!0),r?[t,n]:e}function Bi(e){return e.map(Ri)}function zi(e,t,n){for(var r=0,i=e.length;r<i;++r){var o=e[r].slice();n.push({index:-1,polygon:t,ring:o});for(var a=0,s=o.length;a<s;++a){var u=o[a],c=u[0],l=u[1];if(c<=Ei||c>=Ci||l<=Fi||l>=Ti){o[a]=Ri(u);for(var f=a+1;f<s;++f){var d=o[f],h=d[0],p=d[1];if(h>Ei&&h<Ci&&p>Fi&&p<Ti)break}if(f===a+1)continue;if(a){var g={index:-1,polygon:t,ring:o.slice(0,a+1)};g.ring[g.ring.length-1]=Pi(l),n[n.length-1]=g}else n.pop();if(f>=s)break;n.push({index:-1,polygon:t,ring:o=o.slice(f-1)}),o[0]=Pi(o[0][1]),a=-1,s=o.length}}}}function ji(e){var t,n,r,i,o,a,s=e.length,u={},c={};for(t=0;t<s;++t)r=(n=e[t]).ring[0],o=n.ring[n.ring.length-1],r[0]!==o[0]||r[1]!==o[1]?(n.index=t,u[r]=c[o]=n):(n.polygon.push(n.ring),e[t]=null);for(t=0;t<s;++t)if(n=e[t]){if(r=n.ring[0],o=n.ring[n.ring.length-1],i=c[r],a=u[o],delete u[r],delete c[o],r[0]===o[0]&&r[1]===o[1]){n.polygon.push(n.ring);continue}i?(delete c[r],delete u[i.ring[0]],i.ring.pop(),e[i.index]=null,n={index:-1,polygon:i.polygon,ring:i.ring.concat(n.ring)},i===a?n.polygon.push(n.ring):(n.index=s++,e.push(u[n.ring[0]]=c[n.ring[n.ring.length-1]]=n))):a?(delete u[o],delete c[a.ring[a.ring.length-1]],n.ring.pop(),n={index:s++,polygon:a.polygon,ring:n.ring.concat(a.ring)},e[a.index]=null,e.push(u[n.ring[0]]=c[n.ring[n.ring.length-1]]=n)):(n.ring.push(n.ring[0]),n.polygon.push(n.ring))}}function Li(e){var t={type:"Feature",geometry:Ii(e.geometry)};return null!=e.id&&(t.id=e.id),null!=e.bbox&&(t.bbox=e.bbox),null!=e.properties&&(t.properties=e.properties),t}function Ii(e){if(null==e)return e;var t,n,r,i;switch(e.type){case"GeometryCollection":t={type:"GeometryCollection",geometries:e.geometries.map(Ii)};break;case"Point":t={type:"Point",coordinates:Ri(e.coordinates)};break;case"MultiPoint":case"LineString":t={type:e.type,coordinates:Bi(e.coordinates)};break;case"MultiLineString":t={type:"MultiLineString",coordinates:e.coordinates.map(Bi)};break;case"Polygon":var o=[];zi(e.coordinates,o,n=[]),ji(n),t={type:"Polygon",coordinates:o};break;case"MultiPolygon":n=[],r=-1,i=e.coordinates.length;for(var a=new Array(i);++r<i;)zi(e.coordinates[r],a[r]=[],n);ji(n),t={type:"MultiPolygon",coordinates:a.filter(Oi)};break;default:return e}return null!=e.bbox&&(t.bbox=e.bbox),t}function Ui(e){if(null==e)return e;switch(e.type){case"Feature":return Li(e);case"FeatureCollection":var t={type:"FeatureCollection",features:e.features.map(Li)};return null!=e.bbox&&(t.bbox=e.bbox),t;default:return Ii(e)}}function qi(e,t){var n=m(t/2),r=g(w*n);return[e*(.74482-.34588*r*r),1.70711*n]}function Wi(){return t.geoProjection(qi).scale(146.153)}function Hi(e,n,r){var i=t.geoInterpolate(n,r),o=i(.5),a=t.geoRotation([-o[0],-o[1]])(n),s=i.distance/2,u=-F(g(a[1]*C)/g(s)),c=[-o[0],-o[1],-(a[0]>0?b-u:u)*D],l=t.geoProjection(e(s)).rotate(c),f=t.geoRotation(c),d=l.center;return delete l.rotate,l.center=function(e){return arguments.length?d(f(e)):f.invert(d())},l.clipAngle(90)}function Yi(e){var n=a(e);function r(e,r){var i=t.geoGnomonicRaw(e,r);return i[0]*=n,i}return r.invert=function(e,r){return t.geoGnomonicRaw.invert(e/n,r)},r}function Vi(){return Gi([-158,21.5],[-77,39]).clipAngle(60).scale(400)}function Gi(e,t){return Hi(Yi,e,t)}function $i(e){if(!(e*=2))return t.geoAzimuthalEquidistantRaw;var n=-e/2,r=-n,i=e*e,s=m(r),u=.5/g(r);function c(t,o){var s=S(a(o)*a(t-n)),u=S(a(o)*a(t-r));return[((s*=s)-(u*=u))/(2*e),(o<0?-1:1)*T(4*i*u-(i-s+u)*(i-s+u))/(2*e)]}return c.invert=function(e,t){var i,c,l=t*t,f=a(T(l+(i=e+n)*i)),d=a(T(l+(i=e+r)*i));return[o(c=f-d,i=(f+d)*s),(t<0?-1:1)*S(T(i*i+c*c)*u)]},c}function Xi(){return Ji([-158,21.5],[-77,39]).clipAngle(130).scale(122.571)}function Ji(e,t){return Hi($i,e,t)}function Qi(e,t){if(r(t)<v)return[e,0];var n=r(t/x),i=F(n);if(r(e)<v||r(r(t)-x)<v)return[0,p(t)*b*m(i/2)];var o=a(i),s=r(b/e-e/b)/2,u=s*s,c=o/(n+o-1),l=c*(2/n-1),f=l*l,d=f+u,h=c-f,g=u+c;return[p(e)*b*(s*h+T(u*h*h-d*(c*c-f)))/d,p(t)*b*(l*g-s*T((u+1)*d-g*g))/d]}function Zi(){return t.geoProjection(Qi).scale(79.4183)}function Ki(e,t){if(r(t)<v)return[e,0];var n=r(t/x),i=F(n);if(r(e)<v||r(r(t)-x)<v)return[0,p(t)*b*m(i/2)];var o=a(i),s=r(b/e-e/b)/2,u=s*s,c=o*(T(1+u)-s*o)/(1+u*n*n);return[p(e)*b*c,p(t)*b*T(1-c*(2*s+c))]}function eo(){return t.geoProjection(Ki).scale(79.4183)}function to(e,t){if(r(t)<v)return[e,0];var n=t/x,i=F(n);if(r(e)<v||r(r(t)-x)<v)return[0,b*m(i/2)];var o=(b/e-e/b)/2,s=n/(1+a(i));return[b*(p(e)*T(o*o+1-s*s)-o),b*s]}function no(){return t.geoProjection(to).scale(79.4183)}function ro(e,t){if(!t)return[e,0];var n=r(t);if(!e||n===x)return[0,t];var i=n/x,o=i*i,a=(8*i-o*(o+2)-5)/(2*o*(i-1)),s=a*a,u=i*a,c=o+s+2*u,l=i+3*a,f=e/x,d=f+1/f,h=p(r(e)-x)*T(d*d-4),g=h*h,m=(h*(c+s-1)+2*T(c*(o+s*g-1)+(1-o)*(o*(l*l+4*s)+12*u*s+4*s*s)))/(4*c+g);return[p(e)*x*m,p(t)*x*T(1+h*r(m)-m*m)]}function io(){return t.geoProjection(ro).scale(127.16)}function oo(e,t,n,r,i){function s(o,s){var u=n*g(r*s),c=T(1-u*u),l=T(2/(1+c*a(o*=i)));return[e*c*l*g(o),t*u*l]}return s.invert=function(a,s){var u=a/e,c=s/t,l=T(u*u+c*c),f=2*F(l/2);return[o(a*m(f),e*l)/i,l&&F(s*g(f)/(t*n*l))/r]},s}function ao(e,t,n,r){var i=b/3;e=l(e,v),t=l(t,v),e=f(e,x),t=f(t,b-v),n=l(n,0),n=f(n,100-v);var o=(r=l(r,v))/100,s=S((n/100+1)*a(i))/i,u=g(e)/g(s*x),c=t/b,d=T(o*g(e/2)/g(t/2));return oo(d/T(c*u*s),1/(d*T(c*u*s)),u,s,c)}function so(){var e=65*C,n=60*C,r=20,i=200,o=t.geoProjectionMutator(ao),a=o(e,n,r,i);return a.poleline=function(t){return arguments.length?o(e=+t*C,n,r,i):e*D},a.parallels=function(t){return arguments.length?o(e,n=+t*C,r,i):n*D},a.inflation=function(t){return arguments.length?o(e,n,r=+t,i):r},a.ratio=function(t){return arguments.length?o(e,n,r,i=+t):i},a.scale(163.775)}function uo(){return so().poleline(65).parallels(60).inflation(0).ratio(200).scale(172.633)}qi.invert=function(e,t){var n=t/1.70711,r=g(w*n);return[e/(.74482-.34588*r*r),2*i(n)]},Qi.invert=function(e,t){if(r(t)<v)return[e,0];if(r(e)<v)return[0,x*g(2*i(t/b))];var n=(e/=b)*e,o=(t/=b)*t,s=n+o,u=s*s,c=-r(t)*(1+s),l=c-2*o+n,f=-2*c+1+2*o+u,d=o/f+(2*l*l*l/(f*f*f)-9*c*l/(f*f))/27,h=(c-l*l/(3*f))/f,m=2*T(-h/3),y=S(3*d/(h*m))/3;return[b*(s-1+T(1+2*(n-o)+u))/(2*e),p(t)*b*(-m*a(y+b/3)-l/(3*f))]},Ki.invert=function(e,t){if(!e)return[0,x*g(2*i(t/b))];var n=r(e/b),a=(1-n*n-(t/=b)*t)/(2*n),s=T(a*a+1);return[p(e)*b*(s-a),p(t)*x*g(2*o(T((1-2*a*n)*(a+s)-n),T(s+a+n)))]},to.invert=function(e,t){if(!t)return[e,0];var n=t/b,r=(b*b*(1-n*n)-e*e)/(2*b*e);return[e?b*(p(e)*T(r*r+1)-r):0,x*g(2*i(n))]},ro.invert=function(e,t){var n;if(!e||!t)return[e,t];var i=p(t);t=r(t)/b;var o=p(e)*e/x,a=(o*o-1+4*t*t)/r(o),s=a*a,u=t*(2-(t>.5?f(t,r(e)):0)),c=e*e+t*t,l=50;do{var d=u*u,h=(8*u-d*(d+2)-5)/(2*d*(u-1)),g=(3*u-d*u-10)/(2*d*u),m=h*h,y=u*h,w=u+h,_=w*w,A=u+3*h,k=-2*w*(4*y*m+(1-4*d+3*d*d)*(1+g)+m*(14*d-6-s+(8*d-8-2*s)*g)+y*(12*d-8+(10*d-10-s)*g)),E=T(_*(d+m*s-1)+(1-d)*(d*(A*A+4*m)+m*(12*y+4*m)));u-=n=(a*(_+m-1)+2*E-o*(4*_+s))/(a*(2*h*g+2*w*(1+g))+k/E-8*w*(a*(-1+m+_)+2*E)*(1+g)/(s+4*_))}while(n*c*c>v&&--l>0);return[p(e)*(T(a*a+4)+a)*b/4,i*x*u]};var co=4*b+3*T(3),lo=2*T(2*b*T(3)/co),fo=oe(lo*T(3)/b,lo,co/6);function ho(){return t.geoProjection(fo).scale(176.84)}function po(e,t){return[e*T(1-3*t*t/(b*b)),t]}function go(){return t.geoProjection(po).scale(152.63)}function mo(e,t){var n=a(t),r=a(e)*n,i=1-r,s=a(e=o(g(e)*n,-g(t))),u=g(e);return[u*(n=T(1-r*r))-s*i,-s*n-u*i]}function vo(){return t.geoProjection(mo).rotate([0,-90,45]).scale(124.75).clipAngle(179.999)}function yo(e,t){var n=L(e,t);return[(n[0]+e/x)/2,(n[1]+t)/2]}function bo(){return t.geoProjection(yo).scale(158.837)}po.invert=function(e,t){return[e/T(1-3*t*t/(b*b)),t]},mo.invert=function(e,t){var n=(e*e+t*t)/-2,r=T(-n*(2+n)),i=t*n+e*r,a=e*n-t*r,s=T(a*a+i*i);return[o(r*i,s*(1+n)),s?-F(r*a/s):0]},yo.invert=function(e,t){var n=e,i=t,o=25;do{var s,u=a(i),c=g(i),l=g(2*i),f=c*c,d=u*u,h=g(n),p=a(n/2),m=g(n/2),y=m*m,b=1-d*p*p,w=b?S(u*p)*T(s=1/b):s=0,_=.5*(2*w*u*m+n/x)-e,A=.5*(w*c+i)-t,k=.5*s*(d*y+w*u*p*f)+.5/x,E=s*(h*l/4-w*c*m),D=.125*s*(l*m-w*c*d*h),C=.5*s*(f*p+w*y*u)+.5,M=E*D-C*k,F=(A*E-_*C)/M,O=(_*D-A*k)/M;n-=F,i-=O}while((r(F)>v||r(O)>v)&&--o>0);return[n,i]},e.geoAiry=j,e.geoAiryRaw=z,e.geoAitoff=I,e.geoAitoffRaw=L,e.geoArmadillo=q,e.geoArmadilloRaw=U,e.geoAugust=H,e.geoAugustRaw=W,e.geoBaker=$,e.geoBakerRaw=G,e.geoBerghaus=J,e.geoBerghausRaw=X,e.geoBertin1953=re,e.geoBertin1953Raw=ne,e.geoBoggs=fe,e.geoBoggsRaw=le,e.geoBonne=me,e.geoBonneRaw=ge,e.geoBottomley=ye,e.geoBottomleyRaw=ve,e.geoBromley=xe,e.geoBromleyRaw=be,e.geoChamberlin=Ce,e.geoChamberlinRaw=ke,e.geoChamberlinAfrica=De,e.geoCollignon=Fe,e.geoCollignonRaw=Me,e.geoCraig=Te,e.geoCraigRaw=Se,e.geoCraster=Pe,e.geoCrasterRaw=Ne,e.geoCylindricalEqualArea=Be,e.geoCylindricalEqualAreaRaw=Re,e.geoCylindricalStereographic=je,e.geoCylindricalStereographicRaw=ze,e.geoEckert1=Ie,e.geoEckert1Raw=Le,e.geoEckert2=qe,e.geoEckert2Raw=Ue,e.geoEckert3=He,e.geoEckert3Raw=We,e.geoEckert4=Ve,e.geoEckert4Raw=Ye,e.geoEckert5=$e,e.geoEckert5Raw=Ge,e.geoEckert6=Je,e.geoEckert6Raw=Xe,e.geoEisenlohr=Ke,e.geoEisenlohrRaw=Ze,e.geoFahey=nt,e.geoFaheyRaw=tt,e.geoFoucaut=it,e.geoFoucautRaw=rt,e.geoFoucautSinusoidal=at,e.geoFoucautSinusoidalRaw=ot,e.geoGilbert=ct,e.geoGingery=ht,e.geoGingeryRaw=lt,e.geoGinzburg4=mt,e.geoGinzburg4Raw=gt,e.geoGinzburg5=yt,e.geoGinzburg5Raw=vt,e.geoGinzburg6=xt,e.geoGinzburg6Raw=bt,e.geoGinzburg8=_t,e.geoGinzburg8Raw=wt,e.geoGinzburg9=kt,e.geoGinzburg9Raw=At,e.geoGringorten=Ft,e.geoGringortenRaw=Dt,e.geoGuyou=zt,e.geoGuyouRaw=Pt,e.geoHammer=K,e.geoHammerRaw=Q,e.geoHammerRetroazimuthal=It,e.geoHammerRetroazimuthalRaw=jt,e.geoHealpix=$t,e.geoHealpixRaw=Wt,e.geoHill=Jt,e.geoHillRaw=Xt,e.geoHomolosine=nn,e.geoHomolosineRaw=tn,e.geoHufnagel=on,e.geoHufnagelRaw=rn,e.geoHyperelliptical=cn,e.geoHyperellipticalRaw=un,e.geoInterrupt=hn,e.geoInterruptedBoggs=gn,e.geoInterruptedHomolosine=vn,e.geoInterruptedMollweide=bn,e.geoInterruptedMollweideHemispheres=wn,e.geoInterruptedSinuMollweide=An,e.geoInterruptedSinusoidal=En,e.geoKavrayskiy7=Cn,e.geoKavrayskiy7Raw=Dn,e.geoLagrange=Fn,e.geoLagrangeRaw=Mn,e.geoLarrivee=On,e.geoLarriveeRaw=Tn,e.geoLaskowski=Pn,e.geoLaskowskiRaw=Nn,e.geoLittrow=Bn,e.geoLittrowRaw=Rn,e.geoLoximuthal=jn,e.geoLoximuthalRaw=zn,e.geoMiller=In,e.geoMillerRaw=Ln,e.geoModifiedStereographic=Zn,e.geoModifiedStereographicRaw=Un,e.geoModifiedStereographicAlaska=Gn,e.geoModifiedStereographicGs48=$n,e.geoModifiedStereographicGs50=Xn,e.geoModifiedStereographicMiller=Jn,e.geoModifiedStereographicLee=Qn,e.geoMollweide=se,e.geoMollweideRaw=ae,e.geoMtFlatPolarParabolic=nr,e.geoMtFlatPolarParabolicRaw=tr,e.geoMtFlatPolarQuartic=ir,e.geoMtFlatPolarQuarticRaw=rr,e.geoMtFlatPolarSinusoidal=ar,e.geoMtFlatPolarSinusoidalRaw=or,e.geoNaturalEarth2=ur,e.geoNaturalEarth2Raw=sr,e.geoNellHammer=lr,e.geoNellHammerRaw=cr,e.geoInterruptedQuarticAuthalic=dr,e.geoNicolosi=pr,e.geoNicolosiRaw=hr,e.geoPatterson=Er,e.geoPattersonRaw=kr,e.geoPolyconic=Cr,e.geoPolyconicRaw=Dr,e.geoPolyhedral=Pr,e.geoPolyhedralButterfly=qr,e.geoPolyhedralCollignon=Yr,e.geoPolyhedralWaterman=Vr,e.geoProject=ei,e.geoGringortenQuincuncial=fi,e.geoPeirceQuincuncial=di,e.geoQuantize=hi,e.geoQuincuncial=li,e.geoRectangularPolyconic=gi,e.geoRectangularPolyconicRaw=pi,e.geoRobinson=yi,e.geoRobinsonRaw=vi,e.geoSatellite=wi,e.geoSatelliteRaw=xi,e.geoSinuMollweide=en,e.geoSinuMollweideRaw=Kt,e.geoSinusoidal=pe,e.geoSinusoidalRaw=he,e.geoStitch=Ui,e.geoTimes=Wi,e.geoTimesRaw=qi,e.geoTwoPointAzimuthal=Gi,e.geoTwoPointAzimuthalRaw=Yi,e.geoTwoPointAzimuthalUsa=Vi,e.geoTwoPointEquidistant=Ji,e.geoTwoPointEquidistantRaw=$i,e.geoTwoPointEquidistantUsa=Xi,e.geoVanDerGrinten=Zi,e.geoVanDerGrintenRaw=Qi,e.geoVanDerGrinten2=eo,e.geoVanDerGrinten2Raw=Ki,e.geoVanDerGrinten3=no,e.geoVanDerGrinten3Raw=to,e.geoVanDerGrinten4=io,e.geoVanDerGrinten4Raw=ro,e.geoWagner=so,e.geoWagner7=uo,e.geoWagnerRaw=ao,e.geoWagner4=ho,e.geoWagner4Raw=fo,e.geoWagner6=go,e.geoWagner6Raw=po,e.geoWiechel=vo,e.geoWiechelRaw=mo,e.geoWinkel3=bo,e.geoWinkel3Raw=yo,Object.defineProperty(e,"__esModule",{value:!0})}(t,n(1370),n(1190))},2345:function(e,t,n){!function(e){"use strict";function t(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function n(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function r(){}var i=.7,o=1/i,a="\\s*([+-]?\\d+)\\s*",s="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",u="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",c=/^#([0-9a-f]{3,8})$/,l=new RegExp("^rgb\\("+[a,a,a]+"\\)$"),f=new RegExp("^rgb\\("+[u,u,u]+"\\)$"),d=new RegExp("^rgba\\("+[a,a,a,s]+"\\)$"),h=new RegExp("^rgba\\("+[u,u,u,s]+"\\)$"),p=new RegExp("^hsl\\("+[s,u,u]+"\\)$"),g=new RegExp("^hsla\\("+[s,u,u,s]+"\\)$"),m={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function v(){return this.rgb().formatHex()}function y(){return S(this).formatHsl()}function b(){return this.rgb().formatRgb()}function x(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=c.exec(e))?(n=t[1].length,t=parseInt(t[1],16),6===n?w(t):3===n?new E(t>>8&15|t>>4&240,t>>4&15|240&t,(15&t)<<4|15&t,1):8===n?_(t>>24&255,t>>16&255,t>>8&255,(255&t)/255):4===n?_(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|240&t,((15&t)<<4|15&t)/255):null):(t=l.exec(e))?new E(t[1],t[2],t[3],1):(t=f.exec(e))?new E(255*t[1]/100,255*t[2]/100,255*t[3]/100,1):(t=d.exec(e))?_(t[1],t[2],t[3],t[4]):(t=h.exec(e))?_(255*t[1]/100,255*t[2]/100,255*t[3]/100,t[4]):(t=p.exec(e))?F(t[1],t[2]/100,t[3]/100,1):(t=g.exec(e))?F(t[1],t[2]/100,t[3]/100,t[4]):m.hasOwnProperty(e)?w(m[e]):"transparent"===e?new E(NaN,NaN,NaN,0):null}function w(e){return new E(e>>16&255,e>>8&255,255&e,1)}function _(e,t,n,r){return r<=0&&(e=t=n=NaN),new E(e,t,n,r)}function A(e){return e instanceof r||(e=x(e)),e?new E((e=e.rgb()).r,e.g,e.b,e.opacity):new E}function k(e,t,n,r){return 1===arguments.length?A(e):new E(e,t,n,null==r?1:r)}function E(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}function D(){return"#"+M(this.r)+M(this.g)+M(this.b)}function C(){var e=this.opacity;return(1===(e=isNaN(e)?1:Math.max(0,Math.min(1,e)))?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(1===e?")":", "+e+")")}function M(e){return((e=Math.max(0,Math.min(255,Math.round(e)||0)))<16?"0":"")+e.toString(16)}function F(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new O(e,t,n,r)}function S(e){if(e instanceof O)return new O(e.h,e.s,e.l,e.opacity);if(e instanceof r||(e=x(e)),!e)return new O;if(e instanceof O)return e;var t=(e=e.rgb()).r/255,n=e.g/255,i=e.b/255,o=Math.min(t,n,i),a=Math.max(t,n,i),s=NaN,u=a-o,c=(a+o)/2;return u?(s=t===a?(n-i)/u+6*(n<i):n===a?(i-t)/u+2:(t-n)/u+4,u/=c<.5?a+o:2-a-o,s*=60):u=c>0&&c<1?0:s,new O(s,u,c,e.opacity)}function T(e,t,n,r){return 1===arguments.length?S(e):new O(e,t,n,null==r?1:r)}function O(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}function N(e,t,n){return 255*(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)}t(r,x,{copy:function(e){return Object.assign(new this.constructor,this,e)},displayable:function(){return this.rgb().displayable()},hex:v,formatHex:v,formatHsl:y,formatRgb:b,toString:b}),t(E,k,n(r,{brighter:function(e){return e=null==e?o:Math.pow(o,e),new E(this.r*e,this.g*e,this.b*e,this.opacity)},darker:function(e){return e=null==e?i:Math.pow(i,e),new E(this.r*e,this.g*e,this.b*e,this.opacity)},rgb:function(){return this},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:D,formatHex:D,formatRgb:C,toString:C})),t(O,T,n(r,{brighter:function(e){return e=null==e?o:Math.pow(o,e),new O(this.h,this.s,this.l*e,this.opacity)},darker:function(e){return e=null==e?i:Math.pow(i,e),new O(this.h,this.s,this.l*e,this.opacity)},rgb:function(){var e=this.h%360+360*(this.h<0),t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,i=2*n-r;return new E(N(e>=240?e-240:e+120,i,r),N(e,i,r),N(e<120?e+240:e-120,i,r),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var e=this.opacity;return(1===(e=isNaN(e)?1:Math.max(0,Math.min(1,e)))?"hsl(":"hsla(")+(this.h||0)+", "+100*(this.s||0)+"%, "+100*(this.l||0)+"%"+(1===e?")":", "+e+")")}}));const P=Math.PI/180,R=180/Math.PI,B=18,z=.96422,j=1,L=.82521,I=4/29,U=6/29,q=3*U*U,W=U*U*U;function H(e){if(e instanceof G)return new G(e.l,e.a,e.b,e.opacity);if(e instanceof te)return ne(e);e instanceof E||(e=A(e));var t,n,r=Q(e.r),i=Q(e.g),o=Q(e.b),a=$((.2225045*r+.7168786*i+.0606169*o)/j);return r===i&&i===o?t=n=a:(t=$((.4360747*r+.3850649*i+.1430804*o)/z),n=$((.0139322*r+.0971045*i+.7141733*o)/L)),new G(116*a-16,500*(t-a),200*(a-n),e.opacity)}function Y(e,t){return new G(e,0,0,null==t?1:t)}function V(e,t,n,r){return 1===arguments.length?H(e):new G(e,t,n,null==r?1:r)}function G(e,t,n,r){this.l=+e,this.a=+t,this.b=+n,this.opacity=+r}function $(e){return e>W?Math.pow(e,1/3):e/q+I}function X(e){return e>U?e*e*e:q*(e-I)}function J(e){return 255*(e<=.0031308?12.92*e:1.055*Math.pow(e,1/2.4)-.055)}function Q(e){return(e/=255)<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)}function Z(e){if(e instanceof te)return new te(e.h,e.c,e.l,e.opacity);if(e instanceof G||(e=H(e)),0===e.a&&0===e.b)return new te(NaN,0<e.l&&e.l<100?0:NaN,e.l,e.opacity);var t=Math.atan2(e.b,e.a)*R;return new te(t<0?t+360:t,Math.sqrt(e.a*e.a+e.b*e.b),e.l,e.opacity)}function K(e,t,n,r){return 1===arguments.length?Z(e):new te(n,t,e,null==r?1:r)}function ee(e,t,n,r){return 1===arguments.length?Z(e):new te(e,t,n,null==r?1:r)}function te(e,t,n,r){this.h=+e,this.c=+t,this.l=+n,this.opacity=+r}function ne(e){if(isNaN(e.h))return new G(e.l,0,0,e.opacity);var t=e.h*P;return new G(e.l,Math.cos(t)*e.c,Math.sin(t)*e.c,e.opacity)}t(G,V,n(r,{brighter:function(e){return new G(this.l+B*(null==e?1:e),this.a,this.b,this.opacity)},darker:function(e){return new G(this.l-B*(null==e?1:e),this.a,this.b,this.opacity)},rgb:function(){var e=(this.l+16)/116,t=isNaN(this.a)?e:e+this.a/500,n=isNaN(this.b)?e:e-this.b/200;return new E(J(3.1338561*(t=z*X(t))-1.6168667*(e=j*X(e))-.4906146*(n=L*X(n))),J(-.9787684*t+1.9161415*e+.033454*n),J(.0719453*t-.2289914*e+1.4052427*n),this.opacity)}})),t(te,ee,n(r,{brighter:function(e){return new te(this.h,this.c,this.l+B*(null==e?1:e),this.opacity)},darker:function(e){return new te(this.h,this.c,this.l-B*(null==e?1:e),this.opacity)},rgb:function(){return ne(this).rgb()}}));var re=-.14861,ie=1.78277,oe=-.29227,ae=-.90649,se=1.97294,ue=se*ae,ce=se*ie,le=ie*oe-ae*re;function fe(e){if(e instanceof he)return new he(e.h,e.s,e.l,e.opacity);e instanceof E||(e=A(e));var t=e.r/255,n=e.g/255,r=e.b/255,i=(le*r+ue*t-ce*n)/(le+ue-ce),o=r-i,a=(se*(n-i)-oe*o)/ae,s=Math.sqrt(a*a+o*o)/(se*i*(1-i)),u=s?Math.atan2(a,o)*R-120:NaN;return new he(u<0?u+360:u,s,i,e.opacity)}function de(e,t,n,r){return 1===arguments.length?fe(e):new he(e,t,n,null==r?1:r)}function he(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}t(he,de,n(r,{brighter:function(e){return e=null==e?o:Math.pow(o,e),new he(this.h,this.s,this.l*e,this.opacity)},darker:function(e){return e=null==e?i:Math.pow(i,e),new he(this.h,this.s,this.l*e,this.opacity)},rgb:function(){var e=isNaN(this.h)?0:(this.h+120)*P,t=+this.l,n=isNaN(this.s)?0:this.s*t*(1-t),r=Math.cos(e),i=Math.sin(e);return new E(255*(t+n*(re*r+ie*i)),255*(t+n*(oe*r+ae*i)),255*(t+n*(se*r)),this.opacity)}})),e.color=x,e.cubehelix=de,e.gray=Y,e.hcl=ee,e.hsl=T,e.lab=V,e.lch=K,e.rgb=k,Object.defineProperty(e,"__esModule",{value:!0})}(t)},2346:function(e,t,n){!function(e,t,n,r){"use strict";const i={center:r.forceCenter,collide:r.forceCollide,nbody:r.forceManyBody,link:r.forceLink,x:r.forceX,y:r.forceY},o="forces",a=["alpha","alphaMin","alphaTarget","velocityDecay","forces"],s=["static","iterations"],u=["x","y","vx","vy"];function c(e){t.Transform.call(this,null,e)}function l(e,t){return()=>e.touch(t).run()}function f(e,t){const n=r.forceSimulation(e),i=n.stop,o=n.restart;let a=!1;return n.stopped=()=>a,n.restart=()=>(a=!1,o()),n.stop=()=>(a=!0,i()),d(n,t,!0).on("end",(()=>a=!0))}function d(e,t,r,i){var s,u,c,l,f=n.array(t.forces);for(s=0,u=a.length;s<u;++s)(c=a[s])!==o&&t.modified(c)&&e[c](t[c]);for(s=0,u=f.length;s<u;++s)l=o+s,(c=r||t.modified(o,s)?p(f[s]):i&&h(f[s],i)?e.force(l):null)&&e.force(l,c);for(u=e.numForces||0;s<u;++s)e.force(o+s,null);return e.numForces=f.length,e}function h(e,t){var r,i;for(r in e)if(n.isFunction(i=e[r])&&t.modified(n.accessorFields(i)))return 1;return 0}function p(e){var t,r;for(r in n.hasOwnProperty(i,e.force)||n.error("Unrecognized force: "+e.force),t=i[e.force](),e)n.isFunction(t[r])&&g(t[r],e[r],e);return t}function g(e,t,r){e(n.isFunction(t)?e=>t(e,r):t)}c.Definition={type:"Force",metadata:{modifies:!0},params:[{name:"static",type:"boolean",default:!1},{name:"restart",type:"boolean",default:!1},{name:"iterations",type:"number",default:300},{name:"alpha",type:"number",default:1},{name:"alphaMin",type:"number",default:.001},{name:"alphaTarget",type:"number",default:0},{name:"velocityDecay",type:"number",default:.4},{name:"forces",type:"param",array:!0,params:[{key:{force:"center"},params:[{name:"x",type:"number",default:0},{name:"y",type:"number",default:0}]},{key:{force:"collide"},params:[{name:"radius",type:"number",expr:!0},{name:"strength",type:"number",default:.7},{name:"iterations",type:"number",default:1}]},{key:{force:"nbody"},params:[{name:"strength",type:"number",default:-30},{name:"theta",type:"number",default:.9},{name:"distanceMin",type:"number",default:1},{name:"distanceMax",type:"number"}]},{key:{force:"link"},params:[{name:"links",type:"data"},{name:"id",type:"field"},{name:"distance",type:"number",default:30,expr:!0},{name:"strength",type:"number",expr:!0},{name:"iterations",type:"number",default:1}]},{key:{force:"x"},params:[{name:"strength",type:"number",default:.1},{name:"x",type:"field"}]},{key:{force:"y"},params:[{name:"strength",type:"number",default:.1},{name:"y",type:"field"}]}]},{name:"as",type:"string",array:!0,modify:!1,default:u}]},n.inherits(c,t.Transform,{transform(e,t){var n=this.value,r=t.changed(t.ADD_REM),i=e.modified(a),o=e.iterations||300;if(n?(r&&(t.modifies("index"),n.nodes(t.source)),(i||t.changed(t.MOD))&&d(n,e,0,t)):(this.value=n=f(t.source,e),n.on("tick",l(t.dataflow,this)),e.static||(r=!0,n.tick()),t.modifies("index")),i||r||e.modified(s)||t.changed()&&e.restart)if(n.alpha(Math.max(n.alpha(),e.alpha||1)).alphaDecay(1-Math.pow(n.alphaMin(),1/o)),e.static)for(n.stop();--o>=0;)n.tick();else if(n.stopped()&&n.restart(),!r)return t.StopPropagation;return this.finish(e,t)},finish(e,t){const n=t.dataflow;for(let u,c=this._argops,l=0,f=c.length;l<f;++l)if(u=c[l],u.name===o&&"link"===u.op._argval.force)for(var r,i=u.op._argops,a=0,s=i.length;a<s;++a)if("links"===i[a].name&&(r=i[a].op.source)){n.pulse(r,n.changeset().reflow());break}return t.reflow(e.modified()).modifies(u)}}),e.force=c,Object.defineProperty(e,"__esModule",{value:!0})}(t,n(1183),n(1176),n(2347))},2347:function(e,t,n){!function(e,t,n,r){"use strict";function i(e,t){var n,r=1;function i(){var i,o,a=n.length,s=0,u=0;for(i=0;i<a;++i)s+=(o=n[i]).x,u+=o.y;for(s=(s/a-e)*r,u=(u/a-t)*r,i=0;i<a;++i)(o=n[i]).x-=s,o.y-=u}return null==e&&(e=0),null==t&&(t=0),i.initialize=function(e){n=e},i.x=function(t){return arguments.length?(e=+t,i):e},i.y=function(e){return arguments.length?(t=+e,i):t},i.strength=function(e){return arguments.length?(r=+e,i):r},i}function o(e){return function(){return e}}function a(e){return 1e-6*(e()-.5)}function s(e){return e.x+e.vx}function u(e){return e.y+e.vy}function c(e){var n,r,i,c=1,l=1;function f(){for(var e,o,f,h,p,g,m,v=n.length,y=0;y<l;++y)for(o=t.quadtree(n,s,u).visitAfter(d),e=0;e<v;++e)f=n[e],g=r[f.index],m=g*g,h=f.x+f.vx,p=f.y+f.vy,o.visit(b);function b(e,t,n,r,o){var s=e.data,u=e.r,l=g+u;if(!s)return t>h+l||r<h-l||n>p+l||o<p-l;if(s.index>f.index){var d=h-s.x-s.vx,v=p-s.y-s.vy,y=d*d+v*v;y<l*l&&(0===d&&(y+=(d=a(i))*d),0===v&&(y+=(v=a(i))*v),y=(l-(y=Math.sqrt(y)))/y*c,f.vx+=(d*=y)*(l=(u*=u)/(m+u)),f.vy+=(v*=y)*l,s.vx-=d*(l=1-l),s.vy-=v*l)}}}function d(e){if(e.data)return e.r=r[e.data.index];for(var t=e.r=0;t<4;++t)e[t]&&e[t].r>e.r&&(e.r=e[t].r)}function h(){if(n){var t,i,o=n.length;for(r=new Array(o),t=0;t<o;++t)i=n[t],r[i.index]=+e(i,t,n)}}return"function"!==typeof e&&(e=o(null==e?1:+e)),f.initialize=function(e,t){n=e,i=t,h()},f.iterations=function(e){return arguments.length?(l=+e,f):l},f.strength=function(e){return arguments.length?(c=+e,f):c},f.radius=function(t){return arguments.length?(e="function"===typeof t?t:o(+t),h(),f):e},f}function l(e){return e.index}function f(e,t){var n=e.get(t);if(!n)throw new Error("node not found: "+t);return n}function d(e){var t,n,r,i,s,u,c=l,d=g,h=o(30),p=1;function g(e){return 1/Math.min(i[e.source.index],i[e.target.index])}function m(r){for(var i=0,o=e.length;i<p;++i)for(var c,l,f,d,h,g,m,v=0;v<o;++v)l=(c=e[v]).source,d=(f=c.target).x+f.vx-l.x-l.vx||a(u),h=f.y+f.vy-l.y-l.vy||a(u),d*=g=((g=Math.sqrt(d*d+h*h))-n[v])/g*r*t[v],h*=g,f.vx-=d*(m=s[v]),f.vy-=h*m,l.vx+=d*(m=1-m),l.vy+=h*m}function v(){if(r){var o,a,u=r.length,l=e.length,d=new Map(r.map(((e,t)=>[c(e,t,r),e])));for(o=0,i=new Array(u);o<l;++o)(a=e[o]).index=o,"object"!==typeof a.source&&(a.source=f(d,a.source)),"object"!==typeof a.target&&(a.target=f(d,a.target)),i[a.source.index]=(i[a.source.index]||0)+1,i[a.target.index]=(i[a.target.index]||0)+1;for(o=0,s=new Array(l);o<l;++o)a=e[o],s[o]=i[a.source.index]/(i[a.source.index]+i[a.target.index]);t=new Array(l),y(),n=new Array(l),b()}}function y(){if(r)for(var n=0,i=e.length;n<i;++n)t[n]=+d(e[n],n,e)}function b(){if(r)for(var t=0,i=e.length;t<i;++t)n[t]=+h(e[t],t,e)}return null==e&&(e=[]),m.initialize=function(e,t){r=e,u=t,v()},m.links=function(t){return arguments.length?(e=t,v(),m):e},m.id=function(e){return arguments.length?(c=e,m):c},m.iterations=function(e){return arguments.length?(p=+e,m):p},m.strength=function(e){return arguments.length?(d="function"===typeof e?e:o(+e),y(),m):d},m.distance=function(e){return arguments.length?(h="function"===typeof e?e:o(+e),b(),m):h},m}const h=1664525,p=1013904223,g=4294967296;function m(){let e=1;return()=>(e=(h*e+p)%g)/g}function v(e){return e.x}function y(e){return e.y}var b=10,x=Math.PI*(3-Math.sqrt(5));function w(e){var t,i=1,o=.001,a=1-Math.pow(o,1/300),s=0,u=.6,c=new Map,l=r.timer(h),f=n.dispatch("tick","end"),d=m();function h(){p(),f.call("tick",t),i<o&&(l.stop(),f.call("end",t))}function p(n){var r,o,l=e.length;void 0===n&&(n=1);for(var f=0;f<n;++f)for(i+=(s-i)*a,c.forEach((function(e){e(i)})),r=0;r<l;++r)null==(o=e[r]).fx?o.x+=o.vx*=u:(o.x=o.fx,o.vx=0),null==o.fy?o.y+=o.vy*=u:(o.y=o.fy,o.vy=0);return t}function g(){for(var t,n=0,r=e.length;n<r;++n){if((t=e[n]).index=n,null!=t.fx&&(t.x=t.fx),null!=t.fy&&(t.y=t.fy),isNaN(t.x)||isNaN(t.y)){var i=b*Math.sqrt(.5+n),o=n*x;t.x=i*Math.cos(o),t.y=i*Math.sin(o)}(isNaN(t.vx)||isNaN(t.vy))&&(t.vx=t.vy=0)}}function v(t){return t.initialize&&t.initialize(e,d),t}return null==e&&(e=[]),g(),t={tick:p,restart:function(){return l.restart(h),t},stop:function(){return l.stop(),t},nodes:function(n){return arguments.length?(e=n,g(),c.forEach(v),t):e},alpha:function(e){return arguments.length?(i=+e,t):i},alphaMin:function(e){return arguments.length?(o=+e,t):o},alphaDecay:function(e){return arguments.length?(a=+e,t):+a},alphaTarget:function(e){return arguments.length?(s=+e,t):s},velocityDecay:function(e){return arguments.length?(u=1-e,t):1-u},randomSource:function(e){return arguments.length?(d=e,c.forEach(v),t):d},force:function(e,n){return arguments.length>1?(null==n?c.delete(e):c.set(e,v(n)),t):c.get(e)},find:function(t,n,r){var i,o,a,s,u,c=0,l=e.length;for(null==r?r=1/0:r*=r,c=0;c<l;++c)(a=(i=t-(s=e[c]).x)*i+(o=n-s.y)*o)<r&&(u=s,r=a);return u},on:function(e,n){return arguments.length>1?(f.on(e,n),t):f.on(e)}}}function _(){var e,n,r,i,s,u=o(-30),c=1,l=1/0,f=.81;function d(r){var o,a=e.length,s=t.quadtree(e,v,y).visitAfter(p);for(i=r,o=0;o<a;++o)n=e[o],s.visit(g)}function h(){if(e){var t,n,r=e.length;for(s=new Array(r),t=0;t<r;++t)n=e[t],s[n.index]=+u(n,t,e)}}function p(e){var t,n,r,i,o,a=0,u=0;if(e.length){for(r=i=o=0;o<4;++o)(t=e[o])&&(n=Math.abs(t.value))&&(a+=t.value,u+=n,r+=n*t.x,i+=n*t.y);e.x=r/u,e.y=i/u}else{(t=e).x=t.data.x,t.y=t.data.y;do{a+=s[t.data.index]}while(t=t.next)}e.value=a}function g(e,t,o,u){if(!e.value)return!0;var d=e.x-n.x,h=e.y-n.y,p=u-t,g=d*d+h*h;if(p*p/f<g)return g<l&&(0===d&&(g+=(d=a(r))*d),0===h&&(g+=(h=a(r))*h),g<c&&(g=Math.sqrt(c*g)),n.vx+=d*e.value*i/g,n.vy+=h*e.value*i/g),!0;if(!(e.length||g>=l)){(e.data!==n||e.next)&&(0===d&&(g+=(d=a(r))*d),0===h&&(g+=(h=a(r))*h),g<c&&(g=Math.sqrt(c*g)));do{e.data!==n&&(p=s[e.data.index]*i/g,n.vx+=d*p,n.vy+=h*p)}while(e=e.next)}}return d.initialize=function(t,n){e=t,r=n,h()},d.strength=function(e){return arguments.length?(u="function"===typeof e?e:o(+e),h(),d):u},d.distanceMin=function(e){return arguments.length?(c=e*e,d):Math.sqrt(c)},d.distanceMax=function(e){return arguments.length?(l=e*e,d):Math.sqrt(l)},d.theta=function(e){return arguments.length?(f=e*e,d):Math.sqrt(f)},d}function A(e,t,n){var r,i,a,s=o(.1);function u(e){for(var o=0,s=r.length;o<s;++o){var u=r[o],c=u.x-t||1e-6,l=u.y-n||1e-6,f=Math.sqrt(c*c+l*l),d=(a[o]-f)*i[o]*e/f;u.vx+=c*d,u.vy+=l*d}}function c(){if(r){var t,n=r.length;for(i=new Array(n),a=new Array(n),t=0;t<n;++t)a[t]=+e(r[t],t,r),i[t]=isNaN(a[t])?0:+s(r[t],t,r)}}return"function"!==typeof e&&(e=o(+e)),null==t&&(t=0),null==n&&(n=0),u.initialize=function(e){r=e,c()},u.strength=function(e){return arguments.length?(s="function"===typeof e?e:o(+e),c(),u):s},u.radius=function(t){return arguments.length?(e="function"===typeof t?t:o(+t),c(),u):e},u.x=function(e){return arguments.length?(t=+e,u):t},u.y=function(e){return arguments.length?(n=+e,u):n},u}function k(e){var t,n,r,i=o(.1);function a(e){for(var i,o=0,a=t.length;o<a;++o)(i=t[o]).vx+=(r[o]-i.x)*n[o]*e}function s(){if(t){var o,a=t.length;for(n=new Array(a),r=new Array(a),o=0;o<a;++o)n[o]=isNaN(r[o]=+e(t[o],o,t))?0:+i(t[o],o,t)}}return"function"!==typeof e&&(e=o(null==e?0:+e)),a.initialize=function(e){t=e,s()},a.strength=function(e){return arguments.length?(i="function"===typeof e?e:o(+e),s(),a):i},a.x=function(t){return arguments.length?(e="function"===typeof t?t:o(+t),s(),a):e},a}function E(e){var t,n,r,i=o(.1);function a(e){for(var i,o=0,a=t.length;o<a;++o)(i=t[o]).vy+=(r[o]-i.y)*n[o]*e}function s(){if(t){var o,a=t.length;for(n=new Array(a),r=new Array(a),o=0;o<a;++o)n[o]=isNaN(r[o]=+e(t[o],o,t))?0:+i(t[o],o,t)}}return"function"!==typeof e&&(e=o(null==e?0:+e)),a.initialize=function(e){t=e,s()},a.strength=function(e){return arguments.length?(i="function"===typeof e?e:o(+e),s(),a):i},a.y=function(t){return arguments.length?(e="function"===typeof t?t:o(+t),s(),a):e},a}e.forceCenter=i,e.forceCollide=c,e.forceLink=d,e.forceManyBody=_,e.forceRadial=A,e.forceSimulation=w,e.forceX=k,e.forceY=E,Object.defineProperty(e,"__esModule",{value:!0})}(t,n(2348),n(2349),n(2350))},2348:function(e,t,n){!function(e){"use strict";function t(e){const t=+this._x.call(null,e),r=+this._y.call(null,e);return n(this.cover(t,r),t,r,e)}function n(e,t,n,r){if(isNaN(t)||isNaN(n))return e;var i,o,a,s,u,c,l,f,d,h=e._root,p={data:r},g=e._x0,m=e._y0,v=e._x1,y=e._y1;if(!h)return e._root=p,e;for(;h.length;)if((c=t>=(o=(g+v)/2))?g=o:v=o,(l=n>=(a=(m+y)/2))?m=a:y=a,i=h,!(h=h[f=l<<1|c]))return i[f]=p,e;if(s=+e._x.call(null,h.data),u=+e._y.call(null,h.data),t===s&&n===u)return p.next=h,i?i[f]=p:e._root=p,e;do{i=i?i[f]=new Array(4):e._root=new Array(4),(c=t>=(o=(g+v)/2))?g=o:v=o,(l=n>=(a=(m+y)/2))?m=a:y=a}while((f=l<<1|c)===(d=(u>=a)<<1|s>=o));return i[d]=h,i[f]=p,e}function r(e){var t,r,i,o,a=e.length,s=new Array(a),u=new Array(a),c=1/0,l=1/0,f=-1/0,d=-1/0;for(r=0;r<a;++r)isNaN(i=+this._x.call(null,t=e[r]))||isNaN(o=+this._y.call(null,t))||(s[r]=i,u[r]=o,i<c&&(c=i),i>f&&(f=i),o<l&&(l=o),o>d&&(d=o));if(c>f||l>d)return this;for(this.cover(c,l).cover(f,d),r=0;r<a;++r)n(this,s[r],u[r],e[r]);return this}function i(e,t){if(isNaN(e=+e)||isNaN(t=+t))return this;var n=this._x0,r=this._y0,i=this._x1,o=this._y1;if(isNaN(n))i=(n=Math.floor(e))+1,o=(r=Math.floor(t))+1;else{for(var a,s,u=i-n||1,c=this._root;n>e||e>=i||r>t||t>=o;)switch(s=(t<r)<<1|e<n,(a=new Array(4))[s]=c,c=a,u*=2,s){case 0:i=n+u,o=r+u;break;case 1:n=i-u,o=r+u;break;case 2:i=n+u,r=o-u;break;case 3:n=i-u,r=o-u}this._root&&this._root.length&&(this._root=c)}return this._x0=n,this._y0=r,this._x1=i,this._y1=o,this}function o(){var e=[];return this.visit((function(t){if(!t.length)do{e.push(t.data)}while(t=t.next)})),e}function a(e){return arguments.length?this.cover(+e[0][0],+e[0][1]).cover(+e[1][0],+e[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]}function s(e,t,n,r,i){this.node=e,this.x0=t,this.y0=n,this.x1=r,this.y1=i}function u(e,t,n){var r,i,o,a,u,c,l,f=this._x0,d=this._y0,h=this._x1,p=this._y1,g=[],m=this._root;for(m&&g.push(new s(m,f,d,h,p)),null==n?n=1/0:(f=e-n,d=t-n,h=e+n,p=t+n,n*=n);c=g.pop();)if(!(!(m=c.node)||(i=c.x0)>h||(o=c.y0)>p||(a=c.x1)<f||(u=c.y1)<d))if(m.length){var v=(i+a)/2,y=(o+u)/2;g.push(new s(m[3],v,y,a,u),new s(m[2],i,y,v,u),new s(m[1],v,o,a,y),new s(m[0],i,o,v,y)),(l=(t>=y)<<1|e>=v)&&(c=g[g.length-1],g[g.length-1]=g[g.length-1-l],g[g.length-1-l]=c)}else{var b=e-+this._x.call(null,m.data),x=t-+this._y.call(null,m.data),w=b*b+x*x;if(w<n){var _=Math.sqrt(n=w);f=e-_,d=t-_,h=e+_,p=t+_,r=m.data}}return r}function c(e){if(isNaN(o=+this._x.call(null,e))||isNaN(a=+this._y.call(null,e)))return this;var t,n,r,i,o,a,s,u,c,l,f,d,h=this._root,p=this._x0,g=this._y0,m=this._x1,v=this._y1;if(!h)return this;if(h.length)for(;;){if((c=o>=(s=(p+m)/2))?p=s:m=s,(l=a>=(u=(g+v)/2))?g=u:v=u,t=h,!(h=h[f=l<<1|c]))return this;if(!h.length)break;(t[f+1&3]||t[f+2&3]||t[f+3&3])&&(n=t,d=f)}for(;h.data!==e;)if(r=h,!(h=h.next))return this;return(i=h.next)&&delete h.next,r?(i?r.next=i:delete r.next,this):t?(i?t[f]=i:delete t[f],(h=t[0]||t[1]||t[2]||t[3])&&h===(t[3]||t[2]||t[1]||t[0])&&!h.length&&(n?n[d]=h:this._root=h),this):(this._root=i,this)}function l(e){for(var t=0,n=e.length;t<n;++t)this.remove(e[t]);return this}function f(){return this._root}function d(){var e=0;return this.visit((function(t){if(!t.length)do{++e}while(t=t.next)})),e}function h(e){var t,n,r,i,o,a,u=[],c=this._root;for(c&&u.push(new s(c,this._x0,this._y0,this._x1,this._y1));t=u.pop();)if(!e(c=t.node,r=t.x0,i=t.y0,o=t.x1,a=t.y1)&&c.length){var l=(r+o)/2,f=(i+a)/2;(n=c[3])&&u.push(new s(n,l,f,o,a)),(n=c[2])&&u.push(new s(n,r,f,l,a)),(n=c[1])&&u.push(new s(n,l,i,o,f)),(n=c[0])&&u.push(new s(n,r,i,l,f))}return this}function p(e){var t,n=[],r=[];for(this._root&&n.push(new s(this._root,this._x0,this._y0,this._x1,this._y1));t=n.pop();){var i=t.node;if(i.length){var o,a=t.x0,u=t.y0,c=t.x1,l=t.y1,f=(a+c)/2,d=(u+l)/2;(o=i[0])&&n.push(new s(o,a,u,f,d)),(o=i[1])&&n.push(new s(o,f,u,c,d)),(o=i[2])&&n.push(new s(o,a,d,f,l)),(o=i[3])&&n.push(new s(o,f,d,c,l))}r.push(t)}for(;t=r.pop();)e(t.node,t.x0,t.y0,t.x1,t.y1);return this}function g(e){return e[0]}function m(e){return arguments.length?(this._x=e,this):this._x}function v(e){return e[1]}function y(e){return arguments.length?(this._y=e,this):this._y}function b(e,t,n){var r=new x(null==t?g:t,null==n?v:n,NaN,NaN,NaN,NaN);return null==e?r:r.addAll(e)}function x(e,t,n,r,i,o){this._x=e,this._y=t,this._x0=n,this._y0=r,this._x1=i,this._y1=o,this._root=void 0}function w(e){for(var t={data:e.data},n=t;e=e.next;)n=n.next={data:e.data};return t}var _=b.prototype=x.prototype;_.copy=function(){var e,t,n=new x(this._x,this._y,this._x0,this._y0,this._x1,this._y1),r=this._root;if(!r)return n;if(!r.length)return n._root=w(r),n;for(e=[{source:r,target:n._root=new Array(4)}];r=e.pop();)for(var i=0;i<4;++i)(t=r.source[i])&&(t.length?e.push({source:t,target:r.target[i]=new Array(4)}):r.target[i]=w(t));return n},_.add=t,_.addAll=r,_.cover=i,_.data=o,_.extent=a,_.find=u,_.remove=c,_.removeAll=l,_.root=f,_.size=d,_.visit=h,_.visitAfter=p,_.x=m,_.y=y,e.quadtree=b,Object.defineProperty(e,"__esModule",{value:!0})}(t)},2349:function(e,t,n){!function(e){"use strict";var t={value:()=>{}};function n(){for(var e,t=0,n=arguments.length,i={};t<n;++t){if(!(e=arguments[t]+"")||e in i||/[\s.]/.test(e))throw new Error("illegal type: "+e);i[e]=[]}return new r(i)}function r(e){this._=e}function i(e,t){return e.trim().split(/^|\s+/).map((function(e){var n="",r=e.indexOf(".");if(r>=0&&(n=e.slice(r+1),e=e.slice(0,r)),e&&!t.hasOwnProperty(e))throw new Error("unknown type: "+e);return{type:e,name:n}}))}function o(e,t){for(var n,r=0,i=e.length;r<i;++r)if((n=e[r]).name===t)return n.value}function a(e,n,r){for(var i=0,o=e.length;i<o;++i)if(e[i].name===n){e[i]=t,e=e.slice(0,i).concat(e.slice(i+1));break}return null!=r&&e.push({name:n,value:r}),e}r.prototype=n.prototype={constructor:r,on:function(e,t){var n,r=this._,s=i(e+"",r),u=-1,c=s.length;if(!(arguments.length<2)){if(null!=t&&"function"!==typeof t)throw new Error("invalid callback: "+t);for(;++u<c;)if(n=(e=s[u]).type)r[n]=a(r[n],e.name,t);else if(null==t)for(n in r)r[n]=a(r[n],e.name,null);return this}for(;++u<c;)if((n=(e=s[u]).type)&&(n=o(r[n],e.name)))return n},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new r(e)},call:function(e,t){if((n=arguments.length-2)>0)for(var n,r,i=new Array(n),o=0;o<n;++o)i[o]=arguments[o+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(o=0,n=(r=this._[e]).length;o<n;++o)r[o].value.apply(t,i)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var r=this._[e],i=0,o=r.length;i<o;++i)r[i].value.apply(t,n)}},e.dispatch=n,Object.defineProperty(e,"__esModule",{value:!0})}(t)},2350:function(e,t,n){!function(e){"use strict";var t,n,r=0,i=0,o=0,a=1e3,s=0,u=0,c=0,l="object"===typeof performance&&performance.now?performance:Date,f="object"===typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function d(){return u||(f(h),u=l.now()+c)}function h(){u=0}function p(){this._call=this._time=this._next=null}function g(e,t,n){var r=new p;return r.restart(e,t,n),r}function m(){d(),++r;for(var e,n=t;n;)(e=u-n._time)>=0&&n._call.call(null,e),n=n._next;--r}function v(){u=(s=l.now())+c,r=i=0;try{m()}finally{r=0,b(),u=0}}function y(){var e=l.now(),t=e-s;t>a&&(c-=t,s=e)}function b(){for(var e,r,i=t,o=1/0;i;)i._call?(o>i._time&&(o=i._time),e=i,i=i._next):(r=i._next,i._next=null,i=e?e._next=r:t=r);n=e,x(o)}function x(e){r||(i&&(i=clearTimeout(i)),e-u>24?(e<1/0&&(i=setTimeout(v,e-l.now()-c)),o&&(o=clearInterval(o))):(o||(s=l.now(),o=setInterval(y,a)),r=1,f(v)))}function w(e,t,n){var r=new p;return t=null==t?0:+t,r.restart((n=>{r.stop(),e(n+t)}),t,n),r}function _(e,t,n){var r=new p,i=t;return null==t?(r.restart(e,t,n),r):(r._restart=r.restart,r.restart=function(e,t,n){t=+t,n=null==n?d():+n,r._restart((function o(a){a+=i,r._restart(o,i+=t,n),e(a)}),t,n)},r.restart(e,t,n),r)}p.prototype=g.prototype={constructor:p,restart:function(e,r,i){if("function"!==typeof e)throw new TypeError("callback is not a function");i=(null==i?d():+i)+(null==r?0:+r),this._next||n===this||(n?n._next=this:t=this,n=this),this._call=e,this._time=i,x()},stop:function(){this._call&&(this._call=null,this._time=1/0,x())}},e.interval=_,e.now=d,e.timeout=w,e.timer=g,e.timerFlush=m,Object.defineProperty(e,"__esModule",{value:!0})}(t)},2351:function(e,t,n){!function(e,t,n,r){"use strict";function i(e,t,n){const r={};return e.each((e=>{const i=e.data;n(i)&&(r[t(i)]=e)})),e.lookup=r,e}function o(e){t.Transform.call(this,null,e)}o.Definition={type:"Nest",metadata:{treesource:!0,changes:!0},params:[{name:"keys",type:"field",array:!0},{name:"generate",type:"boolean"}]};const a=e=>e.values;function s(){const e=[],t={entries:e=>r(n(e,0),0),key:n=>(e.push(n),t)};function n(t,r){if(r>=e.length)return t;const i=t.length,o=e[r++],a={},s={};let u,c,l,f=-1;for(;++f<i;)u=o(c=t[f])+"",(l=a[u])?l.push(c):a[u]=[c];for(u in a)s[u]=n(a[u],r);return s}function r(t,n){if(++n>e.length)return t;const i=[];for(const e in t)i.push({key:e,values:r(t[e],n)});return i}return t}function u(e){t.Transform.call(this,null,e)}n.inherits(o,t.Transform,{transform(e,o){o.source||n.error("Nest transform requires an upstream data source.");var u=e.generate,c=e.modified(),l=o.clone(),f=this.value;return(!f||c||o.changed())&&(f&&f.each((e=>{e.children&&t.isTuple(e.data)&&l.rem.push(e.data)})),this.value=f=r.hierarchy({values:n.array(e.keys).reduce(((e,t)=>(e.key(t),e)),s()).entries(l.source)},a),u&&f.each((e=>{e.children&&(e=t.ingest(e.data),l.add.push(e),l.source.push(e))})),i(f,t.tupleid,t.tupleid)),l.source.root=f,l}});const c=(e,t)=>e.parent===t.parent?1:2;function l(e,t,n){for(let r,i=0,o=t.length;i<o;++i)r=t[i],r in n&&e[r](n[r])}function f(e,t,n){const r=e.data,i=t.length-1;for(let o=0;o<i;++o)r[n[o]]=e[t[o]];r[n[i]]=e.children?e.children.length:0}n.inherits(u,t.Transform,{transform(e,r){r.source&&r.source.root||n.error(this.constructor.name+" transform requires a backing tree data source.");const i=this.layout(e.method),o=this.fields,a=r.source.root,s=e.as||o;e.field?a.sum(e.field):a.count(),e.sort&&a.sort(t.stableCompare(e.sort,(e=>e.data))),l(i,this.params,e),i.separation&&i.separation(!1!==e.separation?c:n.one);try{this.value=i(a)}catch(u){n.error(u)}return a.each((e=>f(e,o,s))),r.reflow(e.modified()).modifies(s).modifies("leaf")}});const d=["x","y","r","depth","children"];function h(e){u.call(this,e)}h.Definition={type:"Pack",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"padding",type:"number",default:0},{name:"radius",type:"field",default:null},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:d.length,default:d}]},n.inherits(h,u,{layout:r.pack,params:["radius","size","padding"],fields:d});const p=["x0","y0","x1","y1","depth","children"];function g(e){u.call(this,e)}function m(e){t.Transform.call(this,null,e)}g.Definition={type:"Partition",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"padding",type:"number",default:0},{name:"round",type:"boolean",default:!1},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:p.length,default:p}]},n.inherits(g,u,{layout:r.partition,params:["size","round","padding"],fields:p}),m.Definition={type:"Stratify",metadata:{treesource:!0},params:[{name:"key",type:"field",required:!0},{name:"parentKey",type:"field",required:!0}]},n.inherits(m,t.Transform,{transform(e,t){t.source||n.error("Stratify transform requires an upstream data source.");let o=this.value;const a=e.modified(),s=t.fork(t.ALL).materialize(t.SOURCE),u=!o||a||t.changed(t.ADD_REM)||t.modified(e.key.fields)||t.modified(e.parentKey.fields);return s.source=s.source.slice(),u&&(o=s.source.length?i(r.stratify().id(e.key).parentId(e.parentKey)(s.source),e.key,n.truthy):i(r.stratify()([{}]),e.key,e.key)),s.source.root=this.value=o,s}});const v={tidy:r.tree,cluster:r.cluster},y=["x","y","depth","children"];function b(e){u.call(this,e)}function x(e){t.Transform.call(this,[],e)}b.Definition={type:"Tree",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"method",type:"enum",default:"tidy",values:["tidy","cluster"]},{name:"size",type:"number",array:!0,length:2},{name:"nodeSize",type:"number",array:!0,length:2},{name:"separation",type:"boolean",default:!0},{name:"as",type:"string",array:!0,length:y.length,default:y}]},n.inherits(b,u,{layout(e){const t=e||"tidy";if(n.hasOwnProperty(v,t))return v[t]();n.error("Unrecognized Tree layout method: "+t)},params:["size","nodeSize"],fields:y}),x.Definition={type:"TreeLinks",metadata:{tree:!0,generates:!0,changes:!0},params:[]},n.inherits(x,t.Transform,{transform(e,r){const i=this.value,o=r.source&&r.source.root,a=r.fork(r.NO_SOURCE),s={};return o||n.error("TreeLinks transform requires a tree data source."),r.changed(r.ADD_REM)?(a.rem=i,r.visit(r.SOURCE,(e=>s[t.tupleid(e)]=1)),o.each((e=>{const n=e.data,r=e.parent&&e.parent.data;r&&s[t.tupleid(n)]&&s[t.tupleid(r)]&&a.add.push(t.ingest({source:r,target:n}))})),this.value=a.add):r.changed(r.MOD)&&(r.visit(r.MOD,(e=>s[t.tupleid(e)]=1)),i.forEach((e=>{(s[t.tupleid(e.source)]||s[t.tupleid(e.target)])&&a.mod.push(e)}))),a}});const w={binary:r.treemapBinary,dice:r.treemapDice,slice:r.treemapSlice,slicedice:r.treemapSliceDice,squarify:r.treemapSquarify,resquarify:r.treemapResquarify},_=["x0","y0","x1","y1","depth","children"];function A(e){u.call(this,e)}A.Definition={type:"Treemap",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"method",type:"enum",default:"squarify",values:["squarify","resquarify","binary","dice","slice","slicedice"]},{name:"padding",type:"number",default:0},{name:"paddingInner",type:"number",default:0},{name:"paddingOuter",type:"number",default:0},{name:"paddingTop",type:"number",default:0},{name:"paddingRight",type:"number",default:0},{name:"paddingBottom",type:"number",default:0},{name:"paddingLeft",type:"number",default:0},{name:"ratio",type:"number",default:1.618033988749895},{name:"round",type:"boolean",default:!1},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:_.length,default:_}]},n.inherits(A,u,{layout(){const e=r.treemap();return e.ratio=t=>{const n=e.tile();n.ratio&&e.tile(n.ratio(t))},e.method=t=>{n.hasOwnProperty(w,t)?e.tile(w[t]):n.error("Unrecognized Treemap layout method: "+t)},e},params:["method","ratio","size","round","padding","paddingInner","paddingOuter","paddingTop","paddingRight","paddingBottom","paddingLeft"],fields:_}),e.nest=o,e.pack=h,e.partition=g,e.stratify=m,e.tree=b,e.treelinks=x,e.treemap=A,Object.defineProperty(e,"__esModule",{value:!0})}(t,n(1183),n(1176),n(2352))},2352:function(e,t,n){var r=n(16),i=n(108);!function(e){"use strict";var t=r.mark(D);function n(e,t){return e.parent===t.parent?1:2}function o(e){return e.reduce(a,0)/e.length}function a(e,t){return e+t.x}function s(e){return 1+e.reduce(u,0)}function u(e,t){return Math.max(e,t.y)}function c(e){for(var t;t=e.children;)e=t[0];return e}function l(e){for(var t;t=e.children;)e=t[t.length-1];return e}function f(){var e=n,t=1,r=1,i=!1;function a(n){var a,u=0;n.eachAfter((function(t){var n=t.children;n?(t.x=o(n),t.y=s(n)):(t.x=a?u+=e(t,a):0,t.y=0,a=t)}));var f=c(n),d=l(n),h=f.x-e(f,d)/2,p=d.x+e(d,f)/2;return n.eachAfter(i?function(e){e.x=(e.x-n.x)*t,e.y=(n.y-e.y)*r}:function(e){e.x=(e.x-h)/(p-h)*t,e.y=(1-(n.y?e.y/n.y:1))*r})}return a.separation=function(t){return arguments.length?(e=t,a):e},a.size=function(e){return arguments.length?(i=!1,t=+e[0],r=+e[1],a):i?null:[t,r]},a.nodeSize=function(e){return arguments.length?(i=!0,t=+e[0],r=+e[1],a):i?[t,r]:null},a}function d(e){var t=0,n=e.children,r=n&&n.length;if(r)for(;--r>=0;)t+=n[r].value;else t=1;e.value=t}function h(){return this.eachAfter(d)}function p(e,t){let n=-1;var r,o=i(this);try{for(o.s();!(r=o.n()).done;){const i=r.value;e.call(t,i,++n,this)}}catch(a){o.e(a)}finally{o.f()}return this}function g(e,t){for(var n,r,i=this,o=[i],a=-1;i=o.pop();)if(e.call(t,i,++a,this),n=i.children)for(r=n.length-1;r>=0;--r)o.push(n[r]);return this}function m(e,t){for(var n,r,i,o=this,a=[o],s=[],u=-1;o=a.pop();)if(s.push(o),n=o.children)for(r=0,i=n.length;r<i;++r)a.push(n[r]);for(;o=s.pop();)e.call(t,o,++u,this);return this}function v(e,t){let n=-1;var r,o=i(this);try{for(o.s();!(r=o.n()).done;){const i=r.value;if(e.call(t,i,++n,this))return i}}catch(a){o.e(a)}finally{o.f()}}function y(e){return this.eachAfter((function(t){for(var n=+e(t.data)||0,r=t.children,i=r&&r.length;--i>=0;)n+=r[i].value;t.value=n}))}function b(e){return this.eachBefore((function(t){t.children&&t.children.sort(e)}))}function x(e){for(var t=this,n=w(t,e),r=[t];t!==n;)t=t.parent,r.push(t);for(var i=r.length;e!==n;)r.splice(i,0,e),e=e.parent;return r}function w(e,t){if(e===t)return e;var n=e.ancestors(),r=t.ancestors(),i=null;for(e=n.pop(),t=r.pop();e===t;)i=e,e=n.pop(),t=r.pop();return i}function _(){for(var e=this,t=[e];e=e.parent;)t.push(e);return t}function A(){return Array.from(this)}function k(){var e=[];return this.eachBefore((function(t){t.children||e.push(t)})),e}function E(){var e=this,t=[];return e.each((function(n){n!==e&&t.push({source:n.parent,target:n})})),t}function D(){var e,n,i,o,a,s;return r.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:i=[e=this];case 1:n=i.reverse(),i=[];case 2:if(!(e=n.pop())){t.next=8;break}return t.next=5,e;case 5:if(o=e.children)for(a=0,s=o.length;a<s;++a)i.push(o[a]);t.next=2;break;case 8:if(i.length){t.next=1;break}case 9:case"end":return t.stop()}}),t,this)}function C(e,t){e instanceof Map?(e=[void 0,e],void 0===t&&(t=S)):void 0===t&&(t=F);for(var n,r,i,o,a,s=new N(e),u=[s];n=u.pop();)if((i=t(n.data))&&(a=(i=Array.from(i)).length))for(n.children=i,o=a-1;o>=0;--o)u.push(r=i[o]=new N(i[o])),r.parent=n,r.depth=n.depth+1;return s.eachBefore(O)}function M(){return C(this).eachBefore(T)}function F(e){return e.children}function S(e){return Array.isArray(e)?e[1]:null}function T(e){void 0!==e.data.value&&(e.value=e.data.value),e.data=e.data.data}function O(e){var t=0;do{e.height=t}while((e=e.parent)&&e.height<++t)}function N(e){this.data=e,this.depth=this.height=0,this.parent=null}function P(e){return"object"===typeof e&&"length"in e?e:Array.from(e)}function R(e){for(var t,n,r=e.length;r;)n=Math.random()*r--|0,t=e[r],e[r]=e[n],e[n]=t;return e}function B(e){for(var t,n,r=0,i=(e=R(Array.from(e))).length,o=[];r<i;)t=e[r],n&&L(n,t)?++r:(n=U(o=z(o,t)),r=0);return n}function z(e,t){var n,r;if(I(t,e))return[t];for(n=0;n<e.length;++n)if(j(t,e[n])&&I(W(e[n],t),e))return[e[n],t];for(n=0;n<e.length-1;++n)for(r=n+1;r<e.length;++r)if(j(W(e[n],e[r]),t)&&j(W(e[n],t),e[r])&&j(W(e[r],t),e[n])&&I(H(e[n],e[r],t),e))return[e[n],e[r],t];throw new Error}function j(e,t){var n=e.r-t.r,r=t.x-e.x,i=t.y-e.y;return n<0||n*n<r*r+i*i}function L(e,t){var n=e.r-t.r+1e-9*Math.max(e.r,t.r,1),r=t.x-e.x,i=t.y-e.y;return n>0&&n*n>r*r+i*i}function I(e,t){for(var n=0;n<t.length;++n)if(!L(e,t[n]))return!1;return!0}function U(e){switch(e.length){case 1:return q(e[0]);case 2:return W(e[0],e[1]);case 3:return H(e[0],e[1],e[2])}}function q(e){return{x:e.x,y:e.y,r:e.r}}function W(e,t){var n=e.x,r=e.y,i=e.r,o=t.x,a=t.y,s=t.r,u=o-n,c=a-r,l=s-i,f=Math.sqrt(u*u+c*c);return{x:(n+o+u/f*l)/2,y:(r+a+c/f*l)/2,r:(f+i+s)/2}}function H(e,t,n){var r=e.x,i=e.y,o=e.r,a=t.x,s=t.y,u=t.r,c=n.x,l=n.y,f=n.r,d=r-a,h=r-c,p=i-s,g=i-l,m=u-o,v=f-o,y=r*r+i*i-o*o,b=y-a*a-s*s+u*u,x=y-c*c-l*l+f*f,w=h*p-d*g,_=(p*x-g*b)/(2*w)-r,A=(g*m-p*v)/w,k=(h*b-d*x)/(2*w)-i,E=(d*v-h*m)/w,D=A*A+E*E-1,C=2*(o+_*A+k*E),M=_*_+k*k-o*o,F=-(D?(C+Math.sqrt(C*C-4*D*M))/(2*D):M/C);return{x:r+_+A*F,y:i+k+E*F,r:F}}function Y(e,t,n){var r,i,o,a,s=e.x-t.x,u=e.y-t.y,c=s*s+u*u;c?(i=t.r+n.r,i*=i,a=e.r+n.r,i>(a*=a)?(r=(c+a-i)/(2*c),o=Math.sqrt(Math.max(0,a/c-r*r)),n.x=e.x-r*s-o*u,n.y=e.y-r*u+o*s):(r=(c+i-a)/(2*c),o=Math.sqrt(Math.max(0,i/c-r*r)),n.x=t.x+r*s-o*u,n.y=t.y+r*u+o*s)):(n.x=t.x+n.r,n.y=t.y)}function V(e,t){var n=e.r+t.r-1e-6,r=t.x-e.x,i=t.y-e.y;return n>0&&n*n>r*r+i*i}function G(e){var t=e._,n=e.next._,r=t.r+n.r,i=(t.x*n.r+n.x*t.r)/r,o=(t.y*n.r+n.y*t.r)/r;return i*i+o*o}function $(e){this._=e,this.next=null,this.previous=null}function X(e){if(!(i=(e=P(e)).length))return 0;var t,n,r,i,o,a,s,u,c,l,f;if((t=e[0]).x=0,t.y=0,!(i>1))return t.r;if(n=e[1],t.x=-n.r,n.x=t.r,n.y=0,!(i>2))return t.r+n.r;Y(n,t,r=e[2]),t=new $(t),n=new $(n),r=new $(r),t.next=r.previous=n,n.next=t.previous=r,r.next=n.previous=t;e:for(s=3;s<i;++s){Y(t._,n._,r=e[s]),r=new $(r),u=n.next,c=t.previous,l=n._.r,f=t._.r;do{if(l<=f){if(V(u._,r._)){n=u,t.next=n,n.previous=t,--s;continue e}l+=u._.r,u=u.next}else{if(V(c._,r._)){(t=c).next=n,n.previous=t,--s;continue e}f+=c._.r,c=c.previous}}while(u!==c.next);for(r.previous=t,r.next=n,t.next=n.previous=n=r,o=G(t);(r=r.next)!==n;)(a=G(r))<o&&(t=r,o=a);n=t.next}for(t=[n._],r=n;(r=r.next)!==n;)t.push(r._);for(r=B(t),s=0;s<i;++s)(t=e[s]).x-=r.x,t.y-=r.y;return r.r}function J(e){return X(e),e}function Q(e){return null==e?null:Z(e)}function Z(e){if("function"!==typeof e)throw new Error;return e}function K(){return 0}function ee(e){return function(){return e}}function te(e){return Math.sqrt(e.value)}function ne(){var e=null,t=1,n=1,r=K;function i(i){return i.x=t/2,i.y=n/2,e?i.eachBefore(re(e)).eachAfter(ie(r,.5)).eachBefore(oe(1)):i.eachBefore(re(te)).eachAfter(ie(K,1)).eachAfter(ie(r,i.r/Math.min(t,n))).eachBefore(oe(Math.min(t,n)/(2*i.r))),i}return i.radius=function(t){return arguments.length?(e=Q(t),i):e},i.size=function(e){return arguments.length?(t=+e[0],n=+e[1],i):[t,n]},i.padding=function(e){return arguments.length?(r="function"===typeof e?e:ee(+e),i):r},i}function re(e){return function(t){t.children||(t.r=Math.max(0,+e(t)||0))}}function ie(e,t){return function(n){if(r=n.children){var r,i,o,a=r.length,s=e(n)*t||0;if(s)for(i=0;i<a;++i)r[i].r+=s;if(o=X(r),s)for(i=0;i<a;++i)r[i].r-=s;n.r=o+s}}}function oe(e){return function(t){var n=t.parent;t.r*=e,n&&(t.x=n.x+e*t.x,t.y=n.y+e*t.y)}}function ae(e){e.x0=Math.round(e.x0),e.y0=Math.round(e.y0),e.x1=Math.round(e.x1),e.y1=Math.round(e.y1)}function se(e,t,n,r,i){for(var o,a=e.children,s=-1,u=a.length,c=e.value&&(r-t)/e.value;++s<u;)(o=a[s]).y0=n,o.y1=i,o.x0=t,o.x1=t+=o.value*c}function ue(){var e=1,t=1,n=0,r=!1;function i(i){var a=i.height+1;return i.x0=i.y0=n,i.x1=e,i.y1=t/a,i.eachBefore(o(t,a)),r&&i.eachBefore(ae),i}function o(e,t){return function(r){r.children&&se(r,r.x0,e*(r.depth+1)/t,r.x1,e*(r.depth+2)/t);var i=r.x0,o=r.y0,a=r.x1-n,s=r.y1-n;a<i&&(i=a=(i+a)/2),s<o&&(o=s=(o+s)/2),r.x0=i,r.y0=o,r.x1=a,r.y1=s}}return i.round=function(e){return arguments.length?(r=!!e,i):r},i.size=function(n){return arguments.length?(e=+n[0],t=+n[1],i):[e,t]},i.padding=function(e){return arguments.length?(n=+e,i):n},i}N.prototype=C.prototype={constructor:N,count:h,each:p,eachAfter:m,eachBefore:g,find:v,sum:y,sort:b,path:x,ancestors:_,descendants:A,leaves:k,links:E,copy:M,[Symbol.iterator]:D};var ce={depth:-1},le={};function fe(e){return e.id}function de(e){return e.parentId}function he(){var e=fe,t=de;function n(n){var r,i,o,a,s,u,c,l=Array.from(n),f=l.length,d=new Map;for(i=0;i<f;++i)r=l[i],s=l[i]=new N(r),null!=(u=e(r,i,n))&&(u+="")&&(c=s.id=u,d.set(c,d.has(c)?le:s)),null!=(u=t(r,i,n))&&(u+="")&&(s.parent=u);for(i=0;i<f;++i)if(u=(s=l[i]).parent){if(!(a=d.get(u)))throw new Error("missing: "+u);if(a===le)throw new Error("ambiguous: "+u);a.children?a.children.push(s):a.children=[s],s.parent=a}else{if(o)throw new Error("multiple roots");o=s}if(!o)throw new Error("no root");if(o.parent=ce,o.eachBefore((function(e){e.depth=e.parent.depth+1,--f})).eachBefore(O),o.parent=null,f>0)throw new Error("cycle");return o}return n.id=function(t){return arguments.length?(e=Z(t),n):e},n.parentId=function(e){return arguments.length?(t=Z(e),n):t},n}function pe(e,t){return e.parent===t.parent?1:2}function ge(e){var t=e.children;return t?t[0]:e.t}function me(e){var t=e.children;return t?t[t.length-1]:e.t}function ve(e,t,n){var r=n/(t.i-e.i);t.c-=r,t.s+=n,e.c+=r,t.z+=n,t.m+=n}function ye(e){for(var t,n=0,r=0,i=e.children,o=i.length;--o>=0;)(t=i[o]).z+=n,t.m+=n,n+=t.s+(r+=t.c)}function be(e,t,n){return e.a.parent===t.parent?e.a:n}function xe(e,t){this._=e,this.parent=null,this.children=null,this.A=null,this.a=this,this.z=0,this.m=0,this.c=0,this.s=0,this.t=null,this.i=t}function we(e){for(var t,n,r,i,o,a=new xe(e,0),s=[a];t=s.pop();)if(r=t._.children)for(t.children=new Array(o=r.length),i=o-1;i>=0;--i)s.push(n=t.children[i]=new xe(r[i],i)),n.parent=t;return(a.parent=new xe(null,0)).children=[a],a}function _e(){var e=pe,t=1,n=1,r=null;function i(i){var s=we(i);if(s.eachAfter(o),s.parent.m=-s.z,s.eachBefore(a),r)i.eachBefore(u);else{var c=i,l=i,f=i;i.eachBefore((function(e){e.x<c.x&&(c=e),e.x>l.x&&(l=e),e.depth>f.depth&&(f=e)}));var d=c===l?1:e(c,l)/2,h=d-c.x,p=t/(l.x+d+h),g=n/(f.depth||1);i.eachBefore((function(e){e.x=(e.x+h)*p,e.y=e.depth*g}))}return i}function o(t){var n=t.children,r=t.parent.children,i=t.i?r[t.i-1]:null;if(n){ye(t);var o=(n[0].z+n[n.length-1].z)/2;i?(t.z=i.z+e(t._,i._),t.m=t.z-o):t.z=o}else i&&(t.z=i.z+e(t._,i._));t.parent.A=s(t,i,t.parent.A||r[0])}function a(e){e._.x=e.z+e.parent.m,e.m+=e.parent.m}function s(t,n,r){if(n){for(var i,o=t,a=t,s=n,u=o.parent.children[0],c=o.m,l=a.m,f=s.m,d=u.m;s=me(s),o=ge(o),s&&o;)u=ge(u),(a=me(a)).a=t,(i=s.z+f-o.z-c+e(s._,o._))>0&&(ve(be(s,t,r),t,i),c+=i,l+=i),f+=s.m,c+=o.m,d+=u.m,l+=a.m;s&&!me(a)&&(a.t=s,a.m+=f-l),o&&!ge(u)&&(u.t=o,u.m+=c-d,r=t)}return r}function u(e){e.x*=t,e.y=e.depth*n}return i.separation=function(t){return arguments.length?(e=t,i):e},i.size=function(e){return arguments.length?(r=!1,t=+e[0],n=+e[1],i):r?null:[t,n]},i.nodeSize=function(e){return arguments.length?(r=!0,t=+e[0],n=+e[1],i):r?[t,n]:null},i}function Ae(e,t,n,r,i){for(var o,a=e.children,s=-1,u=a.length,c=e.value&&(i-n)/e.value;++s<u;)(o=a[s]).x0=t,o.x1=r,o.y0=n,o.y1=n+=o.value*c}xe.prototype=Object.create(N.prototype);var ke=(1+Math.sqrt(5))/2;function Ee(e,t,n,r,i,o){for(var a,s,u,c,l,f,d,h,p,g,m,v=[],y=t.children,b=0,x=0,w=y.length,_=t.value;b<w;){u=i-n,c=o-r;do{l=y[x++].value}while(!l&&x<w);for(f=d=l,m=l*l*(g=Math.max(c/u,u/c)/(_*e)),p=Math.max(d/m,m/f);x<w;++x){if(l+=s=y[x].value,s<f&&(f=s),s>d&&(d=s),m=l*l*g,(h=Math.max(d/m,m/f))>p){l-=s;break}p=h}v.push(a={value:l,dice:u<c,children:y.slice(b,x)}),a.dice?se(a,n,r,i,_?r+=c*l/_:o):Ae(a,n,r,_?n+=u*l/_:i,o),_-=l,b=x}return v}var De=function e(t){function n(e,n,r,i,o){Ee(t,e,n,r,i,o)}return n.ratio=function(t){return e((t=+t)>1?t:1)},n}(ke);function Ce(){var e=De,t=!1,n=1,r=1,i=[0],o=K,a=K,s=K,u=K,c=K;function l(e){return e.x0=e.y0=0,e.x1=n,e.y1=r,e.eachBefore(f),i=[0],t&&e.eachBefore(ae),e}function f(t){var n=i[t.depth],r=t.x0+n,l=t.y0+n,f=t.x1-n,d=t.y1-n;f<r&&(r=f=(r+f)/2),d<l&&(l=d=(l+d)/2),t.x0=r,t.y0=l,t.x1=f,t.y1=d,t.children&&(n=i[t.depth+1]=o(t)/2,r+=c(t)-n,l+=a(t)-n,(f-=s(t)-n)<r&&(r=f=(r+f)/2),(d-=u(t)-n)<l&&(l=d=(l+d)/2),e(t,r,l,f,d))}return l.round=function(e){return arguments.length?(t=!!e,l):t},l.size=function(e){return arguments.length?(n=+e[0],r=+e[1],l):[n,r]},l.tile=function(t){return arguments.length?(e=Z(t),l):e},l.padding=function(e){return arguments.length?l.paddingInner(e).paddingOuter(e):l.paddingInner()},l.paddingInner=function(e){return arguments.length?(o="function"===typeof e?e:ee(+e),l):o},l.paddingOuter=function(e){return arguments.length?l.paddingTop(e).paddingRight(e).paddingBottom(e).paddingLeft(e):l.paddingTop()},l.paddingTop=function(e){return arguments.length?(a="function"===typeof e?e:ee(+e),l):a},l.paddingRight=function(e){return arguments.length?(s="function"===typeof e?e:ee(+e),l):s},l.paddingBottom=function(e){return arguments.length?(u="function"===typeof e?e:ee(+e),l):u},l.paddingLeft=function(e){return arguments.length?(c="function"===typeof e?e:ee(+e),l):c},l}function Me(e,t,n,r,i){var o,a,s=e.children,u=s.length,c=new Array(u+1);for(c[0]=a=o=0;o<u;++o)c[o+1]=a+=s[o].value;function l(e,t,n,r,i,o,a){if(e>=t-1){var u=s[e];return u.x0=r,u.y0=i,u.x1=o,void(u.y1=a)}for(var f=c[e],d=n/2+f,h=e+1,p=t-1;h<p;){var g=h+p>>>1;c[g]<d?h=g+1:p=g}d-c[h-1]<c[h]-d&&e+1<h&&--h;var m=c[h]-f,v=n-m;if(o-r>a-i){var y=n?(r*v+o*m)/n:o;l(e,h,m,r,i,y,a),l(h,t,v,y,i,o,a)}else{var b=n?(i*v+a*m)/n:a;l(e,h,m,r,i,o,b),l(h,t,v,r,b,o,a)}}l(0,u,e.value,t,n,r,i)}function Fe(e,t,n,r,i){(1&e.depth?Ae:se)(e,t,n,r,i)}var Se=function e(t){function n(e,n,r,i,o){if((a=e._squarify)&&a.ratio===t)for(var a,s,u,c,l,f=-1,d=a.length,h=e.value;++f<d;){for(u=(s=a[f]).children,c=s.value=0,l=u.length;c<l;++c)s.value+=u[c].value;s.dice?se(s,n,r,i,h?r+=(o-r)*s.value/h:o):Ae(s,n,r,h?n+=(i-n)*s.value/h:i,o),h-=s.value}else e._squarify=a=Ee(t,e,n,r,i,o),a.ratio=t}return n.ratio=function(t){return e((t=+t)>1?t:1)},n}(ke);e.cluster=f,e.hierarchy=C,e.pack=ne,e.packEnclose=B,e.packSiblings=J,e.partition=ue,e.stratify=he,e.tree=_e,e.treemap=Ce,e.treemapBinary=Me,e.treemapDice=se,e.treemapResquarify=Se,e.treemapSlice=Ae,e.treemapSliceDice=Fe,e.treemapSquarify=De,Object.defineProperty(e,"__esModule",{value:!0})}(t)},2353:function(e,t,n){var r=n(163);!function(e,t,n,i,o){"use strict";const a=4278190080,s=268435456,u=.0625;function c(e,t){const n=e.bitmap();return(t||[]).forEach((t=>n.set(e(t.boundary[0]),e(t.boundary[3])))),[n,void 0]}function l(e,n,r,i){const o=e.width,u=e.height,c=r||i,l=t.canvas(o,u).getContext("2d");n.forEach((e=>f(l,e,c)));const d=new Uint32Array(l.getImageData(0,0,o,u).data.buffer),h=e.bitmap(),p=c&&e.bitmap();let g,m,v,y,b;for(m=0;m<u;++m)for(g=0;g<o;++g)b=d[m*o+g]&a,b&&(v=e(g),y=e(m),i||h.set(v,y),c&&b^s&&p.set(v,y));return[h,p]}function f(e,t,n){if(!t.length)return;const r=t[0].mark.marktype;"group"===r?t.forEach((t=>{t.items.forEach((t=>f(e,t.items,n)))})):i.Marks[r].draw(e,{items:n?t.map(d):t})}function d(e){const t=n.rederive(e,{});return t.stroke&&(t.strokeOpacity=1),t.fill&&(t.fillOpacity=u,t.stroke="#000",t.strokeOpacity=1,t.strokeWidth=2),t}const h=5,p=31,g=32,m=new Uint32Array(g+1),v=new Uint32Array(g+1);v[0]=0,m[0]=~v[0];for(let r=1;r<=g;++r)v[r]=v[r-1]<<1|1,m[r]=~v[r];function y(e,t){const n=new Uint32Array(~~((e*t+g)/g));function r(e,t){n[e]|=t}function i(e,t){n[e]&=t}return{array:n,get:(t,r)=>{const i=r*e+t;return n[i>>>h]&1<<(i&p)},set:(t,n)=>{const i=n*e+t;r(i>>>h,1<<(i&p))},clear:(t,n)=>{const r=n*e+t;i(r>>>h,~(1<<(r&p)))},getRange:(t,r,i,o)=>{let a,s,u,c,l=o;for(;l>=r;--l)if(a=l*e+t,s=l*e+i,u=a>>>h,c=s>>>h,u===c){if(n[u]&m[a&p]&v[1+(s&p)])return!0}else{if(n[u]&m[a&p])return!0;if(n[c]&v[1+(s&p)])return!0;for(let e=u+1;e<c;++e)if(n[e])return!0}return!1},setRange:(t,n,i,o)=>{let a,s,u,c,l;for(;n<=o;++n)if(a=n*e+t,s=n*e+i,u=a>>>h,c=s>>>h,u===c)r(u,m[a&p]&v[1+(s&p)]);else for(r(u,m[a&p]),r(c,v[1+(s&p)]),l=u+1;l<c;++l)r(l,4294967295)},clearRange:(t,n,r,o)=>{let a,s,u,c,l;for(;n<=o;++n)if(a=n*e+t,s=n*e+r,u=a>>>h,c=s>>>h,u===c)i(u,v[a&p]|m[1+(s&p)]);else for(i(u,v[a&p]),i(c,m[1+(s&p)]),l=u+1;l<c;++l)i(l,0)},outOfBounds:(n,r,i,o)=>n<0||r<0||o>=t||i>=e}}function b(e,t,n){const r=Math.max(1,Math.sqrt(e*t/1e6)),i=~~((e+2*n+r)/r),o=~~((t+2*n+r)/r),a=e=>~~((e+n)/r);return a.invert=e=>e*r-n,a.bitmap=()=>y(i,o),a.ratio=r,a.padding=n,a.width=e,a.height=t,a}function x(e,t,n,r){const o=e.width,a=e.height;return function(e){const t=e.datum.datum.items[r].items,n=t.length,s=e.datum.fontSize,u=i.textMetrics.width(e.datum,e.datum.text);let c,l,f,d,h,p,g,m=0;for(let r=0;r<n;++r)c=t[r].x,f=t[r].y,l=void 0===t[r].x2?c:t[r].x2,d=void 0===t[r].y2?f:t[r].y2,h=(c+l)/2,p=(f+d)/2,g=Math.abs(l-c+d-f),g>=m&&(m=g,e.x=h,e.y=p);return h=u/2,p=s/2,c=e.x-h,l=e.x+h,f=e.y-p,d=e.y+p,e.align="center",c<0&&l<=o?e.align="left":0<=c&&o<l&&(e.align="right"),e.baseline="middle",f<0&&d<=a?e.baseline="top":0<=f&&a<d&&(e.baseline="bottom"),!0}}function w(e,t,n,r,i,o){let a=n/2;return e-a<0||e+a>i||t-(a=r/2)<0||t+a>o}function _(e,t,n,r,i,o,a,s){const u=i*o/(2*r),c=e(t-u),l=e(t+u),f=e(n-(o/=2)),d=e(n+o);return a.outOfBounds(c,f,l,d)||a.getRange(c,f,l,d)||s&&s.getRange(c,f,l,d)}function A(e,t,n,o){const a=e.width,s=e.height,u=t[0],c=t[1];function l(t,n,r,i,o){const l=e.invert(t),f=e.invert(n);let d,h=r,p=s;if(!w(l,f,i,o,a,s)&&!_(e,l,f,o,i,h,u,c)&&!_(e,l,f,o,i,o,u,null)){for(;p-h>=1;)d=(h+p)/2,_(e,l,f,o,i,d,u,c)?p=d:h=d;if(h>r)return[l,f,h,!0]}}return function(t){const c=t.datum.datum.items[o].items,f=c.length,d=t.datum.fontSize,h=i.textMetrics.width(t.datum,t.datum.text);let p,g,m,v,y,b,x,A,k,E,D,C,M,F,S,T,O,N=n?d:0,P=!1,R=!1,B=0;for(let i=0;i<f;++i){for(p=c[i].x,m=c[i].y,g=void 0===c[i].x2?p:c[i].x2,v=void 0===c[i].y2?m:c[i].y2,p>g&&(O=p,p=g,g=O),m>v&&(O=m,m=v,v=O),k=e(p),D=e(g),E=~~((k+D)/2),C=e(m),F=e(v),M=~~((C+F)/2),x=E;x>=k;--x)for(A=M;A>=C;--A)if(T=l(x,A,N,h,d),T){var z=r(T,4);t.x=z[0],t.y=z[1],N=z[2],P=z[3]}for(x=E;x<=D;++x)for(A=M;A<=F;++A)if(T=l(x,A,N,h,d),T){var j=r(T,4);t.x=j[0],t.y=j[1],N=j[2],P=j[3]}P||n||(S=Math.abs(g-p+v-m),y=(p+g)/2,b=(m+v)/2,S>=B&&!w(y,b,h,d,a,s)&&!_(e,y,b,d,h,d,u,null)&&(B=S,t.x=y,t.y=b,R=!0))}return!(!P&&!R)&&(y=h/2,b=d/2,u.setRange(e(t.x-y),e(t.y-b),e(t.x+y),e(t.y+b)),t.align="center",t.baseline="middle",!0)}}const k=[-1,-1,1,1],E=[-1,1,-1,1];function D(e,t,n,o){const a=e.width,s=e.height,u=t[0],c=t[1],l=e.bitmap();return function(t){const f=t.datum.datum.items[o].items,d=f.length,h=t.datum.fontSize,p=i.textMetrics.width(t.datum,t.datum.text),g=[];let m,v,y,b,x,A,D,C,M,F,S,T,O=n?h:0,N=!1,P=!1,R=0;for(let i=0;i<d;++i){for(m=f[i].x,y=f[i].y,v=void 0===f[i].x2?m:f[i].x2,b=void 0===f[i].y2?y:f[i].y2,g.push([e((m+v)/2),e((y+b)/2)]);g.length;){var B=g.pop(),z=r(B,2);if(D=z[0],C=z[1],!(u.get(D,C)||c.get(D,C)||l.get(D,C))){l.set(D,C);for(let e=0;e<4;++e)x=D+k[e],A=C+E[e],l.outOfBounds(x,A,x,A)||g.push([x,A]);if(x=e.invert(D),A=e.invert(C),M=O,F=s,!w(x,A,p,h,a,s)&&!_(e,x,A,h,p,M,u,c)&&!_(e,x,A,h,p,h,u,null)){for(;F-M>=1;)S=(M+F)/2,_(e,x,A,h,p,S,u,c)?F=S:M=S;M>O&&(t.x=x,t.y=A,O=M,N=!0)}}}N||n||(T=Math.abs(v-m+b-y),x=(m+v)/2,A=(y+b)/2,T>=R&&!w(x,A,p,h,a,s)&&!_(e,x,A,h,p,h,u,null)&&(R=T,t.x=x,t.y=A,P=!0))}return!(!N&&!P)&&(x=p/2,A=h/2,u.setRange(e(t.x-x),e(t.y-A),e(t.x+x),e(t.y+A)),t.align="center",t.baseline="middle",!0)}}const C=["right","center","left"],M=["bottom","middle","top"];function F(e,t,n,r){const o=e.width,a=e.height,s=t[0],u=t[1],c=r.length;return function(t){const l=t.boundary,f=t.datum.fontSize;if(l[2]<0||l[5]<0||l[0]>o||l[3]>a)return!1;let d,h,p,g,m,v,y,b,x,w,_,A,k,E,D,F=0;for(let o=0;o<c;++o){if(d=(3&n[o])-1,h=(n[o]>>>2&3)-1,p=0===d&&0===h||r[o]<0,g=d&&h?Math.SQRT1_2:1,m=r[o]<0?-1:1,v=l[1+d]+r[o]*d*g,_=l[4+h]+m*f*h/2+r[o]*h*g,b=_-f/2,x=_+f/2,A=e(v),E=e(b),D=e(x),!F){if(!S(A,A,E,D,s,u,v,v,b,x,l,p))continue;F=i.textMetrics.width(t.datum,t.datum.text)}if(w=v+m*F*d/2,v=w-F/2,y=w+F/2,A=e(v),k=e(y),S(A,k,E,D,s,u,v,y,b,x,l,p))return t.x=d?d*m<0?y:v:w,t.y=h?h*m<0?x:b:_,t.align=C[d*m+1],t.baseline=M[h*m+1],s.setRange(A,E,k,D),!0}return!1}}function S(e,t,n,r,i,o,a,s,u,c,l,f){return!(i.outOfBounds(e,n,t,r)||(f&&o?o.getRange(e,n,t,r)||!T(a,u,s,c,l):i.getRange(e,n,t,r)))}function T(e,t,n,r,i){return i[0]<=e&&n<=i[2]&&i[3]<=t&&r<=i[5]}const O=0,N=4,P=8,R=0,B=1,z=2,j={"top-left":O+R,top:O+B,"top-right":O+z,left:N+R,middle:N+B,right:N+z,"bottom-left":P+R,bottom:P+B,"bottom-right":P+z},L={naive:x,"reduced-search":A,floodfill:D};function I(e,t,n,r,i,o,a,s,u,f,d){if(!e.length)return e;const h=Math.max(r.length,i.length),p=U(r,h),g=q(i,h),m=W(e[0].datum),v="group"===m&&e[0].datum.items[u].marktype,y="area"===v,x=H(m,v,s,u),w=b(t[0],t[1],f),_=y&&"naive"===d,A=e.map((e=>({datum:e,opacity:0,x:void 0,y:void 0,align:void 0,baseline:void 0,boundary:x(e)})));let k;if(!_){n&&A.sort(((e,t)=>n(e.datum,t.datum)));let t=!1;for(let e=0;e<g.length&&!t;++e)t=5===g[e]||p[e]<0;m&&(a||y)&&(o=[e.map((e=>e.datum))].concat(o)),k=o.length?l(w,o,t,y):c(w,a&&A)}const E=y?L[d](w,k,a,u):F(w,k,g,p);return A.forEach((e=>e.opacity=+E(e))),A}function U(e,t){const n=new Float64Array(t),r=e.length;for(let i=0;i<r;++i)n[i]=e[i]||0;for(let i=r;i<t;++i)n[i]=n[r-1];return n}function q(e,t){const n=new Int8Array(t),r=e.length;for(let i=0;i<r;++i)n[i]|=j[e[i]];for(let i=r;i<t;++i)n[i]=n[r-1];return n}function W(e){return e&&e.mark&&e.mark.marktype}function H(e,t,n,r){const i=e=>[e.x,e.x,e.x,e.y,e.y,e.y];return e?"line"===e||"area"===e?e=>i(e.datum):"line"===t?e=>{const t=e.datum.items[r].items;return i(t.length?t["start"===n?0:t.length-1]:{x:NaN,y:NaN})}:e=>{const t=e.datum.bounds;return[t.x1,(t.x1+t.x2)/2,t.x2,t.y1,(t.y1+t.y2)/2,t.y2]}:i}const Y=["x","y","opacity","align","baseline"],V=["top-left","left","bottom-left","top","bottom","top-right","right","bottom-right"];function G(e){n.Transform.call(this,null,e)}G.Definition={type:"Label",metadata:{modifies:!0},params:[{name:"size",type:"number",array:!0,length:2,required:!0},{name:"sort",type:"compare"},{name:"anchor",type:"string",array:!0,default:V},{name:"offset",type:"number",array:!0,default:[1]},{name:"padding",type:"number",default:0},{name:"lineAnchor",type:"string",values:["start","end"],default:"end"},{name:"markIndex",type:"number",default:0},{name:"avoidBaseMark",type:"boolean",default:!0},{name:"avoidMarks",type:"data",array:!0},{name:"method",type:"string",default:"naive"},{name:"as",type:"string",array:!0,length:Y.length,default:Y}]},o.inherits(G,n.Transform,{transform(e,t){function n(n){const r=e[n];return o.isFunction(r)&&t.modified(r.fields)}const r=e.modified();if(!(r||t.changed(t.ADD_REM)||n("sort")))return;e.size&&2===e.size.length||o.error("Size parameter should be specified as a [width, height] array.");const i=e.as||Y;return I(t.materialize(t.SOURCE).source,e.size,e.sort,o.array(e.offset||1),o.array(e.anchor||V),e.avoidMarks||[],!1!==e.avoidBaseMark,e.lineAnchor||"end",e.markIndex||0,e.padding||0,e.method||"naive").forEach((e=>{const t=e.datum;t[i[0]]=e.x,t[i[1]]=e.y,t[i[2]]=e.opacity,t[i[3]]=e.align,t[i[4]]=e.baseline})),t.reflow(r).modifies(i)}}),e.label=G,Object.defineProperty(e,"__esModule",{value:!0})}(t,n(1369),n(1183),n(1323),n(1176))},2354:function(e,t,n){!function(e,t,n,r){"use strict";function i(e,t){var n,r,i,o,a,s,u=[],c=function(e){return e(o)};if(null==t)u.push(e);else for(n={},r=0,i=e.length;r<i;++r)o=e[r],(s=n[a=t.map(c)])||(n[a]=s=[],s.dims=a,u.push(s)),s.push(o);return u}function o(e){n.Transform.call(this,null,e)}o.Definition={type:"Loess",metadata:{generates:!0},params:[{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"groupby",type:"field",array:!0},{name:"bandwidth",type:"number",default:.3},{name:"as",type:"string",array:!0}]},r.inherits(o,n.Transform,{transform(e,o){const a=o.fork(o.NO_SOURCE|o.NO_FIELDS);if(!this.value||o.changed()||e.modified()){const s=i(o.materialize(o.SOURCE).source,e.groupby),u=(e.groupby||[]).map(r.accessorName),c=u.length,l=e.as||[r.accessorName(e.x),r.accessorName(e.y)],f=[];s.forEach((r=>{t.regressionLoess(r,e.x,e.y,e.bandwidth||.3).forEach((e=>{const t={};for(let n=0;n<c;++n)t[u[n]]=r.dims[n];t[l[0]]=e[0],t[l[1]]=e[1],f.push(n.ingest(t))}))})),this.value&&(a.rem=this.value),this.value=a.add=a.source=f}return a}});const a={linear:t.regressionLinear,log:t.regressionLog,exp:t.regressionExp,pow:t.regressionPow,quad:t.regressionQuad,poly:t.regressionPoly},s=(e,t)=>"poly"===e?t:"quad"===e?2:1;function u(e){n.Transform.call(this,null,e)}u.Definition={type:"Regression",metadata:{generates:!0},params:[{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"groupby",type:"field",array:!0},{name:"method",type:"string",default:"linear",values:Object.keys(a)},{name:"order",type:"number",default:3},{name:"extent",type:"number",array:!0,length:2},{name:"params",type:"boolean",default:!1},{name:"as",type:"string",array:!0}]},r.inherits(u,n.Transform,{transform(e,o){const u=o.fork(o.NO_SOURCE|o.NO_FIELDS);if(!this.value||o.changed()||e.modified()){const c=i(o.materialize(o.SOURCE).source,e.groupby),l=(e.groupby||[]).map(r.accessorName),f=e.method||"linear",d=e.order||3,h=s(f,d),p=e.as||[r.accessorName(e.x),r.accessorName(e.y)],g=a[f],m=[];let v=e.extent;r.hasOwnProperty(a,f)||r.error("Invalid regression method: "+f),null!=v&&"log"===f&&v[0]<=0&&(o.dataflow.warn("Ignoring extent with values <= 0 for log regression."),v=null),c.forEach((i=>{if(i.length<=h)return void o.dataflow.warn("Skipping regression with more parameters than data points.");const a=g(i,e.x,e.y,d);if(e.params)return void m.push(n.ingest({keys:i.dims,coef:a.coef,rSquared:a.rSquared}));const s=v||r.extent(i,e.x),u=e=>{const t={};for(let n=0;n<l.length;++n)t[l[n]]=i.dims[n];t[p[0]]=e[0],t[p[1]]=e[1],m.push(n.ingest(t))};"linear"===f?s.forEach((e=>u([e,a.predict(e)]))):t.sampleCurve(a.predict,s,25,200).forEach(u)})),this.value&&(u.rem=this.value),this.value=u.add=u.source=m}return u}}),e.loess=o,e.regression=u,Object.defineProperty(e,"__esModule",{value:!0})}(t,n(1282),n(1183),n(1176))},2355:function(e,t,n){!function(e,t,n,r){"use strict";function i(e){t.Transform.call(this,null,e)}i.Definition={type:"Voronoi",metadata:{modifies:!0},params:[{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"size",type:"number",array:!0,length:2},{name:"extent",type:"array",array:!0,length:2,default:[[-1e5,-1e5],[1e5,1e5]],content:{type:"number",array:!0,length:2}},{name:"as",type:"string",default:"path"}]};const o=[-1e5,-1e5,1e5,1e5];function a(e){const t=e[0][0],n=e[0][1];let r=e.length-1;for(;e[r][0]===t&&e[r][1]===n;--r);return"M"+e.slice(0,r+1).join("L")+"Z"}n.inherits(i,t.Transform,{transform(e,t){const n=e.as||"path",i=t.source;if(!i||!i.length)return t;let s=e.size;s=s?[0,0,s[0],s[1]]:(s=e.extent)?[s[0][0],s[0][1],s[1][0],s[1][1]]:o;const u=this.value=r.Delaunay.from(i,e.x,e.y).voronoi(s);for(let r=0,o=i.length;r<o;++r){const e=u.cellPolygon(r);i[r][n]=e?a(e):null}return t.reflow(e.modified()).modifies(n)}}),e.voronoi=i,Object.defineProperty(e,"__esModule",{value:!0})}(t,n(1183),n(1176),n(2356))},2356:function(e,t,n){var r=n(163),i=n(108),o=n(16);!function(e){"use strict";var t=o.mark(T);const n=Math.pow(2,-52),a=new Uint32Array(512);class s{static from(e,t=v,n=y){const r=e.length,i=new Float64Array(2*r);for(let o=0;o<r;o++){const r=e[o];i[2*o]=t(r),i[2*o+1]=n(r)}return new s(i)}constructor(e){const t=e.length>>1;if(t>0&&"number"!==typeof e[0])throw new Error("Expected coords to contain numbers.");this.coords=e;const n=Math.max(2*t-5,0);this._triangles=new Uint32Array(3*n),this._halfedges=new Int32Array(3*n),this._hashSize=Math.ceil(Math.sqrt(t)),this._hullPrev=new Uint32Array(t),this._hullNext=new Uint32Array(t),this._hullTri=new Uint32Array(t),this._hullHash=new Int32Array(this._hashSize).fill(-1),this._ids=new Uint32Array(t),this._dists=new Float64Array(t),this.update()}update(){const e=this.coords,t=this._hullPrev,r=this._hullNext,i=this._hullTri,o=this._hullHash,a=e.length>>1;let s=1/0,u=1/0,l=-1/0,d=-1/0;for(let n=0;n<a;n++){const t=e[2*n],r=e[2*n+1];t<s&&(s=t),r<u&&(u=r),t>l&&(l=t),r>d&&(d=r),this._ids[n]=n}const m=(s+l)/2,v=(u+d)/2;let y,b,x,w=1/0;for(let n=0;n<a;n++){const t=c(m,v,e[2*n],e[2*n+1]);t<w&&(y=n,w=t)}const _=e[2*y],A=e[2*y+1];w=1/0;for(let n=0;n<a;n++){if(n===y)continue;const t=c(_,A,e[2*n],e[2*n+1]);t<w&&t>0&&(b=n,w=t)}let k=e[2*b],E=e[2*b+1],D=1/0;for(let n=0;n<a;n++){if(n===y||n===b)continue;const t=h(_,A,k,E,e[2*n],e[2*n+1]);t<D&&(x=n,D=t)}let C=e[2*x],M=e[2*x+1];if(D===1/0){for(let r=0;r<a;r++)this._dists[r]=e[2*r]-e[0]||e[2*r+1]-e[1];g(this._ids,this._dists,0,a-1);const t=new Uint32Array(a);let n=0;for(let e=0,r=-1/0;e<a;e++){const i=this._ids[e];this._dists[i]>r&&(t[n++]=i,r=this._dists[i])}return this.hull=t.subarray(0,n),this.triangles=new Uint32Array(0),void(this.halfedges=new Uint32Array(0))}if(f(_,A,k,E,C,M)){const e=b,t=k,n=E;b=x,k=C,E=M,x=e,C=t,M=n}const F=p(_,A,k,E,C,M);this._cx=F.x,this._cy=F.y;for(let n=0;n<a;n++)this._dists[n]=c(e[2*n],e[2*n+1],F.x,F.y);g(this._ids,this._dists,0,a-1),this._hullStart=y;let S=3;r[y]=t[x]=b,r[b]=t[y]=x,r[x]=t[b]=y,i[y]=0,i[b]=1,i[x]=2,o.fill(-1),o[this._hashKey(_,A)]=y,o[this._hashKey(k,E)]=b,o[this._hashKey(C,M)]=x,this.trianglesLen=0,this._addTriangle(y,b,x,-1,-1,-1);for(let c,h,p=0;p<this._ids.length;p++){const a=this._ids[p],s=e[2*a],u=e[2*a+1];if(p>0&&Math.abs(s-c)<=n&&Math.abs(u-h)<=n)continue;if(c=s,h=u,a===y||a===b||a===x)continue;let l=0;for(let e=0,t=this._hashKey(s,u);e<this._hashSize&&(l=o[(t+e)%this._hashSize],-1===l||l===r[l]);e++);l=t[l];let d,g=l;for(;d=r[g],!f(s,u,e[2*g],e[2*g+1],e[2*d],e[2*d+1]);)if(g=d,g===l){g=-1;break}if(-1===g)continue;let m=this._addTriangle(g,a,r[g],-1,-1,i[g]);i[a]=this._legalize(m+2),i[g]=m,S++;let v=r[g];for(;d=r[v],f(s,u,e[2*v],e[2*v+1],e[2*d],e[2*d+1]);)m=this._addTriangle(v,a,d,i[a],-1,i[v]),i[a]=this._legalize(m+2),r[v]=v,S--,v=d;if(g===l)for(;d=t[g],f(s,u,e[2*d],e[2*d+1],e[2*g],e[2*g+1]);)m=this._addTriangle(d,a,g,-1,i[g],i[d]),this._legalize(m+2),i[d]=m,r[g]=g,S--,g=d;this._hullStart=t[a]=g,r[g]=t[v]=a,r[a]=v,o[this._hashKey(s,u)]=a,o[this._hashKey(e[2*g],e[2*g+1])]=g}this.hull=new Uint32Array(S);for(let n=0,c=this._hullStart;n<S;n++)this.hull[n]=c,c=r[c];this.triangles=this._triangles.subarray(0,this.trianglesLen),this.halfedges=this._halfedges.subarray(0,this.trianglesLen)}_hashKey(e,t){return Math.floor(u(e-this._cx,t-this._cy)*this._hashSize)%this._hashSize}_legalize(e){const t=this._triangles,n=this._halfedges,r=this.coords;let i=0,o=0;for(;;){const s=n[e],u=e-e%3;if(o=u+(e+2)%3,-1===s){if(0===i)break;e=a[--i];continue}const c=s-s%3,l=u+(e+1)%3,f=c+(s+2)%3,h=t[o],p=t[e],g=t[l],m=t[f];if(d(r[2*h],r[2*h+1],r[2*p],r[2*p+1],r[2*g],r[2*g+1],r[2*m],r[2*m+1])){t[e]=m,t[s]=h;const r=n[f];if(-1===r){let t=this._hullStart;do{if(this._hullTri[t]===f){this._hullTri[t]=e;break}t=this._hullPrev[t]}while(t!==this._hullStart)}this._link(e,r),this._link(s,n[o]),this._link(o,f);const u=c+(s+1)%3;i<a.length&&(a[i++]=u)}else{if(0===i)break;e=a[--i]}}return o}_link(e,t){this._halfedges[e]=t,-1!==t&&(this._halfedges[t]=e)}_addTriangle(e,t,n,r,i,o){const a=this.trianglesLen;return this._triangles[a]=e,this._triangles[a+1]=t,this._triangles[a+2]=n,this._link(a,r),this._link(a+1,i),this._link(a+2,o),this.trianglesLen+=3,a}}function u(e,t){const n=e/(Math.abs(e)+Math.abs(t));return(t>0?3-n:1+n)/4}function c(e,t,n,r){const i=e-n,o=t-r;return i*i+o*o}function l(e,t,n,r,i,o){const a=(r-t)*(i-e),s=(n-e)*(o-t);return Math.abs(a-s)>=33306690738754716e-32*Math.abs(a+s)?a-s:0}function f(e,t,n,r,i,o){return(l(i,o,e,t,n,r)||l(e,t,n,r,i,o)||l(n,r,i,o,e,t))<0}function d(e,t,n,r,i,o,a,s){const u=e-a,c=t-s,l=n-a,f=r-s,d=i-a,h=o-s,p=l*l+f*f,g=d*d+h*h;return u*(f*g-p*h)-c*(l*g-p*d)+(u*u+c*c)*(l*h-f*d)<0}function h(e,t,n,r,i,o){const a=n-e,s=r-t,u=i-e,c=o-t,l=a*a+s*s,f=u*u+c*c,d=.5/(a*c-s*u),h=(c*l-s*f)*d,p=(a*f-u*l)*d;return h*h+p*p}function p(e,t,n,r,i,o){const a=n-e,s=r-t,u=i-e,c=o-t,l=a*a+s*s,f=u*u+c*c,d=.5/(a*c-s*u);return{x:e+(c*l-s*f)*d,y:t+(a*f-u*l)*d}}function g(e,t,n,r){if(r-n<=20)for(let i=n+1;i<=r;i++){const r=e[i],o=t[r];let a=i-1;for(;a>=n&&t[e[a]]>o;)e[a+1]=e[a--];e[a+1]=r}else{let i=n+1,o=r;m(e,n+r>>1,i),t[e[n]]>t[e[r]]&&m(e,n,r),t[e[i]]>t[e[r]]&&m(e,i,r),t[e[n]]>t[e[i]]&&m(e,n,i);const a=e[i],s=t[a];for(;;){do{i++}while(t[e[i]]<s);do{o--}while(t[e[o]]>s);if(o<i)break;m(e,i,o)}e[n+1]=e[o],e[o]=a,r-i+1>=o-n?(g(e,t,i,r),g(e,t,n,o-1)):(g(e,t,n,o-1),g(e,t,i,r))}}function m(e,t,n){const r=e[t];e[t]=e[n],e[n]=r}function v(e){return e[0]}function y(e){return e[1]}const b=1e-6;class x{constructor(){this._x0=this._y0=this._x1=this._y1=null,this._=""}moveTo(e,t){this._+="M".concat(this._x0=this._x1=+e,",").concat(this._y0=this._y1=+t)}closePath(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")}lineTo(e,t){this._+="L".concat(this._x1=+e,",").concat(this._y1=+t)}arc(e,t,n){const r=(e=+e)+(n=+n),i=t=+t;if(n<0)throw new Error("negative radius");null===this._x1?this._+="M".concat(r,",").concat(i):(Math.abs(this._x1-r)>b||Math.abs(this._y1-i)>b)&&(this._+="L"+r+","+i),n&&(this._+="A".concat(n,",").concat(n,",0,1,1,").concat(e-n,",").concat(t,"A").concat(n,",").concat(n,",0,1,1,").concat(this._x1=r,",").concat(this._y1=i))}rect(e,t,n,r){this._+="M".concat(this._x0=this._x1=+e,",").concat(this._y0=this._y1=+t,"h").concat(+n,"v").concat(+r,"h").concat(-n,"Z")}value(){return this._||null}}class w{constructor(){this._=[]}moveTo(e,t){this._.push([e,t])}closePath(){this._.push(this._[0].slice())}lineTo(e,t){this._.push([e,t])}value(){return this._.length?this._:null}}class _{constructor(e,[t,n,r,i]=[0,0,960,500]){if(!((r=+r)>=(t=+t))||!((i=+i)>=(n=+n)))throw new Error("invalid bounds");this.delaunay=e,this._circumcenters=new Float64Array(2*e.points.length),this.vectors=new Float64Array(2*e.points.length),this.xmax=r,this.xmin=t,this.ymax=i,this.ymin=n,this._init()}update(){return this.delaunay.update(),this._init(),this}_init(){const e=this.delaunay,t=e.points,n=e.hull,r=e.triangles,i=this.vectors,o=this.circumcenters=this._circumcenters.subarray(0,r.length/3*2);for(let h,p,g=0,m=0,v=r.length;g<v;g+=3,m+=2){const e=2*r[g],n=2*r[g+1],i=2*r[g+2],a=t[e],s=t[e+1],u=t[n],c=t[n+1],l=t[i],f=t[i+1],d=u-a,v=c-s,y=l-a,b=f-s,x=d*d+v*v,w=y*y+b*b,_=2*(d*b-v*y);if(_)if(Math.abs(_)<1e-8)h=(a+l)/2,p=(s+f)/2;else{const e=1/_;h=a+(b*x-v*w)*e,p=s+(d*w-y*x)*e}else h=(a+l)/2-1e8*b,p=(s+f)/2+1e8*y;o[m]=h,o[m+1]=p}let a,s,u,c=n[n.length-1],l=4*c,f=t[2*c],d=t[2*c+1];i.fill(0);for(let h=0;h<n.length;++h)c=n[h],a=l,s=f,u=d,l=4*c,f=t[2*c],d=t[2*c+1],i[a+2]=i[l]=u-d,i[a+3]=i[l+1]=f-s}render(e){const t=null==e?e=new x:void 0,n=this.delaunay,r=n.halfedges,i=n.inedges,o=n.hull,a=this.circumcenters,s=this.vectors;if(o.length<=1)return null;for(let l=0,f=r.length;l<f;++l){const t=r[l];if(t<l)continue;const n=2*Math.floor(l/3),i=2*Math.floor(t/3),o=a[n],s=a[n+1],u=a[i],c=a[i+1];this._renderSegment(o,s,u,c,e)}let u,c=o[o.length-1];for(let l=0;l<o.length;++l){u=c,c=o[l];const t=2*Math.floor(i[c]/3),n=a[t],r=a[t+1],f=4*u,d=this._project(n,r,s[f+2],s[f+3]);d&&this._renderSegment(n,r,d[0],d[1],e)}return t&&t.value()}renderBounds(e){const t=null==e?e=new x:void 0;return e.rect(this.xmin,this.ymin,this.xmax-this.xmin,this.ymax-this.ymin),t&&t.value()}renderCell(e,t){const n=null==t?t=new x:void 0,r=this._clip(e);if(null===r||!r.length)return;t.moveTo(r[0],r[1]);let i=r.length;for(;r[0]===r[i-2]&&r[1]===r[i-1]&&i>1;)i-=2;for(let o=2;o<i;o+=2)r[o]===r[o-2]&&r[o+1]===r[o-1]||t.lineTo(r[o],r[o+1]);return t.closePath(),n&&n.value()}cellPolygons(){var e=this;return o.mark((function t(){var n,r,i,a;return o.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=e.delaunay.points,r=0,i=n.length/2;case 2:if(!(r<i)){t.next=11;break}if(!(a=e.cellPolygon(r))){t.next=8;break}return a.index=r,t.next=8,a;case 8:++r,t.next=2;break;case 11:case"end":return t.stop()}}),t)}))()}cellPolygon(e){const t=new w;return this.renderCell(e,t),t.value()}_renderSegment(e,t,n,r,i){let o;const a=this._regioncode(e,t),s=this._regioncode(n,r);0===a&&0===s?(i.moveTo(e,t),i.lineTo(n,r)):(o=this._clipSegment(e,t,n,r,a,s))&&(i.moveTo(o[0],o[1]),i.lineTo(o[2],o[3]))}contains(e,t,n){return(t=+t)===t&&(n=+n)===n&&this.delaunay._step(e,t,n)===e}neighbors(e){var t=this;return o.mark((function n(){var r,a,s,u,c,l,f,d,h;return o.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!(r=t._clip(e))){n.next=33;break}a=i(t.delaunay.neighbors(e)),n.prev=3,a.s();case 5:if((s=a.n()).done){n.next=25;break}if(u=s.value,!(c=t._clip(u))){n.next=23;break}l=0,f=r.length;case 10:if(!(l<f)){n.next=23;break}d=0,h=c.length;case 12:if(!(d<h)){n.next=20;break}if(r[l]!=c[d]||r[l+1]!=c[d+1]||r[(l+2)%f]!=c[(d+h-2)%h]||r[(l+3)%f]!=c[(d+h-1)%h]){n.next=17;break}return n.next=16,u;case 16:return n.abrupt("break",23);case 17:d+=2,n.next=12;break;case 20:l+=2,n.next=10;break;case 23:n.next=5;break;case 25:n.next=30;break;case 27:n.prev=27,n.t0=n.catch(3),a.e(n.t0);case 30:return n.prev=30,a.f(),n.finish(30);case 33:case"end":return n.stop()}}),n,null,[[3,27,30,33]])}))()}_cell(e){const t=this.circumcenters,n=this.delaunay,r=n.inedges,i=n.halfedges,o=n.triangles,a=r[e];if(-1===a)return null;const s=[];let u=a;do{const n=Math.floor(u/3);if(s.push(t[2*n],t[2*n+1]),u=u%3===2?u-2:u+1,o[u]!==e)break;u=i[u]}while(u!==a&&-1!==u);return s}_clip(e){if(0===e&&1===this.delaunay.hull.length)return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];const t=this._cell(e);if(null===t)return null;const n=this.vectors,r=4*e;return n[r]||n[r+1]?this._clipInfinite(e,t,n[r],n[r+1],n[r+2],n[r+3]):this._clipFinite(e,t)}_clipFinite(e,t){const n=t.length;let i,o,a,s,u,c=null,l=t[n-2],f=t[n-1],d=this._regioncode(l,f);for(let g=0;g<n;g+=2)if(i=l,o=f,l=t[g],f=t[g+1],a=d,d=this._regioncode(l,f),0===a&&0===d)s=u,u=0,c?c.push(l,f):c=[l,f];else{let t,n,g,m,v;if(0===a){if(null===(t=this._clipSegment(i,o,l,f,a,d)))continue;var h=r(t,4);n=h[0],g=h[1],m=h[2],v=h[3]}else{if(null===(t=this._clipSegment(l,f,i,o,d,a)))continue;var p=r(t,4);m=p[0],v=p[1],n=p[2],g=p[3],s=u,u=this._edgecode(n,g),s&&u&&this._edge(e,s,u,c,c.length),c?c.push(n,g):c=[n,g]}s=u,u=this._edgecode(m,v),s&&u&&this._edge(e,s,u,c,c.length),c?c.push(m,v):c=[m,v]}if(c)s=u,u=this._edgecode(c[0],c[1]),s&&u&&this._edge(e,s,u,c,c.length);else if(this.contains(e,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2))return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];return c}_clipSegment(e,t,n,r,i,o){for(;;){if(0===i&&0===o)return[e,t,n,r];if(i&o)return null;let a,s,u=i||o;8&u?(a=e+(n-e)*(this.ymax-t)/(r-t),s=this.ymax):4&u?(a=e+(n-e)*(this.ymin-t)/(r-t),s=this.ymin):2&u?(s=t+(r-t)*(this.xmax-e)/(n-e),a=this.xmax):(s=t+(r-t)*(this.xmin-e)/(n-e),a=this.xmin),i?(e=a,t=s,i=this._regioncode(e,t)):(n=a,r=s,o=this._regioncode(n,r))}}_clipInfinite(e,t,n,r,i,o){let a,s=Array.from(t);if((a=this._project(s[0],s[1],n,r))&&s.unshift(a[0],a[1]),(a=this._project(s[s.length-2],s[s.length-1],i,o))&&s.push(a[0],a[1]),s=this._clipFinite(e,s))for(let u,c=0,l=s.length,f=this._edgecode(s[l-2],s[l-1]);c<l;c+=2)u=f,f=this._edgecode(s[c],s[c+1]),u&&f&&(c=this._edge(e,u,f,s,c),l=s.length);else this.contains(e,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2)&&(s=[this.xmin,this.ymin,this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax]);return s}_edge(e,t,n,r,i){for(;t!==n;){let n,o;switch(t){case 5:t=4;continue;case 4:t=6,n=this.xmax,o=this.ymin;break;case 6:t=2;continue;case 2:t=10,n=this.xmax,o=this.ymax;break;case 10:t=8;continue;case 8:t=9,n=this.xmin,o=this.ymax;break;case 9:t=1;continue;case 1:t=5,n=this.xmin,o=this.ymin}r[i]===n&&r[i+1]===o||!this.contains(e,n,o)||(r.splice(i,0,n,o),i+=2)}if(r.length>4)for(let o=0;o<r.length;o+=2){const e=(o+2)%r.length,t=(o+4)%r.length;(r[o]===r[e]&&r[e]===r[t]||r[o+1]===r[e+1]&&r[e+1]===r[t+1])&&(r.splice(e,2),o-=2)}return i}_project(e,t,n,r){let i,o,a,s=1/0;if(r<0){if(t<=this.ymin)return null;(i=(this.ymin-t)/r)<s&&(a=this.ymin,o=e+(s=i)*n)}else if(r>0){if(t>=this.ymax)return null;(i=(this.ymax-t)/r)<s&&(a=this.ymax,o=e+(s=i)*n)}if(n>0){if(e>=this.xmax)return null;(i=(this.xmax-e)/n)<s&&(o=this.xmax,a=t+(s=i)*r)}else if(n<0){if(e<=this.xmin)return null;(i=(this.xmin-e)/n)<s&&(o=this.xmin,a=t+(s=i)*r)}return[o,a]}_edgecode(e,t){return(e===this.xmin?1:e===this.xmax?2:0)|(t===this.ymin?4:t===this.ymax?8:0)}_regioncode(e,t){return(e<this.xmin?1:e>this.xmax?2:0)|(t<this.ymin?4:t>this.ymax?8:0)}}const A=2*Math.PI,k=Math.pow;function E(e){return e[0]}function D(e){return e[1]}function C(e){const t=e.triangles,n=e.coords;for(let r=0;r<t.length;r+=3){const e=2*t[r],i=2*t[r+1],o=2*t[r+2];if((n[o]-n[e])*(n[i+1]-n[e+1])-(n[i]-n[e])*(n[o+1]-n[e+1])>1e-10)return!1}return!0}function M(e,t,n){return[e+Math.sin(e+t)*n,t+Math.cos(e-t)*n]}class F{static from(e,t=E,n=D,r){return new F("length"in e?S(e,t,n,r):Float64Array.from(T(e,t,n,r)))}constructor(e){this._delaunator=new s(e),this.inedges=new Int32Array(e.length/2),this._hullIndex=new Int32Array(e.length/2),this.points=this._delaunator.coords,this._init()}update(){return this._delaunator.update(),this._init(),this}_init(){const e=this._delaunator,t=this.points;if(e.hull&&e.hull.length>2&&C(e)){this.collinear=Int32Array.from({length:t.length/2},((e,t)=>t)).sort(((e,n)=>t[2*e]-t[2*n]||t[2*e+1]-t[2*n+1]));const e=this.collinear[0],n=this.collinear[this.collinear.length-1],r=[t[2*e],t[2*e+1],t[2*n],t[2*n+1]],i=1e-8*Math.hypot(r[3]-r[1],r[2]-r[0]);for(let o=0,a=t.length/2;o<a;++o){const e=M(t[2*o],t[2*o+1],i);t[2*o]=e[0],t[2*o+1]=e[1]}this._delaunator=new s(t)}else delete this.collinear;const n=this.halfedges=this._delaunator.halfedges,r=this.hull=this._delaunator.hull,i=this.triangles=this._delaunator.triangles,o=this.inedges.fill(-1),a=this._hullIndex.fill(-1);for(let s=0,u=n.length;s<u;++s){const e=i[s%3===2?s-2:s+1];-1!==n[s]&&-1!==o[e]||(o[e]=s)}for(let s=0,u=r.length;s<u;++s)a[r[s]]=s;r.length<=2&&r.length>0&&(this.triangles=new Int32Array(3).fill(-1),this.halfedges=new Int32Array(3).fill(-1),this.triangles[0]=r[0],this.triangles[1]=r[1],this.triangles[2]=r[1],o[r[0]]=1,2===r.length&&(o[r[1]]=0))}voronoi(e){return new _(this,e)}neighbors(e){var t=this;return o.mark((function n(){var r,i,a,s,u,c,l,f,d,h,p;return o.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(r=t.inedges,i=t.hull,a=t._hullIndex,s=t.halfedges,u=t.triangles,!(c=t.collinear)){n.next=10;break}if(!((l=c.indexOf(e))>0)){n.next=6;break}return n.next=6,c[l-1];case 6:if(!(l<c.length-1)){n.next=9;break}return n.next=9,c[l+1];case 9:return n.abrupt("return");case 10:if(-1!==(f=r[e])){n.next=13;break}return n.abrupt("return");case 13:d=f,h=-1;case 14:return n.next=16,h=u[d];case 16:if(u[d=d%3===2?d-2:d+1]===e){n.next=19;break}return n.abrupt("return");case 19:if(-1!==(d=s[d])){n.next=26;break}if((p=i[(a[e]+1)%i.length])===h){n.next=25;break}return n.next=25,p;case 25:return n.abrupt("return");case 26:if(d!==f){n.next=14;break}case 27:case"end":return n.stop()}}),n)}))()}find(e,t,n=0){if((e=+e)!==e||(t=+t)!==t)return-1;const r=n;let i;for(;(i=this._step(n,e,t))>=0&&i!==n&&i!==r;)n=i;return i}_step(e,t,n){const r=this.inedges,i=this.hull,o=this._hullIndex,a=this.halfedges,s=this.triangles,u=this.points;if(-1===r[e]||!u.length)return(e+1)%(u.length>>1);let c=e,l=k(t-u[2*e],2)+k(n-u[2*e+1],2);const f=r[e];let d=f;do{let r=s[d];const f=k(t-u[2*r],2)+k(n-u[2*r+1],2);if(f<l&&(l=f,c=r),d=d%3===2?d-2:d+1,s[d]!==e)break;if(d=a[d],-1===d){if(d=i[(o[e]+1)%i.length],d!==r&&k(t-u[2*d],2)+k(n-u[2*d+1],2)<l)return d;break}}while(d!==f);return c}render(e){const t=null==e?e=new x:void 0,n=this.points,r=this.halfedges,i=this.triangles;for(let o=0,a=r.length;o<a;++o){const t=r[o];if(t<o)continue;const a=2*i[o],s=2*i[t];e.moveTo(n[a],n[a+1]),e.lineTo(n[s],n[s+1])}return this.renderHull(e),t&&t.value()}renderPoints(e,t=2){const n=null==e?e=new x:void 0,r=this.points;for(let i=0,o=r.length;i<o;i+=2){const n=r[i],o=r[i+1];e.moveTo(n+t,o),e.arc(n,o,t,0,A)}return n&&n.value()}renderHull(e){const t=null==e?e=new x:void 0,n=this.hull,r=this.points,i=2*n[0],o=n.length;e.moveTo(r[i],r[i+1]);for(let a=1;a<o;++a){const t=2*n[a];e.lineTo(r[t],r[t+1])}return e.closePath(),t&&t.value()}hullPolygon(){const e=new w;return this.renderHull(e),e.value()}renderTriangle(e,t){const n=null==t?t=new x:void 0,r=this.points,i=this.triangles,o=2*i[e*=3],a=2*i[e+1],s=2*i[e+2];return t.moveTo(r[o],r[o+1]),t.lineTo(r[a],r[a+1]),t.lineTo(r[s],r[s+1]),t.closePath(),n&&n.value()}trianglePolygons(){var e=this;return o.mark((function t(){var n,r,i;return o.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=e.triangles,r=0,i=n.length/3;case 2:if(!(r<i)){t.next=8;break}return t.next=5,e.trianglePolygon(r);case 5:++r,t.next=2;break;case 8:case"end":return t.stop()}}),t)}))()}trianglePolygon(e){const t=new w;return this.renderTriangle(e,t),t.value()}}function S(e,t,n,r){const i=e.length,o=new Float64Array(2*i);for(let a=0;a<i;++a){const i=e[a];o[2*a]=t.call(r,i,a,e),o[2*a+1]=n.call(r,i,a,e)}return o}function T(e,n,r,a){var s,u,c,l;return o.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:s=0,u=i(e),t.prev=2,u.s();case 4:if((c=u.n()).done){t.next=13;break}return l=c.value,t.next=8,n.call(a,l,s,e);case 8:return t.next=10,r.call(a,l,s,e);case 10:++s;case 11:t.next=4;break;case 13:t.next=18;break;case 15:t.prev=15,t.t0=t.catch(2),u.e(t.t0);case 18:return t.prev=18,u.f(),t.finish(18);case 21:case"end":return t.stop()}}),t,null,[[2,15,18,21]])}e.Delaunay=F,e.Voronoi=_,Object.defineProperty(e,"__esModule",{value:!0})}(t)},2357:function(e,t,n){!function(e,t,n,r,i,o){"use strict";var a=Math.PI/180,s=64,u=2048;function c(){var e,n,r,i,o,a,c,g=[256,256],b=p,x=[],w=Math.random,_={};function A(e){e.width=e.height=1;var t=Math.sqrt(e.getContext("2d").getImageData(0,0,1,1).data.length>>2);e.width=(s<<5)/t,e.height=u/t;var n=e.getContext("2d");return n.fillStyle=n.strokeStyle="red",n.textAlign="center",{context:n,ratio:t}}function k(e,t,n){for(var r,i,o,a=t.x,s=t.y,u=Math.sqrt(g[0]*g[0]+g[1]*g[1]),c=b(g),l=w()<.5?1:-1,d=-l;(r=c(d+=l))&&(i=~~r[0],o=~~r[1],!(Math.min(Math.abs(i),Math.abs(o))>=u));)if(t.x=a+i,t.y=s+o,!(t.x+t.x0<0||t.y+t.y0<0||t.x+t.x1>g[0]||t.y+t.y1>g[1])&&(!n||!f(t,e,g[0]))&&(!n||h(t,n))){for(var p,m=t.sprite,v=t.width>>5,y=g[0]>>5,x=t.x-(v<<4),_=127&x,A=32-_,k=t.y1-t.y0,E=(t.y+t.y0)*y+(x>>5),D=0;D<k;D++){p=0;for(var C=0;C<=v;C++)e[E+C]|=p<<A|(C<v?(p=m[D*v+C])>>>_:0);E+=y}return t.sprite=null,!0}return!1}return _.layout=function(){for(var s=A(t.canvas()),u=m((g[0]>>5)*g[1]),f=null,h=x.length,p=-1,v=[],y=x.map((t=>({text:e(t),font:n(t),style:i(t),weight:o(t),rotate:a(t),size:~~(r(t)+1e-14),padding:c(t),xoff:0,yoff:0,x1:0,y1:0,x0:0,y0:0,hasText:!1,sprite:null,datum:t}))).sort(((e,t)=>t.size-e.size));++p<h;){var b=y[p];b.x=g[0]*(w()+.5)>>1,b.y=g[1]*(w()+.5)>>1,l(s,b,y,p),b.hasText&&k(u,b,f)&&(v.push(b),f?d(f,b):f=[{x:b.x+b.x0,y:b.y+b.y0},{x:b.x+b.x1,y:b.y+b.y1}],b.x-=g[0]>>1,b.y-=g[1]>>1)}return v},_.words=function(e){return arguments.length?(x=e,_):x},_.size=function(e){return arguments.length?(g=[+e[0],+e[1]],_):g},_.font=function(e){return arguments.length?(n=v(e),_):n},_.fontStyle=function(e){return arguments.length?(i=v(e),_):i},_.fontWeight=function(e){return arguments.length?(o=v(e),_):o},_.rotate=function(e){return arguments.length?(a=v(e),_):a},_.text=function(t){return arguments.length?(e=v(t),_):e},_.spiral=function(e){return arguments.length?(b=y[e]||e,_):b},_.fontSize=function(e){return arguments.length?(r=v(e),_):r},_.padding=function(e){return arguments.length?(c=v(e),_):c},_.random=function(e){return arguments.length?(w=e,_):w},_}function l(e,t,n,r){if(!t.sprite){var i=e.context,o=e.ratio;i.clearRect(0,0,(s<<5)/o,u/o);var c,l,f,d,h,p=0,g=0,m=0,v=n.length;for(--r;++r<v;){if(t=n[r],i.save(),i.font=t.style+" "+t.weight+" "+~~((t.size+1)/o)+"px "+t.font,c=i.measureText(t.text+"m").width*o,f=t.size<<1,t.rotate){var y=Math.sin(t.rotate*a),b=Math.cos(t.rotate*a),x=c*b,w=c*y,_=f*b,A=f*y;c=Math.max(Math.abs(x+A),Math.abs(x-A))+31>>5<<5,f=~~Math.max(Math.abs(w+_),Math.abs(w-_))}else c=c+31>>5<<5;if(f>m&&(m=f),p+c>=s<<5&&(p=0,g+=m,m=0),g+f>=u)break;i.translate((p+(c>>1))/o,(g+(f>>1))/o),t.rotate&&i.rotate(t.rotate*a),i.fillText(t.text,0,0),t.padding&&(i.lineWidth=2*t.padding,i.strokeText(t.text,0,0)),i.restore(),t.width=c,t.height=f,t.xoff=p,t.yoff=g,t.x1=c>>1,t.y1=f>>1,t.x0=-t.x1,t.y0=-t.y1,t.hasText=!0,p+=c}for(var k=i.getImageData(0,0,(s<<5)/o,u/o).data,E=[];--r>=0;)if((t=n[r]).hasText){for(l=(c=t.width)>>5,f=t.y1-t.y0,d=0;d<f*l;d++)E[d]=0;if(null==(p=t.xoff))return;g=t.yoff;var D=0,C=-1;for(h=0;h<f;h++){for(d=0;d<c;d++){var M=l*h+(d>>5),F=k[(g+h)*(s<<5)+(p+d)<<2]?1<<31-d%32:0;E[M]|=F,D|=F}D?C=h:(t.y0++,f--,h--,g++)}t.y1=t.y0+C,t.sprite=E.slice(0,(t.y1-t.y0)*l)}}}function f(e,t,n){n>>=5;for(var r,i=e.sprite,o=e.width>>5,a=e.x-(o<<4),s=127&a,u=32-s,c=e.y1-e.y0,l=(e.y+e.y0)*n+(a>>5),f=0;f<c;f++){r=0;for(var d=0;d<=o;d++)if((r<<u|(d<o?(r=i[f*o+d])>>>s:0))&t[l+d])return!0;l+=n}return!1}function d(e,t){var n=e[0],r=e[1];t.x+t.x0<n.x&&(n.x=t.x+t.x0),t.y+t.y0<n.y&&(n.y=t.y+t.y0),t.x+t.x1>r.x&&(r.x=t.x+t.x1),t.y+t.y1>r.y&&(r.y=t.y+t.y1)}function h(e,t){return e.x+e.x1>t[0].x&&e.x+e.x0<t[1].x&&e.y+e.y1>t[0].y&&e.y+e.y0<t[1].y}function p(e){var t=e[0]/e[1];return function(e){return[t*(e*=.1)*Math.cos(e),e*Math.sin(e)]}}function g(e){var t=4,n=t*e[0]/e[1],r=0,i=0;return function(e){var o=e<0?-1:1;switch(Math.sqrt(1+4*o*e)-o&3){case 0:r+=n;break;case 1:i+=t;break;case 2:r-=n;break;default:i-=t}return[r,i]}}function m(e){for(var t=[],n=-1;++n<e;)t[n]=0;return t}function v(e){return"function"===typeof e?e:function(){return e}}var y={archimedean:p,rectangular:g};const b=["x","y","font","fontSize","fontStyle","fontWeight","angle"],x=["text","font","rotate","fontSize","fontStyle","fontWeight"];function w(e){n.Transform.call(this,c(),e)}w.Definition={type:"Wordcloud",metadata:{modifies:!0},params:[{name:"size",type:"number",array:!0,length:2},{name:"font",type:"string",expr:!0,default:"sans-serif"},{name:"fontStyle",type:"string",expr:!0,default:"normal"},{name:"fontWeight",type:"string",expr:!0,default:"normal"},{name:"fontSize",type:"number",expr:!0,default:14},{name:"fontSizeRange",type:"number",array:"nullable",default:[10,50]},{name:"rotate",type:"number",expr:!0,default:0},{name:"text",type:"field"},{name:"spiral",type:"string",values:["archimedean","rectangular"]},{name:"padding",type:"number",expr:!0},{name:"as",type:"string",array:!0,length:7,default:b}]},r.inherits(w,n.Transform,{transform(e,t){function n(n){const i=e[n];return r.isFunction(i)&&t.modified(i.fields)}!e.size||e.size[0]&&e.size[1]||r.error("Wordcloud size dimensions must be non-zero.");const a=e.modified();if(!(a||t.changed(t.ADD_REM)||x.some(n)))return;const s=t.materialize(t.SOURCE).source,u=this.value,c=e.as||b;let l,f=e.fontSize||14;if(r.isFunction(f)?l=e.fontSizeRange:f=r.constant(f),l){const e=f,t=i.scale("sqrt")().domain(r.extent(s,e)).range(l);f=n=>t(e(n))}s.forEach((e=>{e[c[0]]=NaN,e[c[1]]=NaN,e[c[3]]=0}));const d=u.words(s).text(e.text).size(e.size||[500,500]).padding(e.padding||1).spiral(e.spiral||"archimedean").rotate(e.rotate||0).font(e.font||"sans-serif").fontStyle(e.fontStyle||"normal").fontWeight(e.fontWeight||"normal").fontSize(f).random(o.random).layout(),h=u.size(),p=h[0]>>1,g=h[1]>>1,m=d.length;for(let r,i,o=0;o<m;++o)r=d[o],i=r.datum,i[c[0]]=r.x+p,i[c[1]]=r.y+g,i[c[2]]=r.font,i[c[3]]=r.size,i[c[4]]=r.style,i[c[5]]=r.weight,i[c[6]]=r.rotate;return t.reflow(a).modifies(c)}}),e.wordcloud=w,Object.defineProperty(e,"__esModule",{value:!0})}(t,n(1369),n(1183),n(1176),n(1283),n(1282))},2358:function(e,t,n){!function(e,t,n,r){"use strict";const i=e=>new Uint8Array(e),o=e=>new Uint16Array(e),a=e=>new Uint32Array(e);function s(){let e=8,t=[],n=a(0),r=c(0,e),i=c(0,e);return{data:()=>t,seen:()=>n=u(n,t.length),add(e){for(let n,r=0,i=t.length,o=e.length;r<o;++r)n=e[r],n._index=i++,t.push(n)},remove(e,n){const o=t.length,a=Array(o-e),s=t;let u,c,l;for(c=0;!n[c]&&c<o;++c)a[c]=t[c],s[c]=c;for(l=c;c<o;++c)u=t[c],n[c]?s[c]=-1:(s[c]=l,r[l]=r[c],i[l]=i[c],a[l]=u,u._index=l++),r[c]=0;return t=a,s},size:()=>t.length,curr:()=>r,prev:()=>i,reset:e=>i[e]=r[e],all:()=>e<257?255:e<65537?65535:4294967295,set(e,t){r[e]|=t},clear(e,t){r[e]&=~t},resize(t,n){(t>r.length||n>e)&&(e=Math.max(n,e),r=c(t,e,r),i=c(t,e))}}}function u(e,t,n){return e.length>=t?e:((n=n||new e.constructor(t)).set(e),n)}function c(e,t,n){const r=(t<257?i:t<65537?o:a)(e);return n&&r.set(n),r}function l(e,t,n){const r=1<<t;return{one:r,zero:~r,range:n.slice(),bisect:e.bisect,index:e.index,size:e.size,onAdd(e,t){const n=this,i=n.bisect(n.range,e.value),o=e.index,a=i[0],s=i[1],u=o.length;let c;for(c=0;c<a;++c)t[o[c]]|=r;for(c=s;c<u;++c)t[o[c]]|=r;return n}}}function f(){let e=a(0),n=[],r=0;function i(t,i,o){if(!i.length)return[];const s=r,u=i.length,c=a(u);let l,f,p,g=Array(u);for(p=0;p<u;++p)g[p]=t(i[p]),c[p]=p;if(g=d(g,c),s)l=n,f=e,n=Array(s+u),e=a(s+u),h(o,l,f,s,g,c,u,n,e);else{if(o>0)for(p=0;p<u;++p)c[p]+=o;n=g,e=c}return r=s+u,{index:c,value:g}}function o(t,i){const o=r;let a,s,u;for(s=0;!i[e[s]]&&s<o;++s);for(u=s;s<o;++s)i[a=e[s]]||(e[u]=a,n[u]=n[s],++u);r=o-t}function s(t){for(let n=0,i=r;n<i;++n)e[n]=t[e[n]]}function u(e,i){let o;return i?o=i.length:(i=n,o=r),[t.bisectLeft(i,e[0],0,o),t.bisectRight(i,e[1],0,o)]}return{insert:i,remove:o,bisect:u,reindex:s,index:()=>e,size:()=>r}}function d(e,n){return e.sort.call(n,((t,n)=>{const r=e[t],i=e[n];return r<i?-1:r>i?1:0})),t.permute(e,n)}function h(e,t,n,r,i,o,a,s,u){let c,l=0,f=0;for(c=0;l<r&&f<a;++c)t[l]<i[f]?(s[c]=t[l],u[c]=n[l++]):(s[c]=i[f],u[c]=o[f++]+e);for(;l<r;++l,++c)s[c]=t[l],u[c]=n[l];for(;f<a;++f,++c)s[c]=i[f],u[c]=o[f]+e}function p(e){n.Transform.call(this,s(),e),this._indices=null,this._dims=null}function g(e){n.Transform.call(this,null,e)}p.Definition={type:"CrossFilter",metadata:{},params:[{name:"fields",type:"field",array:!0,required:!0},{name:"query",type:"array",array:!0,required:!0,content:{type:"number",array:!0,length:2}}]},r.inherits(p,n.Transform,{transform(e,t){return this._dims?e.modified("fields")||e.fields.some((e=>t.modified(e.fields)))?this.reinit(e,t):this.eval(e,t):this.init(e,t)},init(e,t){const n=e.fields,r=e.query,i=this._indices={},o=this._dims=[],a=r.length;let s,u,c=0;for(;c<a;++c)s=n[c].fname,u=i[s]||(i[s]=f()),o.push(l(u,c,r[c]));return this.eval(e,t)},reinit(e,t){const n=t.materialize().fork(),r=e.fields,i=e.query,o=this._indices,a=this._dims,s=this.value,u=s.curr(),c=s.prev(),d=s.all(),h=n.rem=n.add,p=n.mod,g=i.length,m={};let v,y,b,x,w,_,A,k,E;if(c.set(u),t.rem.length&&(w=this.remove(e,t,n)),t.add.length&&s.add(t.add),t.mod.length)for(_={},x=t.mod,A=0,k=x.length;A<k;++A)_[x[A]._index]=1;for(A=0;A<g;++A)E=r[A],(!a[A]||e.modified("fields",A)||t.modified(E.fields))&&(b=E.fname,(v=m[b])||(o[b]=y=f(),m[b]=v=y.insert(E,t.source,0)),a[A]=l(y,A,i[A]).onAdd(v,u));for(A=0,k=s.data().length;A<k;++A)w[A]||(c[A]!==u[A]?h.push(A):_[A]&&u[A]!==d&&p.push(A));return s.mask=(1<<g)-1,n},eval(e,t){const n=t.materialize().fork(),r=this._dims.length;let i=0;return t.rem.length&&(this.remove(e,t,n),i|=(1<<r)-1),e.modified("query")&&!e.modified("fields")&&(i|=this.update(e,t,n)),t.add.length&&(this.insert(e,t,n),i|=(1<<r)-1),t.mod.length&&(this.modify(t,n),i|=(1<<r)-1),this.value.mask=i,n},insert(e,t,n){const r=t.add,i=this.value,o=this._dims,a=this._indices,s=e.fields,u={},c=n.add,l=i.size()+r.length,f=o.length;let d,h,p,g=i.size();i.resize(l,f),i.add(r);const m=i.curr(),v=i.prev(),y=i.all();for(d=0;d<f;++d)h=s[d].fname,p=u[h]||(u[h]=a[h].insert(s[d],r,g)),o[d].onAdd(p,m);for(;g<l;++g)v[g]=y,m[g]!==y&&c.push(g)},modify(e,t){const n=t.mod,r=this.value,i=r.curr(),o=r.all(),a=e.mod;let s,u,c;for(s=0,u=a.length;s<u;++s)c=a[s]._index,i[c]!==o&&n.push(c)},remove(e,t,n){const r=this._indices,i=this.value,o=i.curr(),a=i.prev(),s=i.all(),u={},c=n.rem,l=t.rem;let f,d,h,p;for(f=0,d=l.length;f<d;++f)h=l[f]._index,u[h]=1,a[h]=p=o[h],o[h]=s,p!==s&&c.push(h);for(h in r)r[h].remove(d,u);return this.reindex(t,d,u),u},reindex(e,t,n){const r=this._indices,i=this.value;e.runAfter((()=>{const e=i.remove(t,n);for(const t in r)r[t].reindex(e)}))},update(e,t,n){const r=this._dims,i=e.query,o=t.stamp,a=r.length;let s,u,c=0;for(n.filters=0,u=0;u<a;++u)e.modified("query",u)&&(s=u,++c);if(1===c)c=r[s].one,this.incrementOne(r[s],i[s],n.add,n.rem);else for(u=0,c=0;u<a;++u)e.modified("query",u)&&(c|=r[u].one,this.incrementAll(r[u],i[u],o,n.add),n.rem=n.add);return c},incrementAll(e,t,n,r){const i=this.value,o=i.seen(),a=i.curr(),s=i.prev(),u=e.index(),c=e.bisect(e.range),l=e.bisect(t),f=l[0],d=l[1],h=c[0],p=c[1],g=e.one;let m,v,y;if(f<h)for(m=f,v=Math.min(h,d);m<v;++m)y=u[m],o[y]!==n&&(s[y]=a[y],o[y]=n,r.push(y)),a[y]^=g;else if(f>h)for(m=h,v=Math.min(f,p);m<v;++m)y=u[m],o[y]!==n&&(s[y]=a[y],o[y]=n,r.push(y)),a[y]^=g;if(d>p)for(m=Math.max(f,p),v=d;m<v;++m)y=u[m],o[y]!==n&&(s[y]=a[y],o[y]=n,r.push(y)),a[y]^=g;else if(d<p)for(m=Math.max(h,d),v=p;m<v;++m)y=u[m],o[y]!==n&&(s[y]=a[y],o[y]=n,r.push(y)),a[y]^=g;e.range=t.slice()},incrementOne(e,t,n,r){const i=this.value.curr(),o=e.index(),a=e.bisect(e.range),s=e.bisect(t),u=s[0],c=s[1],l=a[0],f=a[1],d=e.one;let h,p,g;if(u<l)for(h=u,p=Math.min(l,c);h<p;++h)g=o[h],i[g]^=d,n.push(g);else if(u>l)for(h=l,p=Math.min(u,f);h<p;++h)g=o[h],i[g]^=d,r.push(g);if(c>f)for(h=Math.max(u,f),p=c;h<p;++h)g=o[h],i[g]^=d,n.push(g);else if(c<f)for(h=Math.max(l,c),p=f;h<p;++h)g=o[h],i[g]^=d,r.push(g);e.range=t.slice()}}),g.Definition={type:"ResolveFilter",metadata:{},params:[{name:"ignore",type:"number",required:!0,description:"A bit mask indicating which filters to ignore."},{name:"filter",type:"object",required:!0,description:"Per-tuple filter bitmaps from a CrossFilter transform."}]},r.inherits(g,n.Transform,{transform(e,t){const n=~(e.ignore||0),r=e.filter,i=r.mask;if(0===(i&n))return t.StopPropagation;const o=t.fork(t.ALL),a=r.data(),s=r.curr(),u=r.prev(),c=e=>s[e]&n?null:a[e];return o.filter(o.MOD,c),i&i-1?(o.filter(o.ADD,(e=>{const t=s[e]&n;return!t&&t^u[e]&n?a[e]:null})),o.filter(o.REM,(e=>{const t=s[e]&n;return!t||t^t^u[e]&n?null:a[e]}))):(o.filter(o.ADD,c),o.filter(o.REM,(e=>(s[e]&n)===i?a[e]:null))),o.filter(o.SOURCE,(e=>c(e._index)))}}),e.crossfilter=p,e.resolvefilter=g,Object.defineProperty(e,"__esModule",{value:!0})}(t,n(1190),n(1183),n(1176))},2359:function(e,t,n){var r=n(16),i=n(1320);!function(e,t,n,o,a,s,u,c,l){"use strict";function f(e){const t=e.container();t&&(t.setAttribute("role","graphics-document"),t.setAttribute("aria-roleDescription","visualization"),d(t,e.description()))}function d(e,t){e&&(null==t?e.removeAttribute("aria-label"):e.setAttribute("aria-label",t))}function h(e){e.add(null,(t=>(e._background=t.bg,e._resize=1,t.bg)),{bg:e._signals.background})}const p="default";function g(e){const n=e._signals.cursor||(e._signals.cursor=e.add({user:p,item:null}));e.on(e.events("view","mousemove"),n,((e,r)=>{const i=n.value,o=i?t.isString(i)?i:i.user:p,a=r.item&&r.item.cursor||null;return i&&o===i.user&&a==i.item?i:{user:o,item:a}})),e.add(null,(function(n){let r=n.cursor,i=this.value;return t.isString(r)||(i=r.item,r=r.user),m(e,r&&r!==p?r:i||r),i}),{cursor:n})}function m(e,t){const n=e.globalCursor()?"undefined"!==typeof document&&document.body:e.container();if(n)return null==t?n.style.removeProperty("cursor"):n.style.cursor=t}function v(e,n){var r=e._runtime.data;return t.hasOwnProperty(r,n)||t.error("Unrecognized data set: "+n),r[n]}function y(e,r){return arguments.length<2?v(this,e).values.value:b.call(this,e,n.changeset().remove(t.truthy).insert(r))}function b(e,r){n.isChangeSet(r)||t.error("Second argument to changes must be a changeset.");const i=v(this,e);return i.modified=!0,this.pulse(i.input,r)}function x(e,t){return b.call(this,e,n.changeset().insert(t))}function w(e,t){return b.call(this,e,n.changeset().remove(t))}function _(e){var t=e.padding();return Math.max(0,e._viewWidth+t.left+t.right)}function A(e){var t=e.padding();return Math.max(0,e._viewHeight+t.top+t.bottom)}function k(e){var t=e.padding(),n=e._origin;return[t.left+n[0],t.top+n[1]]}function E(e){var t=k(e),n=_(e),r=A(e);e._renderer.background(e.background()),e._renderer.resize(n,r,t),e._handler.origin(t),e._resizeListeners.forEach((t=>{try{t(n,r)}catch(i){e.error(i)}}))}function D(e,t,n){var r,i,a,s=e._renderer,u=s&&s.canvas();return u&&(a=k(e),i=t.changedTouches?t.changedTouches[0]:t,(r=o.point(i,u))[0]-=a[0],r[1]-=a[1]),t.dataflow=e,t.item=n,t.vega=C(e,n,r),t}function C(e,n,r){const i=n?"group"===n.mark.marktype?n:n.mark.group:null;function o(e){var t,r=i;if(e)for(t=n;t;t=t.mark.group)if(t.mark.name===e){r=t;break}return r&&r.mark&&r.mark.interactive?r:{}}function a(e){if(!e)return r;t.isString(e)&&(e=o(e));const n=r.slice();for(;e;)n[0]-=e.x||0,n[1]-=e.y||0,e=e.mark&&e.mark.group;return n}return{view:t.constant(e),item:t.constant(n||{}),group:o,xy:a,x:e=>a(e)[0],y:e=>a(e)[1]}}const M="view",F="timer",S="window",T={trap:!1};function O(e){const n=t.extend({defaults:{}},e),r=(e,n)=>{n.forEach((n=>{t.isArray(e[n])&&(e[n]=t.toSet(e[n]))}))};return r(n.defaults,["prevent","allow"]),r(n,["view","window","selector"]),n}function N(e,t){var n=e._eventConfig.defaults,r=n.prevent,i=n.allow;return!1!==r&&!0!==i&&(!0===r||!1===i||(r?r[t]:i?!i[t]:e.preventDefault()))}function P(e,n,r){const i=e._eventConfig&&e._eventConfig[n];return!(!1===i||t.isObject(i)&&!i[r])||(e.warn("Blocked ".concat(n," ").concat(r," event listener.")),!1)}function R(e,t,r){var i,o=this,a=new n.EventStream(r),s=function(n,r){o.runAsync(null,(()=>{e===M&&N(o,t)&&n.preventDefault(),a.receive(D(o,n,r))}))};if(e===F)P(o,"timer",t)&&o.timer(s,t);else if(e===M)P(o,"view",t)&&o.addEventListener(t,s,T);else if(e===S?P(o,"window",t)&&"undefined"!==typeof window&&(i=[window]):"undefined"!==typeof document&&P(o,"selector",t)&&(i=document.querySelectorAll(e)),i){for(var u=0,c=i.length;u<c;++u)i[u].addEventListener(t,s);o._eventListeners.push({type:t,sources:i,handler:s})}else o.warn("Can not resolve event source: "+e);return a}function B(e){return e.item}function z(e){return e.item.mark.source}function j(e){return function(t,n){return n.vega.view().changeset().encode(n.item,e)}}function L(e,t){return t=[t||"update",(e=[e||"hover"])[0]],this.on(this.events("view","mouseover",B),z,j(e)),this.on(this.events("view","mouseout",B),z,j(t)),this}function I(){var e,t,n,r=this._tooltip,i=this._timers,o=this._eventListeners;for(e=i.length;--e>=0;)i[e].stop();for(e=o.length;--e>=0;)for(t=(n=o[e]).sources.length;--t>=0;)n.sources[t].removeEventListener(n.type,n.handler);return r&&r.call(this,this._handler,null,null,null),this}function U(e,t,n){const r=document.createElement(e);for(const i in t)r.setAttribute(i,t[i]);return null!=n&&(r.textContent=n),r}const q="vega-bind",W="vega-bind-name",H="vega-bind-radio";function Y(e,n,r){if(!n)return;const i=r.param;let o=r.state;return o||(o=r.state={elements:null,active:!1,set:null,update:t=>{t!==e.signal(i.signal)&&e.runAsync(null,(()=>{o.source=!0,e.signal(i.signal,t)}))}},i.debounce&&(o.update=t.debounce(i.debounce,o.update))),V(o,n,i,e.signal(i.signal)),o.active||(e.on(e._signals[i.signal],null,(()=>{o.source?o.source=!1:o.set(e.signal(i.signal))})),o.active=!0),o}function V(e,t,n,r){const i=U("div",{class:q}),o="radio"===n.input?i:i.appendChild(U("label"));o.appendChild(U("span",{class:W},n.name||n.signal)),t.appendChild(i);let a=G;switch(n.input){case"checkbox":a=$;break;case"select":a=X;break;case"radio":a=J;break;case"range":a=Q}a(e,o,n,r)}function G(e,t,n,r){const i=U("input");for(const o in n)"signal"!==o&&"element"!==o&&i.setAttribute("input"===o?"type":o,n[o]);i.setAttribute("name",n.signal),i.value=r,t.appendChild(i),i.addEventListener("input",(()=>e.update(i.value))),e.elements=[i],e.set=e=>i.value=e}function $(e,t,n,r){const i={type:"checkbox",name:n.signal};r&&(i.checked=!0);const o=U("input",i);t.appendChild(o),o.addEventListener("change",(()=>e.update(o.checked))),e.elements=[o],e.set=e=>o.checked=!!e||null}function X(e,t,n,r){const i=U("select",{name:n.signal}),o=n.labels||[];n.options.forEach(((e,t)=>{const n={value:e};Z(e,r)&&(n.selected=!0),i.appendChild(U("option",n,(o[t]||e)+""))})),t.appendChild(i),i.addEventListener("change",(()=>{e.update(n.options[i.selectedIndex])})),e.elements=[i],e.set=e=>{for(let t=0,r=n.options.length;t<r;++t)if(Z(n.options[t],e))return void(i.selectedIndex=t)}}function J(e,t,n,r){const i=U("span",{class:H}),o=n.labels||[];t.appendChild(i),e.elements=n.options.map(((t,a)=>{const s={type:"radio",name:n.signal,value:t};Z(t,r)&&(s.checked=!0);const u=U("input",s);u.addEventListener("change",(()=>e.update(t)));const c=U("label",{},(o[a]||t)+"");return c.prepend(u),i.appendChild(c),u})),e.set=t=>{const n=e.elements,r=n.length;for(let e=0;e<r;++e)Z(n[e].value,t)&&(n[e].checked=!0)}}function Q(e,t,n,r){r=void 0!==r?r:(+n.max+ +n.min)/2;const i=null!=n.max?n.max:Math.max(100,+r)||100,o=n.min||Math.min(0,i,+r)||0,s=n.step||a.tickStep(o,i,100),u=U("input",{type:"range",name:n.signal,min:o,max:i,step:s});u.value=r;const c=U("span",{},+r);t.appendChild(u),t.appendChild(c);const l=()=>{c.textContent=u.value,e.update(+u.value)};u.addEventListener("input",l),u.addEventListener("change",l),e.elements=[u],e.set=e=>{u.value=e,c.textContent=e}}function Z(e,t){return e===t||e+""===t+""}function K(e,t,n,r,i,o){return(t=t||new r(e.loader())).initialize(n,_(e),A(e),k(e),i,o).background(e.background())}function ee(e,t){return t?function(){try{t.apply(this,arguments)}catch(n){e.error(n)}}:null}function te(e,t,n,r){const i=new r(e.loader(),ee(e,e.tooltip())).scene(e.scenegraph().root).initialize(n,k(e),e);return t&&t.handlers().forEach((e=>{i.on(e.type,e.handler)})),i}function ne(e,t){const n=this,r=n._renderType,i=n._eventConfig.bind,a=o.renderModule(r);e=n._el=e?re(n,e):null,f(n),a||n.error("Unrecognized renderer type: "+r);const s=a.handler||o.CanvasHandler,u=e?a.renderer:a.headless;return n._renderer=u?K(n,n._renderer,e,u):null,n._handler=te(n,n._handler,e,s),n._redraw=!0,e&&"none"!==i&&(t=t?n._elBind=re(n,t):e.appendChild(U("form",{class:"vega-bindings"})),n._bind.forEach((e=>{e.param.element&&"container"!==i&&(e.element=re(n,e.param.element))})),n._bind.forEach((e=>{Y(n,e.element||t,e)}))),n}function re(e,t){if("string"===typeof t){if("undefined"===typeof document)return e.error("DOM document instance not found."),null;if(!(t=document.querySelector(t)))return e.error("Signal bind element not found: "+t),null}if(t)try{t.innerHTML=""}catch(n){t=null,e.error(n)}return t}const ie=e=>+e||0,oe=e=>({top:e,bottom:e,left:e,right:e});function ae(e){return t.isObject(e)?{top:ie(e.top),bottom:ie(e.bottom),left:ie(e.left),right:ie(e.right)}:oe(ie(e))}function se(e,t,n,r){return ue.apply(this,arguments)}function ue(){return(ue=i(r.mark((function e(n,i,a,s){var u,c;return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u=o.renderModule(i),(c=u&&u.headless)||t.error("Unrecognized renderer type: "+i),e.next=4,n.runAsync();case 4:return e.abrupt("return",K(n,null,null,c,a,s).renderAsync(n._scenegraph.root));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ce(e,t){return le.apply(this,arguments)}function le(){return(le=i(r.mark((function e(n,i){var a;return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n!==o.RenderType.Canvas&&n!==o.RenderType.SVG&&n!==o.RenderType.PNG&&t.error("Unrecognized image type: "+n),e.next=3,se(this,n,i);case 3:return a=e.sent,e.abrupt("return",n===o.RenderType.SVG?fe(a.svg(),"image/svg+xml"):a.canvas().toDataURL("image/png"));case 5:case"end":return e.stop()}}),e,this)})))).apply(this,arguments)}function fe(e,t){const n=new Blob([e],{type:t});return window.URL.createObjectURL(n)}function de(e,t){return he.apply(this,arguments)}function he(){return(he=i(r.mark((function e(t,n){var i;return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,se(this,o.RenderType.Canvas,t,n);case 2:return i=e.sent,e.abrupt("return",i.canvas());case 4:case"end":return e.stop()}}),e,this)})))).apply(this,arguments)}function pe(e){return ge.apply(this,arguments)}function ge(){return(ge=i(r.mark((function e(t){var n;return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,se(this,o.RenderType.SVG,t);case 2:return n=e.sent,e.abrupt("return",n.svg());case 4:case"end":return e.stop()}}),e,this)})))).apply(this,arguments)}function me(e,t,r){return u.context(e,n.transforms,s.functionContext,r).parse(t)}function ve(e){var n=this._runtime.scales;return t.hasOwnProperty(n,e)||t.error("Unrecognized scale or projection: "+e),n[e].value}var ye="width",be="height",xe="padding",we={skip:!0};function _e(e,t){var n=e.autosize(),r=e.padding();return t-(n&&n.contains===xe?r.left+r.right:0)}function Ae(e,t){var n=e.autosize(),r=e.padding();return t-(n&&n.contains===xe?r.top+r.bottom:0)}function ke(e){var t=e._signals,n=t[ye],r=t[be],i=t[xe];function o(){e._autosize=e._resize=1}e._resizeWidth=e.add(null,(t=>{e._width=t.size,e._viewWidth=_e(e,t.size),o()}),{size:n}),e._resizeHeight=e.add(null,(t=>{e._height=t.size,e._viewHeight=Ae(e,t.size),o()}),{size:r});const a=e.add(null,o,{pad:i});e._resizeWidth.rank=n.rank+1,e._resizeHeight.rank=r.rank+1,a.rank=i.rank+1}function Ee(e,t,n,r,i,o){this.runAfter((a=>{let s=0;a._autosize=0,a.width()!==n&&(s=1,a.signal(ye,n,we),a._resizeWidth.skip(!0)),a.height()!==r&&(s=1,a.signal(be,r,we),a._resizeHeight.skip(!0)),a._viewWidth!==e&&(a._resize=1,a._viewWidth=e),a._viewHeight!==t&&(a._resize=1,a._viewHeight=t),a._origin[0]===i[0]&&a._origin[1]===i[1]||(a._resize=1,a._origin=i),s&&a.run("enter"),o&&a.runAfter((e=>e.resize()))}),!1,1)}function De(e){return this._runtime.getState(e||{data:Ce,signals:Me,recurse:!0})}function Ce(e,n){return n.modified&&t.isArray(n.input.value)&&e.indexOf("_:vega:_")}function Me(e,t){return!("parent"===e||t instanceof n.transforms.proxy)}function Fe(e){return this.runAsync(null,(t=>{t._trigger=!1,t._runtime.setState(e)}),(e=>{e._trigger=!0})),this}function Se(e,t){function n(t){e({timestamp:Date.now(),elapsed:t})}this._timers.push(c.interval(n,t))}function Te(e,t,n,r){const i=e.element();i&&i.setAttribute("title",Oe(r))}function Oe(e){return null==e?"":t.isArray(e)?Pe(e):t.isObject(e)&&!t.isDate(e)?Ne(e):e+""}function Ne(e){return Object.keys(e).map((n=>{const r=e[n];return n+": "+(t.isArray(r)?Pe(r):Re(r))})).join("\n")}function Pe(e){return"["+e.map(Re).join(", ")+"]"}function Re(e){return t.isArray(e)?"[\u2026]":t.isObject(e)&&!t.isDate(e)?"{\u2026}":e}function Be(e,r){const i=this;if(r=r||{},n.Dataflow.call(i),r.loader&&i.loader(r.loader),r.logger&&i.logger(r.logger),null!=r.logLevel&&i.logLevel(r.logLevel),r.locale||e.locale){const n=t.extend({},e.locale,r.locale);i.locale(l.locale(n.number,n.time))}i._el=null,i._elBind=null,i._renderType=r.renderer||o.RenderType.Canvas,i._scenegraph=new o.Scenegraph;const a=i._scenegraph.root;i._renderer=null,i._tooltip=r.tooltip||Te,i._redraw=!0,i._handler=(new o.CanvasHandler).scene(a),i._globalCursor=!1,i._preventDefault=!1,i._timers=[],i._eventListeners=[],i._resizeListeners=[],i._eventConfig=O(e.eventConfig),i.globalCursor(i._eventConfig.globalCursor);const s=me(i,e,r.expr);i._runtime=s,i._signals=s.signals,i._bind=(e.bindings||[]).map((e=>({state:null,param:t.extend({},e)}))),s.root&&s.root.set(a),a.source=s.data.root.input,i.pulse(s.data.root.input,i.changeset().insert(a.items)),i._width=i.width(),i._height=i.height(),i._viewWidth=_e(i,i._width),i._viewHeight=Ae(i,i._height),i._origin=[0,0],i._resize=0,i._autosize=1,ke(i),h(i),g(i),i.description(e.description),r.hover&&i.hover(),r.container&&i.initialize(r.container,r.bind)}function ze(e,n){return t.hasOwnProperty(e._signals,n)?e._signals[n]:t.error("Unrecognized signal name: "+t.stringValue(n))}function je(e,t){const n=(e._targets||[]).filter((e=>e._update&&e._update.handler===t));return n.length?n[0]:null}function Le(e,t,n,r){let i=je(n,r);return i||(i=ee(e,(()=>r(t,n.value))),i.handler=r,e.on(n,null,i)),e}function Ie(e,t,n){const r=je(t,n);return r&&t._targets.remove(r),e}t.inherits(Be,n.Dataflow,{evaluate(e,t,o){var a=this;return i(r.mark((function i(){return r.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,n.Dataflow.prototype.evaluate.call(a,e,t);case 2:if(!a._redraw&&!a._resize){r.next=14;break}if(r.prev=3,!a._renderer){r.next=8;break}return a._resize&&(a._resize=0,E(a)),r.next=8,a._renderer.renderAsync(a._scenegraph.root);case 8:a._redraw=!1,r.next=14;break;case 11:r.prev=11,r.t0=r.catch(3),a.error(r.t0);case 14:return o&&n.asyncCallback(a,o),r.abrupt("return",a);case 16:case"end":return r.stop()}}),i,null,[[3,11]])})))()},dirty(e){this._redraw=!0,this._renderer&&this._renderer.dirty(e)},description(e){if(arguments.length){const t=null!=e?e+"":null;return t!==this._desc&&d(this._el,this._desc=t),this}return this._desc},container(){return this._el},scenegraph(){return this._scenegraph},origin(){return this._origin.slice()},signal(e,t,n){const r=ze(this,e);return 1===arguments.length?r.value:this.update(r,t,n)},width(e){return arguments.length?this.signal("width",e):this.signal("width")},height(e){return arguments.length?this.signal("height",e):this.signal("height")},padding(e){return arguments.length?this.signal("padding",ae(e)):ae(this.signal("padding"))},autosize(e){return arguments.length?this.signal("autosize",e):this.signal("autosize")},background(e){return arguments.length?this.signal("background",e):this.signal("background")},renderer(e){return arguments.length?(o.renderModule(e)||t.error("Unrecognized renderer type: "+e),e!==this._renderType&&(this._renderType=e,this._resetRenderer()),this):this._renderType},tooltip(e){return arguments.length?(e!==this._tooltip&&(this._tooltip=e,this._resetRenderer()),this):this._tooltip},loader(e){return arguments.length?(e!==this._loader&&(n.Dataflow.prototype.loader.call(this,e),this._resetRenderer()),this):this._loader},resize(){return this._autosize=1,this.touch(ze(this,"autosize"))},_resetRenderer(){this._renderer&&(this._renderer=null,this.initialize(this._el,this._elBind))},_resizeView:Ee,addEventListener(e,t,n){let r=t;return n&&!1===n.trap||(r=ee(this,t),r.raw=t),this._handler.on(e,r),this},removeEventListener(e,t){for(var n,r,i=this._handler.handlers(e),o=i.length;--o>=0;)if(r=i[o].type,n=i[o].handler,e===r&&(t===n||t===n.raw)){this._handler.off(r,n);break}return this},addResizeListener(e){const t=this._resizeListeners;return t.indexOf(e)<0&&t.push(e),this},removeResizeListener(e){var t=this._resizeListeners,n=t.indexOf(e);return n>=0&&t.splice(n,1),this},addSignalListener(e,t){return Le(this,e,ze(this,e),t)},removeSignalListener(e,t){return Ie(this,ze(this,e),t)},addDataListener(e,t){return Le(this,e,v(this,e).values,t)},removeDataListener(e,t){return Ie(this,v(this,e).values,t)},globalCursor(e){if(arguments.length){if(this._globalCursor!==!!e){const t=m(this,null);this._globalCursor=!!e,t&&m(this,t)}return this}return this._globalCursor},preventDefault(e){return arguments.length?(this._preventDefault=e,this):this._preventDefault},timer:Se,events:R,finalize:I,hover:L,data:y,change:b,insert:x,remove:w,scale:ve,initialize:ne,toImageURL:ce,toCanvas:de,toSVG:pe,getState:De,setState:Fe}),e.View=Be,Object.defineProperty(e,"__esModule",{value:!0})}(t,n(1176),n(1183),n(1323),n(1190),n(1488),n(1717),n(2362),n(1368))},2360:function(e,t,n){!function(e){"use strict";function t(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function n(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function r(){}var i=.7,o=1/i,a="\\s*([+-]?\\d+)\\s*",s="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",u="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",c=/^#([0-9a-f]{3,8})$/,l=new RegExp("^rgb\\("+[a,a,a]+"\\)$"),f=new RegExp("^rgb\\("+[u,u,u]+"\\)$"),d=new RegExp("^rgba\\("+[a,a,a,s]+"\\)$"),h=new RegExp("^rgba\\("+[u,u,u,s]+"\\)$"),p=new RegExp("^hsl\\("+[s,u,u]+"\\)$"),g=new RegExp("^hsla\\("+[s,u,u,s]+"\\)$"),m={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function v(){return this.rgb().formatHex()}function y(){return S(this).formatHsl()}function b(){return this.rgb().formatRgb()}function x(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=c.exec(e))?(n=t[1].length,t=parseInt(t[1],16),6===n?w(t):3===n?new E(t>>8&15|t>>4&240,t>>4&15|240&t,(15&t)<<4|15&t,1):8===n?_(t>>24&255,t>>16&255,t>>8&255,(255&t)/255):4===n?_(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|240&t,((15&t)<<4|15&t)/255):null):(t=l.exec(e))?new E(t[1],t[2],t[3],1):(t=f.exec(e))?new E(255*t[1]/100,255*t[2]/100,255*t[3]/100,1):(t=d.exec(e))?_(t[1],t[2],t[3],t[4]):(t=h.exec(e))?_(255*t[1]/100,255*t[2]/100,255*t[3]/100,t[4]):(t=p.exec(e))?F(t[1],t[2]/100,t[3]/100,1):(t=g.exec(e))?F(t[1],t[2]/100,t[3]/100,t[4]):m.hasOwnProperty(e)?w(m[e]):"transparent"===e?new E(NaN,NaN,NaN,0):null}function w(e){return new E(e>>16&255,e>>8&255,255&e,1)}function _(e,t,n,r){return r<=0&&(e=t=n=NaN),new E(e,t,n,r)}function A(e){return e instanceof r||(e=x(e)),e?new E((e=e.rgb()).r,e.g,e.b,e.opacity):new E}function k(e,t,n,r){return 1===arguments.length?A(e):new E(e,t,n,null==r?1:r)}function E(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}function D(){return"#"+M(this.r)+M(this.g)+M(this.b)}function C(){var e=this.opacity;return(1===(e=isNaN(e)?1:Math.max(0,Math.min(1,e)))?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(1===e?")":", "+e+")")}function M(e){return((e=Math.max(0,Math.min(255,Math.round(e)||0)))<16?"0":"")+e.toString(16)}function F(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new O(e,t,n,r)}function S(e){if(e instanceof O)return new O(e.h,e.s,e.l,e.opacity);if(e instanceof r||(e=x(e)),!e)return new O;if(e instanceof O)return e;var t=(e=e.rgb()).r/255,n=e.g/255,i=e.b/255,o=Math.min(t,n,i),a=Math.max(t,n,i),s=NaN,u=a-o,c=(a+o)/2;return u?(s=t===a?(n-i)/u+6*(n<i):n===a?(i-t)/u+2:(t-n)/u+4,u/=c<.5?a+o:2-a-o,s*=60):u=c>0&&c<1?0:s,new O(s,u,c,e.opacity)}function T(e,t,n,r){return 1===arguments.length?S(e):new O(e,t,n,null==r?1:r)}function O(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}function N(e,t,n){return 255*(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)}t(r,x,{copy:function(e){return Object.assign(new this.constructor,this,e)},displayable:function(){return this.rgb().displayable()},hex:v,formatHex:v,formatHsl:y,formatRgb:b,toString:b}),t(E,k,n(r,{brighter:function(e){return e=null==e?o:Math.pow(o,e),new E(this.r*e,this.g*e,this.b*e,this.opacity)},darker:function(e){return e=null==e?i:Math.pow(i,e),new E(this.r*e,this.g*e,this.b*e,this.opacity)},rgb:function(){return this},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:D,formatHex:D,formatRgb:C,toString:C})),t(O,T,n(r,{brighter:function(e){return e=null==e?o:Math.pow(o,e),new O(this.h,this.s,this.l*e,this.opacity)},darker:function(e){return e=null==e?i:Math.pow(i,e),new O(this.h,this.s,this.l*e,this.opacity)},rgb:function(){var e=this.h%360+360*(this.h<0),t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,i=2*n-r;return new E(N(e>=240?e-240:e+120,i,r),N(e,i,r),N(e<120?e+240:e-120,i,r),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var e=this.opacity;return(1===(e=isNaN(e)?1:Math.max(0,Math.min(1,e)))?"hsl(":"hsla(")+(this.h||0)+", "+100*(this.s||0)+"%, "+100*(this.l||0)+"%"+(1===e?")":", "+e+")")}}));const P=Math.PI/180,R=180/Math.PI,B=18,z=.96422,j=1,L=.82521,I=4/29,U=6/29,q=3*U*U,W=U*U*U;function H(e){if(e instanceof G)return new G(e.l,e.a,e.b,e.opacity);if(e instanceof te)return ne(e);e instanceof E||(e=A(e));var t,n,r=Q(e.r),i=Q(e.g),o=Q(e.b),a=$((.2225045*r+.7168786*i+.0606169*o)/j);return r===i&&i===o?t=n=a:(t=$((.4360747*r+.3850649*i+.1430804*o)/z),n=$((.0139322*r+.0971045*i+.7141733*o)/L)),new G(116*a-16,500*(t-a),200*(a-n),e.opacity)}function Y(e,t){return new G(e,0,0,null==t?1:t)}function V(e,t,n,r){return 1===arguments.length?H(e):new G(e,t,n,null==r?1:r)}function G(e,t,n,r){this.l=+e,this.a=+t,this.b=+n,this.opacity=+r}function $(e){return e>W?Math.pow(e,1/3):e/q+I}function X(e){return e>U?e*e*e:q*(e-I)}function J(e){return 255*(e<=.0031308?12.92*e:1.055*Math.pow(e,1/2.4)-.055)}function Q(e){return(e/=255)<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)}function Z(e){if(e instanceof te)return new te(e.h,e.c,e.l,e.opacity);if(e instanceof G||(e=H(e)),0===e.a&&0===e.b)return new te(NaN,0<e.l&&e.l<100?0:NaN,e.l,e.opacity);var t=Math.atan2(e.b,e.a)*R;return new te(t<0?t+360:t,Math.sqrt(e.a*e.a+e.b*e.b),e.l,e.opacity)}function K(e,t,n,r){return 1===arguments.length?Z(e):new te(n,t,e,null==r?1:r)}function ee(e,t,n,r){return 1===arguments.length?Z(e):new te(e,t,n,null==r?1:r)}function te(e,t,n,r){this.h=+e,this.c=+t,this.l=+n,this.opacity=+r}function ne(e){if(isNaN(e.h))return new G(e.l,0,0,e.opacity);var t=e.h*P;return new G(e.l,Math.cos(t)*e.c,Math.sin(t)*e.c,e.opacity)}t(G,V,n(r,{brighter:function(e){return new G(this.l+B*(null==e?1:e),this.a,this.b,this.opacity)},darker:function(e){return new G(this.l-B*(null==e?1:e),this.a,this.b,this.opacity)},rgb:function(){var e=(this.l+16)/116,t=isNaN(this.a)?e:e+this.a/500,n=isNaN(this.b)?e:e-this.b/200;return new E(J(3.1338561*(t=z*X(t))-1.6168667*(e=j*X(e))-.4906146*(n=L*X(n))),J(-.9787684*t+1.9161415*e+.033454*n),J(.0719453*t-.2289914*e+1.4052427*n),this.opacity)}})),t(te,ee,n(r,{brighter:function(e){return new te(this.h,this.c,this.l+B*(null==e?1:e),this.opacity)},darker:function(e){return new te(this.h,this.c,this.l-B*(null==e?1:e),this.opacity)},rgb:function(){return ne(this).rgb()}}));var re=-.14861,ie=1.78277,oe=-.29227,ae=-.90649,se=1.97294,ue=se*ae,ce=se*ie,le=ie*oe-ae*re;function fe(e){if(e instanceof he)return new he(e.h,e.s,e.l,e.opacity);e instanceof E||(e=A(e));var t=e.r/255,n=e.g/255,r=e.b/255,i=(le*r+ue*t-ce*n)/(le+ue-ce),o=r-i,a=(se*(n-i)-oe*o)/ae,s=Math.sqrt(a*a+o*o)/(se*i*(1-i)),u=s?Math.atan2(a,o)*R-120:NaN;return new he(u<0?u+360:u,s,i,e.opacity)}function de(e,t,n,r){return 1===arguments.length?fe(e):new he(e,t,n,null==r?1:r)}function he(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}t(he,de,n(r,{brighter:function(e){return e=null==e?o:Math.pow(o,e),new he(this.h,this.s,this.l*e,this.opacity)},darker:function(e){return e=null==e?i:Math.pow(i,e),new he(this.h,this.s,this.l*e,this.opacity)},rgb:function(){var e=isNaN(this.h)?0:(this.h+120)*P,t=+this.l,n=isNaN(this.s)?0:this.s*t*(1-t),r=Math.cos(e),i=Math.sin(e);return new E(255*(t+n*(re*r+ie*i)),255*(t+n*(oe*r+ae*i)),255*(t+n*(se*r)),this.opacity)}})),e.color=x,e.cubehelix=de,e.gray=Y,e.hcl=ee,e.hsl=T,e.lab=V,e.lch=K,e.rgb=k,Object.defineProperty(e,"__esModule",{value:!0})}(t)},2361:function(e,t,n){!function(e,t,n){"use strict";const r="intersect",i="union",o="vlMulti",a="or",s="and";var u="E",c="R",l="R-E",f="R-LE",d="R-RE",h="index:unit";function p(e,n){for(var r,i,o=n.fields,a=n.values,s=o.length,h=0;h<s;++h)if((i=o[h]).getter=t.field.getter||t.field(i.field),r=i.getter(e),t.isDate(r)&&(r=t.toNumber(r)),t.isDate(a[h])&&(a[h]=t.toNumber(a[h])),t.isDate(a[h][0])&&(a[h]=a[h].map(t.toNumber)),i.type===u){if(t.isArray(a[h])?a[h].indexOf(r)<0:r!==a[h])return!1}else if(i.type===c){if(!t.inrange(r,a[h]))return!1}else if(i.type===d){if(!t.inrange(r,a[h],!0,!1))return!1}else if(i.type===l){if(!t.inrange(r,a[h],!1,!1))return!1}else if(i.type===f&&!t.inrange(r,a[h],!1,!0))return!1;return!0}function g(e,t,n){for(var i,o,a,s,u,c=this.context.data[e],l=c?c.values.value:[],f=c?c[h]&&c[h].value:void 0,d=n===r,g=l.length,m=0;m<g;++m)if(i=l[m],f&&d){if(-1===(a=(o=o||{})[s=i.unit]||0))continue;if(u=p(t,i),o[s]=u?-1:++a,u&&1===f.size)return!0;if(!u&&a===f.get(s).count)return!1}else if(d^(u=p(t,i)))return u;return g&&d}function m(e,n,r){for(var u,c,l,f,d,h,p,g,m,y,b,x=this.context.data[e],w=x?x.values.value:[],_={},A={},k={},E=w.length,D=0;D<E;++D){for(f=(u=w[D]).unit,c=u.fields,l=u.values,y=0,b=c.length;y<b;++y)d=c[y],p=(h=_[d.field]||(_[d.field]={}))[f]||(h[f]=[]),k[d.field]=g=d.type.charAt(0),m=v[g+"_union"],h[f]=m(p,t.array(l[y]));r&&(p=A[f]||(A[f]=[])).push(t.array(l).reduce(((e,t,n)=>(e[c[n].field]=t,e)),{}))}return n=n||i,Object.keys(_).forEach((e=>{_[e]=Object.keys(_[e]).map((t=>_[e][t])).reduce(((t,r)=>void 0===t?r:v[k[e]+"_"+n](t,r)))})),w=Object.keys(A),r&&w.length&&(_[o]=n===i?{[a]:w.reduce(((e,t)=>(e.push(...A[t]),e)),[])}:{[s]:w.map((e=>({[a]:A[e]})))}),_}var v={E_union:function(e,t){if(!e.length)return t;for(var n=0,r=t.length;n<r;++n)e.indexOf(t[n])<0&&e.push(t[n]);return e},E_intersect:function(e,t){return e.length?e.filter((e=>t.indexOf(e)>=0)):t},R_union:function(e,n){var r=t.toNumber(n[0]),i=t.toNumber(n[1]);return r>i&&(r=n[1],i=n[0]),e.length?(e[0]>r&&(e[0]=r),e[1]<i&&(e[1]=i),e):[r,i]},R_intersect:function(e,n){var r=t.toNumber(n[0]),i=t.toNumber(n[1]);return r>i&&(r=n[1],i=n[0]),e.length?i<e[0]||e[1]<r?[]:(e[0]<r&&(e[0]=r),e[1]>i&&(e[1]=i),e):[r,i]}};const y=":",b="@";function x(e,i,o,a){i[0].type!==n.Literal&&t.error("First argument to selection functions must be a string literal.");const s=i[0].value,u=i.length>=2&&t.peek(i).value,c="unit",l=b+c,f=y+s;u!==r||t.hasOwnProperty(a,l)||(a[l]=o.getData(s).indataRef(o,c)),t.hasOwnProperty(a,f)||(a[f]=o.getData(s).tuplesRef())}e.selectionResolve=m,e.selectionTest=g,e.selectionVisitor=x,Object.defineProperty(e,"__esModule",{value:!0})}(t,n(1176),n(1716))},2362:function(e,t,n){!function(e){"use strict";var t,n,r=0,i=0,o=0,a=1e3,s=0,u=0,c=0,l="object"===typeof performance&&performance.now?performance:Date,f="object"===typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function d(){return u||(f(h),u=l.now()+c)}function h(){u=0}function p(){this._call=this._time=this._next=null}function g(e,t,n){var r=new p;return r.restart(e,t,n),r}function m(){d(),++r;for(var e,n=t;n;)(e=u-n._time)>=0&&n._call.call(null,e),n=n._next;--r}function v(){u=(s=l.now())+c,r=i=0;try{m()}finally{r=0,b(),u=0}}function y(){var e=l.now(),t=e-s;t>a&&(c-=t,s=e)}function b(){for(var e,r,i=t,o=1/0;i;)i._call?(o>i._time&&(o=i._time),e=i,i=i._next):(r=i._next,i._next=null,i=e?e._next=r:t=r);n=e,x(o)}function x(e){r||(i&&(i=clearTimeout(i)),e-u>24?(e<1/0&&(i=setTimeout(v,e-l.now()-c)),o&&(o=clearInterval(o))):(o||(s=l.now(),o=setInterval(y,a)),r=1,f(v)))}function w(e,t,n){var r=new p;return t=null==t?0:+t,r.restart((n=>{r.stop(),e(n+t)}),t,n),r}function _(e,t,n){var r=new p,i=t;return null==t?(r.restart(e,t,n),r):(r._restart=r.restart,r.restart=function(e,t,n){t=+t,n=null==n?d():+n,r._restart((function o(a){a+=i,r._restart(o,i+=t,n),e(a)}),t,n)},r.restart(e,t,n),r)}p.prototype=g.prototype={constructor:p,restart:function(e,r,i){if("function"!==typeof e)throw new TypeError("callback is not a function");i=(null==i?d():+i)+(null==r?0:+r),this._next||n===this||(n?n._next=this:t=this,n=this),this._call=e,this._time=i,x()},stop:function(){this._call&&(this._call=null,this._time=1/0,x())}},e.interval=_,e.now=d,e.timeout=w,e.timer=g,e.timerFlush=m,Object.defineProperty(e,"__esModule",{value:!0})}(t)},2363:function(e,t,n){var r=n(108);!function(e,t,n,i,o,a){"use strict";function s(e){return t.isObject(e)?e:{type:e||"pad"}}const u=e=>+e||0,c=e=>({top:e,bottom:e,left:e,right:e});function l(e){return t.isObject(e)?e.signal?e:{top:u(e.top),bottom:u(e.bottom),left:u(e.left),right:u(e.right)}:c(u(e))}const f=e=>t.isObject(e)&&!t.isArray(e)?t.extend({},e):{value:e};function d(e,n,r,i){return null!=r?(t.isObject(r)&&!t.isArray(r)||t.isArray(r)&&r.length&&t.isObject(r[0])?e.update[n]=r:e[i||"enter"][n]={value:r},1):0}function h(e,t,n){for(const r in t)d(e,r,t[r]);for(const r in n)d(e,r,n[r],"update")}function p(e,n,r){for(const i in n)r&&t.hasOwnProperty(r,i)||(e[i]=t.extend(e[i]||{},n[i]));return e}function g(e,t){return t&&(t.enter&&t.enter[e]||t.update&&t.update[e])}const m="mark",v="frame",y="scope",b="axis",x="axis-domain",w="axis-grid",_="axis-label",A="axis-tick",k="axis-title",E="legend",D="legend-band",C="legend-entry",M="legend-gradient",F="legend-label",S="legend-symbol",T="legend-title",O="title",N="title-text",P="title-subtitle";function R(e,n,r,i,o){const a={},s={};let u,c,l,f;for(c in c="lineBreak","text"!==n||null==o[c]||g(c,e)||B(a,c,o[c]),("legend"==r||String(r).startsWith("axis"))&&(r=null),f=r===v?o.group:r===m?t.extend({},o.mark,o[n]):null,f)l=g(c,e)||("fill"===c||"stroke"===c)&&(g("fill",e)||g("stroke",e)),l||B(a,c,f[c]);for(c in t.array(i).forEach((t=>{const n=o.style&&o.style[t];for(const r in n)g(r,e)||B(a,r,n[r])})),e=t.extend({},e),a)f=a[c],f.signal?(u=u||{})[c]=f:s[c]=f;return e.enter=t.extend(s,e.enter),u&&(e.update=t.extend(u,e.update)),e}function B(e,t,n){e[t]=n&&n.signal?{signal:n.signal}:{value:n}}const z=e=>t.isString(e)?t.stringValue(e):e.signal?"(".concat(e.signal,")"):W(e);function j(e){if(null!=e.gradient)return U(e);let n=e.signal?"(".concat(e.signal,")"):e.color?I(e.color):null!=e.field?W(e.field):void 0!==e.value?t.stringValue(e.value):void 0;return null!=e.scale&&(n=Y(e,n)),void 0===n&&(n=null),null!=e.exponent&&(n="pow(".concat(n,",").concat(q(e.exponent),")")),null!=e.mult&&(n+="*".concat(q(e.mult))),null!=e.offset&&(n+="+".concat(q(e.offset))),e.round&&(n="round(".concat(n,")")),n}const L=(e,t,n,r)=>"(".concat(e,"(").concat([t,n,r].map(j).join(","),")+'')");function I(e){return e.c?L("hcl",e.h,e.c,e.l):e.h||e.s?L("hsl",e.h,e.s,e.l):e.l||e.a?L("lab",e.l,e.a,e.b):e.r||e.g||e.b?L("rgb",e.r,e.g,e.b):null}function U(e){const n=[e.start,e.stop,e.count].map((e=>null==e?null:t.stringValue(e)));for(;n.length&&null==t.peek(n);)n.pop();return n.unshift(z(e.gradient)),"gradient(".concat(n.join(","),")")}function q(e){return t.isObject(e)?"("+j(e)+")":e}function W(e){return H(t.isObject(e)?e:{datum:e})}function H(e){let n,r,i;if(e.signal)n="datum",i=e.signal;else if(e.group||e.parent){for(r=Math.max(1,e.level||1),n="item";r-- >0;)n+=".mark.group";e.parent?(i=e.parent,n+=".datum"):i=e.group}else e.datum?(n="datum",i=e.datum):t.error("Invalid field reference: "+t.stringValue(e));return e.signal||(i=t.isString(i)?t.splitAccessPath(i).map(t.stringValue).join("]["):H(i)),n+"["+i+"]"}function Y(e,t){const n=z(e.scale);return null!=e.range?t="lerp(_range(".concat(n,"), ").concat(+e.range,")"):(void 0!==t&&(t="_scale(".concat(n,", ").concat(t,")")),e.band&&(t=(t?t+"+":"")+"_bandwidth(".concat(n,")")+(1===+e.band?"":"*"+q(e.band)),e.extra&&(t="(datum.extra ? _scale(".concat(n,", datum.extra.value) : ").concat(t,")"))),null==t&&(t="0")),t}function V(e){let n="";return e.forEach((e=>{const t=j(e);n+=e.test?"(".concat(e.test,")?").concat(t,":"):t})),":"===t.peek(n)&&(n+="null"),n}function G(e,t,n,r,i,o){const a={};(o=o||{}).encoders={$encode:a},e=R(e,t,n,r,i.config);for(const s in e)a[s]=$(e[s],t,o,i);return o}function $(e,t,n,r){const i={},o={};for(const a in e)null!=e[a]&&(i[a]=J(X(e[a]),r,n,o));return{$expr:{marktype:t,channels:i},$fields:Object.keys(o),$output:Object.keys(e)}}function X(e){return t.isArray(e)?V(e):j(e)}function J(e,r,i,o){const a=n.parseExpression(e,r);return a.$fields.forEach((e=>o[e]=1)),t.extend(i,a.$params),a.$expr}const Q="outer",Z=["value","update","init","react","bind"];function K(e,n){t.error(e+' for "outer" push: '+t.stringValue(n))}function ee(e,t){const n=e.name;if(e.push===Q)t.signals[n]||K("No prior signal definition",n),Z.forEach((t=>{void 0!==e[t]&&K("Invalid property ",t)}));else{const r=t.addSignal(n,e.value);!1===e.react&&(r.react=!1),e.bind&&t.addBinding(n,e.bind)}}function te(e,t,n,r){this.id=-1,this.type=e,this.value=t,this.params=n,r&&(this.parent=r)}function ne(e,t,n,r){return new te(e,t,n,r)}function re(e,t){return ne("operator",e,t)}function ie(e){const t={$ref:e.id};return e.id<0&&(e.refs=e.refs||[]).push(t),t}function oe(e,t){return t?{$field:e,$name:t}:{$field:e}}const ae=oe("key");function se(e,t){return{$compare:e,$order:t}}function ue(e,t){const n={$key:e};return t&&(n.$flat=!0),n}const ce="ascending",le="descending";function fe(e){return t.isObject(e)?(e.order===le?"-":"+")+de(e.op,e.field):""}function de(e,t){return(e&&e.signal?"$"+e.signal:e||"")+(e&&t?"_":"")+(t&&t.signal?"$"+t.signal:t||"")}const he="scope",pe="view";function ge(e){return e&&e.signal}function me(e){return e&&e.expr}function ve(e){if(ge(e))return!0;if(t.isObject(e))for(const t in e)if(ve(e[t]))return!0;return!1}function ye(e,t){return null!=e?e:t}function be(e){return e&&e.signal||e}const xe="timer";function we(e,n){return(e.merge?Ae:e.stream?ke:e.type?Ee:t.error("Invalid stream specification: "+t.stringValue(e)))(e,n)}function _e(e){return e===he?pe:e||pe}function Ae(e,t){const n=De({merge:e.merge.map((e=>we(e,t)))},e,t);return t.addStream(n).id}function ke(e,t){const n=De({stream:we(e.stream,t)},e,t);return t.addStream(n).id}function Ee(e,t){let n;e.type===xe?(n=t.event(xe,e.throttle),e={between:e.between,filter:e.filter}):n=t.event(_e(e.source),e.type);const r=De({stream:n},e,t);return 1===Object.keys(r).length?n:t.addStream(r).id}function De(e,r,i){let o=r.between;return o&&(2!==o.length&&t.error('Stream "between" parameter must have 2 entries: '+t.stringValue(r)),e.between=[we(o[0],i),we(o[1],i)]),o=r.filter?[].concat(r.filter):[],(r.marktype||r.markname||r.markrole)&&o.push(Ce(r.marktype,r.markname,r.markrole)),r.source===he&&o.push("inScope(event.item)"),o.length&&(e.filter=n.parseExpression("("+o.join(")&&(")+")",i).$expr),null!=(o=r.throttle)&&(e.throttle=+o),null!=(o=r.debounce)&&(e.debounce=+o),r.consume&&(e.consume=!0),e}function Ce(e,t,n){const r="event.item";return r+(e&&"*"!==e?"&&"+r+".mark.marktype==='"+e+"'":"")+(n?"&&"+r+".mark.role==='"+n+"'":"")+(t?"&&"+r+".mark.name==='"+t+"'":"")}const Me={code:"_.$value",ast:{type:"Identifier",value:"value"}};function Fe(e,r,o){const a=e.encode,s={target:o};let u=e.events,c=e.update,l=[];u||t.error("Signal update missing events specification."),t.isString(u)&&(u=i.selector(u,r.isSubscope()?he:pe)),u=t.array(u).filter((e=>e.signal||e.scale?(l.push(e),0):1)),l.length>1&&(l=[Te(l)]),u.length&&l.push(u.length>1?{merge:u}:u[0]),null!=a&&(c&&t.error("Signal encode and update are mutually exclusive."),c="encode(item(),"+t.stringValue(a)+")"),s.update=t.isString(c)?n.parseExpression(c,r):null!=c.expr?n.parseExpression(c.expr,r):null!=c.value?c.value:null!=c.signal?{$expr:Me,$params:{$value:r.signalRef(c.signal)}}:t.error("Invalid signal update specification."),e.force&&(s.options={force:!0}),l.forEach((e=>r.addUpdate(t.extend(Se(e,r),s))))}function Se(e,t){return{source:e.signal?t.signalRef(e.signal):e.scale?t.scaleRef(e.scale):we(e,t)}}function Te(e){return{signal:"["+e.map((e=>e.scale?'scale("'+e.scale+'")':e.signal))+"]"}}function Oe(e,r){const i=r.getSignal(e.name);let o=e.update;e.init&&(o?t.error("Signals can not include both init and update expressions."):(o=e.init,i.initonly=!0)),o&&(o=n.parseExpression(o,r),i.update=o.$expr,i.params=o.$params),e.on&&e.on.forEach((e=>Fe(e,r,i.id)))}const Ne=e=>(t,n,r)=>ne(e,n,t||void 0,r),Pe=Ne("aggregate"),Re=Ne("axisticks"),Be=Ne("bound"),ze=Ne("collect"),je=Ne("compare"),Le=Ne("datajoin"),Ie=Ne("encode"),Ue=Ne("expression"),qe=Ne("facet"),We=Ne("field"),He=Ne("key"),Ye=Ne("legendentries"),Ve=Ne("load"),Ge=Ne("mark"),$e=Ne("multiextent"),Xe=Ne("multivalues"),Je=Ne("overlap"),Qe=Ne("params"),Ze=Ne("prefacet"),Ke=Ne("projection"),et=Ne("proxy"),tt=Ne("relay"),nt=Ne("render"),rt=Ne("scale"),it=Ne("sieve"),ot=Ne("sortitems"),at=Ne("viewlayout"),st=Ne("values");let ut=0;const ct={min:"min",max:"max",count:"sum"};function lt(e,n){const r=e.type||"linear";o.isValidScaleType(r)||t.error("Unrecognized scale type: "+t.stringValue(r)),n.addScale(e.name,{type:r,domain:void 0})}function ft(e,n){const r=n.getScale(e.name).params;let i;for(i in r.domain=gt(e.domain,e,n),null!=e.range&&(r.range=Ct(e,n,r)),null!=e.interpolate&&Dt(e.interpolate,r),null!=e.nice&&(r.nice=Et(e.nice)),null!=e.bins&&(r.bins=kt(e.bins,n)),e)t.hasOwnProperty(r,i)||"name"===i||(r[i]=dt(e[i],n))}function dt(e,n){return t.isObject(e)?e.signal?n.signalRef(e.signal):t.error("Unsupported object: "+t.stringValue(e)):e}function ht(e,t){return e.signal?t.signalRef(e.signal):e.map((e=>dt(e,t)))}function pt(e){t.error("Can not find data set: "+t.stringValue(e))}function gt(e,n,r){if(e)return e.signal?r.signalRef(e.signal):(t.isArray(e)?mt:e.fields?yt:vt)(e,n,r);null==n.domainMin&&null==n.domainMax||t.error("No scale domain defined for domainMin/domainMax to override.")}function mt(e,t,n){return e.map((e=>dt(e,n)))}function vt(e,t,n){const r=n.getData(e.data);return r||pt(e.data),o.isDiscrete(t.type)?r.valuesRef(n,e.field,wt(e.sort,!1)):o.isQuantile(t.type)?r.domainRef(n,e.field):r.extentRef(n,e.field)}function yt(e,n,r){const i=e.data,a=e.fields.reduce(((e,n)=>(n=t.isString(n)?{data:i,field:n}:t.isArray(n)||n.signal?bt(n,r):n,e.push(n),e)),[]);return(o.isDiscrete(n.type)?xt:o.isQuantile(n.type)?_t:At)(e,r,a)}function bt(e,n){const r="_:vega:_"+ut++,i=ze({});if(t.isArray(e))i.value={$ingest:e};else if(e.signal){const o="setdata("+t.stringValue(r)+","+e.signal+")";i.params.input=n.signalRef(o)}return n.addDataPipeline(r,[i,it({})]),{data:r,field:"data"}}function xt(e,t,n){const r=wt(e.sort,!0);let i,o;const a=n.map((e=>{const n=t.getData(e.data);return n||pt(e.data),n.countsRef(t,e.field,r)})),s={groupby:ae,pulse:a};r&&(i=r.op||"count",o=r.field?de(i,r.field):"count",s.ops=[ct[i]],s.fields=[t.fieldRef(o)],s.as=[o]),i=t.add(Pe(s));const u=t.add(ze({pulse:ie(i)}));return o=t.add(st({field:ae,sort:t.sortRef(r),pulse:ie(u)})),ie(o)}function wt(e,n){return e&&(e.field||e.op?e.field||"count"===e.op?n&&e.field&&e.op&&!ct[e.op]&&t.error("Multiple domain scales can not be sorted using "+e.op):t.error("No field provided for sort aggregate op: "+e.op):t.isObject(e)?e.field="key":e={field:"key"}),e}function _t(e,t,n){const r=n.map((e=>{const n=t.getData(e.data);return n||pt(e.data),n.domainRef(t,e.field)}));return ie(t.add(Xe({values:r})))}function At(e,t,n){const r=n.map((e=>{const n=t.getData(e.data);return n||pt(e.data),n.extentRef(t,e.field)}));return ie(t.add($e({extents:r})))}function kt(e,n){return e.signal||t.isArray(e)?ht(e,n):n.objectProperty(e)}function Et(e){return t.isObject(e)?{interval:dt(e.interval),step:dt(e.step)}:dt(e)}function Dt(e,t){t.interpolate=dt(e.type||e),null!=e.gamma&&(t.interpolateGamma=dt(e.gamma))}function Ct(e,n,r){const i=n.config.range;let a=e.range;if(a.signal)return n.signalRef(a.signal);if(t.isString(a)){if(i&&t.hasOwnProperty(i,a))return Ct(e=t.extend({},e,{range:i[a]}),n,r);"width"===a?a=[0,{signal:"width"}]:"height"===a?a=o.isDiscrete(e.type)?[0,{signal:"height"}]:[{signal:"height"},0]:t.error("Unrecognized scale range value: "+t.stringValue(a))}else{if(a.scheme)return r.scheme=t.isArray(a.scheme)?ht(a.scheme,n):dt(a.scheme,n),a.extent&&(r.schemeExtent=ht(a.extent,n)),void(a.count&&(r.schemeCount=dt(a.count,n)));if(a.step)return void(r.rangeStep=dt(a.step,n));if(o.isDiscrete(e.type)&&!t.isArray(a))return gt(a,e,n);t.isArray(a)||t.error("Unsupported range type: "+t.stringValue(a))}return a.map((e=>(t.isArray(e)?ht:dt)(e,n)))}function Mt(e,t){const n=t.config.projection||{},r={};for(const i in e)"name"!==i&&(r[i]=Ft(e[i],i,t));for(const i in n)null==r[i]&&(r[i]=Ft(n[i],i,t));t.addProjection(e.name,r)}function Ft(e,n,r){return t.isArray(e)?e.map((e=>Ft(e,n,r))):t.isObject(e)?e.signal?r.signalRef(e.signal):"fit"===n?e:t.error("Unsupported parameter object: "+t.stringValue(e)):e}const St="top",Tt="left",Ot="right",Nt="bottom",Pt="center",Rt="vertical",Bt="start",zt="middle",jt="end",Lt="index",It="label",Ut="offset",qt="perc",Wt="perc2",Ht="value",Yt="guide-label",Vt="guide-title",Gt="group-title",$t="group-subtitle",Xt="symbol",Jt="gradient",Qt="discrete",Zt="size",Kt=[Zt,"shape","fill","stroke","strokeWidth","strokeDash","opacity"],en={name:1,style:1,interactive:1},tn={value:0},nn={value:1},rn="group",on="rect",an="rule",sn="symbol",un="text";function cn(e){return e.type=rn,e.interactive=e.interactive||!1,e}function ln(e,t){const n=(n,r)=>ye(e[n],ye(t[n],r));return n.isVertical=n=>Rt===ye(e.direction,t.direction||(n?t.symbolDirection:t.gradientDirection)),n.gradientLength=()=>ye(e.gradientLength,t.gradientLength||t.gradientWidth),n.gradientThickness=()=>ye(e.gradientThickness,t.gradientThickness||t.gradientHeight),n.entryColumns=()=>ye(e.columns,ye(t.columns,+n.isVertical(!0))),n}function fn(e,t){const n=t&&(t.update&&t.update[e]||t.enter&&t.enter[e]);return n&&n.signal?n:n?n.value:null}function dn(e,t,n){const r=t.config.style[n];return r&&r[e]}function hn(e,t,n){return"item.anchor === '".concat(Bt,"' ? ").concat(e," : item.anchor === '").concat(jt,"' ? ").concat(t," : ").concat(n)}const pn=hn(t.stringValue(Tt),t.stringValue(Ot),t.stringValue(Pt));function gn(e){const n=e("tickBand");let r,i,o=e("tickOffset");return n?n.signal?(r={signal:"(".concat(n.signal,") === 'extent' ? 1 : 0.5")},i={signal:"(".concat(n.signal,") === 'extent'")},t.isObject(o)||(o={signal:"(".concat(n.signal,") === 'extent' ? 0 : ").concat(o)})):"extent"===n?(r=1,i=!0,o=0):(r=.5,i=!1):(r=e("bandPosition"),i=e("tickExtra")),{extra:i,band:r,offset:o}}function mn(e,n){return n?e?t.isObject(e)?Object.assign({},e,{offset:mn(e.offset,n)}):{value:e,offset:n}:n:e}function vn(e,t){return t?(e.name=t.name,e.style=t.style||e.style,e.interactive=!!t.interactive,e.encode=p(e.encode,t,en)):e.interactive=!1,e}function yn(e,n,r,i){const o=ln(e,r),a=o.isVertical(),s=o.gradientThickness(),u=o.gradientLength();let c,l,d,p,g;a?(l=[0,1],d=[0,0],p=s,g=u):(l=[0,0],d=[1,0],p=u,g=s);const m={enter:c={opacity:tn,x:tn,y:tn,width:f(p),height:f(g)},update:t.extend({},c,{opacity:nn,fill:{gradient:n,start:l,stop:d}}),exit:{opacity:tn}};return h(m,{stroke:o("gradientStrokeColor"),strokeWidth:o("gradientStrokeWidth")},{opacity:o("gradientOpacity")}),vn({type:on,role:M,encode:m},i)}function bn(e,n,r,i,o){const a=ln(e,r),s=a.isVertical(),u=a.gradientThickness(),c=a.gradientLength();let l,d,p,g,m="";s?(l="y",p="y2",d="x",g="width",m="1-"):(l="x",p="x2",d="y",g="height");const v={opacity:tn,fill:{scale:n,field:Ht}};v[l]={signal:m+"datum."+qt,mult:c},v[d]=tn,v[p]={signal:m+"datum."+Wt,mult:c},v[g]=f(u);const y={enter:v,update:t.extend({},v,{opacity:nn}),exit:{opacity:tn}};return h(y,{stroke:a("gradientStrokeColor"),strokeWidth:a("gradientStrokeWidth")},{opacity:a("gradientOpacity")}),vn({type:on,role:D,key:Ht,from:o,encode:y},i)}const xn="datum.".concat(qt,'<=0?"').concat(Tt,'":datum.').concat(qt,'>=1?"').concat(Ot,'":"').concat(Pt,'"'),wn="datum.".concat(qt,'<=0?"').concat(Nt,'":datum.').concat(qt,'>=1?"').concat(St,'":"').concat(zt,'"');function _n(e,t,n,r){const i=ln(e,t),o=i.isVertical(),a=f(i.gradientThickness()),s=i.gradientLength();let u,c,l,d,p=i("labelOverlap"),g="";const m={enter:u={opacity:tn},update:c={opacity:nn,text:{field:It}},exit:{opacity:tn}};return h(m,{fill:i("labelColor"),fillOpacity:i("labelOpacity"),font:i("labelFont"),fontSize:i("labelFontSize"),fontStyle:i("labelFontStyle"),fontWeight:i("labelFontWeight"),limit:ye(e.labelLimit,t.gradientLabelLimit)}),o?(u.align={value:"left"},u.baseline=c.baseline={signal:wn},l="y",d="x",g="1-"):(u.align=c.align={signal:xn},u.baseline={value:"top"},l="x",d="y"),u[l]=c[l]={signal:g+"datum."+qt,mult:s},u[d]=c[d]=a,a.offset=ye(e.labelOffset,t.gradientLabelOffset)||0,p=p?{separation:i("labelSeparation"),method:p,order:"datum."+Lt}:void 0,vn({type:un,role:F,style:Yt,key:Ht,from:r,encode:m,overlap:p},n)}function An(e,t,n,r,i){const o=ln(e,t),a=n.entries,s=!(!a||!a.interactive),u=a?a.name:void 0,c=o("clipHeight"),l=o("symbolOffset"),d={data:"value"},g="(".concat(i,") ? datum.").concat(Ut," : datum.").concat(Zt),m=c?f(c):{field:Zt},v="datum.".concat(Lt),b="max(1, ".concat(i,")");let x,w,_,A,k;m.mult=.5,x={enter:w={opacity:tn,x:{signal:g,mult:.5,offset:l},y:m},update:_={opacity:nn,x:w.x,y:w.y},exit:{opacity:tn}};let E=null,D=null;e.fill||(E=t.symbolBaseFillColor,D=t.symbolBaseStrokeColor),h(x,{fill:o("symbolFillColor",E),shape:o("symbolType"),size:o("symbolSize"),stroke:o("symbolStrokeColor",D),strokeDash:o("symbolDash"),strokeDashOffset:o("symbolDashOffset"),strokeWidth:o("symbolStrokeWidth")},{opacity:o("symbolOpacity")}),Kt.forEach((t=>{e[t]&&(_[t]=w[t]={scale:e[t],field:Ht})}));const C=vn({type:sn,role:S,key:Ht,from:d,clip:!!c||void 0,encode:x},n.symbols),M=f(l);M.offset=o("labelOffset"),x={enter:w={opacity:tn,x:{signal:g,offset:M},y:m},update:_={opacity:nn,text:{field:It},x:w.x,y:w.y},exit:{opacity:tn}},h(x,{align:o("labelAlign"),baseline:o("labelBaseline"),fill:o("labelColor"),fillOpacity:o("labelOpacity"),font:o("labelFont"),fontSize:o("labelFontSize"),fontStyle:o("labelFontStyle"),fontWeight:o("labelFontWeight"),limit:o("labelLimit")});const T=vn({type:un,role:F,style:Yt,key:Ht,from:d,encode:x},n.labels);return x={enter:{noBound:{value:!c},width:tn,height:c?f(c):tn,opacity:tn},exit:{opacity:tn},update:_={opacity:nn,row:{signal:null},column:{signal:null}}},o.isVertical(!0)?(A="ceil(item.mark.items.length / ".concat(b,")"),_.row.signal="".concat(v,"%").concat(A),_.column.signal="floor(".concat(v," / ").concat(A,")"),k={field:["row",v]}):(_.row.signal="floor(".concat(v," / ").concat(b,")"),_.column.signal="".concat(v," % ").concat(b),k={field:v}),_.column.signal="(".concat(i,")?").concat(_.column.signal,":").concat(v),cn({role:y,from:r={facet:{data:r,name:"value",groupby:Lt}},encode:p(x,a,en),marks:[C,T],name:u,interactive:s,sort:k})}function kn(e,t){const n=ln(e,t);return{align:n("gridAlign"),columns:n.entryColumns(),center:{row:!0,column:!1},padding:{row:n("rowPadding"),column:n("columnPadding")}}}const En='item.orient === "left"',Dn='item.orient === "right"',Cn="(".concat(En," || ").concat(Dn,")"),Mn="datum.vgrad && ".concat(Cn),Fn=hn('"top"','"bottom"','"middle"'),Sn=hn('"right"','"left"','"center"'),Tn="datum.vgrad && ".concat(Dn," ? (").concat(Sn,") : (").concat(Cn," && !(datum.vgrad && ").concat(En,')) ? "left" : ').concat(pn),On="item._anchor || (".concat(Cn,' ? "middle" : "start")'),Nn="".concat(Mn," ? (").concat(En," ? -90 : 90) : 0"),Pn="".concat(Cn," ? (datum.vgrad ? (").concat(Dn,' ? "bottom" : "top") : ').concat(Fn,') : "top"');function Rn(e,t,n,r){const i=ln(e,t),o={enter:{opacity:tn},update:{opacity:nn,x:{field:{group:"padding"}},y:{field:{group:"padding"}}},exit:{opacity:tn}};return h(o,{orient:i("titleOrient"),_anchor:i("titleAnchor"),anchor:{signal:On},angle:{signal:Nn},align:{signal:Tn},baseline:{signal:Pn},text:e.title,fill:i("titleColor"),fillOpacity:i("titleOpacity"),font:i("titleFont"),fontSize:i("titleFontSize"),fontStyle:i("titleFontStyle"),fontWeight:i("titleFontWeight"),limit:i("titleLimit"),lineHeight:i("titleLineHeight")},{align:i("titleAlign"),baseline:i("titleBaseline")}),vn({type:un,role:T,style:Vt,from:r,encode:o},n)}function Bn(e,n){let r;return t.isObject(e)&&(e.signal?r=e.signal:e.path?r="pathShape("+zn(e.path)+")":e.sphere&&(r="geoShape("+zn(e.sphere)+', {type: "Sphere"})')),r?n.signalRef(r):!!e}function zn(e){return t.isObject(e)&&e.signal?e.signal:t.stringValue(e)}function jn(e){const t=e.role||"";return t.indexOf("axis")&&t.indexOf("legend")&&t.indexOf("title")?e.type===rn?y:t||m:t}function Ln(e){return{marktype:e.type,name:e.name||void 0,role:e.role||jn(e),zindex:+e.zindex||void 0,aria:e.aria,description:e.description}}function In(e,t){return e&&e.signal?t.signalRef(e.signal):!1!==e}function Un(e,n){const r=a.definition(e.type);r||t.error("Unrecognized transform type: "+t.stringValue(e.type));const i=ne(r.type.toLowerCase(),null,qn(r,e,n));return e.signal&&n.addSignal(e.signal,n.proxy(i)),i.metadata=r.metadata||{},i}function qn(e,t,n){const r={},i=e.params.length;for(let o=0;o<i;++o){const i=e.params[o];r[i.name]=Wn(i,t,n)}return r}function Wn(e,n,r){const i=e.type,o=n[e.name];return"index"===i?Yn(e,n,r):void 0!==o?"param"===i?Vn(e,n,r):"projection"===i?r.projectionRef(n[e.name]):e.array&&!ge(o)?o.map((t=>Hn(e,t,r))):Hn(e,o,r):void(e.required&&t.error("Missing required "+t.stringValue(n.type)+" parameter: "+t.stringValue(e.name)))}function Hn(e,r,i){const o=e.type;if(ge(r))return Qn(o)?t.error("Expression references can not be signals."):Zn(o)?i.fieldRef(r):Kn(o)?i.compareRef(r):i.signalRef(r.signal);{const t=e.expr||Zn(o);return t&&$n(r)?i.exprRef(r.expr,r.as):t&&Xn(r)?oe(r.field,r.as):Qn(o)?n.parseExpression(r,i):Jn(o)?ie(i.getData(r).values):Zn(o)?oe(r):Kn(o)?i.compareRef(r):r}}function Yn(e,n,r){return t.isString(n.from)||t.error('Lookup "from" parameter must be a string literal.'),r.getData(n.from).lookupRef(r,n.key)}function Vn(e,n,r){const i=n[e.name];return e.array?(t.isArray(i)||t.error("Expected an array of sub-parameters. Instead: "+t.stringValue(i)),i.map((t=>Gn(e,t,r)))):Gn(e,i,r)}function Gn(e,n,r){const i=e.params.length;let o;for(let t=0;t<i;++t){o=e.params[t];for(const e in o.key)if(o.key[e]!==n[e]){o=null;break}if(o)break}o||t.error("Unsupported parameter: "+t.stringValue(n));const a=t.extend(qn(o,n,r),o.key);return ie(r.add(Qe(a)))}const $n=e=>e&&e.expr,Xn=e=>e&&e.field,Jn=e=>"data"===e,Qn=e=>"expr"===e,Zn=e=>"field"===e,Kn=e=>"compare"===e;function er(e,n,r){let i,o,a,s,u;return e?(i=e.facet)&&(n||t.error("Only group marks can be faceted."),null!=i.field?s=u=tr(i,r):(e.data?u=ie(r.getData(e.data).aggregate):(a=Un(t.extend({type:"aggregate",groupby:t.array(i.groupby)},i.aggregate),r),a.params.key=r.keyRef(i.groupby),a.params.pulse=tr(i,r),s=u=ie(r.add(a))),o=r.keyRef(i.groupby,!0))):s=ie(r.add(ze(null,[{}]))),s||(s=tr(e,r)),{key:o,pulse:s,parent:u}}function tr(e,t){return e.$ref?e:e.data&&e.data.$ref?e.data:ie(t.getData(e.data).output)}function nr(e,t,n,r,i){this.scope=e,this.input=t,this.output=n,this.values=r,this.aggregate=i,this.index={}}function rr(e){return t.isString(e)?e:null}function ir(e,t,n){const r=de(n.op,n.field);let i;if(t.ops){for(let o=0,a=t.as.length;o<a;++o)if(t.as[o]===r)return}else t.ops=["count"],t.fields=[null],t.as=["count"];n.op&&(t.ops.push((i=n.op.signal)?e.signalRef(i):n.op),t.fields.push(e.fieldRef(n.field)),t.as.push(r))}function or(e,t,n,r,i,o,a){const s=t[n]||(t[n]={}),u=fe(o);let c,l,f=rr(i);if(null!=f&&(e=t.scope,f+=u?"|"+u:"",c=s[f]),!c){const n=o?{field:ae,pulse:t.countsRef(e,i,o)}:{field:e.fieldRef(i),pulse:ie(t.output)};u&&(n.sort=e.sortRef(o)),l=e.add(ne(r,void 0,n)),a&&(t.index[i]=l),c=ie(l),null!=f&&(s[f]=c)}return c}function ar(e,n,r){const i=e.from.facet,o=i.name,a=tr(i,n);let s;i.name||t.error("Facet must have a name: "+t.stringValue(i)),i.data||t.error("Facet must reference a data set: "+t.stringValue(i)),i.field?s=n.add(Ze({field:n.fieldRef(i.field),pulse:a})):i.groupby?s=n.add(qe({key:n.keyRef(i.groupby),group:ie(n.proxy(r.parent)),pulse:a})):t.error("Facet must specify groupby or field: "+t.stringValue(i));const u=n.fork(),c=u.add(ze()),l=u.add(it({pulse:ie(c)}));u.addData(o,new nr(u,c,c,l)),u.addSignal("parent",null),s.params.subflow={$subflow:u.parse(e).toRuntime()}}function sr(e,t,n){const r=t.add(Ze({pulse:n.pulse})),i=t.fork();i.add(it()),i.addSignal("parent",null),r.params.subflow={$subflow:i.parse(e).toRuntime()}}function ur(e,t,r){const i=e.remove,o=e.insert,a=e.toggle,s=e.modify,u=e.values,c=t.add(re()),l="if("+e.trigger+',modify("'+r+'",'+[o,i,a,s,u].map((e=>null==e?"null":e)).join(",")+"),0)",f=n.parseExpression(l,t);c.update=f.$expr,c.params=f.$params}function cr(e,n){const r=jn(e),i=e.type===rn,o=e.from&&e.from.facet,a=e.overlap;let s,u,c,l,f,d,h,p=e.layout||r===y||r===v;const g=r===m||p||o,b=er(e.from,i,n);u=n.add(Le({key:b.key||(e.key?oe(e.key):void 0),pulse:b.pulse,clean:!i}));const x=ie(u);u=c=n.add(ze({pulse:x})),u=n.add(Ge({markdef:Ln(e),interactive:In(e.interactive,n),clip:Bn(e.clip,n),context:{$context:!0},groups:n.lookup(),parent:n.signals.parent?n.signalRef("parent"):null,index:n.markpath(),pulse:ie(u)}));const w=ie(u);u=l=n.add(Ie(G(e.encode,e.type,r,e.style,n,{mod:!1,pulse:w}))),u.params.parent=n.encode(),e.transform&&e.transform.forEach((e=>{const r=Un(e,n),i=r.metadata;(i.generates||i.changes)&&t.error("Mark transforms should not generate new data."),i.nomod||(l.params.mod=!0),r.params.pulse=ie(u),n.add(u=r)})),e.sort&&(u=n.add(ot({sort:n.compareRef(e.sort),pulse:ie(u)})));const _=ie(u);(o||p)&&(p=n.add(at({layout:n.objectProperty(e.layout),legends:n.legends,mark:w,pulse:_})),d=ie(p));const A=n.add(Be({mark:w,pulse:d||_}));h=ie(A),i&&(g&&(s=n.operators,s.pop(),p&&s.pop()),n.pushState(_,d||h,x),o?ar(e,n,b):g?sr(e,n,b):n.parse(e),n.popState(),g&&(p&&s.push(p),s.push(A))),a&&(h=lr(a,h,n));const k=n.add(nt({pulse:h})),E=n.add(it({pulse:ie(k)},void 0,n.parent()));null!=e.name&&(f=e.name,n.addData(f,new nr(n,c,k,E)),e.on&&e.on.forEach((e=>{(e.insert||e.remove||e.toggle)&&t.error("Marks only support modify triggers."),ur(e,n,f)})))}function lr(e,t,n){const r=e.method,i=e.bound,o=e.separation,a={separation:ge(o)?n.signalRef(o.signal):o,method:ge(r)?n.signalRef(r.signal):r,pulse:t};if(e.order&&(a.sort=n.compareRef({field:e.order})),i){const e=i.tolerance;a.boundTolerance=ge(e)?n.signalRef(e.signal):+e,a.boundScale=n.scaleRef(i.scale),a.boundOrient=i.orient}return ie(n.add(Je(a)))}function fr(e,n){const r=n.config.legend,i=e.encode||{},o=ln(e,r),a=i.legend||{},s=a.name||void 0,u=a.interactive,c=a.style,l={};let f,d,h,g=0;Kt.forEach((t=>e[t]?(l[t]=e[t],g=g||e[t]):0)),g||t.error("Missing valid scale for legend.");const m=dr(e,n.scaleType(g)),v={title:null!=e.title,scales:l,type:m,vgrad:"symbol"!==m&&o.isVertical()},y=ie(n.add(ze(null,[v]))),b={enter:{x:{value:0},y:{value:0}}},x=ie(n.add(Ye(d={type:m,scale:n.scaleRef(g),count:n.objectProperty(o("tickCount")),limit:n.property(o("symbolLimit")),values:n.objectProperty(e.values),minstep:n.property(e.tickMinStep),formatType:n.property(e.formatType),formatSpecifier:n.property(e.format)})));return m===Jt?(h=[yn(e,g,r,i.gradient),_n(e,r,i.labels,x)],d.count=d.count||n.signalRef("max(2,2*floor((".concat(be(o.gradientLength()),")/100))"))):m===Qt?h=[bn(e,g,r,i.gradient,x),_n(e,r,i.labels,x)]:(f=kn(e,r),h=[An(e,r,i,x,be(f.columns))],d.size=gr(e,n,h[0].marks)),h=[cn({role:C,from:y,encode:b,marks:h,layout:f,interactive:u})],v.title&&h.push(Rn(e,r,i.title,y)),cr(cn({role:E,from:y,encode:p(pr(o,e,r),a,en),marks:h,aria:o("aria"),description:o("description"),zindex:o("zindex"),name:s,interactive:u,style:c}),n)}function dr(e,t){let n=e.type||Xt;return e.type||1!==hr(e)||!e.fill&&!e.stroke||(n=o.isContinuous(t)?Jt:o.isDiscretizing(t)?Qt:Xt),n!==Jt?n:o.isDiscretizing(t)?Qt:Jt}function hr(e){return Kt.reduce(((t,n)=>t+(e[n]?1:0)),0)}function pr(e,t,n){const r={enter:{},update:{}};return h(r,{orient:e("orient"),offset:e("offset"),padding:e("padding"),titlePadding:e("titlePadding"),cornerRadius:e("cornerRadius"),fill:e("fillColor"),stroke:e("strokeColor"),strokeWidth:n.strokeWidth,strokeDash:n.strokeDash,x:e("legendX"),y:e("legendY"),format:t.format,formatType:t.formatType}),r}function gr(e,t,r){const i=be(mr("size",e,r)),o=be(mr("strokeWidth",e,r)),a=be(vr(r[1].encode,t,Yt));return n.parseExpression("max(ceil(sqrt(".concat(i,")+").concat(o,"),").concat(a,")"),t)}function mr(e,t,n){return t[e]?'scale("'.concat(t[e],'",datum)'):fn(e,n[0].encode)}function vr(e,t,n){return fn("fontSize",e)||dn("fontSize",t,n)}nr.fromEntries=function(e,t){const n=t.length,r=t[n-1],i=t[n-2];let o=t[0],a=null,s=1;for(o&&"load"===o.type&&(o=t[1]),e.add(t[0]);s<n;++s)t[s].params.pulse=ie(t[s-1]),e.add(t[s]),"aggregate"===t[s].type&&(a=t[s]);return new nr(e,o,i,r,a)},nr.prototype={countsRef(e,t,n){const r=this,i=r.counts||(r.counts={}),o=rr(t);let a,s,u;return null!=o&&(e=r.scope,a=i[o]),a?n&&n.field&&ir(e,a.agg.params,n):(u={groupby:e.fieldRef(t,"key"),pulse:ie(r.output)},n&&n.field&&ir(e,u,n),s=e.add(Pe(u)),a=e.add(ze({pulse:ie(s)})),a={agg:s,ref:ie(a)},null!=o&&(i[o]=a)),a.ref},tuplesRef(){return ie(this.values)},extentRef(e,t){return or(e,this,"extent","extent",t,!1)},domainRef(e,t){return or(e,this,"domain","values",t,!1)},valuesRef(e,t,n){return or(e,this,"vals","values",t,n||!0)},lookupRef(e,t){return or(e,this,"lookup","tupleindex",t,!1)},indataRef(e,t){return or(e,this,"indata","tupleindex",t,!0,!0)}};const yr='item.orient==="'.concat(Tt,'"?-90:item.orient==="').concat(Ot,'"?90:0');function br(e,n){const r=ln(e=t.isString(e)?{text:e}:e,n.config.title),i=e.encode||{},o=i.group||{},a=o.name||void 0,s=o.interactive,u=o.style,c=[],l={},f=ie(n.add(ze(null,[l])));return c.push(_r(e,r,xr(e),f)),e.subtitle&&c.push(Ar(e,r,i.subtitle,f)),cr(cn({role:O,from:f,encode:wr(r,o),marks:c,aria:r("aria"),description:r("description"),zindex:r("zindex"),name:a,interactive:s,style:u}),n)}function xr(e){const n=e.encode;return n&&n.title||t.extend({name:e.name,interactive:e.interactive,style:e.style},n)}function wr(e,t){const n={enter:{},update:{}};return h(n,{orient:e("orient"),anchor:e("anchor"),align:{signal:pn},angle:{signal:yr},limit:e("limit"),frame:e("frame"),offset:e("offset")||0,padding:e("subtitlePadding")}),p(n,t,en)}function _r(e,t,n,r){const i={value:0},o={enter:{opacity:i},update:{opacity:{value:1}},exit:{opacity:i}};return h(o,{text:e.text,align:{signal:"item.mark.group.align"},angle:{signal:"item.mark.group.angle"},limit:{signal:"item.mark.group.limit"},baseline:"top",dx:t("dx"),dy:t("dy"),fill:t("color"),font:t("font"),fontSize:t("fontSize"),fontStyle:t("fontStyle"),fontWeight:t("fontWeight"),lineHeight:t("lineHeight")},{align:t("align"),angle:t("angle"),baseline:t("baseline")}),vn({type:un,role:N,style:Gt,from:r,encode:o},n)}function Ar(e,t,n,r){const i={value:0},o={enter:{opacity:i},update:{opacity:{value:1}},exit:{opacity:i}};return h(o,{text:e.subtitle,align:{signal:"item.mark.group.align"},angle:{signal:"item.mark.group.angle"},limit:{signal:"item.mark.group.limit"},baseline:"top",dx:t("dx"),dy:t("dy"),fill:t("subtitleColor"),font:t("subtitleFont"),fontSize:t("subtitleFontSize"),fontStyle:t("subtitleFontStyle"),fontWeight:t("subtitleFontWeight"),lineHeight:t("subtitleLineHeight")},{align:t("align"),angle:t("angle"),baseline:t("baseline")}),vn({type:un,role:P,style:$t,from:r,encode:o},n)}function kr(e,t){const n=[];e.transform&&e.transform.forEach((e=>{n.push(Un(e,t))})),e.on&&e.on.forEach((n=>{ur(n,t,e.name)})),t.addDataPipeline(e.name,Er(e,t,n))}function Er(e,n,r){const i=[];let o,a,s,u,c,l=null,f=!1,d=!1;for(e.values?ve(e.values)||ve(e.format)?(i.push(Cr(n,e)),i.push(l=Dr())):i.push(l=Dr({$ingest:e.values,$format:e.format})):e.url?ve(e.url)||ve(e.format)?(i.push(Cr(n,e)),i.push(l=Dr())):i.push(l=Dr({$request:e.url,$format:e.format})):e.source&&(l=o=t.array(e.source).map((e=>ie(n.getData(e).output))),i.push(null)),a=0,s=r.length;a<s;++a)u=r[a],c=u.metadata,l||c.source||i.push(l=Dr()),i.push(u),c.generates&&(d=!0),c.modifies&&!d&&(f=!0),c.source?l=u:c.changes&&(l=null);return o&&(s=o.length-1,i[0]=tt({derive:f,pulse:s?o:o[0]}),(f||s)&&i.splice(1,0,Dr())),l||i.push(Dr()),i.push(it({})),i}function Dr(e){const t=ze({},e);return t.metadata={source:!0},t}function Cr(e,t){return Ve({url:t.url?e.property(t.url):void 0,async:t.async?e.property(t.async):void 0,values:t.values?e.property(t.values):void 0,format:e.objectProperty(t.format)})}const Mr=e=>e===Nt||e===St,Fr=(e,t,n)=>ge(e)?Br(e.signal,t,n):e===Tt||e===St?t:n,Sr=(e,t,n)=>ge(e)?Pr(e.signal,t,n):Mr(e)?t:n,Tr=(e,t,n)=>ge(e)?Rr(e.signal,t,n):Mr(e)?n:t,Or=(e,t,n)=>ge(e)?zr(e.signal,t,n):e===St?{value:t}:{value:n},Nr=(e,t,n)=>ge(e)?jr(e.signal,t,n):e===Ot?{value:t}:{value:n},Pr=(e,t,n)=>Lr("".concat(e," === '").concat(St,"' || ").concat(e," === '").concat(Nt,"'"),t,n),Rr=(e,t,n)=>Lr("".concat(e," !== '").concat(St,"' && ").concat(e," !== '").concat(Nt,"'"),t,n),Br=(e,t,n)=>Ur("".concat(e," === '").concat(Tt,"' || ").concat(e," === '").concat(St,"'"),t,n),zr=(e,t,n)=>Ur("".concat(e," === '").concat(St,"'"),t,n),jr=(e,t,n)=>Ur("".concat(e," === '").concat(Ot,"'"),t,n),Lr=(e,n,r)=>(n=null!=n?f(n):n,r=null!=r?f(r):r,Ir(n)&&Ir(r)?(n=n?n.signal||t.stringValue(n.value):null,r=r?r.signal||t.stringValue(r.value):null,{signal:"".concat(e," ? (").concat(n,") : (").concat(r,")")}):[t.extend({test:e},n)].concat(r||[])),Ir=e=>null==e||1===Object.keys(e).length,Ur=(e,t,n)=>({signal:"".concat(e," ? (").concat(Wr(t),") : (").concat(Wr(n),")")}),qr=(e,t,n,r,i)=>({signal:(null!=r?"".concat(e," === '").concat(Tt,"' ? (").concat(Wr(r),") : "):"")+(null!=n?"".concat(e," === '").concat(Nt,"' ? (").concat(Wr(n),") : "):"")+(null!=i?"".concat(e," === '").concat(Ot,"' ? (").concat(Wr(i),") : "):"")+(null!=t?"".concat(e," === '").concat(St,"' ? (").concat(Wr(t),") : "):"")+"(null)"}),Wr=e=>ge(e)?e.signal:null==e?null:t.stringValue(e),Hr=(e,t)=>0===t?0:ge(e)?{signal:"(".concat(e.signal,") * ").concat(t)}:{value:e*t},Yr=(e,t)=>{const n=e.signal;return n&&n.endsWith("(null)")?{signal:n.slice(0,-6)+t.signal}:e};function Vr(e,n,r,i){let o;if(n&&t.hasOwnProperty(n,e))return n[e];if(t.hasOwnProperty(r,e))return r[e];if(e.startsWith("title")){switch(e){case"titleColor":o="fill";break;case"titleFont":case"titleFontSize":case"titleFontWeight":o=e[5].toLowerCase()+e.slice(6)}return i[Vt][o]}if(e.startsWith("label")){switch(e){case"labelColor":o="fill";break;case"labelFont":case"labelFontSize":o=e[5].toLowerCase()+e.slice(6)}return i[Yt][o]}return null}function Gr(e){const t={};var n,i=r(e);try{for(i.s();!(n=i.n()).done;){const e=n.value;if(e)for(const n in e)t[n]=1}}catch(o){i.e(o)}finally{i.f()}return Object.keys(t)}function $r(e,n){var i,o,a,s=n.config,u=s.style,c=s.axis,l="band"===n.scaleType(e.scale)&&s.axisBand,f=e.orient;if(ge(f)){const e=Gr([s.axisX,s.axisY]),t=Gr([s.axisTop,s.axisBottom,s.axisLeft,s.axisRight]);i={};var d,h=r(e);try{for(h.s();!(d=h.n()).done;)i[a=d.value]=Sr(f,Vr(a,s.axisX,c,u),Vr(a,s.axisY,c,u))}catch(m){h.e(m)}finally{h.f()}o={};var p,g=r(t);try{for(g.s();!(p=g.n()).done;)o[a=p.value]=qr(f.signal,Vr(a,s.axisTop,c,u),Vr(a,s.axisBottom,c,u),Vr(a,s.axisLeft,c,u),Vr(a,s.axisRight,c,u))}catch(m){g.e(m)}finally{g.f()}}else i=f===St||f===Nt?s.axisX:s.axisY,o=s["axis"+f[0].toUpperCase()+f.slice(1)];return i||o||l?t.extend({},c,i,o,l):c}function Xr(e,t,n,r){const i=ln(e,t),o=e.orient;let a,s;const u={enter:a={opacity:tn},update:s={opacity:nn},exit:{opacity:tn}};h(u,{stroke:i("domainColor"),strokeCap:i("domainCap"),strokeDash:i("domainDash"),strokeDashOffset:i("domainDashOffset"),strokeWidth:i("domainWidth"),strokeOpacity:i("domainOpacity")});const c=Jr(e,0),l=Jr(e,1);return a.x=s.x=Sr(o,c,tn),a.x2=s.x2=Sr(o,l),a.y=s.y=Tr(o,c,tn),a.y2=s.y2=Tr(o,l),vn({type:an,role:x,from:r,encode:u},n)}function Jr(e,t){return{scale:e.scale,range:t}}function Qr(e,n,r,i,o){const a=ln(e,n),s=e.orient,u=e.gridScale,c=Fr(s,1,-1),l=Zr(e.offset,c);let f,d,p;const g={enter:f={opacity:tn},update:p={opacity:nn},exit:d={opacity:tn}};h(g,{stroke:a("gridColor"),strokeCap:a("gridCap"),strokeDash:a("gridDash"),strokeDashOffset:a("gridDashOffset"),strokeOpacity:a("gridOpacity"),strokeWidth:a("gridWidth")});const m={scale:e.scale,field:Ht,band:o.band,extra:o.extra,offset:o.offset,round:a("tickRound")},v=Sr(s,{signal:"height"},{signal:"width"}),y=u?{scale:u,range:0,mult:c,offset:l}:{value:0,offset:l},b=u?{scale:u,range:1,mult:c,offset:l}:t.extend(v,{mult:c,offset:l});return f.x=p.x=Sr(s,m,y),f.y=p.y=Tr(s,m,y),f.x2=p.x2=Tr(s,b),f.y2=p.y2=Sr(s,b),d.x=Sr(s,m),d.y=Tr(s,m),vn({type:an,role:w,key:Ht,from:i,encode:g},r)}function Zr(e,n){if(1===n);else if(t.isObject(e)){let r=e=t.extend({},e);for(;null!=r.mult;){if(!t.isObject(r.mult))return r.mult=ge(n)?{signal:"(".concat(r.mult,") * (").concat(n.signal,")")}:r.mult*n,e;r=r.mult=t.extend({},r.mult)}r.mult=n}else e=ge(n)?{signal:"(".concat(n.signal,") * (").concat(e||0,")")}:n*(e||0);return e}function Kr(e,t,n,r,i,o){const a=ln(e,t),s=e.orient,u=Fr(s,-1,1);let c,l,d;const p={enter:c={opacity:tn},update:d={opacity:nn},exit:l={opacity:tn}};h(p,{stroke:a("tickColor"),strokeCap:a("tickCap"),strokeDash:a("tickDash"),strokeDashOffset:a("tickDashOffset"),strokeOpacity:a("tickOpacity"),strokeWidth:a("tickWidth")});const g=f(i);g.mult=u;const m={scale:e.scale,field:Ht,band:o.band,extra:o.extra,offset:o.offset,round:a("tickRound")};return d.y=c.y=Sr(s,tn,m),d.y2=c.y2=Sr(s,g),l.x=Sr(s,m),d.x=c.x=Tr(s,tn,m),d.x2=c.x2=Tr(s,g),l.y=Tr(s,m),vn({type:an,role:A,key:Ht,from:r,encode:p},n)}function ei(e,t,n,r,i){return{signal:'flush(range("'+e+'"), scale("'+e+'", datum.value), '+t+","+n+","+r+","+i+")"}}function ti(e,t,n,r,i,o){const a=ln(e,t),s=e.orient,u=e.scale,c=Fr(s,-1,1),l=be(a("labelFlush")),d=be(a("labelFlushOffset")),p=a("labelAlign"),g=a("labelBaseline");let m,v=0===l||!!l;const y=f(i);y.mult=c,y.offset=f(a("labelPadding")||0),y.offset.mult=c;const b={scale:u,field:Ht,band:.5,offset:mn(o.offset,a("labelOffset"))},x=Sr(s,v?ei(u,l,'"left"','"right"','"center"'):{value:"center"},Nr(s,"left","right")),w=Sr(s,Or(s,"bottom","top"),v?ei(u,l,'"top"','"bottom"','"middle"'):{value:"middle"}),A=ei(u,l,"-(".concat(d,")"),d,0);v=v&&d;const k={opacity:tn,x:Sr(s,b,y),y:Tr(s,b,y)},E={enter:k,update:m={opacity:nn,text:{field:It},x:k.x,y:k.y,align:x,baseline:w},exit:{opacity:tn,x:k.x,y:k.y}};h(E,{dx:!p&&v?Sr(s,A):null,dy:!g&&v?Tr(s,A):null}),h(E,{angle:a("labelAngle"),fill:a("labelColor"),fillOpacity:a("labelOpacity"),font:a("labelFont"),fontSize:a("labelFontSize"),fontWeight:a("labelFontWeight"),fontStyle:a("labelFontStyle"),limit:a("labelLimit"),lineHeight:a("labelLineHeight")},{align:p,baseline:g});const D=a("labelBound");let C=a("labelOverlap");return C=C||D?{separation:a("labelSeparation"),method:C,order:"datum.index",bound:D?{scale:u,orient:s,tolerance:D}:null}:void 0,m.align!==x&&(m.align=Yr(m.align,x)),m.baseline!==w&&(m.baseline=Yr(m.baseline,w)),vn({type:un,role:_,style:Yt,key:Ht,from:r,encode:E,overlap:C},n)}function ni(e,n,r,i){const o=ln(e,n),a=e.orient,s=Fr(a,-1,1);let u,c;const l={enter:u={opacity:tn,anchor:f(o("titleAnchor",null)),align:{signal:pn}},update:c=t.extend({},u,{opacity:nn,text:f(e.title)}),exit:{opacity:tn}},d={signal:'lerp(range("'.concat(e.scale,'"), ').concat(hn(0,1,.5),")")};return c.x=Sr(a,d),c.y=Tr(a,d),u.angle=Sr(a,tn,Hr(s,90)),u.baseline=Sr(a,Or(a,Nt,St),{value:Nt}),c.angle=u.angle,c.baseline=u.baseline,h(l,{fill:o("titleColor"),fillOpacity:o("titleOpacity"),font:o("titleFont"),fontSize:o("titleFontSize"),fontStyle:o("titleFontStyle"),fontWeight:o("titleFontWeight"),limit:o("titleLimit"),lineHeight:o("titleLineHeight")},{align:o("titleAlign"),angle:o("titleAngle"),baseline:o("titleBaseline")}),ri(o,a,l,r),l.update.align=Yr(l.update.align,u.align),l.update.angle=Yr(l.update.angle,u.angle),l.update.baseline=Yr(l.update.baseline,u.baseline),vn({type:un,role:k,style:Vt,from:i,encode:l},r)}function ri(e,t,n,r){const i=(e,t)=>null!=e?(n.update[t]=Yr(f(e),n.update[t]),!1):!g(t,r),o=i(e("titleX"),"x"),a=i(e("titleY"),"y");n.enter.auto=a===o?f(a):Sr(t,f(a),f(o))}function ii(e,t){const n=$r(e,t),r=e.encode||{},i=r.axis||{},o=i.name||void 0,a=i.interactive,s=i.style,u=ln(e,n),c=gn(u),l={scale:e.scale,ticks:!!u("ticks"),labels:!!u("labels"),grid:!!u("grid"),domain:!!u("domain"),title:null!=e.title},f=ie(t.add(ze({},[l]))),d=ie(t.add(Re({scale:t.scaleRef(e.scale),extra:t.property(c.extra),count:t.objectProperty(e.tickCount),values:t.objectProperty(e.values),minstep:t.property(e.tickMinStep),formatType:t.property(e.formatType),formatSpecifier:t.property(e.format)}))),h=[];let g;return l.grid&&h.push(Qr(e,n,r.grid,d,c)),l.ticks&&(g=u("tickSize"),h.push(Kr(e,n,r.ticks,d,g,c))),l.labels&&(g=l.ticks?g:0,h.push(ti(e,n,r.labels,d,g,c))),l.domain&&h.push(Xr(e,n,r.domain,f)),l.title&&h.push(ni(e,n,r.title,f)),cr(cn({role:b,from:f,encode:p(oi(u,e),i,en),marks:h,aria:u("aria"),description:u("description"),zindex:u("zindex"),name:o,interactive:a,style:s}),t)}function oi(e,t){const n={enter:{},update:{}};return h(n,{orient:e("orient"),offset:e("offset")||0,position:ye(t.position,0),titlePadding:e("titlePadding"),minExtent:e("minExtent"),maxExtent:e("maxExtent"),range:{signal:'abs(span(range("'.concat(t.scale,'")))')},translate:e("translate"),format:t.format,formatType:t.formatType}),n}function ai(e,n,r){const i=t.array(e.signals),o=t.array(e.scales);return r||i.forEach((e=>ee(e,n))),t.array(e.projections).forEach((e=>Mt(e,n))),o.forEach((e=>lt(e,n))),t.array(e.data).forEach((e=>kr(e,n))),o.forEach((e=>ft(e,n))),(r||i).forEach((e=>Oe(e,n))),t.array(e.axes).forEach((e=>ii(e,n))),t.array(e.marks).forEach((e=>cr(e,n))),t.array(e.legends).forEach((e=>fr(e,n))),e.title&&br(e.title,n),n.parseLambdas(),n}const si=e=>p({enter:{x:{value:0},y:{value:0}},update:{width:{signal:"width"},height:{signal:"height"}}},e);function ui(e,t){const n=t.config,r=ie(t.root=t.add(re())),i=li(e,n);i.forEach((e=>ee(e,t))),t.description=e.description||n.description,t.eventConfig=n.events,t.legends=t.objectProperty(n.legend&&n.legend.layout),t.locale=n.locale;const o=t.add(ze()),a=t.add(Ie(G(si(e.encode),rn,v,e.style,t,{pulse:ie(o)}))),s=t.add(at({layout:t.objectProperty(e.layout),legends:t.legends,autosize:t.signalRef("autosize"),mark:r,pulse:ie(a)}));t.operators.pop(),t.pushState(ie(a),ie(s),null),ai(e,t,i),t.operators.push(s);let u=t.add(Be({mark:r,pulse:ie(s)}));return u=t.add(nt({pulse:ie(u)})),u=t.add(it({pulse:ie(u)})),t.addData("root",new nr(t,o,o,u)),t}function ci(e,t){return t&&t.signal?{name:e,update:t.signal}:{name:e,value:t}}function li(e,n){const r=t=>ye(e[t],n[t]),i=[ci("background",r("background")),ci("autosize",s(r("autosize"))),ci("padding",l(r("padding"))),ci("width",r("width")||0),ci("height",r("height")||0)],o=i.reduce(((e,t)=>(e[t.name]=t,e)),{}),a={};return t.array(e.signals).forEach((e=>{t.hasOwnProperty(o,e.name)?e=t.extend(o[e.name],e):i.push(e),a[e.name]=e})),t.array(n.signals).forEach((e=>{t.hasOwnProperty(a,e.name)||t.hasOwnProperty(o,e.name)||i.push(e)})),i}function fi(e,t){this.config=e||{},this.options=t||{},this.bindings=[],this.field={},this.signals={},this.lambdas={},this.scales={},this.events={},this.data={},this.streams=[],this.updates=[],this.operators=[],this.eventConfig=null,this.locale=null,this._id=0,this._subid=0,this._nextsub=[0],this._parent=[],this._encode=[],this._lookup=[],this._markpath=[]}function di(e){this.config=e.config,this.options=e.options,this.legends=e.legends,this.field=Object.create(e.field),this.signals=Object.create(e.signals),this.lambdas=Object.create(e.lambdas),this.scales=Object.create(e.scales),this.events=Object.create(e.events),this.data=Object.create(e.data),this.streams=[],this.updates=[],this.operators=[],this._id=0,this._subid=++e._nextsub[0],this._nextsub=e._nextsub,this._parent=e._parent.slice(),this._encode=e._encode.slice(),this._lookup=e._lookup.slice(),this._markpath=e._markpath}function hi(e){return(t.isArray(e)?pi:gi)(e)}function pi(e){const n=e.length;let r="[";for(let i=0;i<n;++i){const n=e[i];r+=(i>0?",":"")+(t.isObject(n)?n.signal||hi(n):t.stringValue(n))}return r+"]"}function gi(e){let n,r,i="{",o=0;for(n in e)r=e[n],i+=(++o>1?",":"")+t.stringValue(n)+":"+(t.isObject(r)?r.signal||hi(r):t.stringValue(r));return i+"}"}function mi(){const e="sans-serif",t=30,n=2,r="#4c78a8",i="#000",o="#888",a="#ddd";return{description:"Vega visualization",padding:0,autosize:"pad",background:null,events:{defaults:{allow:["wheel"]}},group:null,mark:null,arc:{fill:r},area:{fill:r},image:null,line:{stroke:r,strokeWidth:n},path:{stroke:r},rect:{fill:r},rule:{stroke:i},shape:{stroke:r},symbol:{fill:r,size:64},text:{fill:i,font:e,fontSize:11},trail:{fill:r,size:n},style:{"guide-label":{fill:i,font:e,fontSize:10},"guide-title":{fill:i,font:e,fontSize:11,fontWeight:"bold"},"group-title":{fill:i,font:e,fontSize:13,fontWeight:"bold"},"group-subtitle":{fill:i,font:e,fontSize:12},point:{size:t,strokeWidth:n,shape:"circle"},circle:{size:t,strokeWidth:n},square:{size:t,strokeWidth:n,shape:"square"},cell:{fill:"transparent",stroke:a}},title:{orient:"top",anchor:"middle",offset:4,subtitlePadding:3},axis:{minExtent:0,maxExtent:200,bandPosition:.5,domain:!0,domainWidth:1,domainColor:o,grid:!1,gridWidth:1,gridColor:a,labels:!0,labelAngle:0,labelLimit:180,labelOffset:0,labelPadding:2,ticks:!0,tickColor:o,tickOffset:0,tickRound:!0,tickSize:5,tickWidth:1,titlePadding:4},axisBand:{tickOffset:-.5},projection:{type:"mercator"},legend:{orient:"right",padding:0,gridAlign:"each",columnPadding:10,rowPadding:2,symbolDirection:"vertical",gradientDirection:"vertical",gradientLength:200,gradientThickness:16,gradientStrokeColor:a,gradientStrokeWidth:0,gradientLabelOffset:2,labelAlign:"left",labelBaseline:"middle",labelLimit:160,labelOffset:4,labelOverlap:!0,symbolLimit:30,symbolType:"circle",symbolSize:100,symbolOffset:0,symbolStrokeWidth:1.5,symbolBaseFillColor:"transparent",symbolBaseStrokeColor:o,titleLimit:180,titleOrient:"top",titlePadding:5,layout:{offset:18,direction:"horizontal",left:{direction:"vertical"},right:{direction:"vertical"}}},range:{category:{scheme:"tableau10"},ordinal:{scheme:"blues"},heatmap:{scheme:"yellowgreenblue"},ramp:{scheme:"blues"},diverging:{scheme:"blueorange",extent:[1,0]},symbol:["circle","square","triangle-up","cross","diamond","triangle-right","triangle-down","triangle-left"]}}}function vi(e,n,r){return t.isObject(e)||t.error("Input Vega specification must be an object."),ui(e,new fi(n=t.mergeConfig(mi(),n,e.config),r)).toRuntime()}fi.prototype=di.prototype={parse(e){return ai(e,this)},fork(){return new di(this)},isSubscope(){return this._subid>0},toRuntime(){return this.finish(),{description:this.description,operators:this.operators,streams:this.streams,updates:this.updates,bindings:this.bindings,eventConfig:this.eventConfig,locale:this.locale}},id(){return(this._subid?this._subid+":":0)+this._id++},add(e){return this.operators.push(e),e.id=this.id(),e.refs&&(e.refs.forEach((t=>{t.$ref=e.id})),e.refs=null),e},proxy(e){const t=e instanceof te?ie(e):e;return this.add(et({value:t}))},addStream(e){return this.streams.push(e),e.id=this.id(),e},addUpdate(e){return this.updates.push(e),e},finish(){let e,t;for(e in this.root&&(this.root.root=!0),this.signals)this.signals[e].signal=e;for(e in this.scales)this.scales[e].scale=e;function n(e,t,n){let r,i;e&&(r=e.data||(e.data={}),i=r[t]||(r[t]=[]),i.push(n))}for(e in this.data){t=this.data[e],n(t.input,e,"input"),n(t.output,e,"output"),n(t.values,e,"values");for(const r in t.index)n(t.index[r],e,"index:"+r)}return this},pushState(e,t,n){this._encode.push(ie(this.add(it({pulse:e})))),this._parent.push(t),this._lookup.push(n?ie(this.proxy(n)):null),this._markpath.push(-1)},popState(){this._encode.pop(),this._parent.pop(),this._lookup.pop(),this._markpath.pop()},parent(){return t.peek(this._parent)},encode(){return t.peek(this._encode)},lookup(){return t.peek(this._lookup)},markpath(){const e=this._markpath;return++e[e.length-1]},fieldRef(e,n){if(t.isString(e))return oe(e,n);e.signal||t.error("Unsupported field reference: "+t.stringValue(e));const r=e.signal;let i=this.field[r];if(!i){const e={name:this.signalRef(r)};n&&(e.as=n),this.field[r]=i=ie(this.add(We(e)))}return i},compareRef(e){let n=!1;const r=e=>ge(e)?(n=!0,this.signalRef(e.signal)):me(e)?(n=!0,this.exprRef(e.expr)):e,i=t.array(e.field).map(r),o=t.array(e.order).map(r);return n?ie(this.add(je({fields:i,orders:o}))):se(i,o)},keyRef(e,n){let r=!1;const i=e=>ge(e)?(r=!0,ie(o[e.signal])):e,o=this.signals;return e=t.array(e).map(i),r?ie(this.add(He({fields:e,flat:n}))):ue(e,n)},sortRef(e){if(!e)return e;const t=de(e.op,e.field),n=e.order||ce;return n.signal?ie(this.add(je({fields:t,orders:this.signalRef(n.signal)}))):se(t,n)},event(e,t){const n=e+":"+t;if(!this.events[n]){const r=this.id();this.streams.push({id:r,source:e,type:t}),this.events[n]=r}return this.events[n]},hasOwnSignal(e){return t.hasOwnProperty(this.signals,e)},addSignal(e,n){this.hasOwnSignal(e)&&t.error("Duplicate signal name: "+t.stringValue(e));const r=n instanceof te?n:this.add(re(n));return this.signals[e]=r},getSignal(e){return this.signals[e]||t.error("Unrecognized signal name: "+t.stringValue(e)),this.signals[e]},signalRef(e){return this.signals[e]?ie(this.signals[e]):(t.hasOwnProperty(this.lambdas,e)||(this.lambdas[e]=this.add(re(null))),ie(this.lambdas[e]))},parseLambdas(){const e=Object.keys(this.lambdas);for(let t=0,r=e.length;t<r;++t){const r=e[t],i=n.parseExpression(r,this),o=this.lambdas[r];o.params=i.$params,o.update=i.$expr}},property(e){return e&&e.signal?this.signalRef(e.signal):e},objectProperty(e){return e&&t.isObject(e)?this.signalRef(e.signal||hi(e)):e},exprRef(e,t){const r={expr:n.parseExpression(e,this)};return t&&(r.expr.$name=t),ie(this.add(Ue(r)))},addBinding(e,n){this.bindings||t.error("Nested signals do not support binding: "+t.stringValue(e)),this.bindings.push(t.extend({signal:e},n))},addScaleProj(e,n){t.hasOwnProperty(this.scales,e)&&t.error("Duplicate scale or projection name: "+t.stringValue(e)),this.scales[e]=this.add(n)},addScale(e,t){this.addScaleProj(e,rt(t))},addProjection(e,t){this.addScaleProj(e,Ke(t))},getScale(e){return this.scales[e]||t.error("Unrecognized scale name: "+t.stringValue(e)),this.scales[e]},scaleRef(e){return ie(this.getScale(e))},scaleType(e){return this.getScale(e).params.type},projectionRef(e){return this.scaleRef(e)},projectionType(e){return this.scaleType(e)},addData(e,n){return t.hasOwnProperty(this.data,e)&&t.error("Duplicate data set name: "+t.stringValue(e)),this.data[e]=n},getData(e){return this.data[e]||t.error("Undefined data set name: "+t.stringValue(e)),this.data[e]},addDataPipeline(e,n){return t.hasOwnProperty(this.data,e)&&t.error("Duplicate data set name: "+t.stringValue(e)),this.addData(e,nr.fromEntries(this,n))}},e.AxisDomainRole=x,e.AxisGridRole=w,e.AxisLabelRole=_,e.AxisRole=b,e.AxisTickRole=A,e.AxisTitleRole=k,e.DataScope=nr,e.FrameRole=v,e.LegendEntryRole=C,e.LegendLabelRole=F,e.LegendRole=E,e.LegendSymbolRole=S,e.LegendTitleRole=T,e.MarkRole=m,e.Scope=fi,e.ScopeRole=y,e.config=mi,e.parse=vi,e.signal=ee,e.signalUpdates=Oe,e.stream=we,Object.defineProperty(e,"__esModule",{value:!0})}(t,n(1176),n(1488),n(2364),n(1283),n(1183))},2364:function(e,t,n){!function(e){"use strict";const t="view",n="[",r="]",i="{",o="}",a=":",s=",",u="@",c=">",l=/[[\]{}]/,f={"*":1,arc:1,area:1,group:1,image:1,line:1,path:1,rect:1,rule:1,shape:1,symbol:1,text:1,trail:1};let d,h;function p(e,n,r){return d=n||t,h=r||f,v(e.trim()).map(y)}function g(e){return h[e]}function m(e,t,n,r,i){const o=e.length;let a,s=0;for(;t<o;++t){if(a=e[t],!s&&a===n)return t;i&&i.indexOf(a)>=0?--s:r&&r.indexOf(a)>=0&&++s}return t}function v(e){const t=[],a=e.length;let u=0,c=0;for(;c<a;)c=m(e,c,s,n+i,r+o),t.push(e.substring(u,c).trim()),u=++c;if(0===t.length)throw"Empty event selector: "+e;return t}function y(e){return"["===e[0]?b(e):x(e)}function b(e){const t=e.length;let i,o=1;if(o=m(e,o,r,n,r),o===t)throw"Empty between selector: "+e;if(i=v(e.substring(1,o)),2!==i.length)throw"Between selector must have two elements: "+e;if((e=e.slice(o+1).trim())[0]!==c)throw"Expected '>' after between selector: "+e;i=i.map(y);const a=y(e.slice(1).trim());return a.between?{between:i,stream:a}:(a.between=i,a)}function x(e){const t={source:d},s=[];let c,f,h=[0,0],p=0,v=0,y=e.length,b=0;if(e[y-1]===o){if(b=e.lastIndexOf(i),!(b>=0))throw"Unmatched right brace: "+e;try{h=w(e.substring(b+1,y-1))}catch(x){throw"Invalid throttle specification: "+e}y=(e=e.slice(0,b).trim()).length,b=0}if(!y)throw e;if(e[0]===u&&(p=++b),c=m(e,b,a),c<y&&(s.push(e.substring(v,c).trim()),v=b=++c),b=m(e,b,n),b===y)s.push(e.substring(v,y).trim());else if(s.push(e.substring(v,b).trim()),f=[],v=++b,v===y)throw"Unmatched left bracket: "+e;for(;b<y;){if(b=m(e,b,r),b===y)throw"Unmatched left bracket: "+e;if(f.push(e.substring(v,b).trim()),b<y-1&&e[++b]!==n)throw"Expected left bracket: "+e;v=++b}if(!(y=s.length)||l.test(s[y-1]))throw"Invalid event selector: "+e;return y>1?(t.type=s[1],p?t.markname=s[0].slice(1):g(s[0])?t.marktype=s[0]:t.source=s[0]):t.type=s[0],"!"===t.type.slice(-1)&&(t.consume=!0,t.type=t.type.slice(0,-1)),null!=f&&(t.filter=f),h[0]&&(t.throttle=h[0]),h[1]&&(t.debounce=h[1]),t}function w(e){const t=e.split(s);if(!e.length||t.length>2)throw e;return t.map((t=>{const n=+t;if(n!==n)throw e;return n}))}e.selector=p,Object.defineProperty(e,"__esModule",{value:!0})}(t)},2365:function(e,t,n){(function(e){var r=n(2366),i=n(2368),o=n(2370),a=n(163),s=n(411),u=n(108);!function(t){"use strict";var n="4.17.0";function c(e,t,n){return e.fields=t||[],e.fname=n,e}function l(e){return 1===e.length?f(e[0]):d(e)}const f=e=>function(t){return t[e]},d=e=>{const t=e.length;return function(n){for(let r=0;r<t;++r)n=n[e[r]];return n}};function h(e){throw Error(e)}function p(e){const t=[],n=e.length;let r,i,o,a=null,s=0,u="";function c(){t.push(u+e.substring(r,i)),u="",r=i+1}for(e+="",r=i=0;i<n;++i)if(o=e[i],"\\"===o)u+=e.substring(r,i),u+=e.substring(++i,++i),r=i;else if(o===a)c(),a=null,s=-1;else{if(a)continue;r===s&&'"'===o||r===s&&"'"===o?(r=i+1,a=o):"."!==o||s?"["===o?(i>r&&c(),s=r=i+1):"]"===o&&(s||h("Access path missing open bracket: "+e),s>0&&c(),s=0,r=i+1):i>r?c():r=i+1}return s&&h("Access path missing closing bracket: "+e),a&&h("Access path missing closing quote: "+e),i>r&&(i++,c()),t}function g(e,t,n){const r=p(e);return e=1===r.length?r[0]:e,c((n&&n.get||l)(r),[e],t||e)}g("id");const m=c((e=>e),[],"identity");function v(e,t,n){const r=[t].concat([].slice.call(n));console[e].apply(console,r)}c((()=>0),[],"zero"),c((()=>1),[],"one"),c((()=>!0),[],"true"),c((()=>!1),[],"false");const y=0,b=1,x=2,w=3,_=4;function A(e,t){let n=e||y;return{level(e){return arguments.length?(n=+e,this):n},error(){return n>=b&&v(t||"error","ERROR",arguments),this},warn(){return n>=x&&v(t||"warn","WARN",arguments),this},info(){return n>=w&&v(t||"log","INFO",arguments),this},debug(){return n>=_&&v(t||"log","DEBUG",arguments),this}}}var k=Array.isArray;function E(e){return e===Object(e)}const D=e=>"__proto__"!==e;function C(...e){return e.reduce(((e,t)=>{for(const n in t)if("signals"===n)e.signals=F(e.signals,t.signals);else{const r="legend"===n?{layout:1}:"style"===n||null;M(e,n,t[n],r)}return e}),{})}function M(e,t,n,r){if(!D(t))return;let i,o;if(E(n)&&!k(n))for(i in o=E(e[t])?e[t]:e[t]={},n)r&&(!0===r||r[i])?M(o,i,n[i]):D(i)&&(o[i]=n[i]);else e[t]=n}function F(e,t){if(null==e)return t;const n={},r=[];function i(e){n[e.name]||(n[e.name]=1,r.push(e))}return t.forEach(i),e.forEach(i),r}function S(e){return null!=e?k(e)?e:[e]:[]}function T(e){return"function"===typeof e}const O=Object.prototype.hasOwnProperty;function N(e,t){return O.call(e,t)}function P(e){return"boolean"===typeof e}function R(e){return"number"===typeof e}function B(e){return"string"===typeof e}function z(e){return k(e)?"["+e.map(z)+"]":E(e)||B(e)?JSON.stringify(e).replace("\u2028","\\u2028").replace("\u2029","\\u2029"):e}function j(e){const t={},n=e.length;for(let r=0;r<n;++r)t[e[r]]=!0;return t}function L(e,t,n){return e(n={path:t,exports:{},require:function(e,t){return I(e,void 0===t||null===t?n.path:t)}},n.exports),n.exports}function I(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}Array.prototype.flat||Object.defineProperty(Array.prototype,"flat",{configurable:!0,value:function e(){var t=isNaN(arguments[0])?1:Number(arguments[0]);return t?Array.prototype.reduce.call(this,(function(n,r){return Array.isArray(r)?n.push.apply(n,e.call(r,t-1)):n.push(r),n}),[]):Array.prototype.slice.call(this)},writable:!0}),Array.prototype.flatMap||Object.defineProperty(Array.prototype,"flatMap",{configurable:!0,value:function(e){return Array.prototype.map.apply(this,arguments).flat()},writable:!0});var U=L((function(t){var n=function(){function t(e,t){return null!=t&&e instanceof t}var n,r,i;try{n=Map}catch(f){n=function(){}}try{r=Set}catch(f){r=function(){}}try{i=Promise}catch(f){i=function(){}}function o(a,s,u,c,f){"object"===typeof s&&(u=s.depth,c=s.prototype,f=s.includeNonEnumerable,s=s.circular);var d=[],h=[],p="undefined"!=typeof e;function g(a,u){if(null===a)return null;if(0===u)return a;var m,v;if("object"!=typeof a)return a;if(t(a,n))m=new n;else if(t(a,r))m=new r;else if(t(a,i))m=new i((function(e,t){a.then((function(t){e(g(t,u-1))}),(function(e){t(g(e,u-1))}))}));else if(o.__isArray(a))m=[];else if(o.__isRegExp(a))m=new RegExp(a.source,l(a)),a.lastIndex&&(m.lastIndex=a.lastIndex);else if(o.__isDate(a))m=new Date(a.getTime());else{if(p&&e.isBuffer(a))return m=e.allocUnsafe?e.allocUnsafe(a.length):new e(a.length),a.copy(m),m;t(a,Error)?m=Object.create(a):"undefined"==typeof c?(v=Object.getPrototypeOf(a),m=Object.create(v)):(m=Object.create(c),v=c)}if(s){var y=d.indexOf(a);if(-1!=y)return h[y];d.push(a),h.push(m)}for(var b in t(a,n)&&a.forEach((function(e,t){var n=g(t,u-1),r=g(e,u-1);m.set(n,r)})),t(a,r)&&a.forEach((function(e){var t=g(e,u-1);m.add(t)})),a){var x;v&&(x=Object.getOwnPropertyDescriptor(v,b)),x&&null==x.set||(m[b]=g(a[b],u-1))}if(Object.getOwnPropertySymbols){var w=Object.getOwnPropertySymbols(a);for(b=0;b<w.length;b++){var _=w[b];(!(k=Object.getOwnPropertyDescriptor(a,_))||k.enumerable||f)&&(m[_]=g(a[_],u-1),k.enumerable||Object.defineProperty(m,_,{enumerable:!1}))}}if(f){var A=Object.getOwnPropertyNames(a);for(b=0;b<A.length;b++){var k,E=A[b];(k=Object.getOwnPropertyDescriptor(a,E))&&k.enumerable||(m[E]=g(a[E],u-1),Object.defineProperty(m,E,{enumerable:!1}))}}return m}return"undefined"==typeof s&&(s=!0),"undefined"==typeof u&&(u=1/0),g(a,u)}function a(e){return Object.prototype.toString.call(e)}function s(e){return"object"===typeof e&&"[object Date]"===a(e)}function u(e){return"object"===typeof e&&"[object Array]"===a(e)}function c(e){return"object"===typeof e&&"[object RegExp]"===a(e)}function l(e){var t="";return e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),t}return o.clonePrototype=function(e){if(null===e)return null;var t=function(){};return t.prototype=e,new t},o.__objToStr=a,o.__isDate=s,o.__isArray=u,o.__isRegExp=c,o.__getRegExpFlags=l,o}();t.exports&&(t.exports=n)})),q=function(e,t){t||(t={}),"function"===typeof t&&(t={cmp:t});var n,r="boolean"===typeof t.cycles&&t.cycles,i=t.cmp&&(n=t.cmp,function(e){return function(t,r){var i={key:t,value:e[t]},o={key:r,value:e[r]};return n(i,o)}}),o=[];return function e(t){if(t&&t.toJSON&&"function"===typeof t.toJSON&&(t=t.toJSON()),void 0!==t){if("number"==typeof t)return isFinite(t)?""+t:"null";if("object"!==typeof t)return JSON.stringify(t);var n,a;if(Array.isArray(t)){for(a="[",n=0;n<t.length;n++)n&&(a+=","),a+=e(t[n])||"null";return a+"]"}if(null===t)return"null";if(-1!==o.indexOf(t)){if(r)return JSON.stringify("__cycle__");throw new TypeError("Converting circular structure to JSON")}var s=o.push(t)-1,u=Object.keys(t).sort(i&&i(t));for(a="",n=0;n<u.length;n++){var c=u[n],l=e(t[c]);l&&(a&&(a+=","),a+=JSON.stringify(c)+":"+l)}return o.splice(s,1),"{"+a+"}"}}(e)};function W(e){return!!e.or}function H(e){return!!e.and}function Y(e){return!!e.not}function V(e,t){if(Y(e))V(e.not,t);else if(H(e)){var n,r=u(e.and);try{for(r.s();!(n=r.n()).done;)V(n.value,t)}catch(a){r.e(a)}finally{r.f()}}else if(W(e)){var i,o=u(e.or);try{for(o.s();!(i=o.n()).done;)V(i.value,t)}catch(a){o.e(a)}finally{o.f()}}else t(e)}function G(e,t){return Y(e)?{not:G(e.not,t)}:H(e)?{and:e.and.map((e=>G(e,t)))}:W(e)?{or:e.or.map((e=>G(e,t)))}:t(e)}const $=function e(t,n){if(t===n)return!0;if(t&&n&&"object"==typeof t&&"object"==typeof n){if(t.constructor!==n.constructor)return!1;var r,i,o;if(Array.isArray(t)){if((r=t.length)!=n.length)return!1;for(i=r;0!==i--;)if(!e(t[i],n[i]))return!1;return!0}if(t.constructor===RegExp)return t.source===n.source&&t.flags===n.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===n.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===n.toString();if((r=(o=Object.keys(t)).length)!==Object.keys(n).length)return!1;for(i=r;0!==i--;)if(!Object.prototype.hasOwnProperty.call(n,o[i]))return!1;for(i=r;0!==i--;){var a=o[i];if(!e(t[a],n[a]))return!1}return!0}return t!==t&&n!==n},X=U;function J(e,t){const n={};var r,i=u(t);try{for(i.s();!(r=i.n()).done;){const t=r.value;N(e,t)&&(n[t]=e[t])}}catch(o){i.e(o)}finally{i.f()}return n}function Q(e,t){const n=s({},e);var r,i=u(t);try{for(i.s();!(r=i.n()).done;)delete n[r.value]}catch(o){i.e(o)}finally{i.f()}return n}Set.prototype.toJSON=function(){return"Set(".concat([...this].map((e=>q(e))).join(","),")")};const Z=q;function K(e){if(R(e))return e;const t=B(e)?e:q(e);if(t.length<250)return t;let n=0;for(let r=0;r<t.length;r++)n=(n<<5)-n+t.charCodeAt(r),n&=n;return n}function ee(e){return!1===e||null===e}function te(e,t){return e.indexOf(t)>-1}function ne(e,t){let n=0;var r,i=u(e.entries());try{for(i.s();!(r=i.n()).done;){const e=a(r.value,2),i=e[0];if(t(e[1],i,n++))return!0}}catch(o){i.e(o)}finally{i.f()}return!1}function re(e,t){let n=0;var r,i=u(e.entries());try{for(i.s();!(r=i.n()).done;){const e=a(r.value,2),i=e[0];if(!t(e[1],i,n++))return!1}}catch(o){i.e(o)}finally{i.f()}return!0}function ie(e,...t){for(var n=0,r=t;n<r.length;n++){const t=r[n];oe(e,null!==t&&void 0!==t?t:{})}return e}function oe(e,t){var n,r=u(he(t));try{for(r.s();!(n=r.n()).done;){const r=n.value;M(e,r,t[r],!0)}}catch(i){r.e(i)}finally{r.f()}}function ae(e,t){const n=[],r={};let i;var o,a=u(e);try{for(a.s();!(o=a.n()).done;){const e=o.value;i=t(e),i in r||(r[i]=1,n.push(e))}}catch(s){a.e(s)}finally{a.f()}return n}function se(e,t){const n=he(e),r=he(t);if(n.length!==r.length)return!1;var i,o=u(n);try{for(o.s();!(i=o.n()).done;){const n=i.value;if(e[n]!==t[n])return!1}}catch(a){o.e(a)}finally{o.f()}return!0}function ue(e,t){if(e.size!==t.size)return!1;var n,r=u(e);try{for(r.s();!(n=r.n()).done;){const e=n.value;if(!t.has(e))return!1}}catch(i){r.e(i)}finally{r.f()}return!0}function ce(e,t){var n,r=u(e);try{for(r.s();!(n=r.n()).done;){const e=n.value;if(t.has(e))return!0}}catch(i){r.e(i)}finally{r.f()}return!1}function le(e){const t=new Set;var n,r=u(e);try{for(r.s();!(n=r.n()).done;){const e=n.value,r=p(e).map(((e,t)=>0===t?e:"[".concat(e,"]"))),s=r.map(((e,t)=>r.slice(0,t+1).join("")));var i,o=u(s);try{for(o.s();!(i=o.n()).done;){const e=i.value;t.add(e)}}catch(a){o.e(a)}finally{o.f()}}}catch(a){r.e(a)}finally{r.f()}return t}function fe(e,t){return void 0===e||void 0===t||ce(le(e),le(t))}function de(e){return 0===he(e).length}const he=Object.keys,pe=Object.values,ge=Object.entries;function me(e){return!0===e||!1===e}function ve(e){const t=e.replace(/\W/g,"_");return(e.match(/^\d+/)?"_":"")+t}function ye(e,t){return Y(e)?"!("+ye(e.not,t)+")":H(e)?"("+e.and.map((e=>ye(e,t))).join(") && (")+")":W(e)?"("+e.or.map((e=>ye(e,t))).join(") || (")+")":t(e)}function be(e,t){if(0===t.length)return!0;const n=t.shift();return n in e&&be(e[n],t)&&delete e[n],de(e)}function xe(e){return e.charAt(0).toUpperCase()+e.substr(1)}function we(e,t="datum"){const n=p(e),r=[];for(let i=1;i<=n.length;i++){const e="[".concat(n.slice(0,i).map(z).join("]["),"]");r.push("".concat(t).concat(e))}return r.join(" && ")}function _e(e,t="datum"){return"".concat(t,"[").concat(z(p(e).join(".")),"]")}function Ae(e){return e.replace(/(\[|\]|\.|'|")/g,"\\$1")}function ke(e){return"".concat(p(e).map(Ae).join("\\."))}function Ee(e,t,n){return e.replace(new RegExp(t.replace(/[-/\\^$*+?.()|[\]{}]/g,"\\$&"),"g"),n)}function De(e){return"".concat(p(e).join("."))}function Ce(e){return e?p(e).length:0}function Me(...e){for(var t=0,n=e;t<n.length;t++){const e=n[t];if(void 0!==e)return e}}let Fe=42;function Se(e){const t=++Fe;return e?String(e)+t:t}function Te(){Fe=42}function Oe(e){return Ne(e)?e:"__".concat(e)}function Ne(e){return 0===e.indexOf("__")}function Pe(e){if(void 0!==e)return(e%360+360)%360}function Re(e){return!!R(e)||!isNaN(e)&&!isNaN(parseFloat(e))}const Be={labelAlign:{part:"labels",vgProp:"align"},labelBaseline:{part:"labels",vgProp:"baseline"},labelColor:{part:"labels",vgProp:"fill"},labelFont:{part:"labels",vgProp:"font"},labelFontSize:{part:"labels",vgProp:"fontSize"},labelFontStyle:{part:"labels",vgProp:"fontStyle"},labelFontWeight:{part:"labels",vgProp:"fontWeight"},labelOpacity:{part:"labels",vgProp:"opacity"},labelOffset:null,labelPadding:null,gridColor:{part:"grid",vgProp:"stroke"},gridDash:{part:"grid",vgProp:"strokeDash"},gridDashOffset:{part:"grid",vgProp:"strokeDashOffset"},gridOpacity:{part:"grid",vgProp:"opacity"},gridWidth:{part:"grid",vgProp:"strokeWidth"},tickColor:{part:"ticks",vgProp:"stroke"},tickDash:{part:"ticks",vgProp:"strokeDash"},tickDashOffset:{part:"ticks",vgProp:"strokeDashOffset"},tickOpacity:{part:"ticks",vgProp:"opacity"},tickSize:null,tickWidth:{part:"ticks",vgProp:"strokeWidth"}};function ze(e){return e&&e.condition}const je=["domain","grid","labels","ticks","title"],Le={grid:"grid",gridCap:"grid",gridColor:"grid",gridDash:"grid",gridDashOffset:"grid",gridOpacity:"grid",gridScale:"grid",gridWidth:"grid",orient:"main",bandPosition:"both",aria:"main",description:"main",domain:"main",domainCap:"main",domainColor:"main",domainDash:"main",domainDashOffset:"main",domainOpacity:"main",domainWidth:"main",format:"main",formatType:"main",labelAlign:"main",labelAngle:"main",labelBaseline:"main",labelBound:"main",labelColor:"main",labelFlush:"main",labelFlushOffset:"main",labelFont:"main",labelFontSize:"main",labelFontStyle:"main",labelFontWeight:"main",labelLimit:"main",labelLineHeight:"main",labelOffset:"main",labelOpacity:"main",labelOverlap:"main",labelPadding:"main",labels:"main",labelSeparation:"main",maxExtent:"main",minExtent:"main",offset:"both",position:"main",tickCap:"main",tickColor:"main",tickDash:"main",tickDashOffset:"main",tickMinStep:"main",tickOffset:"both",tickOpacity:"main",tickRound:"both",ticks:"main",tickSize:"main",tickWidth:"both",title:"main",titleAlign:"main",titleAnchor:"main",titleAngle:"main",titleBaseline:"main",titleColor:"main",titleFont:"main",titleFontSize:"main",titleFontStyle:"main",titleFontWeight:"main",titleLimit:"main",titleLineHeight:"main",titleOpacity:"main",titlePadding:"main",titleX:"main",titleY:"main",encode:"both",scale:"both",tickBand:"both",tickCount:"both",tickExtra:"both",translate:"both",values:"both",zindex:"both"},Ie={orient:1,aria:1,bandPosition:1,description:1,domain:1,domainCap:1,domainColor:1,domainDash:1,domainDashOffset:1,domainOpacity:1,domainWidth:1,format:1,formatType:1,grid:1,gridCap:1,gridColor:1,gridDash:1,gridDashOffset:1,gridOpacity:1,gridWidth:1,labelAlign:1,labelAngle:1,labelBaseline:1,labelBound:1,labelColor:1,labelFlush:1,labelFlushOffset:1,labelFont:1,labelFontSize:1,labelFontStyle:1,labelFontWeight:1,labelLimit:1,labelLineHeight:1,labelOffset:1,labelOpacity:1,labelOverlap:1,labelPadding:1,labels:1,labelSeparation:1,maxExtent:1,minExtent:1,offset:1,position:1,tickBand:1,tickCap:1,tickColor:1,tickCount:1,tickDash:1,tickDashOffset:1,tickExtra:1,tickMinStep:1,tickOffset:1,tickOpacity:1,tickRound:1,ticks:1,tickSize:1,tickWidth:1,title:1,titleAlign:1,titleAnchor:1,titleAngle:1,titleBaseline:1,titleColor:1,titleFont:1,titleFontSize:1,titleFontStyle:1,titleFontWeight:1,titleLimit:1,titleLineHeight:1,titleOpacity:1,titlePadding:1,titleX:1,titleY:1,translate:1,values:1,zindex:1},Ue=s(s({},Ie),{},{style:1,labelExpr:1,encoding:1});function qe(e){return!!Ue[e]}const We=he({axis:1,axisBand:1,axisBottom:1,axisDiscrete:1,axisLeft:1,axisPoint:1,axisQuantitative:1,axisRight:1,axisTemporal:1,axisTop:1,axisX:1,axisXBand:1,axisXDiscrete:1,axisXPoint:1,axisXQuantitative:1,axisXTemporal:1,axisY:1,axisYBand:1,axisYDiscrete:1,axisYPoint:1,axisYQuantitative:1,axisYTemporal:1}),He={argmax:1,argmin:1,average:1,count:1,distinct:1,product:1,max:1,mean:1,median:1,min:1,missing:1,q1:1,q3:1,ci0:1,ci1:1,stderr:1,stdev:1,stdevp:1,sum:1,valid:1,values:1,variance:1,variancep:1},Ye={count:1,min:1,max:1};function Ve(e){return!!e&&!!e.argmin}function Ge(e){return!!e&&!!e.argmax}function $e(e){return B(e)&&!!He[e]}const Xe=["count","valid","missing","distinct"];function Je(e){return B(e)&&te(Xe,e)}function Qe(e){return B(e)&&te(["min","max"],e)}const Ze=["count","sum","distinct","valid","missing"],Ke=j(["mean","average","median","q1","q3","min","max"]),et="row",tt="column",nt="facet",rt="x",it="y",ot="x2",at="y2",st="radius",ut="radius2",ct="theta",lt="theta2",ft="latitude",dt="longitude",ht="latitude2",pt="longitude2",gt="color",mt="fill",vt="stroke",yt="shape",bt="size",xt="angle",wt="opacity",_t="fillOpacity",At="strokeOpacity",kt="strokeWidth",Et="strokeDash",Dt="text",Ct="order",Mt="detail",Ft="key",St="tooltip",Tt="href",Ot="url",Nt="description",Pt={x:1,y:1,x2:1,y2:1},Rt={theta:1,theta2:1,radius:1,radius2:1};function Bt(e){return e in Rt}const zt={longitude:1,longitude2:1,latitude:1,latitude2:1};function jt(e){switch(e){case ft:return"y";case ht:return"y2";case dt:return"x";case pt:return"x2"}}function Lt(e){return e in zt}const It=he(zt),Ut=s(s(s(s({},Pt),Rt),zt),{},{color:1,fill:1,stroke:1,opacity:1,fillOpacity:1,strokeOpacity:1,strokeWidth:1,strokeDash:1,size:1,angle:1,shape:1,order:1,text:1,detail:1,key:1,tooltip:1,href:1,url:1,description:1});function qt(e){return e===gt||e===mt||e===vt}const Wt={row:1,column:1,facet:1},Ht=he(Wt),Yt=s(s({},Ut),Wt),Vt=he(Yt),Gt=(Yt.order,Yt.detail,Yt.tooltip,o(Yt,["order","detail","tooltip"])),$t=(Gt.row,Gt.column,Gt.facet,o(Gt,["row","column","facet"]));function Xt(e){return!!$t[e]}function Jt(e){return!!Yt[e]}const Qt=[ot,at,ht,pt,lt,ut];function Zt(e){return Kt(e)!==e}function Kt(e){switch(e){case ot:return rt;case at:return it;case ht:return ft;case pt:return dt;case lt:return ct;case ut:return st}return e}function en(e){if(Bt(e))switch(e){case ct:return"startAngle";case lt:return"endAngle";case st:return"outerRadius";case ut:return"innerRadius"}return e}function tn(e){switch(e){case rt:return ot;case it:return at;case ft:return ht;case dt:return pt;case ct:return lt;case st:return ut}}function nn(e){switch(e){case rt:case ot:return"width";case it:case at:return"height"}}function rn(e){switch(e){case rt:return"xOffset";case it:return"yOffset";case ot:return"x2Offset";case at:return"y2Offset";case ct:return"thetaOffset";case st:return"radiusOffset";case lt:return"theta2Offset";case ut:return"radius2Offset"}}Ut.x,Ut.y,Ut.x2,Ut.y2,Ut.latitude,Ut.longitude,Ut.latitude2,Ut.longitude2,Ut.theta,Ut.theta2,Ut.radius,Ut.radius2;const on=o(Ut,["x","y","x2","y2","latitude","longitude","latitude2","longitude2","theta","theta2","radius","radius2"]),an=he(on),sn={x:1,y:1},un=he(sn);function cn(e){return e in sn}const ln={theta:1,radius:1},fn=he(ln);function dn(e){return"width"===e?rt:it}on.text,on.tooltip,on.href,on.url,on.description,on.detail,on.key,on.order;const hn=o(on,["text","tooltip","href","url","description","detail","key","order"]),pn=he(hn);function gn(e){return!!on[e]}function mn(e){switch(e){case gt:case mt:case vt:case bt:case yt:case wt:case kt:case Et:return!0;case _t:case At:case xt:return!1}}const vn=s(s(s({},sn),ln),hn),yn=he(vn);function bn(e){return!!vn[e]}function xn(e,t){return An(e)[t]}const wn={arc:"always",area:"always",bar:"always",circle:"always",geoshape:"always",image:"always",line:"always",rule:"always",point:"always",rect:"always",square:"always",trail:"always",text:"always",tick:"always"},_n=(wn.geoshape,o(wn,["geoshape"]));function An(e){switch(e){case gt:case mt:case vt:case Nt:case Mt:case Ft:case St:case Tt:case Ct:case wt:case _t:case At:case kt:case nt:case et:case tt:return wn;case rt:case it:case ft:case dt:return _n;case ot:case at:case ht:case pt:return{area:"always",bar:"always",image:"always",rect:"always",rule:"always",circle:"binned",point:"binned",square:"binned",tick:"binned",line:"binned",trail:"binned"};case bt:return{point:"always",tick:"always",rule:"always",circle:"always",square:"always",bar:"always",text:"always",line:"always",trail:"always"};case Et:return{line:"always",point:"always",tick:"always",rule:"always",circle:"always",square:"always",bar:"always",geoshape:"always"};case yt:return{point:"always",geoshape:"always"};case Dt:return{text:"always"};case xt:return{point:"always",square:"always",text:"always"};case Ot:return{image:"always"};case ct:case st:return{text:"always",arc:"always"};case lt:case ut:return{arc:"always"}}}function kn(e){switch(e){case rt:case it:case ct:case st:case bt:case xt:case kt:case wt:case _t:case At:case ot:case at:case lt:case ut:return;case nt:case et:case tt:case yt:case Et:case Dt:case St:case Tt:case Ot:case Nt:return"discrete";case gt:case mt:case vt:return"flexible";case ft:case dt:case ht:case pt:case Mt:case Ft:case Ct:return}}function En(e){return P(e)&&(e=Ps(e,void 0)),"bin"+he(e).map((t=>Fn(e[t])?ve("_".concat(t,"_").concat(ge(e[t]))):ve("_".concat(t,"_").concat(e[t])))).join("")}function Dn(e){return!0===e||Mn(e)&&!e.binned}function Cn(e){return"binned"===e||Mn(e)&&!0===e.binned}function Mn(e){return E(e)}function Fn(e){return null===e||void 0===e?void 0:e.selection}function Sn(e){switch(e){case et:case tt:case bt:case gt:case mt:case vt:case kt:case wt:case _t:case At:case yt:return 6;case Et:return 4;default:return 10}}function Tn(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function On(e,t){var n=t.get(e);if(!n)throw new TypeError("attempted to get private field on non-instance");return n.get?n.get.call(e):n.value}function Nn(e,t,n){var r=t.get(e);if(!r)throw new TypeError("attempted to set private field on non-instance");if(r.set)r.set.call(e,n);else{if(!r.writable)throw new TypeError("attempted to set read only private field");r.value=n}return n}function Pn(e){return"Invalid specification ".concat(JSON.stringify(e),'. Make sure the specification includes at least one of the following properties: "mark", "layer", "facet", "hconcat", "vconcat", "concat", or "repeat".')}const Rn='Autosize "fit" only works for single views and layered views.';function Bn(e){return"".concat("width"==e?"Width":"Height",' "container" only works for single views and layered views.')}function zn(e){const t="width"==e?"x":"y";return"".concat("width"==e?"Width":"Height",' "container" only works well with autosize "fit" or "fit-').concat(t,'".')}function jn(e){return e?'Dropping "fit-'.concat(e,'" because spec has discrete ').concat(nn(e),"."):'Dropping "fit" because spec has discrete size.'}function Ln(e){return"Unknown field for ".concat(e,". Cannot calculate view size.")}function In(e){return'Cannot project a selection on encoding channel "'.concat(e,'", which has no field.')}function Un(e,t){return'Cannot project a selection on encoding channel "'.concat(e,'" as it uses an aggregate function ("').concat(t,'").')}function qn(e){return'The "nearest" transform is not supported for '.concat(e," marks.")}function Wn(e){return"Selection not supported for ".concat(e," yet.")}function Hn(e){return'Cannot find a selection named "'.concat(e,'".')}const Yn="Scale bindings are currently only supported for scales with unbinned, continuous domains.",Vn="Legend bindings are only supported for selections over an individual field or encoding channel.";function Gn(e){return'Cannot define and lookup the "'.concat(e,'" selection in the same view. ')+"Try moving the lookup into a second, layered view?"}const $n="The same selection must be used to override scale domains in a layered view.",Xn='Interval selections should be initialized using "x" and/or "y" keys.';function Jn(e){return'Unknown repeated value "'.concat(e,'".')}function Qn(e){return'The "columns" property cannot be used when "'.concat(e,'" has nested row/column.')}const Zn="Axes cannot be shared in concatenated or repeated views yet (https://github.com/vega/vega-lite/issues/2415).";function Kn(e){return'Unrecognized parse "'.concat(e,'".')}function er(e,t,n){return'An ancestor parsed field "'.concat(e,'" as ').concat(n," but a child wants to parse the field as ").concat(t,".")}const tr="Attempt to add the same child twice.";function nr(e){return"Ignoring an invalid transform: ".concat(Z(e),".")}const rr='If "from.fields" is not specified, "as" has to be a string that specifies the key to be used for the data from the secondary source.';function ir(e){return"Config.customFormatTypes is not true, thus custom format type and format for channel ".concat(e," are dropped.")}function or(e){const t=e.parentProjection,n=e.projection;return"Layer's shared projection ".concat(Z(t)," is overridden by a child projection ").concat(Z(n),".")}const ar="Arc marks uses theta channel rather than angle, replacing angle with theta.";function sr(e,t,n){return"Channel ".concat(e," is a ").concat(t,". Converted to {value: ").concat(Z(n),"}.")}function ur(e){return'Invalid field type "'.concat(e,'".')}function cr(e,t){return'Invalid field type "'.concat(e,'" for aggregate: "').concat(t,'", using "quantitative" instead.')}function lr(e){return'Invalid aggregation operator "'.concat(e,'".')}function fr(e,t){const n=t.fill,r=t.stroke;return"Dropping color ".concat(e," as the plot also has ").concat(n&&r?"fill and stroke":n?"fill":"stroke",".")}function dr(e,t){return"Dropping ".concat(Z(e),' from channel "').concat(t,'" since it does not contain any data field, datum, value, or signal.')}const hr="Line marks cannot encode size with a non-groupby field. You may want to use trail marks instead.";function pr(e,t,n){return"".concat(e,' dropped as it is incompatible with "').concat(t,'"').concat(n?" when ".concat(n):"",".")}function gr(e){return"".concat(e,"-encoding is dropped as ").concat(e," is not a valid encoding channel.")}function mr(e){return"".concat(e," encoding should be discrete (ordinal / nominal / binned).")}function vr(e){return"Facet encoding dropped as ".concat(e.join(" and ")," ").concat(e.length>1?"are":"is"," also specified.")}function yr(e,t){return'Using discrete channel "'.concat(e,'" to encode "').concat(t,'" field can be misleading as it does not encode ').concat("ordinal"===t?"order":"magnitude",".")}function br(e){return"The ".concat(e," for range marks cannot be an expression")}function xr(e,t){return"Line mark is for continuous lines and thus cannot be used with ".concat(e&&t?"x2 and y2":e?"x2":"y2",". We will use the rule mark (line segments) instead.")}function wr(e,t){return'Specified orient "'.concat(e,'" overridden with "').concat(t,'".')}const _r='Scale\'s "rangeStep" is deprecated and will be removed in Vega-Lite 5.0. Please use "width"/"height": {"step": ...} instead. See https://vega.github.io/vega-lite/docs/size.html.';function Ar(e){return'Cannot use the scale property "'.concat(e,'" with non-color channel.')}function kr(e){return"Using unaggregated domain with raw field has no effect (".concat(Z(e),").")}function Er(e){return'Unaggregated domain not applicable for "'.concat(e,'" since it produces values outside the origin domain of the source data.')}function Dr(e){return"Unaggregated domain is currently unsupported for log scale (".concat(Z(e),").")}function Cr(e){return'Cannot apply size to non-oriented mark "'.concat(e,'".')}function Mr(e,t,n){return'Channel "'.concat(e,'" does not work with "').concat(t,'" scale. We are using "').concat(n,'" scale instead.')}function Fr(e,t){return'FieldDef does not work with "'.concat(e,'" scale. We are using "').concat(t,'" scale instead.')}function Sr(e,t,n){return"".concat(n,"-scale's \"").concat(t,'" is dropped as it does not work with ').concat(e," scale.")}function Tr(e){return'The step for "'.concat(e,'" is dropped because the ').concat("width"===e?"x":"y"," is continuous.")}function Or(e,t,n,r){return"Conflicting ".concat(t.toString(),' property "').concat(e.toString(),'" (').concat(Z(n)," and ").concat(Z(r),"). Using ").concat(Z(n),".")}function Nr(e,t,n,r){return"Conflicting ".concat(t.toString(),' property "').concat(e.toString(),'" (').concat(Z(n)," and ").concat(Z(r),"). Using the union of the two domains.")}function Pr(e){return'Setting the scale to be independent for "'.concat(e,'" means we also have to set the guide (axis or legend) to be independent.')}function Rr(e){return"Dropping sort property ".concat(Z(e),' as unioned domains only support boolean or op "count", "min", and "max".')}const Br="Domains that should be unioned has conflicting sort properties. Sort will be set to true.",zr="Detected faceted independent scales that union domain of multiple fields from different data sources. We will use the first field. The result view size may be incorrect.",jr="Detected faceted independent scales that union domain of the same fields from different source. We will assume that this is the same field from a different fork of the same data source. However, if this is not the case, the result view size may be incorrect.",Lr="Detected faceted independent scales that union domain of multiple fields from the same data source. We will use the first field. The result view size may be incorrect.";function Ir(e){return'Cannot stack "'.concat(e,'" if there is already "').concat(e,'2".')}function Ur(e){return"Cannot stack non-linear scale (".concat(e,").")}function qr(e){return'Stacking is applied even though the aggregate function is non-summative ("'.concat(e,'").')}function Wr(e,t){return"Invalid ".concat(e,": ").concat(Z(t),".")}function Hr(e){return"Dropping day from datetime ".concat(Z(e)," as day cannot be combined with other units.")}function Yr(e,t){return"".concat(t?"extent ":"").concat(t&&e?"and ":"").concat(e?"center ":"").concat(t&&e?"are ":"is ","not needed when data are aggregated.")}function Vr(e,t,n){return"".concat(e," is not usually used with ").concat(t," for ").concat(n,".")}function Gr(e,t){return"Continuous axis should not have customized aggregation function ".concat(e,"; ").concat(t," already agregates the axis.")}function $r(e){return"1D error band does not support ".concat(e,".")}function Xr(e){return"Channel ".concat(e,' is required for "binned" bin.')}function Jr(e){return"Channel ".concat(e,' should not be used with "binned" bin.')}function Qr(e){return"Domain for ".concat(e," is required for threshold scale.")}const Zr=A(x);let Kr=Zr;function ei(e){return Kr=e,Kr}function ti(){return Kr=Zr,Kr}function ni(...e){Kr.warn(...e)}function ri(...e){Kr.debug(...e)}function ii(e){if(e&&E(e)){var t,n=u(vi);try{for(n.s();!(t=n.n()).done;)if(t.value in e)return!0}catch(r){n.e(r)}finally{n.f()}}return!1}const oi=["january","february","march","april","may","june","july","august","september","october","november","december"],ai=oi.map((e=>e.substr(0,3))),si=["sunday","monday","tuesday","wednesday","thursday","friday","saturday"],ui=si.map((e=>e.substr(0,3)));function ci(e){if(Re(e)&&(e=+e),R(e))return e>4&&ni(Wr("quarter",e)),e-1;throw new Error(Wr("quarter",e))}function li(e){if(Re(e)&&(e=+e),R(e))return e-1;{const t=e.toLowerCase(),n=oi.indexOf(t);if(-1!==n)return n;const r=t.substr(0,3),i=ai.indexOf(r);if(-1!==i)return i;throw new Error(Wr("month",e))}}function fi(e){if(Re(e)&&(e=+e),R(e))return e%7;{const t=e.toLowerCase(),n=si.indexOf(t);if(-1!==n)return n;const r=t.substr(0,3),i=ui.indexOf(r);if(-1!==i)return i;throw new Error(Wr("day",e))}}function di(e,t){const n=[];if(t&&void 0!==e.day&&he(e).length>1&&(ni(Hr(e)),delete(e=X(e)).day),void 0!==e.year?n.push(e.year):n.push(2012),void 0!==e.month){const r=t?li(e.month):e.month;n.push(r)}else if(void 0!==e.quarter){const r=t?ci(e.quarter):e.quarter;n.push(R(r)?3*r:r+"*3")}else n.push(0);if(void 0!==e.date)n.push(e.date);else if(void 0!==e.day){const r=t?fi(e.day):e.day;n.push(R(r)?r+1:r+"+1")}else n.push(1);for(var r=0,i=["hours","minutes","seconds","milliseconds"];r<i.length;r++){const t=e[i[r]];n.push("undefined"===typeof t?0:t)}return n}function hi(e){const t=di(e,!0).join(", ");return e.utc?"utc(".concat(t,")"):"datetime(".concat(t,")")}function pi(e){const t=di(e,!1).join(", ");return e.utc?"utc(".concat(t,")"):"datetime(".concat(t,")")}function gi(e){const t=di(e,!0);return e.utc?+new Date(Date.UTC(...t)):+new Date(...t)}const mi={year:1,quarter:1,month:1,week:1,day:1,dayofyear:1,date:1,hours:1,minutes:1,seconds:1,milliseconds:1},vi=he(mi);function yi(e){return!!mi[e]}function bi(e){return e.startsWith("utc")}function xi(e){return e.substr(3)}const wi={"year-month":"%b %Y ","year-month-date":"%b %d, %Y "};function _i(e){const t=[];var n,r=u(vi);try{for(r.s();!(n=r.n()).done;){const r=n.value;Ai(e,r)&&t.push(r)}}catch(i){r.e(i)}finally{r.f()}return t}function Ai(e,t){const n=e.indexOf(t);return!(n<0)&&!(n>0&&"seconds"===t&&"i"===e.charAt(n-1))&&!(e.length>n+3&&"day"===t&&"o"===e.charAt(n+3))&&!(n>0&&"year"===t&&"f"===e.charAt(n-1))}function ki(e,t,{end:n}={end:!1}){const r=we(t),i=bi(e)?"utc":"";function o(e){return"quarter"===e?"(".concat(i,"quarter(").concat(r,")-1)"):"".concat(i).concat(e,"(").concat(r,")")}let a;const s={};var c,l=u(vi);try{for(l.s();!(c=l.n()).done;){const t=c.value;Ai(e,t)&&(s[t]=o(t),a=t)}}catch(f){l.e(f)}finally{l.f()}return n&&(s[a]+="+1"),pi(s)}function Ei(e){if(!e)return;const t=_i(e);return"timeUnitSpecifier(".concat(q(t),", ").concat(q(wi),")")}function Di(e,t,n){if(!e)return;const r=Ei(e),i=n||bi(e);return"".concat(i?"utc":"time","Format(").concat(t,", ").concat(r,")")}function Ci(e){if(!e)return;let t;return B(e)?t={unit:e}:E(e)&&(t=s(s({},e),e.unit?{unit:e.unit}:{})),bi(t.unit)&&(t.utc=!0,t.unit=xi(t.unit)),t}function Mi(e){const t=Ci(e),n=t.utc,r=o(t,["utc"]);return r.unit?(n?"utc":"")+he(r).map((e=>ve("".concat("unit"===e?"":"_".concat(e,"_")).concat(r[e])))).join(""):(n?"utc":"")+"timeunit"+he(r).map((e=>ve("_".concat(e,"_").concat(r[e])))).join("")}function Fi(e){return e&&!!e.signal}function Si(e){return!!e.step}function Ti(e){return!k(e)&&"fields"in e&&!("data"in e)}function Oi(e){return!k(e)&&"fields"in e&&"data"in e}function Ni(e){return!k(e)&&"field"in e&&"data"in e}const Pi=he({aria:1,description:1,ariaRole:1,ariaRoleDescription:1,blend:1,opacity:1,fill:1,fillOpacity:1,stroke:1,strokeCap:1,strokeWidth:1,strokeOpacity:1,strokeDash:1,strokeDashOffset:1,strokeJoin:1,strokeOffset:1,strokeMiterLimit:1,startAngle:1,endAngle:1,padAngle:1,innerRadius:1,outerRadius:1,size:1,shape:1,interpolate:1,tension:1,orient:1,align:1,baseline:1,text:1,dir:1,dx:1,dy:1,ellipsis:1,limit:1,radius:1,theta:1,angle:1,font:1,fontSize:1,fontWeight:1,fontStyle:1,lineBreak:1,lineHeight:1,cursor:1,href:1,tooltip:1,cornerRadius:1,cornerRadiusTopLeft:1,cornerRadiusTopRight:1,cornerRadiusBottomLeft:1,cornerRadiusBottomRight:1,aspect:1,width:1,height:1,url:1,smooth:1}),Ri={arc:1,area:1,group:1,image:1,line:1,path:1,rect:1,rule:1,shape:1,symbol:1,text:1,trail:1},Bi=["cornerRadius","cornerRadiusTopLeft","cornerRadiusTopRight","cornerRadiusBottomLeft","cornerRadiusBottomRight"];function zi(e){return null===e||void 0===e?void 0:e.selection}function ji(e){return e&&!!e.field&&void 0!==e.equal}function Li(e){return e&&!!e.field&&void 0!==e.lt}function Ii(e){return e&&!!e.field&&void 0!==e.lte}function Ui(e){return e&&!!e.field&&void 0!==e.gt}function qi(e){return e&&!!e.field&&void 0!==e.gte}function Wi(e){if(e&&e.field){if(k(e.range)&&2===e.range.length)return!0;if(Fi(e.range))return!0}return!1}function Hi(e){return e&&!!e.field&&(k(e.oneOf)||k(e.in))}function Yi(e){return e&&!!e.field&&void 0!==e.valid}function Vi(e){return Hi(e)||ji(e)||Wi(e)||Li(e)||Ui(e)||Ii(e)||qi(e)}function Gi(e,t){return Ls(e,{timeUnit:t,wrapTime:!0})}function $i(e,t){return e.map((e=>Gi(e,t)))}function Xi(e,t=!0){var n;const r=e.field,i=null===(n=Ci(e.timeUnit))||void 0===n?void 0:n.unit,o=i?"time("+ki(i,r)+")":hs(e,{expr:"datum"});if(ji(e))return o+"==="+Gi(e.equal,i);if(Li(e)){const t=e.lt;return"".concat(o,"<").concat(Gi(t,i))}if(Ui(e)){const t=e.gt;return"".concat(o,">").concat(Gi(t,i))}if(Ii(e)){const t=e.lte;return"".concat(o,"<=").concat(Gi(t,i))}if(qi(e)){const t=e.gte;return"".concat(o,">=").concat(Gi(t,i))}if(Hi(e))return"indexof([".concat($i(e.oneOf,i).join(","),"], ").concat(o,") !== -1");if(Yi(e))return Ji(o,e.valid);if(Wi(e)){const n=e.range,r=Fi(n)?{signal:"".concat(n.signal,"[0]")}:n[0],a=Fi(n)?{signal:"".concat(n.signal,"[1]")}:n[1];if(null!==r&&null!==a&&t)return"inrange("+o+", ["+Gi(r,i)+", "+Gi(a,i)+"])";const s=[];return null!==r&&s.push("".concat(o," >= ").concat(Gi(r,i))),null!==a&&s.push("".concat(o," <= ").concat(Gi(a,i))),s.length>0?s.join(" && "):"true"}throw new Error("Invalid field predicate: ".concat(JSON.stringify(e)))}function Ji(e,t=!0){return t?"isValid(".concat(e,") && isFinite(+").concat(e,")"):"!isValid(".concat(e,") || !isFinite(+").concat(e,")")}function Qi(e){var t;return Vi(e)&&e.timeUnit?s(s({},e),{},{timeUnit:null===(t=Ci(e.timeUnit))||void 0===t?void 0:t.unit}):e}const Zi={quantitative:"quantitative",ordinal:"ordinal",temporal:"temporal",nominal:"nominal",geojson:"geojson"},Ki=Zi.quantitative,eo=Zi.ordinal,to=Zi.temporal,no=Zi.nominal,ro=Zi.geojson;function io(e){if(e)switch(e=e.toLowerCase()){case"q":case Ki:return"quantitative";case"t":case to:return"temporal";case"o":case eo:return"ordinal";case"n":case no:return"nominal";case ro:return"geojson"}}const oo={LINEAR:"linear",LOG:"log",POW:"pow",SQRT:"sqrt",SYMLOG:"symlog",IDENTITY:"identity",SEQUENTIAL:"sequential",TIME:"time",UTC:"utc",QUANTILE:"quantile",QUANTIZE:"quantize",THRESHOLD:"threshold",BIN_ORDINAL:"bin-ordinal",ORDINAL:"ordinal",POINT:"point",BAND:"band"},ao={linear:"numeric",log:"numeric",pow:"numeric",sqrt:"numeric",symlog:"numeric",identity:"numeric",sequential:"numeric",time:"time",utc:"time",ordinal:"ordinal","bin-ordinal":"bin-ordinal",point:"ordinal-position",band:"ordinal-position",quantile:"discretizing",quantize:"discretizing",threshold:"discretizing"};function so(e,t){const n=ao[e],r=ao[t];return n===r||"ordinal-position"===n&&"time"===r||"ordinal-position"===r&&"time"===n}const uo={linear:0,log:1,pow:1,sqrt:1,symlog:1,identity:1,sequential:1,time:0,utc:0,point:10,band:11,ordinal:0,"bin-ordinal":0,quantile:0,quantize:0,threshold:0};function co(e){return uo[e]}const lo=["linear","log","pow","sqrt","symlog","time","utc"],fo=j(lo),ho=j(["linear","log","pow","sqrt","symlog"]);function po(e){return e in ho}const go=j(["quantile","quantize","threshold"]),mo=j(lo.concat(["quantile","quantize","threshold","sequential","identity"])),vo=j(["ordinal","bin-ordinal","point","band"]);function yo(e){return e in vo}function bo(e){return e in mo}function xo(e){return e in fo}function wo(e){return e in go}const _o={pointPadding:.5,barBandPaddingInner:.1,rectBandPaddingInner:0,minBandSize:2,minFontSize:8,maxFontSize:40,minOpacity:.3,maxOpacity:.8,minSize:9,minStrokeWidth:1,maxStrokeWidth:4,quantileCount:4,quantizeCount:4};function Ao(e){return!B(e)&&!!e.name}function ko(e){return null===e||void 0===e?void 0:e.selection}function Eo(e){return e&&e.unionWith}const Do={type:1,domain:1,domainMax:1,domainMin:1,domainMid:1,align:1,range:1,rangeMax:1,rangeMin:1,scheme:1,bins:1,reverse:1,round:1,clamp:1,nice:1,base:1,exponent:1,constant:1,interpolate:1,zero:1,padding:1,paddingInner:1,paddingOuter:1},Co=(Do.type,Do.domain,Do.range,Do.rangeMax,Do.rangeMin,Do.scheme,o(Do,["type","domain","range","rangeMax","rangeMin","scheme"])),Mo=he(Co);function Fo(e,t){switch(t){case"type":case"domain":case"reverse":case"range":return!0;case"scheme":case"interpolate":return!te(["point","band","identity"],e);case"bins":return!te(["point","band","identity","ordinal"],e);case"round":return xo(e)||"band"===e||"point"===e;case"padding":case"rangeMin":case"rangeMax":return xo(e)||te(["point","band"],e);case"paddingOuter":case"align":return te(["point","band"],e);case"paddingInner":return"band"===e;case"domainMax":case"domainMid":case"domainMin":case"clamp":return xo(e);case"nice":return xo(e)||"quantize"===e||"threshold"===e;case"exponent":return"pow"===e;case"base":return"log"===e;case"constant":return"symlog"===e;case"zero":return bo(e)&&!te(["log","time","utc","threshold","quantile"],e)}}function So(e,t){switch(t){case"interpolate":case"scheme":case"domainMid":return qt(e)?void 0:Ar(e);case"align":case"type":case"bins":case"domain":case"domainMax":case"domainMin":case"range":case"base":case"exponent":case"constant":case"nice":case"padding":case"paddingInner":case"paddingOuter":case"rangeMax":case"rangeMin":case"reverse":case"round":case"clamp":case"zero":return}}function To(e,t){return te([eo,no],t)?void 0===e||yo(e):t===to?te([oo.TIME,oo.UTC,void 0],e):t!==Ki||te([oo.LOG,oo.POW,oo.SQRT,oo.SYMLOG,oo.QUANTILE,oo.QUANTIZE,oo.THRESHOLD,oo.LINEAR,void 0],e)}function Oo(e,t){if(!bn(e))return!1;switch(e){case rt:case it:case ct:case st:return xo(t)||te(["band","point"],t);case bt:case kt:case wt:case _t:case At:case xt:return xo(t)||wo(t)||te(["band","point","ordinal"],t);case gt:case mt:case vt:return"band"!==t;case Et:return"ordinal"===t||wo(t);case yt:return"ordinal"===t}}function No(e){return e&&!!e.expr}function Po(e){const t=he(e||{}),n={};var r,i=u(t);try{for(i.s();!(r=i.n()).done;){const t=r.value;n[t]=Ys(e[t])}}catch(o){i.e(o)}finally{i.f()}return n}const Ro={arc:"arc",area:"area",bar:"bar",image:"image",line:"line",point:"point",rect:"rect",rule:"rule",text:"text",tick:"tick",trail:"trail",circle:"circle",square:"square",geoshape:"geoshape"},Bo=Ro.arc,zo=Ro.area,jo=Ro.bar,Lo=Ro.image,Io=Ro.line,Uo=Ro.point,qo=Ro.rect,Wo=Ro.rule,Ho=Ro.text,Yo=Ro.tick,Vo=Ro.trail,Go=Ro.circle,$o=Ro.square,Xo=Ro.geoshape;function Jo(e){return te(["line","area","trail"],e)}function Qo(e){return te(["rect","bar","image","arc"],e)}const Zo=he(Ro);function Ko(e){return e.type}j(Zo);const ea=["stroke","strokeWidth","strokeDash","strokeDashOffset","strokeOpacity","strokeJoin","strokeMiterLimit","fill","fillOpacity"],ta=he({color:1,filled:1,invalid:1,order:1,radius2:1,theta2:1,timeUnitBand:1,timeUnitBandPosition:1}),na={area:["line","point"],bar:["binSpacing","continuousBandSize","discreteBandSize"],rect:["binSpacing","continuousBandSize","discreteBandSize"],line:["point"],tick:["bandSize","thickness"]},ra={color:"#4c78a8",invalid:"filter",timeUnitBand:1},ia=he({mark:1,arc:1,area:1,bar:1,circle:1,image:1,line:1,point:1,rect:1,rule:1,square:1,text:1,tick:1,trail:1,geoshape:1}),oa={horizontal:["cornerRadiusTopRight","cornerRadiusBottomRight"],vertical:["cornerRadiusTopLeft","cornerRadiusTopRight"]},aa=5,sa={binSpacing:1,continuousBandSize:aa,timeUnitBandPosition:.5},ua={binSpacing:0,continuousBandSize:aa,timeUnitBandPosition:.5},ca={thickness:1};function la(e){return Ko(e)?e.type:e}function fa(e){const t=e.channel,n=e.channelDef,r=e.markDef,i=e.scale,o=e.config,a=ya(e);return Ka(n)&&!Je(n.aggregate)&&i&&xo(i.get("type"))&&!1===i.get("zero")?da({fieldDef:n,channel:t,markDef:r,ref:a,config:o}):a}function da({fieldDef:e,channel:t,markDef:n,ref:r,config:i}){return Jo(n.type)||null===Zs("invalid",n,i)?r:[ha(e,t),r]}function ha(e,t){const n=pa(e,!0),r=Kt(t);return s({test:n},"y"===r?{field:{group:"height"}}:{value:0})}function pa(e,t=!0){return Ji(B(e)?e:hs(e,{expr:"datum"}),!t)}function ga(e){const t=e.datum;return ii(t)?hi(t):"".concat(JSON.stringify(t))}function ma(e,t,n,r){const i={};if(t&&(i.scale=t),ts(e)){const t=e.datum;ii(t)?i.signal=hi(t):Fi(t)?i.signal=t.signal:No(t)?i.signal=t.expr:i.value=t}else i.field=hs(e,n);if(r){const e=r.offset,t=r.band;e&&(i.offset=e),t&&(i.band=t)}return i}function va({scaleName:e,fieldOrDatumDef:t,fieldOrDatumDef2:n,offset:r,startSuffix:i,band:o=.5}){const a=0<o&&o<1?"datum":void 0,s=hs(t,{expr:a,suffix:i}),u=void 0!==n?hs(n,{expr:a}):hs(t,{suffix:"end",expr:a}),c={};if(0===o||1===o){c.scale=e;const t=0===o?s:u;c.field=t}else{const t="".concat(o," * ").concat(s," + ").concat(1-o," * ").concat(u);c.signal='scale("'.concat(e,'", ').concat(t,")")}return r&&(c.offset=r),c}function ya({channel:e,channelDef:t,channel2Def:n,markDef:r,config:i,scaleName:o,scale:a,stack:u,offset:c,defaultRef:l,band:f}){if(t){if(is(t)){var d,h;if(os(t)){var p;f=null!==(p=f)&&void 0!==p?p:Ga({channel:e,fieldDef:t,fieldDef2:n,markDef:r,stack:u,config:i,isMidPoint:!0});const a=t.bin,s=t.timeUnit,l=t.type;if(Dn(a)||f&&s&&l===to)return u&&u.impute?ma(t,o,{binSuffix:"mid"},{offset:c}):f?va({scaleName:o,fieldOrDatumDef:t,band:f,offset:c}):ma(t,o,Us(t,e)?{binSuffix:"range"}:{},{offset:c});if(Cn(a)){if(Ka(n))return va({scaleName:o,fieldOrDatumDef:t,fieldOrDatumDef2:n,band:f,offset:c});ni(Xr(e===rt?ot:at))}}const s=null===a||void 0===a?void 0:a.get("type");return ma(t,o,yo(s)?{binSuffix:"range"}:{},{offset:c,band:"band"===s?null!==(d=null!==(h=f)&&void 0!==h?h:t.band)&&void 0!==d?d:.5:void 0})}if(as(t)){const n=t.value,r=c?{offset:c}:{};return s(s({},ba(e,n)),r)}}return T(l)&&(l=l()),l?s(s({},l),c?{offset:c}:{}):l}function ba(e,t){return te(["x","x2"],e)&&"width"===t?{field:{group:"width"}}:te(["y","y2"],e)&&"height"===t?{field:{group:"height"}}:Gs(t)}function xa(e){return e&&"number"!==e&&"time"!==e}function wa(e,t,n){return"".concat(e,"(").concat(t).concat(n?", ".concat(JSON.stringify(n)):"",")")}const _a=" \u2013 ";function Aa({fieldOrDatumDef:e,format:t,formatType:n,expr:r,normalizeStack:i,config:o}){if(xa(n))return Ea({fieldOrDatumDef:e,format:t,formatType:n,expr:r,config:o});const a=ka(e,r,i);if(zs(e)){var s,u;const n=Na(a,Ka(e)?null===(s=Ci(e.timeUnit))||void 0===s?void 0:s.unit:void 0,t,o.timeFormat,ss(e)&&(null===(u=e.scale)||void 0===u?void 0:u.type)===oo.UTC);return n?{signal:n}:void 0}return t=Ma(es(e),t,o),Ka(e)&&Dn(e.bin)?{signal:Oa(a,hs(e,{expr:r,binSuffix:"end"}),t,n,o)}:t||"quantitative"===es(e)?{signal:"".concat(Sa(a,t))}:{signal:"isValid(".concat(a,") ? ").concat(a,' : ""+').concat(a)}}function ka(e,t,n){return Ka(e)?n?"".concat(hs(e,{expr:t,suffix:"end"}),"-").concat(hs(e,{expr:t,suffix:"start"})):hs(e,{expr:t}):ga(e)}function Ea({fieldOrDatumDef:e,format:t,formatType:n,expr:r,normalizeStack:i,config:o,field:a}){var s;return a=null!==(s=a)&&void 0!==s?s:ka(e,r,i),Ka(e)&&Dn(e.bin)?{signal:Oa(a,hs(e,{expr:r,binSuffix:"end"}),t,n,o)}:{signal:wa(n,a,t)}}function Da(e,t,n,r,i,o){var a;if(!xa(r))return zs(e)?Fa(n,Ka(e)?null===(a=Ci(e.timeUnit))||void 0===a?void 0:a.unit:void 0,i,o):Ma(t,n,i)}function Ca(e,t,n){return e&&(Fi(e)||"number"===e||"time"===e)?e:zs(t)&&"time"!==n&&"utc"!==n?"time":void 0}function Ma(e,t,n){return B(t)?t:e===Ki?n.numberFormat:void 0}function Fa(e,t,n,r){return e||(t?{signal:Ei(t)}:r?void 0:n.timeFormat)}function Sa(e,t){return"format(".concat(e,', "').concat(t||"",'")')}function Ta(e,t,n,r){var i;return xa(n)?wa(n,e,t):Sa(e,null!==(i=B(t)?t:void 0)&&void 0!==i?i:r.numberFormat)}function Oa(e,t,n,r,i){const o=Ta(e,n,r,i),a=Ta(t,n,r,i);return"".concat(Ji(e,!1),' ? "null" : ').concat(o,' + "').concat(_a,'" + ').concat(a)}function Na(e,t,n,r,i){return!t||n?(n=B(n)?n:r,"".concat(i?"utc":"time","Format(").concat(e,", '").concat(n,"')")):Di(t,e,i)}const Pa="min",Ra={x:1,y:1,color:1,fill:1,stroke:1,strokeWidth:1,size:1,shape:1,fillOpacity:1,strokeOpacity:1,opacity:1,text:1};function Ba(e){return e in Ra}function za(e){return!!e&&!!e.encoding}function ja(e){return!!e&&("count"===e.op||!!e.field)}function La(e){return!!e&&k(e)}function Ia(e){return"row"in e||"column"in e}function Ua(e){return!!e&&"header"in e}function qa(e){return"facet"in e}function Wa(e){return e.selection}function Ha(e){return e&&!B(e)&&"repeat"in e}function Ya(e){const t=e.field,n=e.timeUnit,r=e.bin,i=e.aggregate;return s(s(s(s({},n?{timeUnit:n}:{}),r?{bin:r}:{}),i?{aggregate:i}:{}),{},{field:t})}function Va(e){return"sort"in e}function Ga({channel:e,fieldDef:t,fieldDef2:n,markDef:r,stack:i,config:o,isMidPoint:a}){if(is(t)&&void 0!==t.band)return t.band;if(Ka(t)){const e=t.timeUnit,i=t.bin;if(e&&!n)return a?Ks("timeUnitBandPosition",r,o):Qo(r.type)?Ks("timeUnitBand",r,o):0;if(Dn(i))return Qo(r.type)&&!a?1:.5}return(null===i||void 0===i?void 0:i.fieldChannel)===e&&a?.5:void 0}function $a(e,t,n,r,i,o){return!!(Dn(t.bin)||t.timeUnit&&os(t)&&"temporal"===t.type)&&!!Ga({channel:e,fieldDef:t,fieldDef2:n,stack:r,markDef:i,config:o})}function Xa(e){return!!e&&"condition"in e}function Ja(e){const t=e&&e.condition;return!!t&&!k(t)&&Ka(t)}function Qa(e){const t=e&&e.condition;return!!t&&!k(t)&&is(t)}function Za(e){const t=e&&e.condition;return!!t&&(k(t)||as(t))}function Ka(e){return!!e&&(!!e.field||"count"===e.aggregate)}function es(e){return e&&e.type}function ts(e){return!!e&&"datum"in e}function ns(e){return os(e)&&gs(e)||rs(e)}function rs(e){return ts(e)&&R(e.datum)}function is(e){return Ka(e)||ts(e)}function os(e){return!!e&&("field"in e||"count"===e.aggregate)&&"type"in e}function as(e){return e&&"value"in e&&"value"in e}function ss(e){return!!e&&("scale"in e||"sort"in e)}function us(e){return e&&("axis"in e||"stack"in e||"impute"in e)}function cs(e){return!!e&&"legend"in e}function ls(e){return!!e&&("format"in e||"formatType"in e)}function fs(e){return Q(e,["legend","axis","header","scale"])}function ds(e){return"op"in e}function hs(e,t={}){let n=e.field;const r=t.prefix;let i=t.suffix,o="";if(ms(e))n=Oe("count");else{let r;if(!t.nofn)if(ds(e))r=e.op;else{const c=e.bin,l=e.aggregate,f=e.timeUnit;var a,s;if(Dn(c))r=En(c),i=(null!==(a=t.binSuffix)&&void 0!==a?a:"")+(null!==(s=t.suffix)&&void 0!==s?s:"");else if(l)Ge(l)?(o='["'.concat(n,'"]'),n="argmax_".concat(l.argmax)):Ve(l)?(o='["'.concat(n,'"]'),n="argmin_".concat(l.argmin)):r=String(l);else if(f){var u;r=Mi(f),i=(!te(["range","mid"],t.binSuffix)&&t.binSuffix||"")+(null!==(u=t.suffix)&&void 0!==u?u:"")}}r&&(n=n?"".concat(r,"_").concat(n):r)}return i&&(n="".concat(n,"_").concat(i)),r&&(n="".concat(r,"_").concat(n)),t.forAs?De(n):t.expr?_e(n,t.expr)+o:ke(n)+o}function ps(e){switch(e.type){case"nominal":case"ordinal":case"geojson":return!0;case"quantitative":return Ka(e)&&!!e.bin;case"temporal":return!1}throw new Error(ur(e.type))}function gs(e){return!ps(e)}function ms(e){return"count"===e.aggregate}function vs(e,t){const n=e.field,r=e.bin,i=e.timeUnit,o=e.aggregate;if("count"===o)return t.countTitle;if(Dn(r))return"".concat(n," (binned)");if(i){var a;const e=null===(a=Ci(i))||void 0===a?void 0:a.unit;if(e)return"".concat(n," (").concat(_i(e).join("-"),")")}else if(o)return Ge(o)?"".concat(n," for max ").concat(o.argmax):Ve(o)?"".concat(n," for min ").concat(o.argmin):"".concat(xe(o)," of ").concat(n);return n}function ys(e){const t=e.aggregate,n=e.bin,r=e.timeUnit,i=e.field;if(Ge(t))return"".concat(i," for argmax(").concat(t.argmax,")");if(Ve(t))return"".concat(i," for argmin(").concat(t.argmin,")");const o=Ci(r),a=t||(null===o||void 0===o?void 0:o.unit)||(null===o||void 0===o?void 0:o.maxbins)&&"timeunit"||Dn(n)&&"bin";return a?a.toUpperCase()+"("+i+")":i}const bs=(e,t)=>{switch(t.fieldTitle){case"plain":return e.field;case"functional":return ys(e);default:return vs(e,t)}};let xs=bs;function ws(e){xs=e}function _s(){ws(bs)}function As(e,t,{allowDisabling:n,includeDefault:r=!0}){var i;const o=null===(i=ks(e))||void 0===i?void 0:i.title;if(!Ka(e))return o;const a=e,s=r?Es(a,t):void 0;return n?Me(o,a.title,s):null!==(u=null!==o&&void 0!==o?o:a.title)&&void 0!==u?u:s;var u}function ks(e){return us(e)&&e.axis?e.axis:cs(e)&&e.legend?e.legend:Ua(e)&&e.header?e.header:void 0}function Es(e,t){return xs(e,t)}function Ds(e){if(ls(e))return{format:e.format,formatType:e.formatType};{var t;const n=null!==(t=ks(e))&&void 0!==t?t:{};return{format:n.format,formatType:n.formatType}}}function Cs(e,t){var n;switch(t){case"latitude":case"longitude":return"quantitative";case"row":case"column":case"facet":case"shape":case"strokeDash":return"nominal";case"order":return"ordinal"}if(Va(e)&&k(e.sort))return"ordinal";const r=e.aggregate,i=e.bin;if(e.timeUnit)return"temporal";if(i||r&&!Ge(r)&&!Ve(r))return"quantitative";if(ss(e)&&(null===(n=e.scale)||void 0===n?void 0:n.type))switch(ao[e.scale.type]){case"numeric":case"discretizing":return"quantitative";case"time":return"temporal"}return"nominal"}function Ms(e){return Ka(e)?e:Ja(e)?e.condition:void 0}function Fs(e){return is(e)?e:Qa(e)?e.condition:void 0}function Ss(e,t,n,r={}){return B(e)||R(e)||P(e)?(ni(sr(t,B(e)?"string":R(e)?"number":"boolean",e)),{value:e}):is(e)?Ts(e,t,n,r):Qa(e)?s(s({},e),{},{condition:Ts(e.condition,t,n,r)}):e}function Ts(e,t,n,r){if(ls(e)){e.format;const i=e.formatType,a=o(e,["format","formatType"]);if(xa(i)&&!n.customFormatTypes)return ni(ir(t)),Ts(a,t,n,r)}else{const i=us(e)?"axis":cs(e)?"legend":Ua(e)?"header":null;if(i&&e[i]){const a=e[i],u=(a.format,a.formatType),c=o(a,["format","formatType"]);if(xa(u)&&!n.customFormatTypes)return ni(ir(t)),Ts(s(s({},e),{},{[i]:c}),t,n,r)}}return Ka(e)?Ns(e,t,r):Os(e)}function Os(e){let t=e.type;if(t)return e;const n=e.datum;return t=R(n)?"quantitative":B(n)?"nominal":ii(n)?"temporal":void 0,s(s({},e),{},{type:t})}function Ns(e,t,{compositeMark:n=!1}={}){const r=e.aggregate,i=e.timeUnit,a=e.bin,u=e.field,c=s({},e);if(n||!r||$e(r)||Ge(r)||Ve(r)||(ni(lr(r)),delete c.aggregate),i&&(c.timeUnit=Ci(i)),u&&(c.field="".concat(u)),Dn(a)&&(c.bin=Ps(a,t)),Cn(a)&&!cn(t)&&ni(Jr(t)),os(c)){const e=c.type,t=io(e);e!==t&&(c.type=t),"quantitative"!==e&&Je(r)&&(ni(cr(e,r)),c.type="quantitative")}else if(!Zt(t)){const e=Cs(c,t);c.type=e}if(os(c)){const e=Bs(c,t)||{},n=e.compatible,r=e.warning;!1===n&&ni(r)}if(Va(c)&&B(c.sort)){const e=c.sort;if(Ba(e))return s(s({},c),{},{sort:{encoding:e}});const t=e.substr(1);if("-"===e.charAt(0)&&Ba(t))return s(s({},c),{},{sort:{encoding:t,order:"descending"}})}if(Ua(c)){const e=c.header,t=e.orient,n=o(e,["orient"]);if(t)return s(s({},c),{},{header:s(s({},n),{},{labelOrient:e.labelOrient||t,titleOrient:e.titleOrient||t})})}return c}function Ps(e,t){return P(e)?{maxbins:Sn(t)}:"binned"===e?{binned:!0}:e.maxbins||e.step?e:s(s({},e),{},{maxbins:Sn(t)})}const Rs={compatible:!0};function Bs(e,t){const n=e.type;if("geojson"===n&&"shape"!==t)return{compatible:!1,warning:"Channel ".concat(t," should not be used with a geojson data.")};switch(t){case et:case tt:case nt:return gs(e)?{compatible:!1,warning:mr(t)}:Rs;case rt:case it:case gt:case mt:case vt:case Dt:case Mt:case Ft:case St:case Tt:case Ot:case xt:case ct:case st:case Nt:return Rs;case dt:case pt:case ft:case ht:return n!==Ki?{compatible:!1,warning:"Channel ".concat(t," should be used with a quantitative field only, not ").concat(e.type," field.")}:Rs;case wt:case _t:case At:case kt:case bt:case lt:case ut:case ot:case at:return"nominal"!==n||e.sort?Rs:{compatible:!1,warning:"Channel ".concat(t," should not be used with an unsorted discrete field.")};case Et:return te(["ordinal","nominal"],e.type)?Rs:{compatible:!1,warning:"StrokeDash channel should be used with only discrete data."};case yt:return te(["ordinal","nominal","geojson"],e.type)?Rs:{compatible:!1,warning:"Shape channel should be used with only either discrete or geojson data."};case Ct:return"nominal"!==e.type||"sort"in e?Rs:{compatible:!1,warning:"Channel order is inappropriate for nominal field, which has no inherent order."}}}function zs(e){const t=Ds(e).formatType;return"time"===t||!t&&js(e)}function js(e){return e&&("temporal"===e.type||Ka(e)&&!!e.timeUnit)}function Ls(e,{timeUnit:t,type:n,wrapTime:r,undefinedIfExprNotRequired:i}){var o;const a=t&&(null===(o=Ci(t))||void 0===o?void 0:o.unit);let s,u=a||"temporal"===n;return No(e)?s=e.expr:Fi(e)?s=e.signal:ii(e)?(u=!0,s=hi(e)):(B(e)||R(e))&&u&&(s="datetime(".concat(JSON.stringify(e),")"),yi(a)&&(R(e)&&e<1e4||B(e)&&isNaN(Date.parse(e)))&&(s=hi({[a]:e}))),s?r&&u?"time(".concat(s,")"):s:i?void 0:JSON.stringify(e)}function Is(e,t){const n=e.type;return t.map((t=>{const r=Ls(t,{timeUnit:Ka(e)?e.timeUnit:void 0,type:n,undefinedIfExprNotRequired:!0});return void 0!==r?{signal:r}:t}))}function Us(e,t){return Dn(e.bin)?bn(t)&&te(["ordinal","nominal"],e.type):(console.warn("Only call this method for binned field defs."),!1)}function qs(e){const t=e.anchor,n=e.frame,r=e.offset,i=e.orient,a=e.color,u=e.subtitleColor,c=e.subtitleFont,l=e.subtitleFontSize,f=e.subtitleFontStyle,d=e.subtitleFontWeight,h=e.subtitleLineHeight,p=e.subtitlePadding,g=o(e,["anchor","frame","offset","orient","color","subtitleColor","subtitleFont","subtitleFontSize","subtitleFontStyle","subtitleFontWeight","subtitleLineHeight","subtitlePadding"]),m=s(s({},g),a?{fill:a}:{}),v=s(s(s(s({},t?{anchor:t}:{}),n?{frame:n}:{}),r?{offset:r}:{}),i?{orient:i}:{}),y=s(s(s(s(s(s(s({},u?{subtitleColor:u}:{}),c?{subtitleFont:c}:{}),l?{subtitleFontSize:l}:{}),f?{subtitleFontStyle:f}:{}),d?{subtitleFontWeight:d}:{}),h?{subtitleLineHeight:h}:{}),p?{subtitlePadding:p}:{});return{titleMarkConfig:m,subtitleMarkConfig:J(m,["align","baseline","dx","dy","limit"]),nonMark:v,subtitle:y}}function Ws(e){return B(e)||k(e)&&B(e[0])}function Hs(e){const t=k(e.condition)?e.condition.map(Vs):Vs(e.condition);return s(s({},Ys(e)),{},{condition:t})}function Ys(e){if(No(e)){const t=e.expr,n=o(e,["expr"]);return s({signal:t},n)}return e}function Vs(e){if(No(e)){const t=e.expr,n=o(e,["expr"]);return s({signal:t},n)}return e}function Gs(e){if(No(e)){const t=e.expr,n=o(e,["expr"]);return s({signal:t},n)}return Fi(e)?e:void 0!==e?{value:e}:void 0}function $s(e){return Fi(e)?e.signal:z(e.value)}function Xs(e){return Fi(e)?e.signal:null==e?null:z(e)}function Js(e,t,n){var r,i=u(n);try{for(i.s();!(r=i.n()).done;){const n=r.value,i=Ks(n,t.markDef,t.config);void 0!==i&&(e[n]=Gs(i))}}catch(o){i.e(o)}finally{i.f()}return e}function Qs(e){var t;return[].concat(e.type,null!==(t=e.style)&&void 0!==t?t:[])}function Zs(e,t,n,r={}){const i=r.vgChannel,o=r.ignoreVgConfig;return i&&void 0!==t[i]?t[i]:void 0!==t[e]?t[e]:!o||i&&i!==e?Ks(e,t,n,r):void 0}function Ks(e,t,n,{vgChannel:r}={}){return Me(r?eu(e,t,n.style):void 0,eu(e,t,n.style),r?n[t.type][r]:void 0,n[t.type][e],r?n.mark[r]:n.mark[e])}function eu(e,t,n){return tu(e,Qs(t),n)}function tu(e,t,n){let r;t=S(t);var i,o=u(t);try{for(o.s();!(i=o.n()).done;){const t=n[i.value];t&&void 0!==t[e]&&(r=t[e])}}catch(a){o.e(a)}finally{o.f()}return r}function nu(e,t){return S(e).reduce(((e,n)=>{var r;return e.field.push(hs(n,t)),e.order.push(null!==(r=n.sort)&&void 0!==r?r:"ascending"),e}),{field:[],order:[]})}function ru(e,t){const n=[...e];return t.forEach((e=>{var t,r=u(n);try{for(r.s();!(t=r.n()).done;){const n=t.value;if($(n,e))return}}catch(i){r.e(i)}finally{r.f()}n.push(e)})),n}function iu(e,t){return $(e,t)||!t?e:e?[...S(e),...S(t)].join(", "):t}function ou(e,t){const n=e.value,r=t.value;if(null==n||null===r)return{explicit:e.explicit,value:null};if((Ws(n)||Fi(n))&&(Ws(r)||Fi(r)))return{explicit:e.explicit,value:iu(n,r)};if(Ws(n)||Fi(n))return{explicit:e.explicit,value:n};if(Ws(r)||Fi(r))return{explicit:e.explicit,value:r};if(!Ws(n)&&!Fi(n)&&!Ws(r)&&!Fi(r))return{explicit:e.explicit,value:ru(n,r)};throw new Error("It should never reach here")}function au(e){return"mark"in e}class su{constructor(e,t){this.name=e,this.run=t}hasMatchingType(e){return!!au(e)&&la(e.mark)===this.name}}function uu(e,t){const n=e&&e[t];return!!n&&(k(n)?ne(n,(e=>!!e.field)):Ka(n)||Ja(n))}function cu(e){return ne(Vt,(t=>{if(uu(e,t)){const n=e[t];if(k(n))return ne(n,(e=>!!e.aggregate));{const e=Ms(n);return e&&!!e.aggregate}}return!1}))}function lu(e,t){const n=[],r=[],i=[],a=[],u={};return gu(e,((c,l)=>{if(Ka(c)){const f=c.field,d=c.aggregate,h=c.bin,p=c.timeUnit,g=o(c,["field","aggregate","bin","timeUnit"]);if(d||p||h){const e=ks(c),o=e&&e.title;let m=hs(c,{forAs:!0});const v=s(s(s({},o?[]:{title:As(c,t,{allowDisabling:!0})}),g),{},{field:m});if(d){let e;if(Ge(d)?(e="argmax",m=hs({op:"argmax",field:d.argmax},{forAs:!0}),v.field="".concat(m,".").concat(f)):Ve(d)?(e="argmin",m=hs({op:"argmin",field:d.argmin},{forAs:!0}),v.field="".concat(m,".").concat(f)):"boxplot"!==d&&"errorbar"!==d&&"errorband"!==d&&(e=d),e){const t={op:e,as:m};f&&(t.field=f),a.push(t)}}else if(n.push(m),os(c)&&Dn(h)){if(r.push({bin:h,field:f,as:m}),n.push(hs(c,{binSuffix:"end"})),Us(c,l)&&n.push(hs(c,{binSuffix:"range"})),cn(l)){const e={field:m+"_end"};u[l+"2"]=e}v.bin="binned",Zt(l)||(v.type=Ki)}else if(p){i.push({timeUnit:p,field:f,as:m});const e=os(c)&&c.type!==to&&"time";e&&(l===Dt||l===St?v.formatType=e:gn(l)?v.legend=s({formatType:e},v.legend):cn(l)&&(v.axis=s({formatType:e},v.axis)))}u[l]=v}else n.push(f),u[l]=e[l]}else u[l]=e[l]})),{bins:r,timeUnits:i,aggregate:a,groupby:n,encoding:u}}function fu(e,t,n){const r=xn(t,n);if(!r)return!1;if("binned"===r){const n=e[t===ot?rt:it];return!!(Ka(n)&&Ka(e[t])&&Cn(n.bin))}return!0}function du(e,t,n,r){return he(e).reduce(((i,o)=>{if(!Jt(o))return ni(gr(o)),i;const a=e[o];if("angle"!==o||"arc"!==t||e.theta||(ni(ar),o=ct),!fu(e,o,t))return ni(pr(o,t)),i;if(o===bt&&"line"===t){const t=Ms(e[o]);if(null===t||void 0===t?void 0:t.aggregate)return ni(hr),i}if(o===gt&&(n?"fill"in e:"stroke"in e))return ni(fr("encoding",{fill:"fill"in e,stroke:"stroke"in e})),i;if(o===Mt||o===Ct&&!k(a)&&!as(a)||o===St&&k(a))a&&(i[o]=S(a).reduce(((e,t)=>(Ka(t)?e.push(Ns(t,o)):ni(dr(t,o)),e)),[]));else{if(o===St&&null===a)i[o]=null;else if(!Ka(a)&&!ts(a)&&!as(a)&&!Xa(a)&&!Fi(a))return ni(dr(a,o)),i;i[o]=Ss(a,o,r)}return i}),{})}function hu(e,t){const n={};var r,i=u(he(e));try{for(i.s();!(r=i.n()).done;){const i=r.value,o=Ss(e[i],i,t,{compositeMark:!0});n[i]=o}}catch(o){i.e(o)}finally{i.f()}return n}function pu(e){const t=[];var n,r=u(he(e));try{for(r.s();!(n=r.n()).done;){const r=n.value;if(uu(e,r)){const n=S(e[r]);var i,o=u(n);try{for(o.s();!(i=o.n()).done;){const e=i.value;Ka(e)?t.push(e):Ja(e)&&t.push(e.condition)}}catch(a){o.e(a)}finally{o.f()}}}}catch(a){r.e(a)}finally{r.f()}return t}function gu(e,t,n){if(e){var r,i=u(he(e));try{for(i.s();!(r=i.n()).done;){const i=r.value,c=e[i];if(k(c)){var o,a=u(c);try{for(a.s();!(o=a.n()).done;){const e=o.value;t.call(n,e,i)}}catch(s){a.e(s)}finally{a.f()}}else t.call(n,c,i)}}catch(s){i.e(s)}finally{i.f()}}}function mu(e,t,n,r){return e?he(e).reduce(((n,i)=>{const o=e[i];return k(o)?o.reduce(((e,n)=>t.call(r,e,n,i)),n):t.call(r,n,o,i)}),n):n}function vu(e,t){return he(t).reduce(((n,r)=>{switch(r){case rt:case it:case Tt:case Nt:case Ot:case ot:case at:case ct:case lt:case st:case ut:case ft:case dt:case ht:case pt:case Dt:case yt:case xt:case St:return n;case Ct:if("line"===e||"trail"===e)return n;case Mt:case Ft:{const e=t[r];if(k(e)||Ka(e)){var i,o=u(S(e));try{for(o.s();!(i=o.n()).done;){const e=i.value;e.aggregate||n.push(hs(e,{}))}}catch(a){o.e(a)}finally{o.f()}}return n}case bt:if("trail"===e)return n;case gt:case mt:case vt:case wt:case _t:case At:case Et:case kt:{const e=Ms(t[r]);return e&&!e.aggregate&&n.push(hs(e,{})),n}}}),[])}function yu(e){const t=e.tooltip,n=o(e,["tooltip"]);if(!t)return{filteredEncoding:n};let r,i;if(k(t)){var a,s=u(t);try{for(s.s();!(a=s.n()).done;){const e=a.value;e.aggregate?(r||(r=[]),r.push(e)):(i||(i=[]),i.push(e))}}catch(c){s.e(c)}finally{s.f()}r&&(n.tooltip=r)}else t.aggregate?n.tooltip=t:i=t;return k(i)&&1===i.length&&(i=i[0]),{customTooltipWithoutAggregatedField:i,filteredEncoding:n}}function bu(e,t,n,r=!0){return"tooltip"in n?{tooltip:n.tooltip}:{tooltip:[...e.map((({fieldPrefix:e,titlePrefix:n})=>{const i=r?" of ".concat(xu(t)):"";return{field:e+t.field,type:t.type,title:Fi(n)?{signal:n+'"'.concat(escape(i),'"')}:n+i}})),...ae(pu(n).map(fs),K)]}}function xu(e){return Me(e.title,e.field)}function wu(e,t,n,r,i){const o=n.scale,a=n.axis;return({partName:u,mark:c,positionPrefix:l,endPositionPrefix:f,extraEncoding:d={}})=>{const h=xu(n);return _u(e,u,i,{mark:c,encoding:s(s(s({[t]:s(s(s({field:l+"_"+n.field,type:n.type},void 0!==h?{title:h}:{}),void 0!==o?{scale:o}:{}),void 0!==a?{axis:a}:{})},B(f)?{[t+"2"]:{field:f+"_"+n.field}}:{}),r),d)})}}function _u(e,t,n,r){const i=e.clip,o=e.color,a=e.opacity,u=e.type;return e[t]||void 0===e[t]&&n[t]?[s(s({},r),{},{mark:s(s(s(s(s(s({},n[t]),i?{clip:i}:{}),o?{color:o}:{}),a?{opacity:a}:{}),Ko(r.mark)?r.mark:{type:r.mark}),{},{style:"".concat(u,"-").concat(t)},P(e[t])?{}:e[t])})]:[]}function Au(e,t,n){const r=e.encoding,i="vertical"===t?"y":"x",o=r[i],a=r[i+"2"],s=r[i+"Error"],u=r[i+"Error2"];return{continuousAxisChannelDef:ku(o,n),continuousAxisChannelDef2:ku(a,n),continuousAxisChannelDefError:ku(s,n),continuousAxisChannelDefError2:ku(u,n),continuousAxis:i}}function ku(e,t){if(e&&e.aggregate){const n=e.aggregate,r=o(e,["aggregate"]);return n!==t&&ni(Gr(n,t)),r}return e}function Eu(e,t){const n=e.mark,r=e.encoding,i=r.x,o=r.y;if(Ko(n)&&n.orient)return n.orient;if(ns(i)){if(ns(o)){const e=Ka(i)&&i.aggregate,n=Ka(o)&&o.aggregate;if(e||n!==t){if(n||e!==t){if(e===t&&n===t)throw new Error("Both x and y cannot have aggregate");return zs(o)&&!zs(i)?"horizontal":"vertical"}return"horizontal"}return"vertical"}return"horizontal"}if(ns(o))return"vertical";throw new Error("Need a valid continuous axis for ".concat(t,"s"))}const Du="boxplot",Cu=["box","median","outliers","rule","ticks"],Mu=new su(Du,Su);function Fu(e){return R(e)?"tukey":e}function Su(e,{config:t}){var n;const r=e=s(s({},e),{},{encoding:hu(e.encoding,t)}),i=r.mark,a=(r.encoding,r.selection),u=(r.projection,o(r,["mark","encoding","selection","projection"])),c=Ko(i)?i:{type:i};a&&ni(Wn("boxplot"));const l=null!==(n=c.extent)&&void 0!==n?n:t.boxplot.extent,f=Zs("size",c,t),d=Fu(l),h=Ou(e,l,t),p=h.bins,g=h.timeUnits,m=h.transform,v=h.continuousAxisChannelDef,y=h.continuousAxis,b=h.groupby,x=h.aggregate,w=h.encodingWithoutContinuousAxis,_=h.ticksOrient,A=h.boxOrient,k=h.customTooltipWithoutAggregatedField,D=w.color,C=w.size,M=o(w,["color","size"]),F=e=>wu(c,y,v,e,t.boxplot),S=F(M),T=F(w),O=F(s(s({},M),C?{size:C}:{})),N=bu([{fieldPrefix:"min-max"===d?"upper_whisker_":"max_",titlePrefix:"Max"},{fieldPrefix:"upper_box_",titlePrefix:"Q3"},{fieldPrefix:"mid_box_",titlePrefix:"Median"},{fieldPrefix:"lower_box_",titlePrefix:"Q1"},{fieldPrefix:"min-max"===d?"lower_whisker_":"min_",titlePrefix:"Min"}],v,w),P={type:"tick",color:"black",opacity:1,orient:_,invalid:null,aria:!1},R="min-max"===d?N:bu([{fieldPrefix:"upper_whisker_",titlePrefix:"Upper Whisker"},{fieldPrefix:"lower_whisker_",titlePrefix:"Lower Whisker"}],v,w),B=[...S({partName:"rule",mark:{type:"rule",invalid:null,aria:!1},positionPrefix:"lower_whisker",endPositionPrefix:"lower_box",extraEncoding:R}),...S({partName:"rule",mark:{type:"rule",invalid:null,aria:!1},positionPrefix:"upper_box",endPositionPrefix:"upper_whisker",extraEncoding:R}),...S({partName:"ticks",mark:P,positionPrefix:"lower_whisker",extraEncoding:R}),...S({partName:"ticks",mark:P,positionPrefix:"upper_whisker",extraEncoding:R})],z=[..."tukey"!==d?B:[],...T({partName:"box",mark:s(s({type:"bar"},f?{size:f}:{}),{},{orient:A,invalid:null,ariaRoleDescription:"box"}),positionPrefix:"lower_box",endPositionPrefix:"upper_box",extraEncoding:N}),...O({partName:"median",mark:s(s(s({type:"tick",invalid:null},E(t.boxplot.median)&&t.boxplot.median.color?{color:t.boxplot.median.color}:{}),f?{size:f}:{}),{},{orient:_,aria:!1}),positionPrefix:"mid_box",extraEncoding:N})];var j;if("min-max"===d)return s(s({},u),{},{transform:(null!==(j=u.transform)&&void 0!==j?j:[]).concat(m),layer:z});const L='datum["lower_box_'.concat(v.field,'"]'),I='datum["upper_box_'.concat(v.field,'"]'),U="(".concat(I," - ").concat(L,")"),q="".concat(L," - ").concat(l," * ").concat(U),W="".concat(I," + ").concat(l," * ").concat(U),H='datum["'.concat(v.field,'"]'),Y={joinaggregate:Tu(v.field),groupby:b},V={transform:[{filter:"(".concat(q," <= ").concat(H,") && (").concat(H," <= ").concat(W,")")},{aggregate:[{op:"min",field:v.field,as:"lower_whisker_"+v.field},{op:"max",field:v.field,as:"upper_whisker_"+v.field},{op:"min",field:"lower_box_"+v.field,as:"lower_box_"+v.field},{op:"max",field:"upper_box_"+v.field,as:"upper_box_"+v.field},...x],groupby:b}],layer:B},G=(M.tooltip,o(M,["tooltip"])),$=v.scale,X=v.axis,J=xu(v),Z=Q(X,["title"]),K=_u(c,"outliers",t.boxplot,{transform:[{filter:"(".concat(H," < ").concat(q,") || (").concat(H," > ").concat(W,")")}],mark:"point",encoding:s(s(s({[y]:s(s(s({field:v.field,type:v.type},void 0!==J?{title:J}:{}),void 0!==$?{scale:$}:{}),de(Z)?{}:{axis:Z})},G),D?{color:D}:{}),k?{tooltip:k}:{})})[0];let ee;const te=[...p,...g,Y];return K?ee={transform:te,layer:[K,V]}:(ee=V,ee.transform.unshift(...te)),s(s({},u),{},{layer:[ee,{transform:m,layer:z}]})}function Tu(e){return[{op:"q1",field:e,as:"lower_box_"+e},{op:"q3",field:e,as:"upper_box_"+e}]}function Ou(e,t,n){const r=Eu(e,Du),a=Au(e,r,Du),s=a.continuousAxisChannelDef,u=a.continuousAxis,c=s.field,l=Fu(t),f=[...Tu(c),{op:"median",field:c,as:"mid_box_"+c},{op:"min",field:c,as:("min-max"===l?"lower_whisker_":"min_")+c},{op:"max",field:c,as:("min-max"===l?"upper_whisker_":"max_")+c}],d="min-max"===l||"tukey"===l?[]:[{calculate:'datum["upper_box_'.concat(c,'"] - datum["lower_box_').concat(c,'"]'),as:"iqr_"+c},{calculate:'min(datum["upper_box_'.concat(c,'"] + datum["iqr_').concat(c,'"] * ').concat(t,', datum["max_').concat(c,'"])'),as:"upper_whisker_"+c},{calculate:'max(datum["lower_box_'.concat(c,'"] - datum["iqr_').concat(c,'"] * ').concat(t,', datum["min_').concat(c,'"])'),as:"lower_whisker_"+c}],h=e.encoding,p=(h[u],yu(o(h,[u].map(i)))),g=p.customTooltipWithoutAggregatedField,m=lu(p.filteredEncoding,n),v=m.bins,y=m.timeUnits,b=m.aggregate,x=m.groupby,w=m.encoding,_="vertical"===r?"horizontal":"vertical",A=r;return{bins:v,timeUnits:y,transform:[...v,...y,{aggregate:[...b,...f],groupby:x},...d],groupby:x,aggregate:b,continuousAxisChannelDef:s,continuousAxis:u,encodingWithoutContinuousAxis:w,ticksOrient:_,boxOrient:A,customTooltipWithoutAggregatedField:g}}const Nu="errorbar",Pu=["ticks","rule"],Ru=new su(Nu,Bu);function Bu(e,{config:t}){const n=Uu(e=s(s({},e),{},{encoding:hu(e.encoding,t)}),Nu,t),r=n.transform,i=n.continuousAxisChannelDef,o=n.continuousAxis,a=n.encodingWithoutContinuousAxis,u=n.ticksOrient,c=n.markDef,l=n.outerSpec,f=n.tooltipEncoding;delete a.size;const d=wu(c,o,i,a,t.errorbar),h=c.thickness,p=c.size,g=s(s({type:"tick",orient:u,aria:!1},void 0!==h?{thickness:h}:{}),void 0!==p?{size:p}:{}),m=[...d({partName:"ticks",mark:g,positionPrefix:"lower",extraEncoding:f}),...d({partName:"ticks",mark:g,positionPrefix:"upper",extraEncoding:f}),...d({partName:"rule",mark:s({type:"rule",ariaRoleDescription:"errorbar"},void 0!==h?{size:h}:{}),positionPrefix:"lower",endPositionPrefix:"upper",extraEncoding:f})];return s(s({},l),{},{transform:r},m.length>1?{layer:m}:s({},m[0]))}function zu(e,t){const n=e.encoding;if(ju(n))return{orient:Eu(e,t),inputType:"raw"};const r=Lu(n),i=Iu(n),o=n.x,a=n.y;if(r){if(i)throw new Error("".concat(t," cannot be both type aggregated-upper-lower and aggregated-error"));const e=n.x2,r=n.y2;if(is(e)&&is(r))throw new Error("".concat(t," cannot have both x2 and y2"));if(is(e)){if(ns(o))return{orient:"horizontal",inputType:"aggregated-upper-lower"};throw new Error("Both x and x2 have to be quantitative in ".concat(t))}if(is(r)){if(ns(a))return{orient:"vertical",inputType:"aggregated-upper-lower"};throw new Error("Both y and y2 have to be quantitative in ".concat(t))}throw new Error("No ranged axis")}{const e=n.xError,r=n.xError2,i=n.yError,s=n.yError2;if(is(r)&&!is(e))throw new Error("".concat(t," cannot have xError2 without xError"));if(is(s)&&!is(i))throw new Error("".concat(t," cannot have yError2 without yError"));if(is(e)&&is(i))throw new Error("".concat(t," cannot have both xError and yError with both are quantiative"));if(is(e)){if(ns(o))return{orient:"horizontal",inputType:"aggregated-error"};throw new Error("All x, xError, and xError2 (if exist) have to be quantitative")}if(is(i)){if(ns(a))return{orient:"vertical",inputType:"aggregated-error"};throw new Error("All y, yError, and yError2 (if exist) have to be quantitative")}throw new Error("No ranged axis")}}function ju(e){return(is(e.x)||is(e.y))&&!is(e.x2)&&!is(e.y2)&&!is(e.xError)&&!is(e.xError2)&&!is(e.yError)&&!is(e.yError2)}function Lu(e){return is(e.x2)||is(e.y2)}function Iu(e){return is(e.xError)||is(e.xError2)||is(e.yError)||is(e.yError2)}function Uu(e,t,n){var r;const a=e.mark,s=e.encoding,u=e.selection,c=(e.projection,o(e,["mark","encoding","selection","projection"])),l=Ko(a)?a:{type:a};u&&ni(Wn(t));const f=zu(e,t),d=f.orient,h=f.inputType,p=Au(e,d,t),g=p.continuousAxisChannelDef,m=p.continuousAxisChannelDef2,v=p.continuousAxisChannelDefError,y=p.continuousAxisChannelDefError2,b=p.continuousAxis,x=qu(l,g,m,v,y,h,t,n),w=x.errorBarSpecificAggregate,_=x.postAggregateCalculates,A=x.tooltipSummary,k=x.tooltipTitleWithFieldName,E="x"===b?"x2":"y2",D="x"===b?"xError":"yError",C="x"===b?"xError2":"yError2",M=(s[b],s[E],s[D],s[C],lu(o(s,[b,E,D,C].map(i)),n)),F=M.bins,S=M.timeUnits,T=M.aggregate,O=M.groupby,N=M.encoding,P=[...T,...w],R="raw"!==h?[]:O,B=bu(A,g,N,k);return{transform:[...null!==(r=c.transform)&&void 0!==r?r:[],...F,...S,...0===P.length?[]:[{aggregate:P,groupby:R}],..._],groupby:R,continuousAxisChannelDef:g,continuousAxis:b,encodingWithoutContinuousAxis:N,ticksOrient:"vertical"===d?"horizontal":"vertical",markDef:l,outerSpec:c,tooltipEncoding:B}}function qu(e,t,n,r,i,o,a,s){let c=[],l=[];const f=t.field;let d,h=!1;if("raw"===o){const t=e.center?e.center:e.extent?"iqr"===e.extent?"median":"mean":s.errorbar.center,n=e.extent?e.extent:"mean"===t?"stderr":"iqr";if("median"===t!==("iqr"===n)&&ni(Vr(t,n,a)),"stderr"===n||"stdev"===n)c=[{op:n,field:f,as:"extent_"+f},{op:t,field:f,as:"center_"+f}],l=[{calculate:'datum["center_'.concat(f,'"] + datum["extent_').concat(f,'"]'),as:"upper_"+f},{calculate:'datum["center_'.concat(f,'"] - datum["extent_').concat(f,'"]'),as:"lower_"+f}],d=[{fieldPrefix:"center_",titlePrefix:xe(t)},{fieldPrefix:"upper_",titlePrefix:Wu(t,n,"+")},{fieldPrefix:"lower_",titlePrefix:Wu(t,n,"-")}],h=!0;else{let e,t,r;"ci"===n?(e="mean",t="ci0",r="ci1"):(e="median",t="q1",r="q3"),c=[{op:t,field:f,as:"lower_"+f},{op:r,field:f,as:"upper_"+f},{op:e,field:f,as:"center_"+f}],d=[{fieldPrefix:"upper_",titlePrefix:As({field:f,aggregate:r,type:"quantitative"},s,{allowDisabling:!1})},{fieldPrefix:"lower_",titlePrefix:As({field:f,aggregate:t,type:"quantitative"},s,{allowDisabling:!1})},{fieldPrefix:"center_",titlePrefix:As({field:f,aggregate:e,type:"quantitative"},s,{allowDisabling:!1})}]}}else{(e.center||e.extent)&&ni(Yr(e.center,e.extent)),"aggregated-upper-lower"===o?(d=[],l=[{calculate:'datum["'.concat(n.field,'"]'),as:"upper_"+f},{calculate:'datum["'.concat(f,'"]'),as:"lower_"+f}]):"aggregated-error"===o&&(d=[{fieldPrefix:"",titlePrefix:f}],l=[{calculate:'datum["'.concat(f,'"] + datum["').concat(r.field,'"]'),as:"upper_"+f}],i?l.push({calculate:'datum["'.concat(f,'"] + datum["').concat(i.field,'"]'),as:"lower_"+f}):l.push({calculate:'datum["'.concat(f,'"] - datum["').concat(r.field,'"]'),as:"lower_"+f}));var p,g=u(l);try{for(g.s();!(p=g.n()).done;){const e=p.value;d.push({fieldPrefix:e.as.substring(0,6),titlePrefix:Ee(Ee(e.calculate,'datum["',""),'"]',"")})}}catch(m){g.e(m)}finally{g.f()}}return{postAggregateCalculates:l,errorBarSpecificAggregate:c,tooltipSummary:d,tooltipTitleWithFieldName:h}}function Wu(e,t,n){return xe(e)+" "+n+" "+t}const Hu="errorband",Yu=["band","borders"],Vu=new su(Hu,Gu);function Gu(e,{config:t}){const n=Uu(e=s(s({},e),{},{encoding:hu(e.encoding,t)}),Hu,t),r=n.transform,i=n.continuousAxisChannelDef,o=n.continuousAxis,a=n.encodingWithoutContinuousAxis,u=n.markDef,c=n.outerSpec,l=n.tooltipEncoding,f=u,d=wu(f,o,i,a,t.errorband),h=void 0!==e.encoding.x&&void 0!==e.encoding.y;let p={type:h?"area":"rect"},g={type:h?"line":"rule"};const m=s(s({},f.interpolate?{interpolate:f.interpolate}:{}),f.tension&&f.interpolate?{tension:f.tension}:{});return h?(p=s(s(s({},p),m),{},{ariaRoleDescription:"errorband"}),g=s(s(s({},g),m),{},{aria:!1})):f.interpolate?ni($r("interpolate")):f.tension&&ni($r("tension")),s(s({},c),{},{transform:r,layer:[...d({partName:"band",mark:p,positionPrefix:"lower",endPositionPrefix:"upper",extraEncoding:l}),...d({partName:"borders",mark:g,positionPrefix:"lower",extraEncoding:l}),...d({partName:"borders",mark:g,positionPrefix:"upper",extraEncoding:l})]})}const $u={};function Xu(e,t,n){const r=new su(e,t);$u[e]={normalizer:r,parts:n}}function Ju(){return he($u)}Xu(Du,Su,Cu),Xu(Nu,Bu,Pu),Xu(Hu,Gu,Yu);const Qu=["gradientHorizontalMaxLength","gradientHorizontalMinLength","gradientVerticalMaxLength","gradientVerticalMinLength","unselectedOpacity"],Zu={titleAlign:"align",titleAnchor:"anchor",titleAngle:"angle",titleBaseline:"baseline",titleColor:"color",titleFont:"font",titleFontSize:"fontSize",titleFontStyle:"fontStyle",titleFontWeight:"fontWeight",titleLimit:"limit",titleLineHeight:"lineHeight",titleOrient:"orient",titlePadding:"offset"},Ku={labelAlign:"align",labelAnchor:"anchor",labelAngle:"angle",labelBaseline:"baseline",labelColor:"color",labelFont:"font",labelFontSize:"fontSize",labelFontStyle:"fontStyle",labelFontWeight:"fontWeight",labelLimit:"limit",labelLineHeight:"lineHeight",labelOrient:"orient",labelPadding:"offset"},ec=he(Zu),tc=he(Ku),nc=he({header:1,headerRow:1,headerColumn:1,headerFacet:1}),rc=["size","shape","fill","stroke","strokeDash","strokeWidth","opacity"],ic={gradientHorizontalMaxLength:200,gradientHorizontalMinLength:100,gradientVerticalMaxLength:200,gradientVerticalMinLength:64,unselectedOpacity:.35},oc={aria:1,clipHeight:1,columnPadding:1,columns:1,cornerRadius:1,description:1,direction:1,fillColor:1,format:1,formatType:1,gradientLength:1,gradientOpacity:1,gradientStrokeColor:1,gradientStrokeWidth:1,gradientThickness:1,gridAlign:1,labelAlign:1,labelBaseline:1,labelColor:1,labelFont:1,labelFontSize:1,labelFontStyle:1,labelFontWeight:1,labelLimit:1,labelOffset:1,labelOpacity:1,labelOverlap:1,labelPadding:1,labelSeparation:1,legendX:1,legendY:1,offset:1,orient:1,padding:1,rowPadding:1,strokeColor:1,symbolDash:1,symbolDashOffset:1,symbolFillColor:1,symbolLimit:1,symbolOffset:1,symbolOpacity:1,symbolSize:1,symbolStrokeColor:1,symbolStrokeWidth:1,symbolType:1,tickCount:1,tickMinStep:1,title:1,titleAlign:1,titleAnchor:1,titleBaseline:1,titleColor:1,titleFont:1,titleFontSize:1,titleFontStyle:1,titleFontWeight:1,titleLimit:1,titleLineHeight:1,titleOpacity:1,titleOrient:1,titlePadding:1,type:1,values:1,zindex:1};function ac(e){const t=[];var n,r=u(e||[]);try{for(r.s();!(n=r.n()).done;){const e=n.value,r=e.expr,i=e.bind,a=o(e,["expr","bind"]);if(i&&r){const e=s(s({},a),{},{bind:i,init:r});t.push(e)}else{const e=s(s(s({},a),r?{update:r}:{}),i?{bind:i}:{});t.push(e)}}}catch(i){r.e(i)}finally{r.f()}return t}const sc="_vgsid_",uc={single:{on:"click",fields:[sc],resolve:"global",empty:"all",clear:"dblclick"},multi:{on:"click",fields:[sc],toggle:"event.shiftKey",resolve:"global",empty:"all",clear:"dblclick"},interval:{on:"[mousedown, window:mouseup] > window:mousemove!",encodings:["x","y"],translate:"[mousedown, window:mouseup] > window:mousemove!",zoom:"wheel!",mark:{fill:"#333",fillOpacity:.125,stroke:"white"},resolve:"global",clear:"dblclick"}};function cc(e){return!!e&&("legend"===e||!!e.legend)}function lc(e){return cc(e)&&E(e)}function fc(e){return hc(e)||pc(e)||dc(e)}function dc(e){return"concat"in e}function hc(e){return"vconcat"in e}function pc(e){return"hconcat"in e}function gc(e){return"fit"===e||"fit-x"===e||"fit-y"===e}function mc(e){return e?"fit-".concat(dn(e)):"fit"}const vc=["background","padding"];function yc(e,t){const n={};var r,i=u(vc);try{for(i.s();!(r=i.n()).done;){const t=r.value;e&&void 0!==e[t]&&(n[t]=Ys(e[t]))}}catch(o){i.e(o)}finally{i.f()}return t&&(n.params=e.params),n}function bc(e){return E(e)&&void 0!==e.step}function xc(e){return e.view||e.width||e.height}const wc=20,_c=he({align:1,bounds:1,center:1,columns:1,spacing:1});function Ac(e,t,n){const r=n[t],i={},o=r.spacing,a=r.columns;void 0!==o&&(i.spacing=o),void 0!==a&&(qa(e)&&!Ia(e.facet)||dc(e))&&(i.columns=a),hc(e)&&(i.columns=1);var s,c=u(_c);try{for(c.s();!(s=c.n()).done;){const t=s.value;if(void 0!==e[t])if("spacing"===t){var l,f;const n=e[t];i[t]=R(n)?n:{row:null!==(l=n.row)&&void 0!==l?l:o,column:null!==(f=n.column)&&void 0!==f?f:o}}else i[t]=e[t]}}catch(d){c.e(d)}finally{c.f()}return i}function kc(e,t){var n;return null!==(n=e[t])&&void 0!==n?n:e["width"===t?"continuousWidth":"continuousHeight"]}function Ec(e,t){const n=Dc(e,t);return bc(n)?n.step:Cc}function Dc(e,t){var n;return Me(null!==(n=e[t])&&void 0!==n?n:e["width"===t?"discreteWidth":"discreteHeight"],{step:e.step})}const Cc=20,Mc={background:"white",padding:5,timeFormat:"%b %d, %Y",countTitle:"Count of Records",view:{continuousWidth:200,continuousHeight:200,step:Cc},mark:ra,arc:{},area:{},bar:sa,circle:{},geoshape:{},image:{},line:{},point:{},rect:ua,rule:{color:"black"},square:{},text:{color:"black"},tick:ca,trail:{},boxplot:{size:14,extent:1.5,box:{},median:{color:"white"},outliers:{},rule:{},ticks:null},errorbar:{center:"mean",rule:!0,ticks:!1},errorband:{band:{opacity:.3},borders:!1},scale:_o,projection:{},legend:ic,header:{titlePadding:10,labelPadding:10},headerColumn:{},headerRow:{},headerFacet:{},selection:uc,style:{},title:{},facet:{spacing:wc},concat:{spacing:wc}},Fc=["#4c78a8","#f58518","#e45756","#72b7b2","#54a24b","#eeca3b","#b279a2","#ff9da6","#9d755d","#bab0ac"],Sc={text:11,guideLabel:10,guideTitle:11,groupTitle:13,groupSubtitle:12},Tc={blue:Fc[0],orange:Fc[1],red:Fc[2],teal:Fc[3],green:Fc[4],yellow:Fc[5],purple:Fc[6],pink:Fc[7],brown:Fc[8],gray0:"#000",gray1:"#111",gray2:"#222",gray3:"#333",gray4:"#444",gray5:"#555",gray6:"#666",gray7:"#777",gray8:"#888",gray9:"#999",gray10:"#aaa",gray11:"#bbb",gray12:"#ccc",gray13:"#ddd",gray14:"#eee",gray15:"#fff"};function Oc(e={}){return{signals:[{name:"color",value:E(e)?s(s({},Tc),e):Tc}],mark:{color:{signal:"color.blue"}},rule:{color:{signal:"color.gray0"}},text:{color:{signal:"color.gray0"}},style:{"guide-label":{fill:{signal:"color.gray0"}},"guide-title":{fill:{signal:"color.gray0"}},"group-title":{fill:{signal:"color.gray0"}},"group-subtitle":{fill:{signal:"color.gray0"}},cell:{stroke:{signal:"color.gray8"}}},axis:{domainColor:{signal:"color.gray13"},gridColor:{signal:"color.gray8"},tickColor:{signal:"color.gray13"}},range:{category:[{signal:"color.blue"},{signal:"color.orange"},{signal:"color.red"},{signal:"color.teal"},{signal:"color.green"},{signal:"color.yellow"},{signal:"color.purple"},{signal:"color.pink"},{signal:"color.brown"},{signal:"color.grey8"}]}}}function Nc(e){return{signals:[{name:"fontSize",value:E(e)?s(s({},Sc),e):Sc}],text:{fontSize:{signal:"fontSize.text"}},style:{"guide-label":{fontSize:{signal:"fontSize.guideLabel"}},"guide-title":{fontSize:{signal:"fontSize.guideTitle"}},"group-title":{fontSize:{signal:"fontSize.groupTitle"}},"group-subtitle":{fontSize:{signal:"fontSize.groupSubtitle"}}}}}function Pc(e){return{text:{font:e},style:{"guide-label":{font:e},"guide-title":{font:e},"group-title":{font:e},"group-subtitle":{font:e}}}}function Rc(e){const t=he(e||{}),n={};var r,i=u(t);try{for(i.s();!(r=i.n()).done;){const t=r.value,i=e[t];n[t]=ze(i)?Hs(i):Ys(i)}}catch(o){i.e(o)}finally{i.f()}return n}function Bc(e){const t=he(e),n={};var r,i=u(t);try{for(i.s();!(r=i.n()).done;){const t=r.value;n[t]=Rc(e[t])}}catch(o){i.e(o)}finally{i.f()}return n}const zc=[...ia,...We,...nc,"background","padding","legend","lineBreak","scale","style","title","view"];function jc(e={}){const t=e.color,n=e.font,r=e.fontSize,i=o(e,["color","font","fontSize"]),a=C({},Mc,n?Pc(n):{},t?Oc(t):{},r?Nc(r):{},i||{}),s=Q(a,zc);for(var c=0,l=["background","lineBreak","padding"];c<l.length;c++){const e=l[c];a[e]&&(s[e]=Ys(a[e]))}var f,d=u(ia);try{for(d.s();!(f=d.n()).done;){const e=f.value;a[e]&&(s[e]=Po(a[e]))}}catch(v){d.e(v)}finally{d.f()}var h,p=u(We);try{for(p.s();!(h=p.n()).done;){const e=h.value;a[e]&&(s[e]=Rc(a[e]))}}catch(v){p.e(v)}finally{p.f()}var g,m=u(nc);try{for(m.s();!(g=m.n()).done;){const e=g.value;a[e]&&(s[e]=Po(a[e]))}}catch(v){m.e(v)}finally{m.f()}return a.legend&&(s.legend=Po(a.legend)),a.scale&&(s.scale=Po(a.scale)),a.style&&(s.style=Bc(a.style)),a.title&&(s.title=Po(a.title)),a.view&&(s.view=Po(a.view)),s}const Lc=["view",...Zo],Ic=["color","fontSize","background","padding","facet","concat","numberFormat","timeFormat","countTitle","header","axisQuantitative","axisTemporal","axisDiscrete","axisPoint","axisXBand","axisXPoint","axisXDiscrete","axisXQuantitative","axisXTemporal","axisYBand","axisYPoint","axisYDiscrete","axisYQuantitative","axisYTemporal","scale","selection","overlay"],Uc=s({view:["continuousWidth","continuousHeight","discreteWidth","discreteHeight","step"]},na);function qc(e){e=X(e);var t,n=u(Ic);try{for(n.s();!(t=n.n()).done;)delete e[t.value]}catch(m){n.e(m)}finally{n.f()}if(e.axis)for(const u in e.axis)ze(e.axis[u])&&delete e.axis[u];if(e.legend){var r,i=u(Qu);try{for(i.s();!(r=i.n()).done;){const t=r.value;delete e.legend[t]}}catch(m){i.e(m)}finally{i.f()}}if(e.mark){var o,a=u(ta);try{for(a.s();!(o=a.n()).done;){const t=o.value;delete e.mark[t]}}catch(m){a.e(m)}finally{a.f()}e.mark.tooltip&&E(e.mark.tooltip)&&delete e.mark.tooltip}e.params&&(e.signals=(e.signals||[]).concat(ac(e.params)),delete e.params);var s,c=u(Lc);try{for(c.s();!(s=c.n()).done;){const t=s.value;var l,f=u(ta);try{for(f.s();!(l=f.n()).done;){const n=l.value;delete e[t][n]}}catch(m){f.e(m)}finally{f.f()}const n=Uc[t];if(n){var d,h=u(n);try{for(h.s();!(d=h.n()).done;){const n=d.value;delete e[t][n]}}catch(m){h.e(m)}finally{h.f()}}Hc(e,t)}}catch(m){c.e(m)}finally{c.f()}var p,g=u(Ju());try{for(g.s();!(p=g.n()).done;)delete e[p.value]}catch(m){g.e(m)}finally{g.f()}Wc(e);for(const u in e)E(e[u])&&de(e[u])&&delete e[u];return de(e)?void 0:e}function Wc(e){const t=qs(e.title),n=t.titleMarkConfig,r=t.subtitleMarkConfig,i=t.subtitle;de(n)||(e.style["group-title"]=s(s({},e.style["group-title"]),n)),de(r)||(e.style["group-subtitle"]=s(s({},e.style["group-subtitle"]),r)),de(i)?delete e.title:e.title=i}function Hc(e,t,n,r){var i;const o=r?e[t][r]:e[t];"view"===t&&(n="cell");const a=s(s({},o),e.style[null!==(i=n)&&void 0!==i?i:t]);var u;de(a)||(e.style[null!==(u=n)&&void 0!==u?u:t]=a),r||delete e[t]}function Yc(e){return"layer"in e}function Vc(e){return"repeat"in e}function Gc(e){return!k(e.repeat)&&e.repeat.layer}class $c{map(e,t){return qa(e)?this.mapFacet(e,t):Vc(e)?this.mapRepeat(e,t):pc(e)?this.mapHConcat(e,t):hc(e)?this.mapVConcat(e,t):dc(e)?this.mapConcat(e,t):this.mapLayerOrUnit(e,t)}mapLayerOrUnit(e,t){if(Yc(e))return this.mapLayer(e,t);if(au(e))return this.mapUnit(e,t);throw new Error(Pn(e))}mapLayer(e,t){return s(s({},e),{},{layer:e.layer.map((e=>this.mapLayerOrUnit(e,t)))})}mapHConcat(e,t){return s(s({},e),{},{hconcat:e.hconcat.map((e=>this.map(e,t)))})}mapVConcat(e,t){return s(s({},e),{},{vconcat:e.vconcat.map((e=>this.map(e,t)))})}mapConcat(e,t){const n=e.concat,r=o(e,["concat"]);return s(s({},r),{},{concat:n.map((e=>this.map(e,t)))})}mapFacet(e,t){return s(s({},e),{},{spec:this.map(e.spec,t)})}mapRepeat(e,t){return s(s({},e),{},{spec:this.map(e.spec,t)})}}const Xc={zero:1,center:1,normalize:1};function Jc(e){return e in Xc}const Qc=new Set([Bo,jo,zo,Wo,Uo,Go,$o,Io,Ho,Yo]),Zc=new Set([jo,zo,Bo]);function Kc(e,t){const n="x"===t?"y":"radius",r=e[t],i=e[n];if(Ka(r)&&Ka(i))if("quantitative"===es(r)&&"quantitative"===es(i)){if(r.stack)return t;if(i.stack)return n;const e=Ka(r)&&!!r.aggregate;if(e!==(Ka(i)&&!!i.aggregate))return e?t:n;{var o,a;const e=null===(o=r.scale)||void 0===o?void 0:o.type,s=null===(a=i.scale)||void 0===a?void 0:a.type;if(e&&"linear"!==e)return n;if(s&&"linear"!==s)return t}}else{if("quantitative"===es(r))return t;if("quantitative"===es(i))return n}else{if("quantitative"===es(r))return t;if("quantitative"===es(i))return n}}function el(e){switch(e){case"x":return"y";case"y":return"x";case"theta":return"radius";case"radius":return"theta"}}function tl(e,t,n={}){const r=Ko(e)?e.type:e;if(!Qc.has(r))return null;const i=Kc(t,"x")||Kc(t,"theta");if(!i)return null;const o=t[i],a=Ka(o)?hs(o,{}):void 0;let s=el(i),c=t[s],l=Ka(c)?hs(c,{}):void 0;l===a&&(l=void 0,c=void 0,s=void 0);const f=an.reduce(((e,n)=>{if("tooltip"!==n&&uu(t,n)){const a=t[n];var r,i=u(S(a));try{for(i.s();!(r=i.n()).done;){const t=Ms(r.value);if(t.aggregate)continue;const i=hs(t,{});i&&i===l||e.push({channel:n,fieldDef:t})}}catch(o){i.e(o)}finally{i.f()}}return e}),[]);let d;if(void 0!==o.stack?d=P(o.stack)?o.stack?"zero":null:o.stack:f.length>0&&Zc.has(r)&&(d="zero"),!d||!Jc(d))return null;if(cu(t)&&0===f.length)return null;if(o.scale&&o.scale.type&&o.scale.type!==oo.LINEAR){if(n.disallowNonLinearStack)return null;ni(Ur(o.scale.type))}return is(t[tn(i)])?(void 0!==o.stack&&ni(Ir(i)),null):(Ka(o)&&o.aggregate&&!te(Ze,o.aggregate)&&ni(qr(o.aggregate)),{groupbyChannel:c?s:void 0,groupbyField:l,fieldChannel:i,impute:null!==o.impute&&Jo(r),stackBy:f,offset:d})}function nl(e){e.point,e.line;const t=o(e,["point","line"]);return he(t).length>1?t:t.type}function rl(e){for(var t=0,n=["line","area","rule","trail"];t<n.length;t++){const r=n[t];e[r]&&(e=s(s({},e),{},{[r]:Q(e[r],["point","line"])}))}return e}function il(e,t={},n){return"transparent"===e.point?{opacity:0}:e.point?E(e.point)?e.point:{}:void 0!==e.point?null:t.point||n.shape?E(t.point)?t.point:{}:void 0}function ol(e,t={}){return e.line?!0===e.line?{}:e.line:void 0!==e.line?null:t.line?!0===t.line?{}:t.line:void 0}class al{constructor(){Tn(this,"name","path-overlay")}hasMatchingType(e,t){if(au(e)){const n=e.mark,r=e.encoding,i=Ko(n)?n:{type:n};switch(i.type){case"line":case"rule":case"trail":return!!il(i,t[i.type],r);case"area":return!!il(i,t[i.type],r)||!!ol(i,t[i.type])}}return!1}run(e,t,n){const r=t.config,i=e.selection,a=e.projection,u=e.mark,c=e.encoding,l=o(e,["selection","projection","mark","encoding"]),f=hu(c,r),d=Ko(u)?u:{type:u},h=il(d,r[d.type],f),p="area"===d.type&&ol(d,r[d.type]),g=[s(s({},i?{selection:i}:{}),{},{mark:nl(s(s({},"area"===d.type&&void 0===d.opacity&&void 0===d.fillOpacity?{opacity:.7}:{}),d)),encoding:Q(f,["shape"])})],m=tl(d,f);let v=f;if(m){const e=m.fieldChannel,t=m.offset;v=s(s({},f),{},{[e]:s(s({},f[e]),t?{stack:t}:{})})}return p&&g.push(s(s({},a?{projection:a}:{}),{},{mark:s(s({type:"line"},J(d,["clip","interpolate","tension","tooltip"])),p),encoding:v})),h&&g.push(s(s({},a?{projection:a}:{}),{},{mark:s(s({type:"point",opacity:1,filled:!0},J(d,["clip","tooltip"])),h),encoding:v})),n(s(s({},l),{},{layer:g}),s(s({},t),{},{config:rl(r)}))}}class sl{constructor(){Tn(this,"name","RangeStep")}hasMatchingType(e){if(au(e)&&e.encoding){var t,n=u(un);try{for(n.s();!(t=n.n()).done;){const n=t.value,i=e.encoding[n];var r;if(i&&is(i)&&(null===i||void 0===i||null===(r=i.scale)||void 0===r?void 0:r.rangeStep))return!0}}catch(i){n.e(i)}finally{n.f()}}return!1}run(e){const t={};let n=s({},e.encoding);var r,i=u(un);try{for(i.s();!(r=i.n()).done;){const e=r.value,i=nn(e),u=n[e];var a;if(u&&is(u)&&(null===u||void 0===u||null===(a=u.scale)||void 0===a?void 0:a.rangeStep)){const r=u.scale,a=o(u,["scale"]),c=(r.rangeStep,o(r,["rangeStep"]));t[i]={step:r.rangeStep},ni(_r),n=s(s({},n),{},{[e]:s(s({},a),de(c)?{}:{scale:c})})}}}catch(c){i.e(c)}finally{i.f()}return s(s(s({},t),e),{},{encoding:n})}}function ul(e,t){return t?Ia(e)?pl(e,t):fl(e,t):e}function cl(e,t){return t?pl(e,t):e}function ll(e,t,n){const r=t[e];return Ha(r)?r.repeat in n?s(s({},t),{},{[e]:n[r.repeat]}):void ni(Jn(r.repeat)):t}function fl(e,t){if(void 0!==(e=ll("field",e,t))){if(null===e)return null;if(Va(e)&&ja(e.sort)){const n=ll("field",e.sort,t);e=s(s({},e),n?{sort:n}:{})}return e}}function dl(e,t){if(Ka(e))return fl(e,t);{const n=ll("datum",e,t);return n===e||n.type||(n.type="nominal"),n}}function hl(e,t){if(!is(e)){if(Qa(e)){const n=dl(e.condition,t);return n?s(s({},e),{},{condition:n}):(e.condition,o(e,["condition"]))}return e}{const n=dl(e,t);if(n)return n;if(Xa(e))return{condition:e.condition}}}function pl(e,t){const n={};for(const r in e)if(N(e,r)){const i=e[r];if(k(i))n[r]=i.map((e=>hl(e,t))).filter((e=>e));else{const e=hl(i,t);void 0!==e&&(n[r]=e)}}return n}class gl{constructor(){Tn(this,"name","RuleForRangedLine")}hasMatchingType(e){if(au(e)){const i=e.encoding;if("line"===e.mark){var t,n=u(Qt);try{for(n.s();!(t=n.n()).done;){const e=t.value,n=i[Kt(e)];if(i[e]&&(Ka(n)&&!Cn(n.bin)||ts(n)))return!0}}catch(r){n.e(r)}finally{n.f()}}}return!1}run(e,t,n){const r=e.encoding;return ni(xr(!!r.x2,!!r.y2)),n(s(s({},e),{},{mark:"rule"}),t)}}class ml extends $c{constructor(...e){super(...e),Tn(this,"nonFacetUnitNormalizers",[Mu,Ru,Vu,new al,new gl,new sl])}map(e,t){if(au(e)){const n=uu(e.encoding,et),r=uu(e.encoding,tt),i=uu(e.encoding,nt);if(n||r||i)return this.mapFacetedUnit(e,t)}return super.map(e,t)}mapUnit(e,t){const n=t.parentEncoding,r=t.parentProjection,i=cl(e.encoding,t.repeater),o=s(s({},e),i?{encoding:i}:{});if(n||r)return this.mapUnitWithParentEncodingOrProjection(o,t);const a=this.mapLayerOrUnit.bind(this);var c,l=u(this.nonFacetUnitNormalizers);try{for(l.s();!(c=l.n()).done;){const e=c.value;if(e.hasMatchingType(o,t.config))return e.run(o,t,a)}}catch(f){l.e(f)}finally{l.f()}return o}mapRepeat(e,t){return Gc(e)?this.mapLayerRepeat(e,t):this.mapNonLayerRepeat(e,t)}mapLayerRepeat(e,t){const n=e.repeat,r=e.spec,i=o(e,["repeat","spec"]),a=n.row,u=n.column,c=n.layer,l=t.repeater,f=void 0===l?{}:l,d=t.repeaterPrefix,h=void 0===d?"":d;return a||u?this.mapRepeat(s(s({},e),{},{repeat:s(s({},a?{row:a}:{}),u?{column:u}:{}),spec:{repeat:{layer:c},spec:r}}),t):s(s({},i),{},{layer:c.map((e=>{const n=s(s({},f),{},{layer:e}),i=(r.name||"")+h+"child__layer_".concat(ve(e)),o=this.mapLayerOrUnit(r,s(s({},t),{},{repeater:n,repeaterPrefix:i}));return o.name=i,o}))})}mapNonLayerRepeat(e,t){var n;const r=e,i=r.repeat,a=r.spec,c=r.data,l=o(r,["repeat","spec","data"]);!k(i)&&e.columns&&(e=Q(e,["columns"]),ni(Qn("repeat")));const f=[],d=t.repeater,h=void 0===d?{}:d,p=t.repeaterPrefix,g=void 0===p?"":p,m=!k(i)&&i.row||[h?h.row:null],v=!k(i)&&i.column||[h?h.column:null],y=k(i)&&i||[h?h.repeat:null];var b,x=u(y);try{for(x.s();!(b=x.n()).done;){const e=b.value;var w,_=u(m);try{for(_.s();!(w=_.n()).done;){const n=w.value;var A,E=u(v);try{for(E.s();!(A=E.n()).done;){const r=A.value,o={repeat:e,row:n,column:r,layer:h.layer},u=(a.name||"")+g+"child__"+(k(i)?"".concat(ve(e)):(i.row?"row_".concat(ve(n)):"")+(i.column?"column_".concat(ve(r)):"")),c=this.map(a,s(s({},t),{},{repeater:o,repeaterPrefix:u}));c.name=u,f.push(Q(c,["data"]))}}catch(C){E.e(C)}finally{E.f()}}}catch(C){_.e(C)}finally{_.f()}}}catch(C){x.e(C)}finally{x.f()}const D=k(i)?e.columns:i.column?i.column.length:1;return s(s({data:null!==(n=a.data)&&void 0!==n?n:c,align:"all"},l),{},{columns:D,concat:f})}mapFacet(e,t){return Ia(e.facet)&&e.columns&&(e=Q(e,["columns"]),ni(Qn("facet"))),super.mapFacet(e,t)}mapUnitWithParentEncodingOrProjection(e,t){const n=e.encoding,r=e.projection,i=t.parentEncoding,o=t.parentProjection,a=t.config,u=yl({parentProjection:o,projection:r}),c=vl({parentEncoding:i,encoding:cl(n,t.repeater)});return this.mapUnit(s(s(s({},e),u?{projection:u}:{}),c?{encoding:c}:{}),{config:a})}mapFacetedUnit(e,t){const n=e.encoding,r=n.row,i=n.column,a=n.facet,u=o(n,["row","column","facet"]),c=e.mark,l=e.width,f=e.projection,d=e.height,h=e.view,p=e.selection,g=(e.encoding,o(e,["mark","width","projection","height","view","selection","encoding"])),m=this.getFacetMappingAndLayout({row:r,column:i,facet:a},t),v=m.facetMapping,y=m.layout,b=cl(u,t.repeater);return this.mapFacet(s(s(s({},g),y),{},{facet:v,spec:s(s(s(s(s({},l?{width:l}:{}),d?{height:d}:{}),h?{view:h}:{}),f?{projection:f}:{}),{},{mark:c,encoding:b},p?{selection:p}:{})}),t)}getFacetMappingAndLayout(e,t){const n=e.row,r=e.column,i=e.facet;if(n||r){i&&ni(vr([...n?[et]:[],...r?[tt]:[]]));const t={},s={};for(var a=0,u=[et,tt];a<u.length;a++){const n=u[a],r=e[n];if(r){r.align,r.center,r.spacing,r.columns;const e=o(r,["align","center","spacing","columns"]);t[n]=e;for(var c=0,l=["align","center","spacing"];c<l.length;c++){const e=l[c];var f;void 0!==r[e]&&(s[e]=null!==(f=s[e])&&void 0!==f?f:{},s[e][n]=r[e])}}}return{facetMapping:t,layout:s}}{const e=i.align,n=i.center,r=i.spacing,a=i.columns;return{facetMapping:ul(o(i,["align","center","spacing","columns"]),t.repeater),layout:s(s(s(s({},e?{align:e}:{}),n?{center:n}:{}),r?{spacing:r}:{}),a?{columns:a}:{})}}}mapLayer(e,t){let n=t.parentEncoding,r=t.parentProjection,i=o(t,["parentEncoding","parentProjection"]);const a=e.encoding,u=e.projection,c=o(e,["encoding","projection"]),l=s(s({},i),{},{parentEncoding:vl({parentEncoding:n,encoding:a,layer:!0}),parentProjection:yl({parentProjection:r,projection:u})});return super.mapLayer(c,l)}}function vl({parentEncoding:e,encoding:t={},layer:n}){let r={};if(e){const c=new Set([...he(e),...he(t)]);var i,o=u(c);try{for(o.s();!(i=o.n()).done;){const o=i.value,a=t[o],u=e[o];if(is(a)){const e=s(s({},u),a);r[o]=e}else Qa(a)?r[o]=s(s({},a),{},{condition:s(s({},u),a.condition)}):a||null===a?r[o]=a:(n||as(u)||Fi(u)||is(u)||k(u))&&(r[o]=u)}}catch(a){o.e(a)}finally{o.f()}}else r=t;return!r||de(r)?void 0:r}function yl(e){const t=e.parentProjection,n=e.projection;return t&&n&&ni(or({parentProjection:t,projection:n})),null!==n&&void 0!==n?n:t}function bl(e,t){void 0===t&&(t=jc(e.config));const n=wl(e,t),r=Al(n,{width:e.width,height:e.height,autosize:e.autosize},t);return s(s({},n),r?{autosize:r}:{})}const xl=new ml;function wl(e,t={}){return xl.map(e,{config:t})}function _l(e){return B(e)?{type:e}:null!==e&&void 0!==e?e:{}}function Al(e,t,n){let r=t.width,i=t.height;const o=au(e)||Yc(e),a={};o?"container"==r&&"container"==i?(a.type="fit",a.contains="padding"):"container"==r?(a.type="fit-x",a.contains="padding"):"container"==i&&(a.type="fit-y",a.contains="padding"):("container"==r&&(ni(Bn("width")),r=void 0),"container"==i&&(ni(Bn("height")),i=void 0));const u=s(s(s({type:"pad"},a),n?_l(n.autosize):{}),_l(e.autosize));if("fit"!==u.type||o||(ni(Rn),u.type="pad"),"container"==r&&"fit"!=u.type&&"fit-x"!=u.type&&ni(zn("width")),"container"==i&&"fit"!=u.type&&"fit-y"!=u.type&&ni(zn("height")),!$(u,{type:"pad"}))return u}class kl{constructor(e={},t={}){this.explicit=e,this.implicit=t}clone(){return new kl(X(this.explicit),X(this.implicit))}combine(){return s(s({},this.explicit),this.implicit)}get(e){return Me(this.explicit[e],this.implicit[e])}getWithExplicit(e){return void 0!==this.explicit[e]?{explicit:!0,value:this.explicit[e]}:void 0!==this.implicit[e]?{explicit:!1,value:this.implicit[e]}:{explicit:!1,value:void 0}}setWithExplicit(e,t){void 0!==t.value&&this.set(e,t.value,t.explicit)}set(e,t,n){return delete this[n?"implicit":"explicit"][e],this[n?"explicit":"implicit"][e]=t,this}copyKeyFromSplit(e,t){void 0!==t.explicit[e]?this.set(e,t.explicit[e],!0):void 0!==t.implicit[e]&&this.set(e,t.implicit[e],!1)}copyKeyFromObject(e,t){void 0!==t[e]&&this.set(e,t[e],!0)}copyAll(e){var t,n=u(he(e.combine()));try{for(n.s();!(t=n.n()).done;){const n=t.value,r=e.getWithExplicit(n);this.setWithExplicit(n,r)}}catch(r){n.e(r)}finally{n.f()}}}function El(e){return{explicit:!0,value:e}}function Dl(e){return{explicit:!1,value:e}}function Cl(e){return(t,n,r,i)=>{const o=e(t.value,n.value);return o>0?t:o<0?n:Ml(t,n,r,i)}}function Ml(e,t,n,r){return e.explicit&&t.explicit&&ni(Or(n,r,e.value,t.value)),e}function Fl(e,t,n,r,i=Ml){return void 0===e||void 0===e.value?t:e.explicit&&!t.explicit?e:t.explicit&&!e.explicit?t:$(e.value,t.value)?e:i(e,t,n,r)}class Sl extends kl{constructor(e={},t={},n=!1){super(e,t),this.explicit=e,this.implicit=t,this.parseNothing=n}clone(){const e=super.clone();return e.parseNothing=this.parseNothing,e}}function Tl(e){return"url"in e}function Ol(e){return"values"in e}function Nl(e){return"name"in e&&!Tl(e)&&!Ol(e)&&!Pl(e)}function Pl(e){return e&&(Rl(e)||Bl(e)||zl(e))}function Rl(e){return"sequence"in e}function Bl(e){return"sphere"in e}function zl(e){return"graticule"in e}let jl;function Ll(e){return"filter"in e}function Il(e){return void 0!==(null===e||void 0===e?void 0:e.stop)}function Ul(e){return"lookup"in e}function ql(e){return"data"in e}function Wl(e){return"selection"in e}function Hl(e){return"pivot"in e}function Yl(e){return"density"in e}function Vl(e){return"quantile"in e}function Gl(e){return"regression"in e}function $l(e){return"loess"in e}function Xl(e){return"sample"in e}function Jl(e){return"window"in e}function Ql(e){return"joinaggregate"in e}function Zl(e){return"flatten"in e}function Kl(e){return"calculate"in e}function ef(e){return"bin"in e}function tf(e){return"impute"in e}function nf(e){return"timeUnit"in e}function rf(e){return"aggregate"in e}function of(e){return"stack"in e}function af(e){return"fold"in e}function sf(e){return e.map((e=>Ll(e)?{filter:G(e.filter,Qi)}:e))}!function(e){e[e.Raw=0]="Raw",e[e.Main=1]="Main",e[e.Row=2]="Row",e[e.Column=3]="Column",e[e.Lookup=4]="Lookup"}(jl||(jl={}));const uf="view",cf="[",lf="]",ff="{",df="}",hf=":",pf=",",gf="@",mf=">",vf=/[[\]{}]/,yf={"*":1,arc:1,area:1,group:1,image:1,line:1,path:1,rect:1,rule:1,shape:1,symbol:1,text:1,trail:1};let bf,xf;function wf(e,t,n){return bf=t||uf,xf=n||yf,kf(e.trim()).map(Ef)}function _f(e){return xf[e]}function Af(e,t,n,r,i){const o=e.length;let a,s=0;for(;t<o;++t){if(a=e[t],!s&&a===n)return t;i&&i.indexOf(a)>=0?--s:r&&r.indexOf(a)>=0&&++s}return t}function kf(e){const t=[],n=e.length;let r=0,i=0;for(;i<n;)i=Af(e,i,pf,cf+ff,lf+df),t.push(e.substring(r,i).trim()),r=++i;if(0===t.length)throw"Empty event selector: "+e;return t}function Ef(e){return"["===e[0]?Df(e):Cf(e)}function Df(e){const t=e.length;let n,r=1;if(r=Af(e,r,lf,cf,lf),r===t)throw"Empty between selector: "+e;if(n=kf(e.substring(1,r)),2!==n.length)throw"Between selector must have two elements: "+e;if((e=e.slice(r+1).trim())[0]!==mf)throw"Expected '>' after between selector: "+e;n=n.map(Ef);const i=Ef(e.slice(1).trim());return i.between?{between:n,stream:i}:(i.between=n,i)}function Cf(e){const t={source:bf},n=[];let r,i,o=[0,0],a=0,s=0,u=e.length,c=0;if(e[u-1]===df){if(c=e.lastIndexOf(ff),!(c>=0))throw"Unmatched right brace: "+e;try{o=Mf(e.substring(c+1,u-1))}catch(l){throw"Invalid throttle specification: "+e}u=(e=e.slice(0,c).trim()).length,c=0}if(!u)throw e;if(e[0]===gf&&(a=++c),r=Af(e,c,hf),r<u&&(n.push(e.substring(s,r).trim()),s=c=++r),c=Af(e,c,cf),c===u)n.push(e.substring(s,u).trim());else if(n.push(e.substring(s,c).trim()),i=[],s=++c,s===u)throw"Unmatched left bracket: "+e;for(;c<u;){if(c=Af(e,c,lf),c===u)throw"Unmatched left bracket: "+e;if(i.push(e.substring(s,c).trim()),c<u-1&&e[++c]!==cf)throw"Expected left bracket: "+e;s=++c}if(!(u=n.length)||vf.test(n[u-1]))throw"Invalid event selector: "+e;return u>1?(t.type=n[1],a?t.markname=n[0].slice(1):_f(n[0])?t.marktype=n[0]:t.source=n[0]):t.type=n[0],"!"===t.type.slice(-1)&&(t.consume=!0,t.type=t.type.slice(0,-1)),null!=i&&(t.filter=i),o[0]&&(t.throttle=o[0]),o[1]&&(t.debounce=o[1]),t}function Mf(e){const t=e.split(pf);if(!e.length||t.length>2)throw e;return t.map((t=>{const n=+t;if(n!==n)throw e;return n}))}function Ff(e,t,n,r){const i=Xa(t)&&t.condition,o=r(t);return i?{[n]:[...S(i).map((t=>{const n=r(t),i=Wa(t)?Ag(e,t.selection):Dg(e,t.test);return s({test:i},n)})),...void 0!==o?[o]:[]]}:void 0!==o?{[n]:o}:{}}function Sf(e,t="text"){const n=e.encoding[t];return Ff(e,n,t,(t=>Tf(t,e.config)))}function Tf(e,t,n="datum"){if(e){if(as(e))return Gs(e.value);if(is(e)){const r=Ds(e);return Aa({fieldOrDatumDef:e,format:r.format,formatType:r.formatType,expr:n,config:t})}}}function Of(e,t={}){const n=e.encoding,r=e.markDef,i=e.config,o=e.stack,a=n.tooltip;if(k(a))return{tooltip:Pf({tooltip:a},o,i,t)};{const s=t.reactiveGeom?"datum.datum":"datum";return Ff(e,a,"tooltip",(e=>{const a=Tf(e,i,s);if(a)return a;if(null===e)return;let u=Zs("tooltip",r,i);return!0===u&&(u={content:"encoding"}),B(u)?{value:u}:E(u)?Fi(u)?u:"encoding"===u.content?Pf(n,o,i,t):{signal:s}:void 0}))}}function Nf(e,t,n,{reactiveGeom:r}={}){const i={},o=r?"datum.datum":"datum",a=[];function u(r,u){var c;const l=Kt(u),f=os(r)?r:s(s({},r),{},{type:e[l].type}),d=S(f.title||Es(f,n)).join(", ");let h;if(cn(u)){const r="x"===u?"x2":"y2",a=Ms(e[r]);if(Cn(f.bin)&&a){const e=hs(f,{expr:o}),t=hs(a,{expr:o}),s=Ds(f);h=Oa(e,t,s.format,s.formatType,n),i[r]=!0}else if(t&&t.fieldChannel===u&&"normalize"===t.offset){const e=Ds(f);h=Aa({fieldOrDatumDef:f,format:e.format,formatType:e.formatType,expr:o,config:n,normalizeStack:!0}).signal}}h=null!==(c=h)&&void 0!==c?c:Tf(f,n,o).signal,a.push({channel:u,key:d,value:h})}gu(e,((e,t)=>{Ka(e)?u(e,t):Ja(e)&&u(e.condition,t)}));const c={};for(var l=0,f=a;l<f.length;l++){const e=f[l],t=e.channel,n=e.key,r=e.value;i[t]||c[n]||(c[n]=r)}return c}function Pf(e,t,n,{reactiveGeom:r}={}){const i=Nf(e,t,n,{reactiveGeom:r}),o=ge(i).map((([e,t])=>'"'.concat(e,'": ').concat(t)));return o.length>0?{signal:"{".concat(o.join(", "),"}")}:void 0}function Rf(e){const t=Zs("aria",e.markDef,e.config);return!1===t?{}:s(s(s({},t?{aria:t}:{}),Bf(e)),zf(e))}function Bf(e){const t=e.mark,n=e.markDef,r=e.config;if(!1===r.aria)return{};const i=Zs("ariaRoleDescription",n,r);return null!=i?{ariaRoleDescription:{value:i}}:t in Ri?{}:{ariaRoleDescription:{value:t}}}function zf(e){const t=e.encoding,n=e.markDef,r=e.config,i=e.stack,o=t.description;if(o)return Ff(e,o,"description",(t=>Tf(t,e.config)));const a=Zs("description",n,r);if(null!=a)return{description:Gs(a)};if(!1===r.aria)return{};const s=Nf(t,i,r);return de(s)?void 0:{description:{signal:ge(s).map((([e,t],n)=>'"'.concat(n>0?"; ":"").concat(e,': " + (').concat(t,")"))).join(" + ")}}}function jf(e,t,n={}){const r=t.markDef,i=t.encoding,o=t.config,a=n.vgChannel;let s=n.defaultRef,u=n.defaultValue;var c;void 0===s&&(u=null!==(c=u)&&void 0!==c?c:Zs(e,r,o,{vgChannel:a,ignoreVgConfig:!0}),void 0!==u&&(s=Gs(u)));const l=i[e];return Ff(t,l,null!==a&&void 0!==a?a:e,(n=>ya({channel:e,channelDef:n,markDef:r,config:o,scaleName:t.scaleName(e),scale:t.getScaleComponent(e),stack:null,defaultRef:s})))}function Lf(e,t={filled:void 0}){var n,r,i,o;const a=e.markDef,u=e.encoding,c=e.config,l=a.type,f=null!==(n=t.filled)&&void 0!==n?n:Zs("filled",a,c),d=te(["bar","point","circle","square","geoshape"],l)?"transparent":void 0,h=null!==(r=null!==(i=Zs(!0===f?"color":void 0,a,c,{vgChannel:"fill"}))&&void 0!==i?i:c.mark[!0===f&&"color"])&&void 0!==r?r:d,p=null!==(o=Zs(!1===f?"color":void 0,a,c,{vgChannel:"stroke"}))&&void 0!==o?o:c.mark[!1===f&&"color"],g=f?"fill":"stroke",m=s(s({},h?{fill:Gs(h)}:{}),p?{stroke:Gs(p)}:{});return a.color&&(f?a.fill:a.stroke)&&ni(fr("property",{fill:"fill"in a,stroke:"stroke"in a})),s(s(s(s({},m),jf("color",e,{vgChannel:g,defaultValue:f?h:p})),jf("fill",e,{defaultValue:u.fill?h:void 0})),jf("stroke",e,{defaultValue:u.stroke?p:void 0}))}function If(e){const t=e.encoding,n=e.mark,r=t.order;return!Jo(n)&&as(r)?Ff(e,r,"zindex",(e=>Gs(e.value))):{}}function Uf(e,t){const n=t[rn(e)];if(n)return n}function qf(e,t,{defaultPos:n,vgChannel:r,isMidPoint:i}){const o=t.encoding,a=t.markDef,s=t.config,u=t.stack,c=o[e],l=o[tn(e)],f=t.scaleName(e),d=t.getScaleComponent(e),h=Uf(e,a),p=Hf({model:t,defaultPos:n,channel:e,scaleName:f,scale:d}),g=!c&&cn(e)&&(o.latitude||o.longitude)?{field:t.getName(e)}:Wf({channel:e,channelDef:c,channel2Def:l,markDef:a,config:s,isMidPoint:i,scaleName:f,scale:d,stack:u,offset:h,defaultRef:p});return g?{[r||e]:g}:void 0}function Wf(e){const t=e.channel,n=e.channelDef,r=e.isMidPoint,i=e.scaleName,o=e.stack,a=e.offset,s=e.markDef,u=e.config;if(is(n)&&o&&t===o.fieldChannel){if(Ka(n)){const e=Ga({channel:t,fieldDef:n,isMidPoint:r,markDef:s,stack:o,config:u});if(void 0!==e)return va({scaleName:i,fieldOrDatumDef:n,startSuffix:"start",band:e,offset:a})}return ma(n,i,{suffix:"end"},{offset:a})}return fa(e)}function Hf({model:e,defaultPos:t,channel:n,scaleName:r,scale:i}){const o=e.markDef,a=e.config;return()=>{const u=Kt(n),c=en(n),l=Zs(n,o,a,{vgChannel:c});if(void 0!==l)return ba(n,l);switch(t){case"zeroOrMin":case"zeroOrMax":if(r){const e=i.get("type");if(te([oo.LOG,oo.TIME,oo.UTC],e));else if(i.domainDefinitelyIncludesZero())return{scale:r,value:0}}if("zeroOrMin"===t)return"y"===u?{field:{group:"height"}}:{value:0};switch(u){case"radius":return{signal:"min(".concat(e.width.signal,",").concat(e.height.signal,")/2")};case"theta":return{signal:"2*PI"};case"x":return{field:{group:"width"}};case"y":return{value:0}}break;case"mid":{const t=e[nn(n)];return s(s({},t),{},{mult:.5})}}}}const Yf={left:"x",center:"xc",right:"x2"},Vf={top:"y",middle:"yc",bottom:"y2"};function Gf(e,t,n,r="middle"){if("radius"===e||"theta"===e)return en(e);const i="x"===e?"align":"baseline",o=Zs(i,t,n);let a;return Fi(o)?(ni(br(i)),a=void 0):a=o,"x"===e?Yf[a||("top"===r?"left":"center")]:Vf[a||r]}function $f(e,t,{defaultPos:n,defaultPos2:r,range:i}){return i?Xf(e,t,{defaultPos:n,defaultPos2:r}):qf(e,t,{defaultPos:n})}function Xf(e,t,{defaultPos:n,defaultPos2:r}){const i=t.markDef,o=t.config,a=tn(e),u=nn(e),c=Jf(t,r,a),l=c[u]?Gf(e,i,o):en(e);return s(s({},qf(e,t,{defaultPos:n,vgChannel:l})),c)}function Jf(e,t,n){const r=e.encoding,i=e.mark,o=e.markDef,a=e.stack,s=e.config,u=Kt(n),c=nn(n),l=en(n),f=r[u],d=e.scaleName(u),h=e.getScaleComponent(u),p=Uf(n in r||n in o?n:u,e.markDef);if(!f&&("x2"===n||"y2"===n)&&(r.latitude||r.longitude))return{[l]:{field:e.getName(n)}};const g=Qf({channel:n,channelDef:f,channel2Def:r[n],markDef:o,config:s,scaleName:d,scale:h,stack:a,offset:p,defaultRef:void 0});return void 0!==g?{[l]:g}:Zf(n,o)||Zf(n,{[n]:eu(n,o,s.style),[c]:eu(c,o,s.style)})||Zf(n,s[i])||Zf(n,s.mark)||{[l]:Hf({model:e,defaultPos:t,channel:n,scaleName:d,scale:h})()}}function Qf({channel:e,channelDef:t,channel2Def:n,markDef:r,config:i,scaleName:o,scale:a,stack:s,offset:u,defaultRef:c}){return is(t)&&s&&e.charAt(0)===s.fieldChannel.charAt(0)?ma(t,o,{suffix:"start"},{offset:u}):fa({channel:e,channelDef:n,scaleName:o,scale:a,stack:s,markDef:r,config:i,offset:u,defaultRef:c})}function Zf(e,t){const n=nn(e),r=en(e);return void 0!==t[r]?{[r]:ba(e,t[r])}:void 0!==t[e]?{[r]:ba(e,t[e])}:t[n]?{[n]:ba(e,t[n])}:void 0}function Kf(e,t,n){var r,i;const o=e.config,a=e.encoding,s=e.markDef,u=e.stack,c=tn(t),l=nn(t),f=a[t],d=a[c],h=e.getScaleComponent(t),p=h?h.get("type"):void 0,g=e.scaleName(t),m=s.orient,v=null!==(r=null!==(i=a[l])&&void 0!==i?i:a.size)&&void 0!==r?r:Zs("size",s,o,{vgChannel:l}),y="bar"===n&&("x"===t?"vertical"===m:"horizontal"===m);if(Ka(f)&&(Dn(f.bin)||Cn(f.bin)||f.timeUnit&&!d)&&!v&&!yo(p)){var b,x;const n=Ga({channel:t,fieldDef:f,stack:u,markDef:s,config:o}),r=null===(b=e.component.axes[t])||void 0===b?void 0:b[0];return rd({fieldDef:f,fieldDef2:d,channel:t,markDef:s,scaleName:g,band:n,axisTranslate:null!==(x=null===r||void 0===r?void 0:r.get("translate"))&&void 0!==x?x:.5,spacing:cn(t)?Zs("binSpacing",s,o):void 0,reverse:h.get("reverse"),config:o})}return(is(f)&&yo(p)||y)&&!d?td(n,f,t,e):Xf(t,e,{defaultPos:"zeroOrMax",defaultPos2:"zeroOrMin"})}function ed(e,t,n,r,i,o){if(r){const t=r.get("type");if("point"===t||"band"===t){if(void 0!==i[e].discreteBandSize)return{value:i[e].discreteBandSize};if(t===oo.POINT){const e=r.get("range");return Si(e)&&R(e.step)?{value:e.step-2}:{value:Cc-2}}return{scale:n,band:o}}return{value:i[e].continuousBandSize}}const a=Ec(i.view,t),s=Me(i[e].discreteBandSize,a-2);return void 0!==s?{value:s}:void 0}function td(e,t,n,r){var i;const o=r.markDef,a=r.encoding,u=r.config,c=r.stack,l=o.orient,f=r.scaleName(n),d=r.getScaleComponent(n),h=nn(n),p=tn(n),g="horizontal"===l&&"y"===n||"vertical"===l&&"x"===n,m=Zs(g?"size":h,o,u,{vgChannel:h});let v;(a.size||void 0!==m)&&(g?v=jf("size",r,{vgChannel:h,defaultValue:m}):ni(Cr(o.type)));const y=null!==(i=is(t)?Ga({channel:n,fieldDef:t,markDef:o,stack:c,config:u}):void 0)&&void 0!==i?i:1;v=v||{[h]:ed(e,h,f,d,u,y)};const b="band"!==(null===d||void 0===d?void 0:d.get("type"))||!("band"in v[h]),x=Gf(n,o,u,b?"middle":"top"),w=Uf(n,o),_=fa({channel:n,channelDef:t,markDef:o,config:u,scaleName:f,scale:d,stack:c,offset:w,defaultRef:Hf({model:r,defaultPos:"mid",channel:n,scaleName:f,scale:d}),band:b?.5:(1-y)/2});if(h)return s({[x]:_},v);{const e=en(p),t=v[h],n=w?s(s({},t),{},{offset:w}):t;return{[x]:_,[e]:k(_)?[_[0],s(s({},_[1]),{},{offset:n})]:s(s({},_),{},{offset:n})}}}function nd(e,t,n,r,i){if(Bt(e))return 0;const o="x"===e||"y2"===e?-t/2:t/2;if(Fi(n)||Fi(i)||Fi(r)){const e=Xs(n),t=Xs(i),a=Xs(r);return{signal:(a?"".concat(a," + "):"")+(e?"(".concat(e," ? -1 : 1) * "):"")+(t?"(".concat(t," + ").concat(o,")"):o)}}return i=i||0,r+(n?-i-o:+i+o)}function rd({fieldDef:e,fieldDef2:t,channel:n,band:r,scaleName:i,markDef:o,spacing:a=0,axisTranslate:s,reverse:u,config:c}){const l=tn(n),f=en(n),d=en(l),h=Uf(n,o);if(Dn(e.bin)||e.timeUnit)return{[d]:id({channel:n,fieldDef:e,scaleName:i,markDef:o,band:(1-r)/2,offset:nd(l,a,u,s,h),config:c}),[f]:id({channel:n,fieldDef:e,scaleName:i,markDef:o,band:1-(1-r)/2,offset:nd(n,a,u,s,h),config:c})};if(Cn(e.bin)){const r=ma(e,i,{},{offset:nd(l,a,u,s,h)});if(Ka(t))return{[d]:r,[f]:ma(t,i,{},{offset:nd(n,a,u,s,h)})};if(Mn(e.bin)&&e.bin.step)return{[d]:r,[f]:{signal:'scale("'.concat(i,'", ').concat(hs(e,{expr:"datum"})," + ").concat(e.bin.step,")"),offset:nd(n,a,u,s,h)}}}ni(Xr(l))}function id({channel:e,fieldDef:t,scaleName:n,markDef:r,band:i,offset:o,config:a}){return da({fieldDef:t,channel:e,markDef:r,ref:va({scaleName:n,fieldOrDatumDef:t,band:i,offset:o}),config:a})}const od=new Set(["aria"]);function ad(e,t){const n="include"===t.color?Lf(e):{},r=n.fill,i=void 0===r?void 0:r,o=n.stroke,a=void 0===o?void 0:o;return s(s(s(s(s(s(s(s(s(s(s(s({},ud(e.markDef,t)),sd(e,"fill",i)),sd(e,"stroke",a)),jf("opacity",e)),jf("fillOpacity",e)),jf("strokeOpacity",e)),jf("strokeWidth",e)),jf("strokeDash",e)),If(e)),Of(e)),Sf(e,"href")),Rf(e))}function sd(e,t,n){const r=e.config,i=e.mark;if("hide"===Zs("invalid",e.markDef,r)&&n&&!Jo(i)){const r=cd(e,{invalid:!0,channels:yn});if(r)return{[t]:[{test:r,value:null},...S(n)]}}return n?{[t]:n}:{}}function ud(e,t){return Pi.reduce(((n,r)=>(od.has(r)||void 0===e[r]||"ignore"===t[r]||(n[r]=Gs(e[r])),n)),{})}function cd(e,{invalid:t=!1,channels:n}){const r=n.reduce(((t,n)=>{const r=e.getScaleComponent(n);if(r){const i=r.get("type"),o=e.vgField(n,{expr:"datum"});o&&bo(i)&&(t[o]=!0)}return t}),{}),i=he(r);if(i.length>0){const e=t?"||":"&&";return i.map((e=>pa(e,t))).join(" ".concat(e," "))}}function ld(e){const t=e.config;if(Zs("invalid",e.markDef,t)){const t=fd(e,{channels:un});if(t)return{defined:{signal:t}}}return{}}function fd(e,{invalid:t=!1,channels:n}){const r=n.reduce(((t,n)=>{const r=e.getScaleComponent(n);if(r){const i=r.get("type"),o=e.vgField(n,{expr:"datum"});o&&bo(i)&&(t[o]=!0)}return t}),{}),i=he(r);if(i.length>0){const e=t?"||":"&&";return i.map((e=>pa(e,t))).join(" ".concat(e," "))}}function dd(e,t){if(void 0!==t)return{[e]:Gs(t)}}const hd="voronoi",pd={has:e=>"interval"!==e.type&&e.nearest,parse:(e,t)=>{if(t.events){var n,r=u(t.events);try{for(r.s();!(n=r.n()).done;)n.value.markname=e.getName(hd)}catch(i){r.e(i)}finally{r.f()}}},marks:(e,t,n)=>{const r=t.project.hasChannel,i=r.x,o=r.y,a=e.mark;if(Jo(a))return ni(qn(a)),n;const u={name:e.getName(hd),type:"path",interactive:!0,from:{data:e.getName("marks")},encode:{update:s({fill:{value:"transparent"},strokeWidth:{value:.35},stroke:{value:"transparent"},isVoronoi:{value:!0}},Of(e,{reactiveGeom:!0}))},transform:[{type:"voronoi",x:{expr:i||!o?"datum.datum.x || 0":"0"},y:{expr:o||!i?"datum.datum.y || 0":"0"},size:[e.getSizeSignalRef("width"),e.getSizeSignalRef("height")]}]};let c=0,l=!1;return n.forEach(((t,n)=>{var r;const i=null!==(r=t.name)&&void 0!==r?r:"";i===e.component.mark[0].name?c=n:i.indexOf(hd)>=0&&(l=!0)})),l||n.splice(c+1,0,u),n}};class gd{constructor(e,t){this.debugName=t,Tn(this,"_children",[]),Tn(this,"_parent",null),Tn(this,"_hash",void 0),e&&(this.parent=e)}clone(){throw new Error("Cannot clone node")}get parent(){return this._parent}set parent(e){this._parent=e,e&&e.addChild(this)}get children(){return this._children}numChildren(){return this._children.length}addChild(e,t){this._children.indexOf(e)>-1?ni(tr):void 0!==t?this._children.splice(t,0,e):this._children.push(e)}removeChild(e){const t=this._children.indexOf(e);return this._children.splice(t,1),t}remove(){let e=this._parent.removeChild(this);var t,n=u(this._children);try{for(n.s();!(t=n.n()).done;){const n=t.value;n._parent=this._parent,this._parent.addChild(n,e++)}}catch(r){n.e(r)}finally{n.f()}}insertAsParentOf(e){const t=e.parent;t.removeChild(this),this.parent=t,e.parent=this}swapWithParent(){const e=this._parent,t=e.parent;var n,r=u(this._children);try{for(r.s();!(n=r.n()).done;)n.value.parent=e}catch(i){r.e(i)}finally{r.f()}this._children=[],e.removeChild(this),e.parent.removeChild(e),this.parent=t,e.parent=this}}class md extends gd{clone(){const e=new this.constructor;return e.debugName="clone_"+this.debugName,e._source=this._source,e._name="clone_"+this._name,e.type=this.type,e.refCounts=this.refCounts,e.refCounts[e._name]=0,e}constructor(e,t,n,r){super(e,t),this.type=n,this.refCounts=r,Tn(this,"_source",void 0),Tn(this,"_name",void 0),this._source=this._name=t,this.refCounts&&!(this._name in this.refCounts)&&(this.refCounts[this._name]=0)}dependentFields(){return new Set}producedFields(){return new Set}hash(){return void 0===this._hash&&(this._hash="Output ".concat(Se())),this._hash}getSource(){return this.refCounts[this._name]++,this._source}isRequired(){return!!this.refCounts[this._name]}setSource(e){this._source=e}}class vd extends gd{clone(){return new vd(null,X(this.formula))}constructor(e,t){super(e),this.formula=t}static makeFromEncoding(e,t){const n=t.reduceFieldDef(((e,n,r)=>{const i=n.field,o=n.timeUnit,a=cb(t)?t.encoding[tn(r)]:void 0,u=cb(t)&&$a(r,n,a,t.stack,t.markDef,t.config);if(o){const t=hs(n,{forAs:!0});e[K({as:t,field:i,timeUnit:o})]=s({as:t,field:i,timeUnit:o},u?{band:!0}:{})}return e}),{});return de(n)?null:new vd(e,n)}static makeFromTransform(e,t){const n=s({},t),r=n.timeUnit,i=o(n,["timeUnit"]),a=Ci(r),u=s(s({},i),{},{timeUnit:a});return new vd(e,{[K(u)]:u})}merge(e){this.formula=s({},this.formula);for(const i in e.formula)this.formula[i]&&!e.formula[i].band||(this.formula[i]=e.formula[i]);var t,n=u(e.children);try{for(n.s();!(t=n.n()).done;){const n=t.value;e.removeChild(n),n.parent=this}}catch(r){n.e(r)}finally{n.f()}e.remove()}removeFormulas(e){const t={};var n,r=u(ge(this.formula));try{for(r.s();!(n=r.n()).done;){const r=a(n.value,2),i=r[0],o=r[1];e.has(o.as)||(t[i]=o)}}catch(i){r.e(i)}finally{r.f()}this.formula=t}producedFields(){return new Set(pe(this.formula).map((e=>e.as)))}dependentFields(){return new Set(pe(this.formula).map((e=>e.field)))}hash(){return"TimeUnit ".concat(K(this.formula))}assemble(){const e=[];var t,n=u(pe(this.formula));try{for(n.s();!(t=n.n()).done;){const n=t.value,r=n.field,i=n.as,a=Ci(n.timeUnit),u=a.unit,c=a.utc,l=o(a,["unit","utc"]);e.push(s(s(s(s({field:ke(r),type:"timeunit"},u?{units:_i(u)}:{}),c?{timezone:"utc"}:{}),l),{},{as:[i,"".concat(i,"_end")]}))}}catch(r){n.e(r)}finally{n.f()}return e}}const yd="_tuple_fields";class bd{constructor(...e){Tn(this,"hasChannel",void 0),Tn(this,"hasField",void 0),Tn(this,"timeUnit",void 0),Tn(this,"items",void 0),this.items=e,this.hasChannel={},this.hasField={}}}const xd={has:e=>"single"===e.type&&"global"===e.resolve&&e.bind&&"scales"!==e.bind&&!cc(e.bind),parse:(e,t,n,r)=>{r.on||delete t.events,r.clear||delete t.clear},topLevelSignals:(e,t,n)=>{const r=t.name,i=t.project,o=t.bind,a=t.init&&t.init[0],u=pd.has(t)?"(item().isVoronoi ? datum.datum : datum)":"datum";return i.items.forEach(((e,i)=>{const c=ve("".concat(r,"_").concat(e.field));var l,f;n.filter((e=>e.name===c)).length||n.unshift(s(s({name:c},a?{init:Ld(a[i])}:{value:null}),{},{on:t.events?[{events:t.events,update:"datum && item().mark.marktype !== 'group' ? ".concat(u,"[").concat(z(e.field),"] : null")}]:[],bind:null!==(l=null!==(f=o[e.field])&&void 0!==f?f:o[e.channel])&&void 0!==l?l:o}))})),n},signals:(e,t,n)=>{const r=t.name,i=t.project,o=n.filter((e=>e.name===r+rh))[0],a=r+yd,s=i.items.map((e=>ve("".concat(r,"_").concat(e.field)))),u=s.map((e=>"".concat(e," !== null"))).join(" && ");return s.length&&(o.update="".concat(u," ? {fields: ").concat(a,", values: [").concat(s.join(", "),"]} : null")),delete o.value,delete o.on,n}},wd="_toggle",_d={has:e=>"multi"===e.type&&!!e.toggle,signals:(e,t,n)=>n.concat({name:t.name+wd,value:!1,on:[{events:t.events,update:t.toggle}]}),modifyExpr:(e,t)=>{const n=t.name+rh,r=t.name+wd;return"".concat(r," ? null : ").concat(n,", ")+("global"===t.resolve?"".concat(r," ? null : true, "):"".concat(r," ? null : {unit: ").concat(ch(e),"}, "))+"".concat(r," ? ").concat(n," : null")}},Ad={has:e=>void 0!==e.clear&&!1!==e.clear,parse:(e,t,n)=>{n.clear&&(t.clear=B(n.clear)?wf(n.clear,"scope"):n.clear)},topLevelSignals:(e,t,n)=>{if(xd.has(t)){var r,i=u(t.project.items);try{for(i.s();!(r=i.n()).done;){const e=r.value,i=n.findIndex((n=>n.name===ve("".concat(t.name,"_").concat(e.field))));-1!==i&&n[i].on.push({events:t.clear,update:"null"})}}catch(o){i.e(o)}finally{i.f()}}return n},signals:(e,t,n)=>{function r(e,r){-1!==e&&n[e].on&&n[e].on.push({events:t.clear,update:r})}if("interval"===t.type){var i,o=u(t.project.items);try{for(o.s();!(i=o.n()).done;){const e=i.value,t=n.findIndex((t=>t.name===e.signals.visual));r(t,"[0, 0]"),-1===t&&r(n.findIndex((t=>t.name===e.signals.data)),"null")}}catch(a){o.e(a)}finally{o.f()}}else{let e=n.findIndex((e=>e.name===t.name+rh));r(e,"null"),_d.has(t)&&(e=n.findIndex((e=>e.name===t.name+wd)),r(e,"false"))}return n}},kd={has:e=>"interval"===e.type&&"global"===e.resolve&&e.bind&&"scales"===e.bind,parse:(e,t)=>{const n=t.scales=[];var r,i=u(t.project.items);try{for(i.s();!(r=i.n()).done;){const i=r.value,o=i.channel;if(!bn(o))continue;const a=e.getScaleComponent(o),s=a?a.get("type"):void 0;if(!a||!bo(s)){ni(Yn);continue}const u={selection:t.name,field:i.field};a.set("selectionExtent",u,!0),n.push(i)}}catch(o){i.e(o)}finally{i.f()}},topLevelSignals:(e,t,n)=>{const r=t.scales.filter((e=>0===n.filter((t=>t.name===e.signals.data)).length));if(!e.parent||Dd(e)||0===r.length)return n;const i=n.filter((e=>e.name===t.name))[0];let o=i.update;if(o.indexOf(oh)>=0)i.update="{".concat(r.map((e=>"".concat(z(e.field),": ").concat(e.signals.data))).join(", "),"}");else{var a,s=u(r);try{for(s.s();!(a=s.n()).done;){const e=a.value,t="".concat(z(e.field),": ").concat(e.signals.data);o.indexOf(t)<0&&(o="".concat(o.substring(0,o.length-1),", ").concat(t,"}"))}}catch(c){s.e(c)}finally{s.f()}i.update=o}return n.concat(r.map((e=>({name:e.signals.data}))))},signals:(e,t,n)=>{if(e.parent&&!Dd(e)){var r,i=u(t.scales);try{for(i.s();!(r=i.n()).done;){const e=r.value,t=n.filter((t=>t.name===e.signals.data))[0];t.push="outer",delete t.value,delete t.update}}catch(o){i.e(o)}finally{i.f()}}return n}};function Ed(e,t){const n=z(e.scaleName(t));return"domain(".concat(n,")")}function Dd(e){var t;return e.parent&&db(e.parent)&&(null!==(t=!e.parent.parent)&&void 0!==t?t:Dd(e.parent.parent))}const Cd={has:e=>{const t="global"===e.resolve&&e.bind&&cc(e.bind),n=1===e.project.items.length&&e.project.items[0].field!==sc;return t&&!n&&ni(Vn),t&&n},parse:(e,t,n,r)=>{if(r.on||delete t.events,r.clear||delete t.clear,r.on||r.clear){const e='event.item && indexof(event.item.mark.role, "legend") < 0';var i,o=u(t.events);try{for(o.s();!(i=o.n()).done;){const t=i.value;var a;t.filter=S(null!==(a=t.filter)&&void 0!==a?a:[]),t.filter.indexOf(e)<0&&t.filter.push(e)}}catch(l){o.e(l)}finally{o.f()}}const s=lc(t.bind)?t.bind.legend:"click",c=B(s)?wf(s,"view"):S(s);t.bind={legend:{merge:c}}},topLevelSignals:(e,t,n)=>{const r=t.name,i=lc(t.bind)&&t.bind.legend,o=e=>t=>{const n=X(t);return n.markname=e,n};var a,c=u(t.project.items);try{for(c.s();!(a=c.n()).done;){const e=a.value;if(!e.hasLegend)continue;const u="".concat(ve(e.field),"_legend"),c="".concat(r,"_").concat(u);if(0===n.filter((e=>e.name===c)).length){const e=i.merge.map(o("".concat(u,"_symbols"))).concat(i.merge.map(o("".concat(u,"_labels")))).concat(i.merge.map(o("".concat(u,"_entries"))));n.unshift(s(s({name:c},t.init?{}:{value:null}),{},{on:[{events:e,update:"datum.value || item().items[0].items[0].datum.value",force:!0},{events:i.merge,update:"!event.item || !datum ? null : ".concat(c),force:!0}]}))}}}catch(l){c.e(l)}finally{c.f()}return n},signals:(e,t,n)=>{const r=t.name,i=t.project,o=n.find((e=>e.name===r+rh)),a=r+yd,u=i.items.filter((e=>e.hasLegend)).map((e=>ve("".concat(r,"_").concat(ve(e.field),"_legend")))),c=u.map((e=>"".concat(e," !== null"))).join(" && "),l="".concat(c," ? {fields: ").concat(a,", values: [").concat(u.join(", "),"]} : null");t.events&&u.length>0?o.on.push({events:u.map((e=>({signal:e}))),update:l}):u.length>0&&(o.update=l,delete o.value,delete o.on);const f=n.find((e=>e.name===r+wd)),d=lc(t.bind)&&t.bind.legend;return f&&(t.events?f.on.push(s(s({},f.on[0]),{},{events:d})):f.on[0].events=d),n}};function Md(e,t,n){var r;const i=null===(r=e.fieldDef(t))||void 0===r?void 0:r.field;sh(e,(e=>{var r;const o=null!==(r=e.project.hasField[i])&&void 0!==r?r:e.project.hasChannel[t];if(o&&Cd.has(e)){var a;const t=null!==(a=n.get("selections"))&&void 0!==a?a:[];t.push(e.name),n.set("selections",t,!1),o.hasLegend=!0}}))}const Fd="_translate_anchor",Sd="_translate_delta",Td={has:e=>"interval"===e.type&&e.translate,signals:(e,t,n)=>{const r=t.name,i=kd.has(t),o=r+Fd,a=t.project.hasChannel,s=a.x,u=a.y;let c=wf(t.translate,"scope");return i||(c=c.map((e=>(e.between[0].markname=r+$d,e)))),n.push({name:o,value:{},on:[{events:c.map((e=>e.between[0])),update:"{x: x(unit), y: y(unit)"+(void 0!==s?", extent_x: "+(i?Ed(e,rt):"slice(".concat(s.signals.visual,")")):"")+(void 0!==u?", extent_y: "+(i?Ed(e,it):"slice(".concat(u.signals.visual,")")):"")+"}"}]},{name:r+Sd,value:{},on:[{events:c,update:"{x: ".concat(o,".x - x(unit), y: ").concat(o,".y - y(unit)}")}]}),void 0!==s&&Od(e,t,s,"width",n),void 0!==u&&Od(e,t,u,"height",n),n}};function Od(e,t,n,r,i){var o;const a=t.name,s=a+Fd,u=a+Sd,c=n.channel,l=kd.has(t),f=i.filter((e=>e.name===n.signals[l?"data":"visual"]))[0],d=e.getSizeSignalRef(r).signal,h=e.getScaleComponent(c),p=h.get("type"),g=l&&c===rt?"-":"",m="".concat(s,".extent_").concat(c),v="".concat(g).concat(u,".").concat(c," / ")+(l?"".concat(d):"span(".concat(m,")")),y="".concat(l?"log"===p?"panLog":"pow"===p?"panPow":"panLinear":"panLinear","(").concat(m,", ").concat(v)+(l&&"pow"===p?", ".concat(null!==(o=h.get("exponent"))&&void 0!==o?o:1):"")+")";f.on.push({events:{signal:u},update:l?y:"clampRange(".concat(y,", 0, ").concat(d,")")})}const Nd="_zoom_anchor",Pd="_zoom_delta",Rd={has:e=>"interval"===e.type&&e.zoom,signals:(e,t,n)=>{const r=t.name,i=kd.has(t),o=r+Pd,a=t.project.hasChannel,s=a.x,u=a.y,c=z(e.scaleName(rt)),l=z(e.scaleName(it));let f=wf(t.zoom,"scope");return i||(f=f.map((e=>(e.markname=r+$d,e)))),n.push({name:r+Nd,on:[{events:f,update:i?"{"+[c?"x: invert(".concat(c,", x(unit))"):"",l?"y: invert(".concat(l,", y(unit))"):""].filter((e=>!!e)).join(", ")+"}":"{x: x(unit), y: y(unit)}"}]},{name:o,on:[{events:f,force:!0,update:"pow(1.001, event.deltaY * pow(16, event.deltaMode))"}]}),void 0!==s&&Bd(e,t,s,"width",n),void 0!==u&&Bd(e,t,u,"height",n),n}};function Bd(e,t,n,r,i){var o;const a=t.name,s=n.channel,u=kd.has(t),c=i.filter((e=>e.name===n.signals[u?"data":"visual"]))[0],l=e.getSizeSignalRef(r).signal,f=e.getScaleComponent(s),d=f.get("type"),h=u?Ed(e,s):c.name,p=a+Pd,g="".concat(a).concat(Nd,".").concat(s),m="".concat(u?"log"===d?"zoomLog":"pow"===d?"zoomPow":"zoomLinear":"zoomLinear","(").concat(h,", ").concat(g,", ").concat(p)+(u&&"pow"===d?", ".concat(null!==(o=f.get("exponent"))&&void 0!==o?o:1):"")+")";c.on.push({events:{signal:p},update:u?m:"clampRange(".concat(m,", 0, ").concat(l,")")})}const zd=[{has:()=>!0,parse:(e,t,n)=>{var r;const i=t.name,o=null!==(r=t.project)&&void 0!==r?r:t.project=new bd,a={},c={},l=new Set,f=(e,t)=>{const n="visual"===t?e.channel:e.field;let r=ve("".concat(i,"_").concat(n));for(let o=1;l.has(r);o++)r=ve("".concat(i,"_").concat(n,"_").concat(o));return l.add(r),{[t]:r}};if(!n.fields&&!n.encodings){const t=e.config.selection[n.type];if(n.init){var d,h=u(S(n.init));try{for(h.s();!(d=h.n()).done;){const e=d.value;var p,g=u(he(e));try{for(g.s();!(p=g.n()).done;){const e=p.value;Xt(e)?(n.encodings||(n.encodings=[])).push(e):"interval"===n.type?(ni(Xn),n.encodings=t.encodings):(n.fields||(n.fields=[])).push(e)}}catch(_){g.e(_)}finally{g.f()}}}catch(_){h.e(_)}finally{h.f()}}else n.encodings=t.encodings,n.fields=t.fields}var m,v=u(null!==(y=n.fields)&&void 0!==y?y:[]);try{for(v.s();!(m=v.n()).done;){const e=m.value;var y;const t={type:"E",field:e};t.signals=s({},f(t,"data")),o.items.push(t),o.hasField[e]=t}}catch(_){v.e(_)}finally{v.f()}var b,x=u(null!==(w=n.encodings)&&void 0!==w?w:[]);try{for(x.s();!(b=x.n()).done;){const n=b.value;var w;const r=e.fieldDef(n);if(r){let i=r.field;if(r.aggregate){ni(Un(n,r.aggregate));continue}if(!i){ni(In(n));continue}if(r.timeUnit){i=e.vgField(n);const t={timeUnit:r.timeUnit,as:i,field:r.field};c[K(t)]=t}if(!a[i]){let u="E";"interval"===t.type?bo(e.getScaleComponent(n).get("type"))&&(u="R"):r.bin&&(u="R-RE");const c={field:i,channel:n,type:u};c.signals=s(s({},f(c,"data")),f(c,"visual")),o.items.push(a[i]=c),o.hasField[i]=o.hasChannel[n]=a[i]}}else ni(In(n))}}catch(_){x.e(_)}finally{x.f()}if(n.init){const e=e=>o.items.map((t=>void 0!==e[t.channel]?e[t.channel]:e[t.field]));if("interval"===n.type)t.init=e(n.init);else{const r=S(n.init);t.init=r.map(e)}}de(c)||(o.timeUnit=new vd(null,c))},signals:(e,t,n)=>{const r=t.name+yd;return n.filter((e=>e.name===r)).length>0?n:n.concat({name:r,value:t.project.items.map((e=>{e.signals,e.hasLegend;const t=o(e,["signals","hasLegend"]);return t.field=ke(t.field),t}))})}},_d,kd,Cd,Td,Rd,xd,pd,Ad];function jd(e,t){var n,r=u(zd);try{for(r.s();!(n=r.n()).done;){const r=n.value;r.has(e)&&t(r)}}catch(i){r.e(i)}finally{r.f()}}function Ld(e,t=!0,n=m){if(k(e)){const r=e.map((e=>Ld(e,t,n)));return t?"[".concat(r.join(", "),"]"):r}return ii(e)?n(t?hi(e):gi(e)):t?n(JSON.stringify(e)):e}function Id(e,t){return sh(e,((n,r)=>{const i=n.name;let o=r.modifyExpr(e,n);t.push(...r.signals(e,n)),jd(n,(r=>{r.signals&&(t=r.signals(e,n,t)),r.modifyExpr&&(o=r.modifyExpr(e,n,o))})),t.push({name:i+ih,on:[{events:{signal:n.name+rh},update:"modify(".concat(z(n.name+nh),", ").concat(o,")")}]})})),Gd(t)}function Ud(e,t){if(e.component.selection&&he(e.component.selection).length){const n=z(e.getName("cell"));t.unshift({name:"facet",value:{},on:[{events:wf("mousemove","scope"),update:"isTuple(facet) ? facet : group(".concat(n,").datum")}]})}return Gd(t)}function qd(e,t){let n=!1;return sh(e,((r,i)=>{const o=r.name,a=z(o+nh);if(0===t.filter((e=>e.name===o)).length){const e="global"===r.resolve?"union":r.resolve,n="multi"===r.type?", true)":")";t.push({name:r.name,update:"".concat(oh,"(").concat(a,", ").concat(z(e)).concat(n)})}n=!0,i.topLevelSignals&&(t=i.topLevelSignals(e,r,t)),jd(r,(n=>{n.topLevelSignals&&(t=n.topLevelSignals(e,r,t))}))})),n&&0===t.filter((e=>"unit"===e.name)).length&&t.unshift({name:"unit",value:{},on:[{events:"mousemove",update:"isTuple(group()) ? group() : unit"}]}),Gd(t)}function Wd(e,t){const n=[...t];return sh(e,(t=>{const r={name:t.name+nh};if(t.init){const n=t.project.items.map((e=>(e.signals,o(e,["signals"])))),i=t.init.map((e=>Ld(e,!1)));r.values="interval"===t.type?[{unit:ch(e,{escape:!1}),fields:n,values:i}]:i.map((t=>({unit:ch(e,{escape:!1}),fields:n,values:t})))}n.filter((e=>e.name===t.name+nh)).length||n.push(r)})),n}function Hd(e,t){return sh(e,((n,r)=>{t=r.marks?r.marks(e,n,t):t,jd(n,(r=>{r.marks&&(t=r.marks(e,n,t))}))})),t}function Yd(e,t){var n,r=u(e.children);try{for(r.s();!(n=r.n()).done;){const e=n.value;cb(e)&&(t=Hd(e,t))}}catch(i){r.e(i)}finally{r.f()}return t}function Vd(e,t){const n=t.selection;return{signal:kg(e.getSelectionComponent(n,ve(n)),t)}}function Gd(e){return e.map((e=>(e.on&&!e.on.length&&delete e.on,e)))}const $d="_brush",Xd="_scale_trigger",Jd={signals:(e,t)=>{const n=t.name,r=n+yd,i=kd.has(t),o=[],a=[],u=[];if(t.translate&&!i){const e="!event.item || event.item.mark.name !== ".concat(z(n+$d));Zd(t,((t,n)=>{var r;const i=S(null!==(r=n.between[0].filter)&&void 0!==r?r:n.between[0].filter=[]);return i.indexOf(e)<0&&i.push(e),t}))}t.project.items.forEach(((n,r)=>{const i=n.channel;if(i!==rt&&i!==it)return void ni("Interval selections only support x and y encoding channels.");const s=t.init?t.init[r]:null,c=Qd(e,t,n,s),l=n.signals.data,f=n.signals.visual,d=z(e.scaleName(i)),h=bo(e.getScaleComponent(i).get("type"))?"+":"";o.push(...c),a.push(l),u.push({scaleName:e.scaleName(i),expr:"(!isArray(".concat(l,") || ")+"(".concat(h,"invert(").concat(d,", ").concat(f,")[0] === ").concat(h).concat(l,"[0] && ")+"".concat(h,"invert(").concat(d,", ").concat(f,")[1] === ").concat(h).concat(l,"[1]))")})})),i||o.push({name:n+Xd,value:{},on:[{events:u.map((e=>({scale:e.scaleName}))),update:u.map((e=>e.expr)).join(" && ")+" ? ".concat(n+Xd," : {}")}]});const c=t.init,l="unit: ".concat(ch(e),", fields: ").concat(r,", values");return o.concat(s(s({name:n+rh},c?{init:"{".concat(l,": ").concat(Ld(c),"}")}:{}),{},{on:[{events:[{signal:a.join(" || ")}],update:a.join(" && ")+" ? {".concat(l,": [").concat(a,"]} : null")}]}))},modifyExpr:(e,t)=>t.name+rh+", "+("global"===t.resolve?"true":"{unit: ".concat(ch(e),"}")),marks:(e,t,n)=>{const r=t.name,i=t.project.hasChannel,a=i.x,c=i.y,l=a&&a.signals.visual,f=c&&c.signals.visual,d="data(".concat(z(t.name+nh),")");if(kd.has(t))return n;const h={x:void 0!==a?{signal:"".concat(l,"[0]")}:{value:0},y:void 0!==c?{signal:"".concat(f,"[0]")}:{value:0},x2:void 0!==a?{signal:"".concat(l,"[1]")}:{field:{group:"width"}},y2:void 0!==c?{signal:"".concat(f,"[1]")}:{field:{group:"height"}}};if("global"===t.resolve){var p,g=u(he(h));try{for(g.s();!(p=g.n()).done;){const t=p.value;h[t]=[s({test:"".concat(d,".length && ").concat(d,"[0].unit === ").concat(ch(e))},h[t]),{value:0}]}}catch(_){g.e(_)}finally{g.f()}}const m=t.mark,v=m.fill,y=m.fillOpacity,b=m.cursor,x=o(m,["fill","fillOpacity","cursor"]),w=he(x).reduce(((e,t)=>(e[t]=[{test:[void 0!==a&&"".concat(l,"[0] !== ").concat(l,"[1]"),void 0!==c&&"".concat(f,"[0] !== ").concat(f,"[1]")].filter((e=>e)).join(" && "),value:x[t]},{value:null}],e)),{});return[{name:r+$d+"_bg",type:"rect",clip:!0,encode:{enter:{fill:{value:v},fillOpacity:{value:y}},update:h}},...n,{name:r+$d,type:"rect",clip:!0,encode:{enter:s(s({},b?{cursor:{value:b}}:{}),{},{fill:{value:"transparent"}}),update:s(s({},h),w)}}]}};function Qd(e,t,n,r){const i=n.channel,o=n.signals.visual,a=n.signals.data,u=kd.has(t),c=z(e.scaleName(i)),l=e.getScaleComponent(i),f=l?l.get("type"):void 0,d=e=>"scale(".concat(c,", ").concat(e,")"),h=e.getSizeSignalRef(i===rt?"width":"height").signal,p="".concat(i,"(unit)"),g=Zd(t,((e,t)=>[...e,{events:t.between[0],update:"[".concat(p,", ").concat(p,"]")},{events:t,update:"[".concat(o,"[0], clamp(").concat(p,", 0, ").concat(h,")]")}]));return g.push({events:{signal:t.name+Xd},update:bo(f)?"[".concat(d("".concat(a,"[0]")),", ").concat(d("".concat(a,"[1]")),"]"):"[0, 0]"}),u?[{name:a,on:[]}]:[s(s({name:o},r?{init:Ld(r,!0,d)}:{value:[]}),{},{on:g}),s(s({name:a},r?{init:Ld(r)}:{}),{},{on:[{events:{signal:o},update:"".concat(o,"[0] === ").concat(o,"[1] ? null : invert(").concat(c,", ").concat(o,")")}]})]}function Zd(e,t){return e.events.reduce(((e,n)=>n.between?t(e,n):(ni("".concat(n," is not an ordered event stream for interval selections.")),e)),[])}function Kd(e,t){const n=t.name,r=n+yd,i=t.project,o="(item().isVoronoi ? datum.datum : datum)",a=i.items.map((t=>{const n=e.fieldDef(t.channel);return n&&n.bin?"[".concat(o,"[").concat(z(e.vgField(t.channel,{})),"], ")+"".concat(o,"[").concat(z(e.vgField(t.channel,{binSuffix:"end"})),"]]"):"".concat(o,"[").concat(z(t.field),"]")})).join(", "),s="unit: ".concat(ch(e),", fields: ").concat(r,", values"),u=t.events;return[{name:n+rh,on:u?[{events:u,update:"datum && item().mark.marktype !== 'group' ? {".concat(s,": [").concat(a,"]} : null"),force:!0}]:[]}]}const eh={signals:Kd,modifyExpr:(e,t)=>t.name+rh+", "+("global"===t.resolve?"null":"{unit: ".concat(ch(e),"}"))},th={signals:Kd,modifyExpr:(e,t)=>t.name+rh+", "+("global"===t.resolve?"true":"{unit: ".concat(ch(e),"}"))},nh="_store",rh="_tuple",ih="_modify",oh="vlSelectionResolve",ah={single:th,multi:eh,interval:Jd};function sh(e,t){const n=e.component.selection;if(n){var r,i=u(pe(n));try{for(i.s();!(r=i.n()).done;){const e=r.value;if(!0===t(e,ah[e.type]))break}}catch(o){i.e(o)}finally{i.f()}}}function uh(e){let t=e.parent;for(;t&&!lb(t);)t=t.parent;return t}function ch(e,{escape:t}={escape:!0}){let n=t?z(e.name):e.name;const r=uh(e);if(r){const e=r.facet;var i,o=u(Ht);try{for(o.s();!(i=o.n()).done;){const t=i.value;e[t]&&(n+=" + '__facet_".concat(t,"_' + (facet[").concat(z(r.vgField(t)),"])"))}}catch(a){o.e(a)}finally{o.f()}}return n}function lh(e){let t=!1;return sh(e,(e=>{t=t||e.project.items.some((e=>e.field===sc))})),t}const fh="RawCode",dh="Literal",hh="Property",ph="Identifier",gh="ArrayExpression",mh="BinaryExpression",vh="CallExpression",yh="ConditionalExpression",bh="LogicalExpression",xh="MemberExpression",wh="ObjectExpression",_h="UnaryExpression";function Ah(e){this.type=e}function kh(e){switch(e.type){case gh:return e.elements;case mh:case bh:return[e.left,e.right];case vh:return[e.callee].concat(e.arguments);case yh:return[e.test,e.consequent,e.alternate];case xh:return[e.object,e.property];case wh:return e.properties;case hh:return[e.key,e.value];case _h:return[e.argument];case ph:case dh:case fh:default:return[]}}var Eh,Dh,Ch,Mh,Fh;Ah.prototype.visit=function(e){let t,n,r;if(e(this))return 1;for(t=kh(this),n=0,r=t.length;n<r;++n)if(t[n].visit(e))return 1};var Sh=1,Th=2,Oh=3,Nh=4,Ph=5,Rh=6,Bh=7,zh=8,jh=9;(Eh={})[Sh]="Boolean",Eh[Th]="<end>",Eh[Oh]="Identifier",Eh[Nh]="Keyword",Eh[Ph]="Null",Eh[Rh]="Numeric",Eh[Bh]="Punctuator",Eh[zh]="String",Eh[jh]="RegularExpression";var Lh="ArrayExpression",Ih="BinaryExpression",Uh="CallExpression",qh="ConditionalExpression",Wh="Identifier",Hh="Literal",Yh="LogicalExpression",Vh="MemberExpression",Gh="ObjectExpression",$h="Property",Xh="UnaryExpression",Jh="Unexpected token %0",Qh="Unexpected number",Zh="Unexpected string",Kh="Unexpected identifier",ep="Unexpected reserved word",tp="Unexpected end of input",np="Invalid regular expression",rp="Invalid regular expression: missing /",ip="Octal literals are not allowed in strict mode.",op="Duplicate data property in object literal not allowed in strict mode",ap="ILLEGAL",sp="Disabled.",up=new RegExp("[\\xAA\\xB5\\xBA\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\u02C1\\u02C6-\\u02D1\\u02E0-\\u02E4\\u02EC\\u02EE\\u0370-\\u0374\\u0376\\u0377\\u037A-\\u037D\\u037F\\u0386\\u0388-\\u038A\\u038C\\u038E-\\u03A1\\u03A3-\\u03F5\\u03F7-\\u0481\\u048A-\\u052F\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u05D0-\\u05EA\\u05F0-\\u05F2\\u0620-\\u064A\\u066E\\u066F\\u0671-\\u06D3\\u06D5\\u06E5\\u06E6\\u06EE\\u06EF\\u06FA-\\u06FC\\u06FF\\u0710\\u0712-\\u072F\\u074D-\\u07A5\\u07B1\\u07CA-\\u07EA\\u07F4\\u07F5\\u07FA\\u0800-\\u0815\\u081A\\u0824\\u0828\\u0840-\\u0858\\u08A0-\\u08B2\\u0904-\\u0939\\u093D\\u0950\\u0958-\\u0961\\u0971-\\u0980\\u0985-\\u098C\\u098F\\u0990\\u0993-\\u09A8\\u09AA-\\u09B0\\u09B2\\u09B6-\\u09B9\\u09BD\\u09CE\\u09DC\\u09DD\\u09DF-\\u09E1\\u09F0\\u09F1\\u0A05-\\u0A0A\\u0A0F\\u0A10\\u0A13-\\u0A28\\u0A2A-\\u0A30\\u0A32\\u0A33\\u0A35\\u0A36\\u0A38\\u0A39\\u0A59-\\u0A5C\\u0A5E\\u0A72-\\u0A74\\u0A85-\\u0A8D\\u0A8F-\\u0A91\\u0A93-\\u0AA8\\u0AAA-\\u0AB0\\u0AB2\\u0AB3\\u0AB5-\\u0AB9\\u0ABD\\u0AD0\\u0AE0\\u0AE1\\u0B05-\\u0B0C\\u0B0F\\u0B10\\u0B13-\\u0B28\\u0B2A-\\u0B30\\u0B32\\u0B33\\u0B35-\\u0B39\\u0B3D\\u0B5C\\u0B5D\\u0B5F-\\u0B61\\u0B71\\u0B83\\u0B85-\\u0B8A\\u0B8E-\\u0B90\\u0B92-\\u0B95\\u0B99\\u0B9A\\u0B9C\\u0B9E\\u0B9F\\u0BA3\\u0BA4\\u0BA8-\\u0BAA\\u0BAE-\\u0BB9\\u0BD0\\u0C05-\\u0C0C\\u0C0E-\\u0C10\\u0C12-\\u0C28\\u0C2A-\\u0C39\\u0C3D\\u0C58\\u0C59\\u0C60\\u0C61\\u0C85-\\u0C8C\\u0C8E-\\u0C90\\u0C92-\\u0CA8\\u0CAA-\\u0CB3\\u0CB5-\\u0CB9\\u0CBD\\u0CDE\\u0CE0\\u0CE1\\u0CF1\\u0CF2\\u0D05-\\u0D0C\\u0D0E-\\u0D10\\u0D12-\\u0D3A\\u0D3D\\u0D4E\\u0D60\\u0D61\\u0D7A-\\u0D7F\\u0D85-\\u0D96\\u0D9A-\\u0DB1\\u0DB3-\\u0DBB\\u0DBD\\u0DC0-\\u0DC6\\u0E01-\\u0E30\\u0E32\\u0E33\\u0E40-\\u0E46\\u0E81\\u0E82\\u0E84\\u0E87\\u0E88\\u0E8A\\u0E8D\\u0E94-\\u0E97\\u0E99-\\u0E9F\\u0EA1-\\u0EA3\\u0EA5\\u0EA7\\u0EAA\\u0EAB\\u0EAD-\\u0EB0\\u0EB2\\u0EB3\\u0EBD\\u0EC0-\\u0EC4\\u0EC6\\u0EDC-\\u0EDF\\u0F00\\u0F40-\\u0F47\\u0F49-\\u0F6C\\u0F88-\\u0F8C\\u1000-\\u102A\\u103F\\u1050-\\u1055\\u105A-\\u105D\\u1061\\u1065\\u1066\\u106E-\\u1070\\u1075-\\u1081\\u108E\\u10A0-\\u10C5\\u10C7\\u10CD\\u10D0-\\u10FA\\u10FC-\\u1248\\u124A-\\u124D\\u1250-\\u1256\\u1258\\u125A-\\u125D\\u1260-\\u1288\\u128A-\\u128D\\u1290-\\u12B0\\u12B2-\\u12B5\\u12B8-\\u12BE\\u12C0\\u12C2-\\u12C5\\u12C8-\\u12D6\\u12D8-\\u1310\\u1312-\\u1315\\u1318-\\u135A\\u1380-\\u138F\\u13A0-\\u13F4\\u1401-\\u166C\\u166F-\\u167F\\u1681-\\u169A\\u16A0-\\u16EA\\u16EE-\\u16F8\\u1700-\\u170C\\u170E-\\u1711\\u1720-\\u1731\\u1740-\\u1751\\u1760-\\u176C\\u176E-\\u1770\\u1780-\\u17B3\\u17D7\\u17DC\\u1820-\\u1877\\u1880-\\u18A8\\u18AA\\u18B0-\\u18F5\\u1900-\\u191E\\u1950-\\u196D\\u1970-\\u1974\\u1980-\\u19AB\\u19C1-\\u19C7\\u1A00-\\u1A16\\u1A20-\\u1A54\\u1AA7\\u1B05-\\u1B33\\u1B45-\\u1B4B\\u1B83-\\u1BA0\\u1BAE\\u1BAF\\u1BBA-\\u1BE5\\u1C00-\\u1C23\\u1C4D-\\u1C4F\\u1C5A-\\u1C7D\\u1CE9-\\u1CEC\\u1CEE-\\u1CF1\\u1CF5\\u1CF6\\u1D00-\\u1DBF\\u1E00-\\u1F15\\u1F18-\\u1F1D\\u1F20-\\u1F45\\u1F48-\\u1F4D\\u1F50-\\u1F57\\u1F59\\u1F5B\\u1F5D\\u1F5F-\\u1F7D\\u1F80-\\u1FB4\\u1FB6-\\u1FBC\\u1FBE\\u1FC2-\\u1FC4\\u1FC6-\\u1FCC\\u1FD0-\\u1FD3\\u1FD6-\\u1FDB\\u1FE0-\\u1FEC\\u1FF2-\\u1FF4\\u1FF6-\\u1FFC\\u2071\\u207F\\u2090-\\u209C\\u2102\\u2107\\u210A-\\u2113\\u2115\\u2119-\\u211D\\u2124\\u2126\\u2128\\u212A-\\u212D\\u212F-\\u2139\\u213C-\\u213F\\u2145-\\u2149\\u214E\\u2160-\\u2188\\u2C00-\\u2C2E\\u2C30-\\u2C5E\\u2C60-\\u2CE4\\u2CEB-\\u2CEE\\u2CF2\\u2CF3\\u2D00-\\u2D25\\u2D27\\u2D2D\\u2D30-\\u2D67\\u2D6F\\u2D80-\\u2D96\\u2DA0-\\u2DA6\\u2DA8-\\u2DAE\\u2DB0-\\u2DB6\\u2DB8-\\u2DBE\\u2DC0-\\u2DC6\\u2DC8-\\u2DCE\\u2DD0-\\u2DD6\\u2DD8-\\u2DDE\\u2E2F\\u3005-\\u3007\\u3021-\\u3029\\u3031-\\u3035\\u3038-\\u303C\\u3041-\\u3096\\u309D-\\u309F\\u30A1-\\u30FA\\u30FC-\\u30FF\\u3105-\\u312D\\u3131-\\u318E\\u31A0-\\u31BA\\u31F0-\\u31FF\\u3400-\\u4DB5\\u4E00-\\u9FCC\\uA000-\\uA48C\\uA4D0-\\uA4FD\\uA500-\\uA60C\\uA610-\\uA61F\\uA62A\\uA62B\\uA640-\\uA66E\\uA67F-\\uA69D\\uA6A0-\\uA6EF\\uA717-\\uA71F\\uA722-\\uA788\\uA78B-\\uA78E\\uA790-\\uA7AD\\uA7B0\\uA7B1\\uA7F7-\\uA801\\uA803-\\uA805\\uA807-\\uA80A\\uA80C-\\uA822\\uA840-\\uA873\\uA882-\\uA8B3\\uA8F2-\\uA8F7\\uA8FB\\uA90A-\\uA925\\uA930-\\uA946\\uA960-\\uA97C\\uA984-\\uA9B2\\uA9CF\\uA9E0-\\uA9E4\\uA9E6-\\uA9EF\\uA9FA-\\uA9FE\\uAA00-\\uAA28\\uAA40-\\uAA42\\uAA44-\\uAA4B\\uAA60-\\uAA76\\uAA7A\\uAA7E-\\uAAAF\\uAAB1\\uAAB5\\uAAB6\\uAAB9-\\uAABD\\uAAC0\\uAAC2\\uAADB-\\uAADD\\uAAE0-\\uAAEA\\uAAF2-\\uAAF4\\uAB01-\\uAB06\\uAB09-\\uAB0E\\uAB11-\\uAB16\\uAB20-\\uAB26\\uAB28-\\uAB2E\\uAB30-\\uAB5A\\uAB5C-\\uAB5F\\uAB64\\uAB65\\uABC0-\\uABE2\\uAC00-\\uD7A3\\uD7B0-\\uD7C6\\uD7CB-\\uD7FB\\uF900-\\uFA6D\\uFA70-\\uFAD9\\uFB00-\\uFB06\\uFB13-\\uFB17\\uFB1D\\uFB1F-\\uFB28\\uFB2A-\\uFB36\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFBB1\\uFBD3-\\uFD3D\\uFD50-\\uFD8F\\uFD92-\\uFDC7\\uFDF0-\\uFDFB\\uFE70-\\uFE74\\uFE76-\\uFEFC\\uFF21-\\uFF3A\\uFF41-\\uFF5A\\uFF66-\\uFFBE\\uFFC2-\\uFFC7\\uFFCA-\\uFFCF\\uFFD2-\\uFFD7\\uFFDA-\\uFFDC]"),cp=new RegExp("[\\xAA\\xB5\\xBA\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\u02C1\\u02C6-\\u02D1\\u02E0-\\u02E4\\u02EC\\u02EE\\u0300-\\u0374\\u0376\\u0377\\u037A-\\u037D\\u037F\\u0386\\u0388-\\u038A\\u038C\\u038E-\\u03A1\\u03A3-\\u03F5\\u03F7-\\u0481\\u0483-\\u0487\\u048A-\\u052F\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u0591-\\u05BD\\u05BF\\u05C1\\u05C2\\u05C4\\u05C5\\u05C7\\u05D0-\\u05EA\\u05F0-\\u05F2\\u0610-\\u061A\\u0620-\\u0669\\u066E-\\u06D3\\u06D5-\\u06DC\\u06DF-\\u06E8\\u06EA-\\u06FC\\u06FF\\u0710-\\u074A\\u074D-\\u07B1\\u07C0-\\u07F5\\u07FA\\u0800-\\u082D\\u0840-\\u085B\\u08A0-\\u08B2\\u08E4-\\u0963\\u0966-\\u096F\\u0971-\\u0983\\u0985-\\u098C\\u098F\\u0990\\u0993-\\u09A8\\u09AA-\\u09B0\\u09B2\\u09B6-\\u09B9\\u09BC-\\u09C4\\u09C7\\u09C8\\u09CB-\\u09CE\\u09D7\\u09DC\\u09DD\\u09DF-\\u09E3\\u09E6-\\u09F1\\u0A01-\\u0A03\\u0A05-\\u0A0A\\u0A0F\\u0A10\\u0A13-\\u0A28\\u0A2A-\\u0A30\\u0A32\\u0A33\\u0A35\\u0A36\\u0A38\\u0A39\\u0A3C\\u0A3E-\\u0A42\\u0A47\\u0A48\\u0A4B-\\u0A4D\\u0A51\\u0A59-\\u0A5C\\u0A5E\\u0A66-\\u0A75\\u0A81-\\u0A83\\u0A85-\\u0A8D\\u0A8F-\\u0A91\\u0A93-\\u0AA8\\u0AAA-\\u0AB0\\u0AB2\\u0AB3\\u0AB5-\\u0AB9\\u0ABC-\\u0AC5\\u0AC7-\\u0AC9\\u0ACB-\\u0ACD\\u0AD0\\u0AE0-\\u0AE3\\u0AE6-\\u0AEF\\u0B01-\\u0B03\\u0B05-\\u0B0C\\u0B0F\\u0B10\\u0B13-\\u0B28\\u0B2A-\\u0B30\\u0B32\\u0B33\\u0B35-\\u0B39\\u0B3C-\\u0B44\\u0B47\\u0B48\\u0B4B-\\u0B4D\\u0B56\\u0B57\\u0B5C\\u0B5D\\u0B5F-\\u0B63\\u0B66-\\u0B6F\\u0B71\\u0B82\\u0B83\\u0B85-\\u0B8A\\u0B8E-\\u0B90\\u0B92-\\u0B95\\u0B99\\u0B9A\\u0B9C\\u0B9E\\u0B9F\\u0BA3\\u0BA4\\u0BA8-\\u0BAA\\u0BAE-\\u0BB9\\u0BBE-\\u0BC2\\u0BC6-\\u0BC8\\u0BCA-\\u0BCD\\u0BD0\\u0BD7\\u0BE6-\\u0BEF\\u0C00-\\u0C03\\u0C05-\\u0C0C\\u0C0E-\\u0C10\\u0C12-\\u0C28\\u0C2A-\\u0C39\\u0C3D-\\u0C44\\u0C46-\\u0C48\\u0C4A-\\u0C4D\\u0C55\\u0C56\\u0C58\\u0C59\\u0C60-\\u0C63\\u0C66-\\u0C6F\\u0C81-\\u0C83\\u0C85-\\u0C8C\\u0C8E-\\u0C90\\u0C92-\\u0CA8\\u0CAA-\\u0CB3\\u0CB5-\\u0CB9\\u0CBC-\\u0CC4\\u0CC6-\\u0CC8\\u0CCA-\\u0CCD\\u0CD5\\u0CD6\\u0CDE\\u0CE0-\\u0CE3\\u0CE6-\\u0CEF\\u0CF1\\u0CF2\\u0D01-\\u0D03\\u0D05-\\u0D0C\\u0D0E-\\u0D10\\u0D12-\\u0D3A\\u0D3D-\\u0D44\\u0D46-\\u0D48\\u0D4A-\\u0D4E\\u0D57\\u0D60-\\u0D63\\u0D66-\\u0D6F\\u0D7A-\\u0D7F\\u0D82\\u0D83\\u0D85-\\u0D96\\u0D9A-\\u0DB1\\u0DB3-\\u0DBB\\u0DBD\\u0DC0-\\u0DC6\\u0DCA\\u0DCF-\\u0DD4\\u0DD6\\u0DD8-\\u0DDF\\u0DE6-\\u0DEF\\u0DF2\\u0DF3\\u0E01-\\u0E3A\\u0E40-\\u0E4E\\u0E50-\\u0E59\\u0E81\\u0E82\\u0E84\\u0E87\\u0E88\\u0E8A\\u0E8D\\u0E94-\\u0E97\\u0E99-\\u0E9F\\u0EA1-\\u0EA3\\u0EA5\\u0EA7\\u0EAA\\u0EAB\\u0EAD-\\u0EB9\\u0EBB-\\u0EBD\\u0EC0-\\u0EC4\\u0EC6\\u0EC8-\\u0ECD\\u0ED0-\\u0ED9\\u0EDC-\\u0EDF\\u0F00\\u0F18\\u0F19\\u0F20-\\u0F29\\u0F35\\u0F37\\u0F39\\u0F3E-\\u0F47\\u0F49-\\u0F6C\\u0F71-\\u0F84\\u0F86-\\u0F97\\u0F99-\\u0FBC\\u0FC6\\u1000-\\u1049\\u1050-\\u109D\\u10A0-\\u10C5\\u10C7\\u10CD\\u10D0-\\u10FA\\u10FC-\\u1248\\u124A-\\u124D\\u1250-\\u1256\\u1258\\u125A-\\u125D\\u1260-\\u1288\\u128A-\\u128D\\u1290-\\u12B0\\u12B2-\\u12B5\\u12B8-\\u12BE\\u12C0\\u12C2-\\u12C5\\u12C8-\\u12D6\\u12D8-\\u1310\\u1312-\\u1315\\u1318-\\u135A\\u135D-\\u135F\\u1380-\\u138F\\u13A0-\\u13F4\\u1401-\\u166C\\u166F-\\u167F\\u1681-\\u169A\\u16A0-\\u16EA\\u16EE-\\u16F8\\u1700-\\u170C\\u170E-\\u1714\\u1720-\\u1734\\u1740-\\u1753\\u1760-\\u176C\\u176E-\\u1770\\u1772\\u1773\\u1780-\\u17D3\\u17D7\\u17DC\\u17DD\\u17E0-\\u17E9\\u180B-\\u180D\\u1810-\\u1819\\u1820-\\u1877\\u1880-\\u18AA\\u18B0-\\u18F5\\u1900-\\u191E\\u1920-\\u192B\\u1930-\\u193B\\u1946-\\u196D\\u1970-\\u1974\\u1980-\\u19AB\\u19B0-\\u19C9\\u19D0-\\u19D9\\u1A00-\\u1A1B\\u1A20-\\u1A5E\\u1A60-\\u1A7C\\u1A7F-\\u1A89\\u1A90-\\u1A99\\u1AA7\\u1AB0-\\u1ABD\\u1B00-\\u1B4B\\u1B50-\\u1B59\\u1B6B-\\u1B73\\u1B80-\\u1BF3\\u1C00-\\u1C37\\u1C40-\\u1C49\\u1C4D-\\u1C7D\\u1CD0-\\u1CD2\\u1CD4-\\u1CF6\\u1CF8\\u1CF9\\u1D00-\\u1DF5\\u1DFC-\\u1F15\\u1F18-\\u1F1D\\u1F20-\\u1F45\\u1F48-\\u1F4D\\u1F50-\\u1F57\\u1F59\\u1F5B\\u1F5D\\u1F5F-\\u1F7D\\u1F80-\\u1FB4\\u1FB6-\\u1FBC\\u1FBE\\u1FC2-\\u1FC4\\u1FC6-\\u1FCC\\u1FD0-\\u1FD3\\u1FD6-\\u1FDB\\u1FE0-\\u1FEC\\u1FF2-\\u1FF4\\u1FF6-\\u1FFC\\u200C\\u200D\\u203F\\u2040\\u2054\\u2071\\u207F\\u2090-\\u209C\\u20D0-\\u20DC\\u20E1\\u20E5-\\u20F0\\u2102\\u2107\\u210A-\\u2113\\u2115\\u2119-\\u211D\\u2124\\u2126\\u2128\\u212A-\\u212D\\u212F-\\u2139\\u213C-\\u213F\\u2145-\\u2149\\u214E\\u2160-\\u2188\\u2C00-\\u2C2E\\u2C30-\\u2C5E\\u2C60-\\u2CE4\\u2CEB-\\u2CF3\\u2D00-\\u2D25\\u2D27\\u2D2D\\u2D30-\\u2D67\\u2D6F\\u2D7F-\\u2D96\\u2DA0-\\u2DA6\\u2DA8-\\u2DAE\\u2DB0-\\u2DB6\\u2DB8-\\u2DBE\\u2DC0-\\u2DC6\\u2DC8-\\u2DCE\\u2DD0-\\u2DD6\\u2DD8-\\u2DDE\\u2DE0-\\u2DFF\\u2E2F\\u3005-\\u3007\\u3021-\\u302F\\u3031-\\u3035\\u3038-\\u303C\\u3041-\\u3096\\u3099\\u309A\\u309D-\\u309F\\u30A1-\\u30FA\\u30FC-\\u30FF\\u3105-\\u312D\\u3131-\\u318E\\u31A0-\\u31BA\\u31F0-\\u31FF\\u3400-\\u4DB5\\u4E00-\\u9FCC\\uA000-\\uA48C\\uA4D0-\\uA4FD\\uA500-\\uA60C\\uA610-\\uA62B\\uA640-\\uA66F\\uA674-\\uA67D\\uA67F-\\uA69D\\uA69F-\\uA6F1\\uA717-\\uA71F\\uA722-\\uA788\\uA78B-\\uA78E\\uA790-\\uA7AD\\uA7B0\\uA7B1\\uA7F7-\\uA827\\uA840-\\uA873\\uA880-\\uA8C4\\uA8D0-\\uA8D9\\uA8E0-\\uA8F7\\uA8FB\\uA900-\\uA92D\\uA930-\\uA953\\uA960-\\uA97C\\uA980-\\uA9C0\\uA9CF-\\uA9D9\\uA9E0-\\uA9FE\\uAA00-\\uAA36\\uAA40-\\uAA4D\\uAA50-\\uAA59\\uAA60-\\uAA76\\uAA7A-\\uAAC2\\uAADB-\\uAADD\\uAAE0-\\uAAEF\\uAAF2-\\uAAF6\\uAB01-\\uAB06\\uAB09-\\uAB0E\\uAB11-\\uAB16\\uAB20-\\uAB26\\uAB28-\\uAB2E\\uAB30-\\uAB5A\\uAB5C-\\uAB5F\\uAB64\\uAB65\\uABC0-\\uABEA\\uABEC\\uABED\\uABF0-\\uABF9\\uAC00-\\uD7A3\\uD7B0-\\uD7C6\\uD7CB-\\uD7FB\\uF900-\\uFA6D\\uFA70-\\uFAD9\\uFB00-\\uFB06\\uFB13-\\uFB17\\uFB1D-\\uFB28\\uFB2A-\\uFB36\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFBB1\\uFBD3-\\uFD3D\\uFD50-\\uFD8F\\uFD92-\\uFDC7\\uFDF0-\\uFDFB\\uFE00-\\uFE0F\\uFE20-\\uFE2D\\uFE33\\uFE34\\uFE4D-\\uFE4F\\uFE70-\\uFE74\\uFE76-\\uFEFC\\uFF10-\\uFF19\\uFF21-\\uFF3A\\uFF3F\\uFF41-\\uFF5A\\uFF66-\\uFFBE\\uFFC2-\\uFFC7\\uFFCA-\\uFFCF\\uFFD2-\\uFFD7\\uFFDA-\\uFFDC]");function lp(e,t){if(!e)throw new Error("ASSERT: "+t)}function fp(e){return e>=48&&e<=57}function dp(e){return"0123456789abcdefABCDEF".indexOf(e)>=0}function hp(e){return"01234567".indexOf(e)>=0}function pp(e){return 32===e||9===e||11===e||12===e||160===e||e>=5760&&[5760,6158,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279].indexOf(e)>=0}function gp(e){return 10===e||13===e||8232===e||8233===e}function mp(e){return 36===e||95===e||e>=65&&e<=90||e>=97&&e<=122||92===e||e>=128&&up.test(String.fromCharCode(e))}function vp(e){return 36===e||95===e||e>=65&&e<=90||e>=97&&e<=122||e>=48&&e<=57||92===e||e>=128&&cp.test(String.fromCharCode(e))}const yp={if:1,in:1,do:1,var:1,for:1,new:1,try:1,let:1,this:1,else:1,case:1,void:1,with:1,enum:1,while:1,break:1,catch:1,throw:1,const:1,yield:1,class:1,super:1,return:1,typeof:1,delete:1,switch:1,export:1,import:1,public:1,static:1,default:1,finally:1,extends:1,package:1,private:1,function:1,continue:1,debugger:1,interface:1,protected:1,instanceof:1,implements:1};function bp(){for(;Ch<Mh;){const e=Dh.charCodeAt(Ch);if(!pp(e)&&!gp(e))break;++Ch}}function xp(e){var t,n,r,i=0;for(n="u"===e?4:2,t=0;t<n;++t)Ch<Mh&&dp(Dh[Ch])?(r=Dh[Ch++],i=16*i+"0123456789abcdef".indexOf(r.toLowerCase())):$p({},Jh,ap);return String.fromCharCode(i)}function wp(){var e,t,n,r;for(t=0,"}"===(e=Dh[Ch])&&$p({},Jh,ap);Ch<Mh&&dp(e=Dh[Ch++]);)t=16*t+"0123456789abcdef".indexOf(e.toLowerCase());return(t>1114111||"}"!==e)&&$p({},Jh,ap),t<=65535?String.fromCharCode(t):(n=55296+(t-65536>>10),r=56320+(t-65536&1023),String.fromCharCode(n,r))}function _p(){var e,t;for(e=Dh.charCodeAt(Ch++),t=String.fromCharCode(e),92===e&&(117!==Dh.charCodeAt(Ch)&&$p({},Jh,ap),++Ch,(e=xp("u"))&&"\\"!==e&&mp(e.charCodeAt(0))||$p({},Jh,ap),t=e);Ch<Mh&&vp(e=Dh.charCodeAt(Ch));)++Ch,t+=String.fromCharCode(e),92===e&&(t=t.substr(0,t.length-1),117!==Dh.charCodeAt(Ch)&&$p({},Jh,ap),++Ch,(e=xp("u"))&&"\\"!==e&&vp(e.charCodeAt(0))||$p({},Jh,ap),t+=e);return t}function Ap(){var e,t;for(e=Ch++;Ch<Mh;){if(92===(t=Dh.charCodeAt(Ch)))return Ch=e,_p();if(!vp(t))break;++Ch}return Dh.slice(e,Ch)}function kp(){var e,t;return e=Ch,{type:1===(t=92===Dh.charCodeAt(Ch)?_p():Ap()).length?Oh:yp.hasOwnProperty(t)?Nh:"null"===t?Ph:"true"===t||"false"===t?Sh:Oh,value:t,start:e,end:Ch}}function Ep(){var e,t,n,r,i=Ch,o=Dh.charCodeAt(Ch),a=Dh[Ch];switch(o){case 46:case 40:case 41:case 59:case 44:case 123:case 125:case 91:case 93:case 58:case 63:case 126:return++Ch,{type:Bh,value:String.fromCharCode(o),start:i,end:Ch};default:if(61===(e=Dh.charCodeAt(Ch+1)))switch(o){case 43:case 45:case 47:case 60:case 62:case 94:case 124:case 37:case 38:case 42:return Ch+=2,{type:Bh,value:String.fromCharCode(o)+String.fromCharCode(e),start:i,end:Ch};case 33:case 61:return Ch+=2,61===Dh.charCodeAt(Ch)&&++Ch,{type:Bh,value:Dh.slice(i,Ch),start:i,end:Ch}}}return">>>="===(r=Dh.substr(Ch,4))?{type:Bh,value:r,start:i,end:Ch+=4}:">>>"===(n=r.substr(0,3))||"<<="===n||">>="===n?{type:Bh,value:n,start:i,end:Ch+=3}:a===(t=n.substr(0,2))[1]&&"+-<>&|".indexOf(a)>=0||"=>"===t?{type:Bh,value:t,start:i,end:Ch+=2}:"<>=!+-*%&|^/".indexOf(a)>=0?(++Ch,{type:Bh,value:a,start:i,end:Ch}):void $p({},Jh,ap)}function Dp(e){let t="";for(;Ch<Mh&&dp(Dh[Ch]);)t+=Dh[Ch++];return 0===t.length&&$p({},Jh,ap),mp(Dh.charCodeAt(Ch))&&$p({},Jh,ap),{type:Rh,value:parseInt("0x"+t,16),start:e,end:Ch}}function Cp(e){let t="0"+Dh[Ch++];for(;Ch<Mh&&hp(Dh[Ch]);)t+=Dh[Ch++];return(mp(Dh.charCodeAt(Ch))||fp(Dh.charCodeAt(Ch)))&&$p({},Jh,ap),{type:Rh,value:parseInt(t,8),octal:!0,start:e,end:Ch}}function Mp(){var e,t,n;if(lp(fp((n=Dh[Ch]).charCodeAt(0))||"."===n,"Numeric literal must start with a decimal digit or a decimal point"),t=Ch,e="","."!==n){if(e=Dh[Ch++],n=Dh[Ch],"0"===e){if("x"===n||"X"===n)return++Ch,Dp(t);if(hp(n))return Cp(t);n&&fp(n.charCodeAt(0))&&$p({},Jh,ap)}for(;fp(Dh.charCodeAt(Ch));)e+=Dh[Ch++];n=Dh[Ch]}if("."===n){for(e+=Dh[Ch++];fp(Dh.charCodeAt(Ch));)e+=Dh[Ch++];n=Dh[Ch]}if("e"===n||"E"===n)if(e+=Dh[Ch++],"+"!==(n=Dh[Ch])&&"-"!==n||(e+=Dh[Ch++]),fp(Dh.charCodeAt(Ch)))for(;fp(Dh.charCodeAt(Ch));)e+=Dh[Ch++];else $p({},Jh,ap);return mp(Dh.charCodeAt(Ch))&&$p({},Jh,ap),{type:Rh,value:parseFloat(e),start:t,end:Ch}}function Fp(){var e,t,n,r,i="",o=!1;for(lp("'"===(e=Dh[Ch])||'"'===e,"String literal must starts with a quote"),t=Ch,++Ch;Ch<Mh;){if((n=Dh[Ch++])===e){e="";break}if("\\"===n)if((n=Dh[Ch++])&&gp(n.charCodeAt(0)))"\r"===n&&"\n"===Dh[Ch]&&++Ch;else switch(n){case"u":case"x":"{"===Dh[Ch]?(++Ch,i+=wp()):i+=xp(n);break;case"n":i+="\n";break;case"r":i+="\r";break;case"t":i+="\t";break;case"b":i+="\b";break;case"f":i+="\f";break;case"v":i+="\v";break;default:hp(n)?(0!==(r="01234567".indexOf(n))&&(o=!0),Ch<Mh&&hp(Dh[Ch])&&(o=!0,r=8*r+"01234567".indexOf(Dh[Ch++]),"0123".indexOf(n)>=0&&Ch<Mh&&hp(Dh[Ch])&&(r=8*r+"01234567".indexOf(Dh[Ch++]))),i+=String.fromCharCode(r)):i+=n}else{if(gp(n.charCodeAt(0)))break;i+=n}}return""!==e&&$p({},Jh,ap),{type:zh,value:i,octal:o,start:t,end:Ch}}function Sp(e,t){let n=e;t.indexOf("u")>=0&&(n=n.replace(/\\u\{([0-9a-fA-F]+)\}/g,((e,t)=>{if(parseInt(t,16)<=1114111)return"x";$p({},np)})).replace(/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,"x"));try{new RegExp(n)}catch(r){$p({},np)}try{return new RegExp(e,t)}catch(i){return null}}function Tp(){var e,t,n,r;for(lp("/"===(e=Dh[Ch]),"Regular expression literal must start with a slash"),t=Dh[Ch++],n=!1,r=!1;Ch<Mh;)if(t+=e=Dh[Ch++],"\\"===e)gp((e=Dh[Ch++]).charCodeAt(0))&&$p({},rp),t+=e;else if(gp(e.charCodeAt(0)))$p({},rp);else if(n)"]"===e&&(n=!1);else{if("/"===e){r=!0;break}"["===e&&(n=!0)}return r||$p({},rp),{value:t.substr(1,t.length-2),literal:t}}function Op(){var e,t,n;for(t="",n="";Ch<Mh&&vp((e=Dh[Ch]).charCodeAt(0));)++Ch,"\\"===e&&Ch<Mh?$p({},Jh,ap):(n+=e,t+=e);return n.search(/[^gimuy]/g)>=0&&$p({},np,n),{value:n,literal:t}}function Np(){var e,t,n,r;return Fh=null,bp(),e=Ch,t=Tp(),n=Op(),r=Sp(t.value,n.value),{literal:t.literal+n.literal,value:r,regex:{pattern:t.value,flags:n.value},start:e,end:Ch}}function Pp(e){return e.type===Oh||e.type===Nh||e.type===Sh||e.type===Ph}function Rp(){if(bp(),Ch>=Mh)return{type:Th,start:Ch,end:Ch};const e=Dh.charCodeAt(Ch);return mp(e)?kp():40===e||41===e||59===e?Ep():39===e||34===e?Fp():46===e?fp(Dh.charCodeAt(Ch+1))?Mp():Ep():fp(e)?Mp():Ep()}function Bp(){const e=Fh;return Ch=e.end,Fh=Rp(),Ch=e.end,e}function zp(){const e=Ch;Fh=Rp(),Ch=e}function jp(e){const t=new Ah(Lh);return t.elements=e,t}function Lp(e,t,n){const r=new Ah("||"===e||"&&"===e?Yh:Ih);return r.operator=e,r.left=t,r.right=n,r}function Ip(e,t){const n=new Ah(Uh);return n.callee=e,n.arguments=t,n}function Up(e,t,n){const r=new Ah(qh);return r.test=e,r.consequent=t,r.alternate=n,r}function qp(e){const t=new Ah(Wh);return t.name=e,t}function Wp(e){const t=new Ah(Hh);return t.value=e.value,t.raw=Dh.slice(e.start,e.end),e.regex&&("//"===t.raw&&(t.raw="/(?:)/"),t.regex=e.regex),t}function Hp(e,t,n){const r=new Ah(Vh);return r.computed="["===e,r.object=t,r.property=n,r.computed||(n.member=!0),r}function Yp(e){const t=new Ah(Gh);return t.properties=e,t}function Vp(e,t,n){const r=new Ah($h);return r.key=t,r.value=n,r.kind=e,r}function Gp(e,t){const n=new Ah(Xh);return n.operator=e,n.argument=t,n.prefix=!0,n}function $p(e,t){var n,r=Array.prototype.slice.call(arguments,2),i=t.replace(/%(\d)/g,((e,t)=>(lp(t<r.length,"Message reference must be in range"),r[t])));throw(n=new Error(i)).index=Ch,n.description=i,n}function Xp(e){e.type===Th&&$p(e,tp),e.type===Rh&&$p(e,Qh),e.type===zh&&$p(e,Zh),e.type===Oh&&$p(e,Kh),e.type===Nh&&$p(e,ep),$p(e,Jh,e.value)}function Jp(e){const t=Bp();t.type===Bh&&t.value===e||Xp(t)}function Qp(e){return Fh.type===Bh&&Fh.value===e}function Zp(e){return Fh.type===Nh&&Fh.value===e}function Kp(){const e=[];for(Ch=Fh.start,Jp("[");!Qp("]");)Qp(",")?(Bp(),e.push(null)):(e.push(gg()),Qp("]")||Jp(","));return Bp(),jp(e)}function eg(){Ch=Fh.start;const e=Bp();return e.type===zh||e.type===Rh?(e.octal&&$p(e,ip),Wp(e)):qp(e.value)}function tg(){var e,t,n;return Ch=Fh.start,(e=Fh).type===Oh?(n=eg(),Jp(":"),Vp("init",n,gg())):e.type!==Th&&e.type!==Bh?(t=eg(),Jp(":"),Vp("init",t,gg())):void Xp(e)}function ng(){var e,t,n=[],r={},i=String;for(Ch=Fh.start,Jp("{");!Qp("}");)t="$"+((e=tg()).key.type===Wh?e.key.name:i(e.key.value)),Object.prototype.hasOwnProperty.call(r,t)?$p({},op):r[t]=!0,n.push(e),Qp("}")||Jp(",");return Jp("}"),Yp(n)}function rg(){Jp("(");const e=mg();return Jp(")"),e}const ig={if:1};function og(){var e,t,n;if(Qp("("))return rg();if(Qp("["))return Kp();if(Qp("{"))return ng();if(e=Fh.type,Ch=Fh.start,e===Oh||ig[Fh.value])n=qp(Bp().value);else if(e===zh||e===Rh)Fh.octal&&$p(Fh,ip),n=Wp(Bp());else{if(e===Nh)throw new Error(sp);e===Sh?((t=Bp()).value="true"===t.value,n=Wp(t)):e===Ph?((t=Bp()).value=null,n=Wp(t)):Qp("/")||Qp("/=")?(n=Wp(Np()),zp()):Xp(Bp())}return n}function ag(){const e=[];if(Jp("("),!Qp(")"))for(;Ch<Mh&&(e.push(gg()),!Qp(")"));)Jp(",");return Jp(")"),e}function sg(){Ch=Fh.start;const e=Bp();return Pp(e)||Xp(e),qp(e.value)}function ug(){return Jp("."),sg()}function cg(){Jp("[");const e=mg();return Jp("]"),e}function lg(){var e;for(e=og();;)if(Qp("."))e=Hp(".",e,ug());else if(Qp("("))e=Ip(e,ag());else{if(!Qp("["))break;e=Hp("[",e,cg())}return e}function fg(){const e=lg();if(Fh.type===Bh&&(Qp("++")||Qp("--")))throw new Error(sp);return e}function dg(){var e,t;if(Fh.type!==Bh&&Fh.type!==Nh)t=fg();else{if(Qp("++")||Qp("--"))throw new Error(sp);if(Qp("+")||Qp("-")||Qp("~")||Qp("!"))e=Bp(),t=dg(),t=Gp(e.value,t);else{if(Zp("delete")||Zp("void")||Zp("typeof"))throw new Error(sp);t=fg()}}return t}function hg(e){let t=0;if(e.type!==Bh&&e.type!==Nh)return 0;switch(e.value){case"||":t=1;break;case"&&":t=2;break;case"|":t=3;break;case"^":t=4;break;case"&":t=5;break;case"==":case"!=":case"===":case"!==":t=6;break;case"<":case">":case"<=":case">=":case"instanceof":case"in":t=7;break;case"<<":case">>":case">>>":t=8;break;case"+":case"-":t=9;break;case"*":case"/":case"%":t=11}return t}function pg(){var e,t,n,r,i,o,a,s,u,c;if(e=Fh,u=dg(),0===(i=hg(r=Fh)))return u;for(r.prec=i,Bp(),t=[e,Fh],o=[u,r,a=dg()];(i=hg(Fh))>0;){for(;o.length>2&&i<=o[o.length-2].prec;)a=o.pop(),s=o.pop().value,u=o.pop(),t.pop(),n=Lp(s,u,a),o.push(n);(r=Bp()).prec=i,o.push(r),t.push(Fh),n=dg(),o.push(n)}for(n=o[c=o.length-1],t.pop();c>1;)t.pop(),n=Lp(o[c-1].value,o[c-2],n),c-=2;return n}function gg(){var e,t;return e=pg(),Qp("?")&&(Bp(),t=gg(),Jp(":"),e=Up(e,t,gg())),e}function mg(){const e=gg();if(Qp(","))throw new Error(sp);return e}function vg(e){Ch=0,Mh=(Dh=e).length,Fh=null,zp();const t=mg();if(Fh.type!==Th)throw new Error("Unexpect token after expression.");return t}function yg(e){const t=[];return"Identifier"===e.type?[e.name]:"Literal"===e.type?[e.value]:("MemberExpression"===e.type&&(t.push(...yg(e.object)),t.push(...yg(e.property))),t)}function bg(e){return"MemberExpression"===e.object.type?bg(e.object):"datum"===e.object.name}function xg(e){const t=vg(e),n=new Set;return t.visit((e=>{"MemberExpression"===e.type&&bg(e)&&n.add(yg(e).slice(1).join("."))})),n}class wg extends gd{clone(){return new wg(null,this.model,X(this.filter))}constructor(e,t,n){super(e),this.model=t,this.filter=n,Tn(this,"expr",void 0),Tn(this,"_dependentFields",void 0),this.expr=Dg(this.model,this.filter,this),this._dependentFields=xg(this.expr)}dependentFields(){return this._dependentFields}producedFields(){return new Set}assemble(){return{type:"filter",expr:this.expr}}hash(){return"Filter ".concat(this.expr)}}function _g(e,t){const n={},r=e.config.selection;var i,a=u(he(null!==t&&void 0!==t?t:{}));try{for(a.s();!(i=a.n()).done;){const a=i.value,u=X(t[a]),l=r[u.type],f=(l.fields,l.encodings,o(l,["fields","encodings"]));for(const e in f){var c;"encodings"===e&&u.fields||"fields"===e&&u.encodings||("mark"===e&&(u[e]=s(s({},f[e]),u[e])),(void 0===u[e]||!0===u[e])&&(u[e]=null!==(c=f[e])&&void 0!==c?c:u[e]))}const d=ve(a),h=n[d]=s(s({},u),{},{name:d,events:B(u.on)?wf(u.on,"scope"):X(u.on)});jd(h,(n=>{n.has(h)&&n.parse&&n.parse(e,h,u,t[a])}))}}catch(l){a.e(l)}finally{a.f()}return n}function Ag(e,t,n,r="datum"){const i=[];function o(t){const o=ve(t),a=e.getSelectionComponent(o,t),s=z(o+nh);if(a.project.timeUnit){const t=null!==n&&void 0!==n?n:e.component.data.raw,r=a.project.timeUnit.clone();t.parent?r.insertAsParentOf(t):t.parent=r}return"none"!==a.empty&&i.push(s),"vlSelectionTest(".concat(s,", ").concat(r)+("global"===a.resolve?")":", ".concat(z(a.resolve),")"))}const a=ye(t,o);return(i.length?"!("+i.map((e=>"length(data(".concat(e,"))"))).join(" || ")+") || ":"")+"(".concat(a,")")}function kg(e,t){const n=t.encoding;let r=t.field;if(n||r){if(n&&!r){const i=e.project.items.filter((e=>e.channel===n));!i.length||i.length>1?(r=e.project.items[0].field,ni((i.length?"Multiple ":"No ")+"matching ".concat(z(n)," encoding found for selection ").concat(z(t.selection),". ")+'Using "field": '.concat(z(r),"."))):r=i[0].field}}else r=e.project.items[0].field,e.project.items.length>1&&ni('A "field" or "encoding" must be specified when using a selection as a scale domain. '+'Using "field": '.concat(z(r),"."));return"".concat(e.name,"[").concat(z(r),"]")}function Eg(e,t){sh(e,(n=>{const r=n.name,i=e.getName("lookup_".concat(r));e.component.data.outputNodes[i]=n.materialized=new md(new wg(t,e,{selection:r}),i,jl.Lookup,e.component.data.outputNodeRefCounts)}))}function Dg(e,t,n){return ye(t,(t=>B(t)?t:zi(t)?Ag(e,t.selection,n):Xi(t)))}function Cg(e,t){if(e)return k(e)&&!Ws(e)?e.map((e=>Es(e,t))).join(", "):e}function Mg(e,t,n,r){var i,o,a;e.encode=null!==(i=e.encode)&&void 0!==i?i:{},e.encode[t]=null!==(o=e.encode[t])&&void 0!==o?o:{},e.encode[t].update=null!==(a=e.encode[t].update)&&void 0!==a?a:{},e.encode[t].update[n]=r}function Fg(e,t,n,r={header:!1}){const i=e.combine(),a=i.disable,c=i.orient,l=i.scale,f=i.labelExpr,d=i.title,h=i.zindex,p=o(i,["disable","orient","scale","labelExpr","title","zindex"]);if(!a){for(const e in p){const n=Le[e],r=p[e];if(n&&n!==t&&"both"!==n)delete p[e];else if(ze(r)){const t=r.condition,n=o(r,["condition"]),i=S(t),a=Be[e];if(a){const t=a.vgProp;Mg(p,a.part,t,[...i.map((e=>{const t=e.test,n=o(e,["test"]);return s({test:Dg(null,t)},n)})),n]),delete p[e]}else if(null===a){const t={signal:i.map((e=>{const t=e.test,n=o(e,["test"]);return"".concat(Dg(null,t)," ? ").concat($s(n)," : ")})).join("")+$s(n)};p[e]=t}}else if(Fi(r)){const t=Be[e];if(t){const n=t.vgProp;Mg(p,t.part,n,r),delete p[e]}}}if("grid"===t){if(!p.grid)return;if(p.encode){const e=p.encode.grid;p.encode=s({},e?{grid:e}:{}),de(p.encode)&&delete p.encode}return s(s({scale:l,orient:c},p),{},{domain:!1,labels:!1,aria:!1,maxExtent:0,minExtent:0,ticks:!1,zindex:Me(h,0)})}{if(!r.header&&e.mainExtracted)return;if(void 0!==f){var g,m;let e=f;(null===(g=p.encode)||void 0===g||null===(m=g.labels)||void 0===m?void 0:m.update)&&Fi(p.encode.labels.update.text)&&(e=Ee(f,"datum.label",p.encode.labels.update.text.signal)),Mg(p,"labels","text",{signal:e})}if(null===p.labelAlign&&delete p.labelAlign,p.encode){var v,y=u(je);try{for(y.s();!(v=y.n()).done;){const t=v.value;e.hasAxisPart(t)||delete p.encode[t]}}catch(b){y.e(b)}finally{y.f()}de(p.encode)&&delete p.encode}const t=Cg(d,n);return s(s(s(s({scale:l,orient:c,grid:!1},t?{title:t}:{}),p),!1===n.aria?{aria:!1}:{}),{},{zindex:Me(h,0)})}}}function Sg(e){const t=e.component.axes,n=[];var r,i=u(un);try{for(i.s();!(r=i.n()).done;){const i=r.value;if(t[i]){var o,a=u(t[i]);try{for(a.s();!(o=a.n()).done;){const t=o.value;if(!t.get("disable")&&!t.get("gridScale")){const t="x"===i?"height":"width",r=e.getSizeSignalRef(t).signal;t!==r&&n.push({name:t,update:r})}}}catch(s){a.e(s)}finally{a.f()}}}}catch(s){i.e(s)}finally{i.f()}return n}function Tg(e,t){const n=e.x,r=void 0===n?[]:n,i=e.y,o=void 0===i?[]:i;return[...r.map((e=>Fg(e,"grid",t))),...o.map((e=>Fg(e,"grid",t))),...r.map((e=>Fg(e,"main",t))),...o.map((e=>Fg(e,"main",t)))].filter((e=>e))}function Og(e,t,n,r){return Object.assign.apply(null,[{},...e.map((e=>{if("axisOrient"===e){const e="x"===n?"bottom":"left",s=t["x"===n?"axisBottom":"axisLeft"]||{},c=t["x"===n?"axisTop":"axisRight"]||{},l=new Set([...he(s),...he(c)]),f={};var i,o=u(l.values());try{for(o.s();!(i=o.n()).done;){const t=i.value;f[t]={signal:"".concat(r.signal,' === "').concat(e,'" ? ').concat(Xs(s[t])," : ").concat(Xs(c[t]))}}}catch(a){o.e(a)}finally{o.f()}return f}return t[e]}))])}function Ng(e,t,n,r){const i="band"===t?["axisDiscrete","axisBand"]:"point"===t?["axisDiscrete","axisPoint"]:po(t)?["axisQuantitative"]:"time"===t||"utc"===t?["axisTemporal"]:[],o="x"===e?"axisX":"axisY",a=Fi(n)?"axisOrient":"axis"+xe(n),s=[...i,...i.map((e=>o+e.substr(4)))],u=["axis",a,o];return{vlOnlyAxisConfig:Og(s,r,e,n),vgAxisConfig:Og(u,r,e,n),axisConfigStyle:Pg([...u,...s],r)}}function Pg(e,t){const n=[{}];var r,i=u(e);try{for(i.s();!(r=i.n()).done;){var o;let e=null===(o=t[r.value])||void 0===o?void 0:o.style;if(e){e=S(e);var a,s=u(e);try{for(s.s();!(a=s.n()).done;){const e=a.value;n.push(t.style[e])}}catch(c){s.e(c)}finally{s.f()}}}}catch(c){i.e(c)}finally{i.f()}return Object.assign.apply(null,n)}function Rg(e,t,n,r={}){const i=tu(e,n,t);if(void 0!==i)return{configFrom:"style",configValue:i};for(var o=0,a=["vlOnlyAxisConfig","vgAxisConfig","axisConfigStyle"];o<a.length;o++){const t=a[o];var s;if(void 0!==(null===(s=r[t])||void 0===s?void 0:s[e]))return{configFrom:t,configValue:r[t][e]}}return{}}const Bg={scale:({model:e,channel:t})=>e.scaleName(t),format:({fieldOrDatumDef:e,config:t,axis:n})=>{const r=n.format,i=n.formatType;return Da(e,e.type,r,i,t,!0)},formatType:({axis:e,fieldOrDatumDef:t,scaleType:n})=>Ca(e.formatType,t,n),grid:({fieldOrDatumDef:e,axis:t,scaleType:n})=>{return(!Ka(e)||!Cn(e.bin))&&(null!==(r=t.grid)&&void 0!==r?r:zg(n,e));var r},gridScale:({model:e,channel:t})=>jg(e,t),labelAlign:({axis:e,labelAngle:t,orient:n,channel:r})=>e.labelAlign||qg(t,n,r),labelAngle:({labelAngle:e})=>e,labelBaseline:({axis:e,labelAngle:t,orient:n,channel:r})=>e.labelBaseline||Ug(t,n,r),labelFlush:({axis:e,fieldOrDatumDef:t,channel:n})=>{var r;return null!==(r=e.labelFlush)&&void 0!==r?r:Wg(t.type,n)},labelOverlap:({axis:e,fieldOrDatumDef:t,scaleType:n})=>{var r;return null!==(r=e.labelOverlap)&&void 0!==r?r:Hg(t.type,n,Ka(t)&&!!t.timeUnit,Ka(t)?t.sort:void 0)},orient:({orient:e})=>e,tickCount:({channel:e,model:t,axis:n,fieldOrDatumDef:r,scaleType:i})=>{var o;const a="x"===e?"width":"y"===e?"height":void 0,s=a?t.getSizeSignalRef(a):void 0;return null!==(o=n.tickCount)&&void 0!==o?o:Vg({fieldOrDatumDef:r,scaleType:i,size:s,values:n.values})},title:({axis:e,model:t,channel:n})=>{if(void 0!==e.title)return e.title;const r=Gg(t,n);if(void 0!==r)return r;const i=t.typedFieldDef(n),o="x"===n?"x2":"y2",a=t.fieldDef(o);return ru(i?[Ya(i)]:[],Ka(a)?[Ya(a)]:[])},values:({axis:e,fieldOrDatumDef:t})=>$g(e,t),zindex:({axis:e,fieldOrDatumDef:t,mark:n})=>{var r;return null!==(r=e.zindex)&&void 0!==r?r:Xg(n,t)}};function zg(e,t){return!yo(e)&&Ka(t)&&!Dn(null===t||void 0===t?void 0:t.bin)}function jg(e,t){const n="x"===t?"y":"x";if(e.getScaleComponent(n))return e.scaleName(n)}function Lg(e,t,n,r,i){const o=null===t||void 0===t?void 0:t.labelAngle;if(void 0!==o)return Fi(o)?o:Pe(o);{const o=Rg("labelAngle",r,null===t||void 0===t?void 0:t.style,i).configValue;return void 0!==o?Pe(o):n!==rt||!te([no,eo],e.type)||Ka(e)&&e.timeUnit?void 0:270}}function Ig(e){return"(((".concat(e.signal," % 360) + 360) % 360)")}function Ug(e,t,n,r){if(void 0!==e){if("x"===n){if(Fi(e)){const n=Ig(e),r=Fi(t)?"(".concat(t.signal,' === "top")'):"top"===t;return{signal:"(45 < ".concat(n," && ").concat(n," < 135) || (225 < ").concat(n," && ").concat(n,' < 315) ? "middle" :')+"(".concat(n," <= 45 || 315 <= ").concat(n,") === ").concat(r,' ? "bottom" : "top"')}}if(45<e&&e<135||225<e&&e<315)return"middle";if(Fi(t)){const n=e<=45||315<=e?"===":"!==";return{signal:"".concat(t.signal," ").concat(n,' "top" ? "bottom" : "top"')}}return(e<=45||315<=e)===("top"===t)?"bottom":"top"}if(Fi(e)){const n=Ig(e),i=Fi(t)?"(".concat(t.signal,' === "left")'):"left"===t,o=r?'"middle"':"null";return{signal:"".concat(n," <= 45 || 315 <= ").concat(n," || (135 <= ").concat(n," && ").concat(n," <= 225) ? ").concat(o," : (45 <= ").concat(n," && ").concat(n," <= 135) === ").concat(i,' ? "top" : "bottom"')}}if(e<=45||315<=e||135<=e&&e<=225)return r?"middle":null;if(Fi(t)){const n=45<=e&&e<=135?"===":"!==";return{signal:"".concat(t.signal," ").concat(n,' "left" ? "top" : "bottom"')}}return(45<=e&&e<=135)===("left"===t)?"top":"bottom"}}function qg(e,t,n){if(void 0===e)return;const r="x"===n,i=r?0:90,o=r?"bottom":"left";if(Fi(e)){const n=Ig(e),a=Fi(t)?"(".concat(t.signal,' === "').concat(o,'")'):t===o;return{signal:"(".concat(i?"("+n+" + 90)":n," % 180 === 0) ? ").concat(r?null:'"center"'," :")+"(".concat(i," < ").concat(n," && ").concat(n," < ").concat(180+i,") === ").concat(a,' ? "left" : "right"')}}if((e+i)%180===0)return r?null:"center";if(Fi(t)){const n=i<e&&e<180+i?"===":"!==",r="".concat(t.signal," ").concat(n,' "').concat(o,'"');return{signal:"".concat(r,' ? "left" : "right"')}}return(i<e&&e<180+i)===(t===o)?"left":"right"}function Wg(e,t){if("x"===t&&te(["quantitative","temporal"],e))return!0}function Hg(e,t,n,r){if(n&&!E(r)||"nominal"!==e&&"ordinal"!==e)return"log"!==t&&"symlog"!==t||"greedy"}function Yg(e){return"x"===e?"bottom":"left"}function Vg({fieldOrDatumDef:e,scaleType:t,size:n,values:r}){if(!r&&!yo(t)&&"log"!==t){if(Ka(e)){var i;if(Dn(e.bin))return{signal:"ceil(".concat(n.signal,"/10)")};if(e.timeUnit&&te(["month","hours","day","quarter"],null===(i=Ci(e.timeUnit))||void 0===i?void 0:i.unit))return}return{signal:"ceil(".concat(n.signal,"/40)")}}}function Gg(e,t){const n="x"===t?"x2":"y2",r=e.fieldDef(t),i=e.fieldDef(n),o=r?r.title:void 0,a=i?i.title:void 0;return o&&a?iu(o,a):o||a||(void 0!==o?o:void 0!==a?a:void 0)}function $g(e,t){const n=e.values;return k(n)?Is(t,n):Fi(n)?n:void 0}function Xg(e,t){return"rect"===e&&ps(t)?1:0}class Jg extends gd{clone(){return new Jg(null,X(this.transform))}constructor(e,t){super(e),this.transform=t,Tn(this,"_dependentFields",void 0),this._dependentFields=xg(this.transform.calculate)}static parseAllForSortIndex(e,t){return t.forEachFieldDef(((t,n)=>{if(ss(t)&&La(t.sort)){const r=t.field,i=t.timeUnit,o=t.sort,a=o.map(((e,t)=>"".concat(Xi({field:r,timeUnit:i,equal:e})," ? ").concat(t," : "))).join("")+o.length;e=new Jg(e,{calculate:a,as:Qg(t,n,{forAs:!0})})}})),e}producedFields(){return new Set([this.transform.as])}dependentFields(){return this._dependentFields}assemble(){return{type:"formula",expr:this.transform.calculate,as:this.transform.as}}hash(){return"Calculate ".concat(K(this.transform))}}function Qg(e,t,n){return hs(e,s({prefix:t,suffix:"sort_index"},null!==n&&void 0!==n?n:{}))}function Zg(e,t){return te(["top","bottom"],t)?"column":te(["left","right"],t)||"row"===e?"row":"column"}function Kg(e,t,n,r){const i="row"===r?n.headerRow:"column"===r?n.headerColumn:n.headerFacet;return Me((t||{})[e],i[e],n.header[e])}function em(e,t,n,r){const i={};var o,a=u(e);try{for(a.s();!(o=a.n()).done;){const e=o.value,a=Kg(e,t||{},n,r);void 0!==a&&(i[e]=a)}}catch(s){a.e(s)}finally{a.f()}return i}const tm=["row","column"],nm=["header","footer"];function rm(e,t){const n=e.component.layoutHeaders[t].title,r=e.config?e.config:void 0,i=e.component.layoutHeaders[t].facetFieldDef?e.component.layoutHeaders[t].facetFieldDef:void 0,o=em(["titleAnchor","titleAngle","titleOrient"],i.header,r,t),a=o.titleAnchor,u=o.titleAngle,c=Zg(t,o.titleOrient),l=Pe(u);return{name:"".concat(t,"-title"),type:"group",role:"".concat(c,"-title"),title:s(s(s(s({text:n},"row"===t?{orient:"left"}:{}),{},{style:"guide-title"},om(l,c)),im(c,l,a)),hm(r,i,t,ec,Zu))}}function im(e,t,n="middle"){switch(n){case"start":return{align:"left"};case"end":return{align:"right"}}const r=qg(t,"row"===e?"left":"top","row"===e?"y":"x");return r?{align:r}:{}}function om(e,t){const n=Ug(e,"row"===t?"left":"top","row"===t?"y":"x",!0);return n?{baseline:n}:{}}function am(e,t){const n=e.component.layoutHeaders[t],r=[];var i,o=u(nm);try{for(o.s();!(i=o.n()).done;){const o=i.value;if(n[o]){var a,s=u(n[o]);try{for(s.s();!(a=s.n()).done;){const i=cm(e,t,o,n,a.value);null!=i&&r.push(i)}}catch(c){s.e(c)}finally{s.f()}}}}catch(c){o.e(c)}finally{o.f()}return r}function sm(e,t){const n=e.sort;var r;return ja(n)?{field:hs(n,{expr:"datum"}),order:null!==(r=n.order)&&void 0!==r?r:"ascending"}:k(n)?{field:Qg(e,t,{expr:"datum"}),order:"ascending"}:{field:hs(e,{expr:"datum"}),order:null!==n&&void 0!==n?n:"ascending"}}function um(e,t,n){const r=em(["format","formatType","labelAngle","labelAnchor","labelOrient","labelExpr"],e.header,n,t),i=r.format,o=r.formatType,a=r.labelAngle,u=r.labelAnchor,c=r.labelOrient,l=r.labelExpr,f=Aa({fieldOrDatumDef:e,format:i,formatType:o,expr:"parent",config:n}).signal,d=Zg(t,c);return s(s(s(s({text:{signal:l?Ee(Ee(l,"datum.label",f),"datum.value",hs(e,{expr:"parent"})):f}},"row"===t?{orient:"left"}:{}),{},{style:"guide-label",frame:"group"},om(a,d)),im(d,a,u)),hm(n,e,t,tc,Ku))}function cm(e,t,n,r,i){if(i){let o=null;const a=r.facetFieldDef,u=e.config?e.config:void 0;if(a&&i.labels){const e=em(["labelOrient"],a.header,u,t).labelOrient;("row"===t&&!te(["top","bottom"],e)||"column"===t&&!te(["left","right"],e))&&(o=um(a,t,u))}const c=lb(e)&&!Ia(e.facet),l=i.axes,f=(null===l||void 0===l?void 0:l.length)>0;if(o||f){const u="row"===t?"height":"width";return s(s(s(s(s({name:e.getName("".concat(t,"_").concat(n)),type:"group",role:"".concat(t,"-").concat(n)},r.facetFieldDef?{from:{data:e.getName(t+"_domain")},sort:sm(a,t)}:{}),f&&c?{from:{data:e.getName("facet_domain_".concat(t))}}:{}),o?{title:o}:{}),i.sizeSignal?{encode:{update:{[u]:i.sizeSignal}}}:{}),f?{axes:l}:{})}}return null}const lm={column:{start:0,end:1},row:{start:1,end:0}};function fm(e,t){return lm[t][e]}function dm(e,t){const n={};var r,i=u(Ht);try{for(i.s();!(r=i.n()).done;){const i=r.value,o=e[i];if(null===o||void 0===o?void 0:o.facetFieldDef){const e=em(["titleAnchor","titleOrient"],o.facetFieldDef.header,t,i),r=e.titleAnchor,a=Zg(i,e.titleOrient),s=fm(r,a);void 0!==s&&(n[a]=s)}}}catch(o){i.e(o)}finally{i.f()}return de(n)?void 0:n}function hm(e,t,n,r,i){const o={};var a,s=u(r);try{for(s.s();!(a=s.n()).done;){const r=a.value;if(!i[r])continue;const s=Kg(r,null===t||void 0===t?void 0:t.header,e,n);void 0!==s&&(o[i[r]]=s)}}catch(c){s.e(c)}finally{s.f()}return o}function pm(e){return[...gm(e,"width"),...gm(e,"height"),...gm(e,"childWidth"),...gm(e,"childHeight")]}function gm(e,t){const n="width"===t?"x":"y",r=e.component.layoutSize.get(t);if(!r||"merged"===r)return[];const i=e.getSizeSignalRef(t).signal;if("step"===r){const t=e.getScaleComponent(n);if(t){const r=t.get("type"),o=t.get("range");if(yo(r)&&Si(o)){const r=e.scaleName(n);return lb(e.parent)&&"independent"===e.parent.component.resolve.scale[n]?[mm(r,o)]:[mm(r,o),{name:i,update:vm(r,t,"domain('".concat(r,"').length"))}]}}throw new Error("layout size is step although width/height is not step.")}if("container"==r){const t=i.endsWith("width"),n=t?"containerSize()[0]":"containerSize()[1]",r=kc(e.config.view,t?"width":"height"),o="isFinite(".concat(n,") ? ").concat(n," : ").concat(r);return[{name:i,init:o,on:[{update:o,events:"window:resize"}]}]}return[{name:i,value:r}]}function mm(e,t){return{name:e+"_step",value:t.step}}function vm(e,t,n){const r=t.get("type"),i=t.get("padding"),o=Me(t.get("paddingOuter"),i);let a=t.get("paddingInner");return a="band"===r?void 0!==a?a:i:1,"bandspace(".concat(n,", ").concat(Xs(a),", ").concat(Xs(o),") * ").concat(e,"_step")}function ym(e){return"childWidth"===e?"width":"childHeight"===e?"height":e}function bm(e,t){return he(e).reduce(((n,r)=>{const i=e[r];return s(s({},n),Ff(t,i,r,(e=>Gs(e.value))))}),{})}function xm(e,t){if(db(t)||lb(t))return"shared";if(fb(t))return cn(e)?"independent":"shared";throw new Error("invalid model type for resolve")}function wm(e,t){const n=e.scale[t],r=cn(t)?"axis":"legend";return"independent"===n?("shared"===e[r][t]&&ni(Pr(t)),"independent"):e[r][t]||"shared"}const _m=s(s({},oc),{},{disable:1,labelExpr:1,selections:1,opacity:1,shape:1,stroke:1,fill:1,size:1,strokeWidth:1,strokeDash:1,encode:1}),Am=he(_m);class km extends kl{}const Em={symbols:Dm,gradient:Cm,labels:Mm,entries:Fm};function Dm(e,{fieldOrDatumDef:t,model:n,channel:r,legendCmpt:i,legendType:o}){var a,u,c,l;if("symbol"!==o)return;const f=n.markDef,d=n.encoding,h=n.config,p=n.mark,g=f.filled&&"trail"!==p;let m=s(s({},Js({},n,ea)),Lf(n,{filled:g}));const v=null!==(a=i.get("symbolOpacity"))&&void 0!==a?a:h.legend.symbolOpacity,y=null!==(u=i.get("symbolFillColor"))&&void 0!==u?u:h.legend.symbolFillColor,b=null!==(c=i.get("symbolStrokeColor"))&&void 0!==c?c:h.legend.symbolStrokeColor,x=void 0===v?null!==(l=Sm(d.opacity))&&void 0!==l?l:f.opacity:void 0;var w;if(m.fill)if("fill"===r||g&&r===gt)delete m.fill;else if(m.fill.field)y?delete m.fill:(m.fill=Gs(null!==(w=h.legend.symbolBaseFillColor)&&void 0!==w?w:"black"),m.fillOpacity=Gs(null!==x&&void 0!==x?x:1));else if(k(m.fill)){var _,A,E;const e=null!==(_=null!==(A=Tm(null!==(E=d.fill)&&void 0!==E?E:d.color))&&void 0!==A?A:f.fill)&&void 0!==_?_:g&&f.color;e&&(m.fill=Gs(e))}if(m.stroke)if("stroke"===r||!g&&r===gt)delete m.stroke;else if(m.stroke.field||b)delete m.stroke;else if(k(m.stroke)){const e=Me(Tm(d.stroke||d.color),f.stroke,g?f.color:void 0);e&&(m.stroke={value:e})}if(r!==wt){const e=Ka(t)&&Nm(n,i,t);e?m.opacity=[s({test:e},Gs(null!==x&&void 0!==x?x:1)),Gs(h.legend.unselectedOpacity)]:x&&(m.opacity=Gs(x))}return m=s(s({},m),e),de(m)?void 0:m}function Cm(e,{model:t,legendType:n,legendCmpt:r}){var i;if("gradient"!==n)return;const o=t.config,a=t.markDef,u=t.encoding;let c={};const l=void 0===(null!==(i=r.get("gradientOpacity"))&&void 0!==i?i:o.legend.gradientOpacity)?Sm(u.opacity)||a.opacity:void 0;return l&&(c.opacity=Gs(l)),c=s(s({},c),e),de(c)?void 0:c}function Mm(e,{fieldOrDatumDef:t,model:n,channel:r,legendCmpt:i}){const o=n.legend(r)||{},a=n.config,u=Ka(t)?Nm(n,i,t):void 0,c=u?[{test:u,value:1},{value:a.legend.unselectedOpacity}]:void 0,l=o.format,f=o.formatType,d=xa(f)?Ea({fieldOrDatumDef:t,field:"datum.value",format:l,formatType:f,config:a}):void 0,h=s(s(s({},c?{opacity:c}:{}),d?{text:d}:{}),e);return de(h)?void 0:h}function Fm(e,{legendCmpt:t}){const n=t.get("selections");return(null===n||void 0===n?void 0:n.length)?s(s({},e),{},{fill:{value:"transparent"}}):e}function Sm(e){return Om(e,((e,t)=>Math.max(e,t.value)))}function Tm(e){return Om(e,((e,t)=>Me(e,t.value)))}function Om(e,t){return Za(e)?S(e.condition).reduce(t,e.value):as(e)?e.value:void 0}function Nm(e,t,n){const r=t.get("selections");if(!(null===r||void 0===r?void 0:r.length))return;const i=z(n.field);return r.map((e=>{const t=z(ve(e)+nh);return"(!length(data(".concat(t,")) || (").concat(e,"[").concat(i,"] && indexof(").concat(e,"[").concat(i,"], datum.value) >= 0))")})).join(" || ")}const Pm={direction:({direction:e})=>e,format:({fieldOrDatumDef:e,legend:t,config:n})=>{const r=t.format,i=t.formatType;return Da(e,e.type,r,i,n,!1)},formatType:({legend:e,fieldOrDatumDef:t,scaleType:n})=>Ca(e.formatType,t,n),gradientLength:e=>{var t,n;const r=e.legend,i=e.legendConfig;return null!==(t=null!==(n=r.gradientLength)&&void 0!==n?n:i.gradientLength)&&void 0!==t?t:Um(e)},labelOverlap:({legend:e,legendConfig:t,scaleType:n})=>{var r,i;return null!==(r=null!==(i=e.labelOverlap)&&void 0!==i?i:t.labelOverlap)&&void 0!==r?r:Wm(n)},symbolType:({legend:e,markDef:t,channel:n,encoding:r})=>{var i;return null!==(i=e.symbolType)&&void 0!==i?i:Bm(t.type,n,r.shape,t.shape)},title:({fieldOrDatumDef:e,config:t})=>As(e,t,{allowDisabling:!0}),type:({legendType:e,scaleType:t,channel:n})=>{if(qt(n)&&xo(t)){if("gradient"===e)return}else if("symbol"===e)return;return e},values:({fieldOrDatumDef:e,legend:t})=>Rm(t,e)};function Rm(e,t){const n=e.values;return k(n)?Is(t,n):Fi(n)?n:void 0}function Bm(e,t,n,r){if("shape"!==t){var i;const e=null!==(i=Tm(n))&&void 0!==i?i:r;if(e)return e}switch(e){case"bar":case"rect":case"image":case"square":return"square";case"line":case"trail":case"rule":return"stroke";case"arc":case"point":case"circle":case"tick":case"geoshape":case"area":case"text":return"circle"}}function zm(e){return Me(e.legend.type,jm(e))}function jm({channel:e,timeUnit:t,scaleType:n}){if(qt(e)){if(te(["quarter","month","day"],t))return"symbol";if(xo(n))return"gradient"}return"symbol"}function Lm({legendConfig:e,legendType:t,orient:n,legend:r}){var i,o;return null!==(i=null!==(o=r.direction)&&void 0!==o?o:e[t?"gradientDirection":"symbolDirection"])&&void 0!==i?i:Im(n,t)}function Im(e,t){switch(e){case"top":case"bottom":return"horizontal";case"left":case"right":case"none":case void 0:return;default:return"gradient"===t?"horizontal":void 0}}function Um({legendConfig:e,model:t,direction:n,orient:r,scaleType:i}){const o=e.gradientHorizontalMaxLength,a=e.gradientHorizontalMinLength,s=e.gradientVerticalMaxLength,u=e.gradientVerticalMinLength;if(xo(i))return"horizontal"===n?"top"===r||"bottom"===r?qm(t,"width",a,o):a:qm(t,"height",u,s)}function qm(e,t,n,r){const i=e.getSizeSignalRef(t).signal;return{signal:"clamp(".concat(i,", ").concat(n,", ").concat(r,")")}}function Wm(e){if(te(["quantile","threshold","log","symlog"],e))return"greedy"}function Hm(e){const t=cb(e)?Ym(e):Xm(e);return e.component.legends=t,t}function Ym(e){const t=e.encoding,n={};for(var r=0,i=[gt,...rc];r<i.length;r++){const o=i[r],a=Fs(t[o]);a&&e.getScaleComponent(o)&&(o===yt&&Ka(a)&&a.type===ro||(n[o]=$m(e,o)))}return n}function Vm(e,t){const n=e.scaleName(t);if("trail"===e.mark){if("color"===t)return{stroke:n};if("size"===t)return{strokeWidth:n}}return"color"===t?e.markDef.filled?{fill:n}:{stroke:n}:{[t]:n}}function Gm(e,t,n,r){switch(t){case"disable":return void 0!==n;case"values":return!!(null===n||void 0===n?void 0:n.values);case"title":if("title"===t&&e===(null===r||void 0===r?void 0:r.title))return!0}return e===(n||{})[t]}function $m(e,t){var n,r,i;let o=e.legend(t);const a=e.markDef,c=e.encoding,l=e.config,f=l.legend,d=new km({},Vm(e,t));Md(e,t,d);const h=void 0!==o?!o:f.disable;if(d.set("disable",h,void 0!==o),h)return d;o=o||{};const p=e.getScaleComponent(t).get("type"),g=Fs(c[t]),m=Ka(g)?null===(n=Ci(g.timeUnit))||void 0===n?void 0:n.unit:void 0,v=o.orient||l.legend.orient||"right",y=zm({legend:o,channel:t,timeUnit:m,scaleType:p}),b={legend:o,channel:t,model:e,markDef:a,encoding:c,fieldOrDatumDef:g,legendConfig:f,config:l,scaleType:p,orient:v,legendType:y,direction:Lm({legend:o,legendType:y,orient:v,legendConfig:f})};var x,w=u(Am);try{for(w.s();!(x=w.n()).done;){const n=x.value;if("gradient"===y&&n.startsWith("symbol")||"symbol"===y&&n.startsWith("gradient"))continue;const r=n in Pm?Pm[n](b):o[n];if(void 0!==r){const i=Gm(r,n,o,e.fieldDef(t));(i||void 0===l.legend[n])&&d.set(n,r,i)}}}catch(S){w.e(S)}finally{w.f()}const _=null!==(r=null===(i=o)||void 0===i?void 0:i.encoding)&&void 0!==r?r:{},A=d.get("selections"),k={},E={fieldOrDatumDef:g,model:e,channel:t,legendCmpt:d,legendType:y};for(var D=0,C=["labels","legend","title","symbols","gradient","entries"];D<C.length;D++){const t=C[D];var M;const n=bm(null!==(M=_[t])&&void 0!==M?M:{},e),r=t in Em?Em[t](n,E):n;void 0===r||de(r)||(k[t]=s(s(s({},(null===A||void 0===A?void 0:A.length)&&Ka(g)?{name:"".concat(ve(g.field),"_legend_").concat(t)}:{}),(null===A||void 0===A?void 0:A.length)?{interactive:!!A}:{}),{},{update:r}))}var F;return de(k)||d.set("encode",k,!!(null===(F=o)||void 0===F?void 0:F.encoding)),d}function Xm(e){const t=e.component,n=t.legends,r=t.resolve;var i,o=u(e.children);try{for(o.s();!(i=o.n()).done;){const t=i.value;Hm(t);var a,s=u(he(t.component.legends));try{for(s.s();!(a=s.n()).done;){const i=a.value;r.legend[i]=wm(e.component.resolve,i),"shared"===r.legend[i]&&(n[i]=Jm(n[i],t.component.legends[i]),n[i]||(r.legend[i]="independent",delete n[i]))}}catch(h){s.e(h)}finally{s.f()}}}catch(h){o.e(h)}finally{o.f()}var c,l=u(he(n));try{for(l.s();!(c=l.n()).done;){const t=c.value;var f,d=u(e.children);try{for(d.s();!(f=d.n()).done;){const e=f.value;e.component.legends[t]&&"shared"===r.legend[t]&&delete e.component.legends[t]}}catch(h){d.e(h)}finally{d.f()}}}catch(h){l.e(h)}finally{l.f()}return n}function Jm(e,t){if(!e)return t.clone();const n=e.getWithExplicit("orient"),r=t.getWithExplicit("orient");if(n.explicit&&r.explicit&&n.value!==r.value)return;let i=!1;var o,a,s,c,l,f=u(Am);try{for(f.s();!(o=f.n()).done;){const n=o.value,r=Fl(e.getWithExplicit(n),t.getWithExplicit(n),n,"legend",((e,t)=>{switch(n){case"symbolType":return Qm(e,t);case"title":return ou(e,t);case"type":return i=!0,Dl("symbol")}return Ml(e,t,n,"legend")}));e.setWithExplicit(n,r)}}catch(d){f.e(d)}finally{f.f()}return i&&((null===(a=e.implicit)||void 0===a||null===(s=a.encode)||void 0===s?void 0:s.gradient)&&be(e.implicit,["encode","gradient"]),(null===(c=e.explicit)||void 0===c||null===(l=c.encode)||void 0===l?void 0:l.gradient)&&be(e.explicit,["encode","gradient"])),e}function Qm(e,t){return"circle"===t.value?t:e}function Zm(e,t,n,r){var i,o,a;e.encode=null!==(i=e.encode)&&void 0!==i?i:{},e.encode[t]=null!==(o=e.encode[t])&&void 0!==o?o:{},e.encode[t].update=null!==(a=e.encode[t].update)&&void 0!==a?a:{},e.encode[t].update[n]=r}function Km(e){const t=e.component.legends,n={};var r,i=u(he(t));try{for(i.s();!(r=i.n()).done;){const i=r.value,c=e.getScaleComponent(i),l=Z(c.get("domains"));if(n[l]){var o,a=u(n[l]);try{for(a.s();!(o=a.n()).done;){const e=o.value;Jm(e,t[i])||n[l].push(t[i])}}catch(s){a.e(s)}finally{a.f()}}else n[l]=[t[i].clone()]}}catch(s){i.e(s)}finally{i.f()}return pe(n).flat().map((t=>ev(t,e.config))).filter((e=>void 0!==e))}function ev(e,t){var n;const r=e.combine(),i=r.disable,a=r.labelExpr,s=(r.selections,o(r,["disable","labelExpr","selections"]));if(!i){if(!1===t.aria&&void 0==s.aria&&(s.aria=!1),null===(n=s.encode)||void 0===n?void 0:n.symbols){const e=s.encode.symbols.update;!e.fill||"transparent"===e.fill.value||e.stroke||s.stroke||(e.stroke={value:"transparent"});var c,l=u(rc);try{for(l.s();!(c=l.n()).done;){const t=c.value;s[t]&&delete e[t]}}catch(h){l.e(h)}finally{l.f()}}if(s.title||delete s.title,void 0!==a){var f,d;let e=a;(null===(f=s.encode)||void 0===f||null===(d=f.labels)||void 0===d?void 0:d.update)&&Fi(s.encode.labels.update.text)&&(e=Ee(a,"datum.label",s.encode.labels.update.text.signal)),Zm(s,"labels","text",{signal:e})}return s}}function tv(e){return db(e)||fb(e)?nv(e):rv(e)}function nv(e){return e.children.reduce(((e,t)=>e.concat(t.assembleProjections())),rv(e))}function rv(e){const t=e.component.projection;if(!t||t.merged)return[];const n=t.combine(),r=n.name;if(t.data){const i={signal:"[".concat(t.size.map((e=>e.signal)).join(", "),"]")},o=t.data.reduce(((t,n)=>{const r=Fi(n)?n.signal:"data('".concat(e.lookupDataSource(n),"')");return te(t,r)||t.push(r),t}),[]);if(o.length<=0)throw new Error("Projection's fit didn't find any data sources");return[s({name:r,size:i,fit:{signal:o.length>1?"[".concat(o.join(", "),"]"):o[0]}},n)]}return[s(s({name:r},{translate:{signal:"[width / 2, height / 2]"}}),n)]}const iv=["type","clipAngle","clipExtent","center","rotate","precision","reflectX","reflectY","coefficient","distance","fraction","lobes","parallel","radius","ratio","spacing","tilt"];class ov extends kl{constructor(e,t,n,r){super(s({},t),{name:e}),this.specifiedProjection=t,this.size=n,this.data=r,Tn(this,"merged",!1)}get isFit(){return!!this.data}}function av(e){e.component.projection=cb(e)?sv(e):lv(e)}function sv(e){if(e.hasProjection){var t;const n=e.specifiedProjection,r=!(n&&(null!=n.scale||null!=n.translate)),i=r?[e.getSizeSignalRef("width"),e.getSizeSignalRef("height")]:void 0,o=r?uv(e):void 0;return new ov(e.projectionName(!0),s(s({},null!==(t=e.config.projection)&&void 0!==t?t:{}),null!==n&&void 0!==n?n:{}),i,o)}}function uv(e){const t=[],n=e.encoding;for(var r=0,i=[[dt,ft],[pt,ht]];r<i.length;r++){const o=i[r];(Fs(n[o[0]])||Fs(n[o[1]]))&&t.push({signal:e.getName("geojson_".concat(t.length))})}return e.channelHasField(yt)&&e.typedFieldDef(yt).type===ro&&t.push({signal:e.getName("geojson_".concat(t.length))}),0===t.length&&t.push(e.requestDataName(jl.Main)),t}function cv(e,t){const n=re(iv,(n=>!N(e.explicit,n)&&!N(t.explicit,n)||!(!N(e.explicit,n)||!N(t.explicit,n)||Z(e.get(n))!==Z(t.get(n)))));if(Z(e.size)===Z(t.size)){if(n)return e;if(Z(e.explicit)===Z({}))return t;if(Z(t.explicit)===Z({}))return e}return null}function lv(e){if(0===e.children.length)return;let t;var n,r=u(e.children);try{for(r.s();!(n=r.n()).done;)av(n.value)}catch(s){r.e(s)}finally{r.f()}const i=re(e.children,(e=>{const n=e.component.projection;if(n){if(t){const e=cv(t,n);return e&&(t=e),!!e}return t=n,!0}return!0}));if(t&&i){const n=e.projectionName(!0),r=new ov(n,t.specifiedProjection,t.size,X(t.data));var o,a=u(e.children);try{for(a.s();!(o=a.n()).done;){const e=o.value,t=e.component.projection;t&&(t.isFit&&r.data.push(...e.component.projection.data),e.renameProjection(t.get("name"),n),t.merged=!0)}}catch(s){a.e(s)}finally{a.f()}return r}}function fv(e,t,n,r){if(Us(t,n)){var i,o;const a=cb(e)&&null!==(i=null!==(o=e.axis(n))&&void 0!==o?o:e.legend(n))&&void 0!==i?i:{},s=hs(t,{expr:"datum"}),u=hs(t,{expr:"datum",binSuffix:"end"});return{formulaAs:hs(t,{binSuffix:"range",forAs:!0}),formula:Oa(s,u,a.format,a.formatType,r)}}return{}}function dv(e,t){return"".concat(En(e),"_").concat(t)}function hv(e,t){return{signal:e.getName("".concat(t,"_bins")),extentSignal:e.getName("".concat(t,"_extent"))}}function pv(e,t,n){var r;const i=dv(null!==(r=Ps(n,void 0))&&void 0!==r?r:{},t);return e.getName("".concat(i,"_bins"))}function gv(e){return"as"in e}function mv(e,t,n){let r,i;r=gv(e)?B(e.as)?[e.as,"".concat(e.as,"_end")]:[e.as[0],e.as[1]]:[hs(e,{forAs:!0}),hs(e,{binSuffix:"end",forAs:!0})];const o=s({},Ps(t,void 0)),a=dv(o,e.field),u=hv(n,a),c=u.signal,l=u.extentSignal;if(Fn(o.extent)){const e=o.extent,t=e.selection;i=kg(n.getSelectionComponent(ve(t),t),e),delete o.extent}return{key:a,binComponent:s(s(s({bin:o,field:e.field,as:[r]},c?{signal:c}:{}),l?{extentSignal:l}:{}),i?{span:i}:{})}}class vv extends gd{clone(){return new vv(null,X(this.bins))}constructor(e,t){super(e),this.bins=t}static makeFromEncoding(e,t){const n=t.reduceFieldDef(((e,n,r)=>{if(os(n)&&Dn(n.bin)){const i=mv(n,n.bin,t),o=i.key,a=i.binComponent;e[o]=s(s(s({},a),e[o]),fv(t,n,r,t.config))}return e}),{});return de(n)?null:new vv(e,n)}static makeFromTransform(e,t,n){const r=mv(t,t.bin,n),i=r.key,o=r.binComponent;return new vv(e,{[i]:o})}merge(e,t){var n,r=u(he(e.bins));try{for(r.s();!(n=r.n()).done;){const r=n.value;r in this.bins?(t(e.bins[r].signal,this.bins[r].signal),this.bins[r].as=ae([...this.bins[r].as,...e.bins[r].as],K)):this.bins[r]=e.bins[r]}}catch(a){r.e(a)}finally{r.f()}var i,o=u(e.children);try{for(o.s();!(i=o.n()).done;){const t=i.value;e.removeChild(t),t.parent=this}}catch(a){o.e(a)}finally{o.f()}e.remove()}producedFields(){return new Set(pe(this.bins).map((e=>e.as)).flat(2))}dependentFields(){return new Set(pe(this.bins).map((e=>e.field)))}hash(){return"Bin ".concat(K(this.bins))}assemble(){return pe(this.bins).flatMap((e=>{const t=[],n=r(e.as),i=n[0],a=n.slice(1),c=e.bin,l=c.extent,f=o(c,["extent"]),d=s(s(s({type:"bin",field:ke(e.field),as:i,signal:e.signal},Fn(l)?{extent:null}:{extent:l}),e.span?{span:{signal:"span(".concat(e.span,")")}}:{}),f);!l&&e.extentSignal&&(t.push({type:"extent",field:ke(e.field),signal:e.extentSignal}),d.extent={signal:e.extentSignal}),t.push(d);var h,p=u(a);try{for(p.s();!(h=p.n()).done;){const e=h.value;for(let n=0;n<2;n++)t.push({type:"formula",expr:hs({field:i[n]},{expr:"datum"}),as:e[n]})}}catch(g){p.e(g)}finally{p.f()}return e.formula&&t.push({type:"formula",expr:e.formula,as:e.formulaAs}),t}))}}function yv(e,t,n,r){const i=cb(r)?r.encoding[tn(t)]:void 0;if(os(n)&&cb(r)&&$a(t,n,i,r.stack,r.markDef,r.config))e.add(hs(n,{})),e.add(hs(n,{suffix:"end"})),n.bin&&Us(n,t)&&e.add(hs(n,{binSuffix:"range"}));else if(Lt(t)){const n=jt(t);e.add(r.getName(n))}else e.add(hs(n));return e}function bv(e,t){var n,r=u(he(t));try{for(r.s();!(n=r.n()).done;){const r=n.value,c=t[r];var i,o=u(he(c));try{for(o.s();!(i=o.n()).done;){const t=i.value;var a;r in e?e[r][t]=new Set([...null!==(a=e[r][t])&&void 0!==a?a:[],...c[t]]):e[r]={[t]:c[t]}}}catch(s){o.e(s)}finally{o.f()}}}catch(s){r.e(s)}finally{r.f()}}class xv extends gd{clone(){return new xv(null,new Set(this.dimensions),X(this.measures))}constructor(e,t,n){super(e),this.dimensions=t,this.measures=n}get groupBy(){return this.dimensions}static makeFromEncoding(e,t){let n=!1;t.forEachFieldDef((e=>{e.aggregate&&(n=!0)}));const r={},i=new Set;return n?(t.forEachFieldDef(((e,n)=>{const o=e.aggregate,a=e.field;if(o)if("count"===o){var s;r["*"]=null!==(s=r["*"])&&void 0!==s?s:{},r["*"].count=new Set([hs(e,{forAs:!0})])}else{if(Ve(o)||Ge(o)){var u;const e=Ve(o)?"argmin":"argmax",t=o[e];r[t]=null!==(u=r[t])&&void 0!==u?u:{},r[t][e]=new Set([hs({op:e,field:t},{forAs:!0})])}else{var c;r[a]=null!==(c=r[a])&&void 0!==c?c:{},r[a][o]=new Set([hs(e,{forAs:!0})])}var l;bn(n)&&"unaggregated"===t.scaleDomain(n)&&(r[a]=null!==(l=r[a])&&void 0!==l?l:{},r[a].min=new Set([hs({field:a,aggregate:"min"},{forAs:!0})]),r[a].max=new Set([hs({field:a,aggregate:"max"},{forAs:!0})]))}else yv(i,n,e,t)})),i.size+he(r).length===0?null:new xv(e,i,r)):null}static makeFromTransform(e,t){const n=new Set,r={};var i,o=u(t.aggregate);try{for(o.s();!(i=o.n()).done;){const e=i.value,t=e.op,n=e.field,o=e.as;var a,s;t&&("count"===t?(r["*"]=null!==(a=r["*"])&&void 0!==a?a:{},r["*"].count=new Set([o||hs(e,{forAs:!0})])):(r[n]=null!==(s=r[n])&&void 0!==s?s:{},r[n][t]=new Set([o||hs(e,{forAs:!0})])))}}catch(d){o.e(d)}finally{o.f()}var c,l=u(null!==(f=t.groupby)&&void 0!==f?f:[]);try{for(l.s();!(c=l.n()).done;){const e=c.value;var f;n.add(e)}}catch(d){l.e(d)}finally{l.f()}return n.size+he(r).length===0?null:new xv(e,n,r)}merge(e){return ue(this.dimensions,e.dimensions)?(bv(this.measures,e.measures),!0):(ri("different dimensions, cannot merge"),!1)}addDimensions(e){e.forEach(this.dimensions.add,this.dimensions)}dependentFields(){return new Set([...this.dimensions,...he(this.measures)])}producedFields(){const e=new Set;var t,n=u(he(this.measures));try{for(n.s();!(t=n.n()).done;){const n=t.value;var r,i=u(he(this.measures[n]));try{for(i.s();!(r=i.n()).done;){const t=r.value,i=this.measures[n][t];0===i.size?e.add("".concat(t,"_").concat(n)):i.forEach(e.add,e)}}catch(o){i.e(o)}finally{i.f()}}}catch(o){n.e(o)}finally{n.f()}return e}hash(){return"Aggregate ".concat(K({dimensions:this.dimensions,measures:this.measures}))}assemble(){const e=[],t=[],n=[];var r,i=u(he(this.measures));try{for(i.s();!(r=i.n()).done;){const i=r.value;var o,a=u(he(this.measures[i]));try{for(a.s();!(o=a.n()).done;){const r=o.value;var s,c=u(this.measures[i][r]);try{for(c.s();!(s=c.n()).done;){const o=s.value;n.push(o),e.push(r),t.push("*"===i?null:ke(i))}}catch(l){c.e(l)}finally{c.f()}}}catch(l){a.e(l)}finally{a.f()}}}catch(l){i.e(l)}finally{i.f()}return{type:"aggregate",groupby:[...this.dimensions].map(ke),ops:e,fields:t,as:n}}}class wv extends gd{constructor(e,t,n,r){super(e),this.model=t,this.name=n,this.data=r,Tn(this,"column",void 0),Tn(this,"row",void 0),Tn(this,"facet",void 0),Tn(this,"childModel",void 0);var i,o=u(Ht);try{for(o.s();!(i=o.n()).done;){const e=i.value,n=t.facet[e];if(n){const r=n.bin,i=n.sort;this[e]=s({name:t.getName("".concat(e,"_domain")),fields:[hs(n),...Dn(r)?[hs(n,{binSuffix:"end"})]:[]]},ja(i)?{sortField:i}:k(i)?{sortIndexField:Qg(n,e)}:{})}}}catch(a){o.e(a)}finally{o.f()}this.childModel=t.child}hash(){let e="Facet";var t,n=u(Ht);try{for(n.s();!(t=n.n()).done;){const n=t.value;this[n]&&(e+=" ".concat(n.charAt(0),":").concat(K(this[n])))}}catch(r){n.e(r)}finally{n.f()}return e}get fields(){const e=[];var t,n=u(Ht);try{for(n.s();!(t=n.n()).done;){const n=t.value;var r;(null===(r=this[n])||void 0===r?void 0:r.fields)&&e.push(...this[n].fields)}}catch(i){n.e(i)}finally{n.f()}return e}dependentFields(){const e=new Set(this.fields);var t,n=u(Ht);try{for(n.s();!(t=n.n()).done;){const n=t.value;this[n]&&(this[n].sortField&&e.add(this[n].sortField.field),this[n].sortIndexField&&e.add(this[n].sortIndexField))}}catch(r){n.e(r)}finally{n.f()}return e}producedFields(){return new Set}getSource(){return this.name}getChildIndependentFieldsWithStep(){const e={};var t,n=u(un);try{for(n.s();!(t=n.n()).done;){const n=t.value,r=this.childModel.component.scales[n];if(r&&!r.merged){const t=r.get("type"),i=r.get("range");if(yo(t)&&Si(i)){const t=Ay(ky(this.childModel,n));t?e[n]=t:ni(Ln(n))}}}}catch(r){n.e(r)}finally{n.f()}return e}assembleRowColumnHeaderData(e,t,n){const r={row:"y",column:"x"}[e],i=[],o=[],a=[];n&&n[r]&&(t?(i.push("distinct_".concat(n[r])),o.push("max")):(i.push(n[r]),o.push("distinct")),a.push("distinct_".concat(n[r])));const u=this[e],c=u.sortField,l=u.sortIndexField;if(c){const e=c.op,t=void 0===e?Pa:e,n=c.field;i.push(n),o.push(t),a.push(hs(c,{forAs:!0}))}else l&&(i.push(l),o.push("max"),a.push(l));return{name:this[e].name,source:null!==t&&void 0!==t?t:this.data,transform:[s({type:"aggregate",groupby:this[e].fields},i.length?{fields:i,ops:o,as:a}:{})]}}assembleFacetHeaderData(e){const t=this.model.layout.columns,n=this.model.component.layoutHeaders,r=[],i={};var o,a=u(tm);try{for(a.s();!(o=a.n()).done;){const e=o.value;var s,c=u(nm);try{for(c.s();!(s=c.n()).done;){const t=s.value;var l;const r=null!==(l=n[e]&&n[e][t])&&void 0!==l?l:[];var f,d=u(r);try{for(d.s();!(f=d.n()).done;){var h;if((null===(h=f.value.axes)||void 0===h?void 0:h.length)>0){i[e]=!0;break}}}catch(m){d.e(m)}finally{d.f()}}}catch(m){c.e(m)}finally{c.f()}if(i[e]){const n='length(data("'.concat(this.facet.name,'"))'),i="row"===e?t?{signal:"ceil(".concat(n," / ").concat(t,")")}:1:t?{signal:"min(".concat(n,", ").concat(t,")")}:{signal:n};r.push({name:"".concat(this.facet.name,"_").concat(e),transform:[{type:"sequence",start:0,stop:i}]})}}}catch(m){a.e(m)}finally{a.f()}const p=i.row,g=i.column;return(p||g)&&r.unshift(this.assembleRowColumnHeaderData("facet",null,e)),r}assemble(){const e=[];let t=null;const n=this.getChildIndependentFieldsWithStep(),r=this.column,i=this.row,o=this.facet;if(r&&i&&(n.x||n.y)){var a,s;t="cross_".concat(this.column.name,"_").concat(this.row.name);const r=[].concat(null!==(a=n.x)&&void 0!==a?a:[],null!==(s=n.y)&&void 0!==s?s:[]),i=r.map((()=>"distinct"));e.push({name:t,source:this.data,transform:[{type:"aggregate",groupby:this.fields,fields:r,ops:i}]})}for(var u=0,c=[tt,et];u<c.length;u++){const r=c[u];this[r]&&e.push(this.assembleRowColumnHeaderData(r,t,n))}if(o){const t=this.assembleFacetHeaderData(n);t&&e.push(...t)}return e}}function _v(e){return"'"===e[0]&&"'"===e[e.length-1]||'"'===e[0]&&'"'===e[e.length-1]?e.slice(1,-1):e}function Av(e,t){const n=we(e);if("number"===t)return"toNumber(".concat(n,")");if("boolean"===t)return"toBoolean(".concat(n,")");if("string"===t)return"toString(".concat(n,")");if("date"===t)return"toDate(".concat(n,")");if("flatten"===t)return n;if(0===t.indexOf("date:")){const e=_v(t.slice(5,t.length));return"timeParse(".concat(n,",'").concat(e,"')")}if(0===t.indexOf("utc:")){const e=_v(t.slice(4,t.length));return"utcParse(".concat(n,",'").concat(e,"')")}return ni(Kn(t)),null}function kv(e){const t={};return V(e.filter,(e=>{if(Vi(e)){let r=null;if(ji(e))r=Ys(e.equal);else if(Ii(e))r=Ys(e.lte);else if(Li(e))r=Ys(e.lt);else if(Ui(e))r=Ys(e.gt);else if(qi(e))r=Ys(e.gte);else if(Wi(e))r=e.range[0];else if(Hi(e)){var n;r=(null!==(n=e.oneOf)&&void 0!==n?n:e.in)[0]}r&&(ii(r)?t[e.field]="date":R(r)?t[e.field]="number":B(r)&&(t[e.field]="string")),e.timeUnit&&(t[e.field]="date")}})),t}function Ev(e){const t={};function n(e){zs(e)?t[e.field]="date":"quantitative"===e.type&&Qe(e.aggregate)?t[e.field]="number":Ce(e.field)>1?e.field in t||(t[e.field]="flatten"):ss(e)&&ja(e.sort)&&Ce(e.sort.field)>1&&(e.sort.field in t||(t[e.sort.field]="flatten"))}if((cb(e)||lb(e))&&e.forEachFieldDef(((t,r)=>{if(os(t))n(t);else{const i=Kt(r),o=e.fieldDef(i);n(s(s({},t),{},{type:o.type}))}})),cb(e)){const n=e.mark,r=e.markDef,i=e.encoding;if(Jo(n)&&!e.encoding.order){const e=i["horizontal"===r.orient?"y":"x"];Ka(e)&&"quantitative"===e.type&&!(e.field in t)&&(t[e.field]="number")}}return t}function Dv(e){const t={};if(cb(e)&&e.component.selection){var n,r=u(he(e.component.selection));try{for(r.s();!(n=r.n()).done;){const r=n.value,s=e.component.selection[r];var i,o=u(s.project.items);try{for(o.s();!(i=o.n()).done;){const e=i.value;!e.channel&&Ce(e.field)>1&&(t[e.field]="flatten")}}catch(a){o.e(a)}finally{o.f()}}}catch(a){r.e(a)}finally{r.f()}}return t}class Cv extends gd{clone(){return new Cv(null,X(this._parse))}constructor(e,t){super(e),Tn(this,"_parse",void 0),this._parse=t}hash(){return"Parse ".concat(K(this._parse))}static makeExplicit(e,t,n){let r={};const i=t.data;return!Pl(i)&&i&&i.format&&i.format.parse&&(r=i.format.parse),this.makeWithAncestors(e,r,{},n)}static makeWithAncestors(e,t,n,r){var i,o=u(he(n));try{for(o.s();!(i=o.n()).done;){const e=i.value,t=r.getWithExplicit(e);void 0!==t.value&&(t.explicit||t.value===n[e]||"derived"===t.value||"flatten"===n[e]?delete n[e]:ni(er(e,n[e],t.value)))}}catch(h){o.e(h)}finally{o.f()}var a,s=u(he(t));try{for(s.s();!(a=s.n()).done;){const e=a.value,n=r.get(e);void 0!==n&&(n===t[e]?delete t[e]:ni(er(e,t[e],n)))}}catch(h){s.e(h)}finally{s.f()}const c=new kl(t,n);r.copyAll(c);const l={};var f,d=u(he(c.combine()));try{for(d.s();!(f=d.n()).done;){const e=f.value,t=c.get(e);null!==t&&(l[e]=t)}}catch(h){d.e(h)}finally{d.f()}return 0===he(l).length||r.parseNothing?null:new Cv(e,l)}get parse(){return this._parse}merge(e){this._parse=s(s({},this._parse),e.parse),e.remove()}assembleFormatParse(){const e={};var t,n=u(he(this._parse));try{for(n.s();!(t=n.n()).done;){const n=t.value,r=this._parse[n];1===Ce(n)&&(e[n]=r)}}catch(r){n.e(r)}finally{n.f()}return e}producedFields(){return new Set(he(this._parse))}dependentFields(){return new Set(he(this._parse))}assembleTransforms(e=!1){return he(this._parse).filter((t=>!e||Ce(t)>1)).map((e=>{const t=Av(e,this._parse[e]);return t?{type:"formula",expr:t,as:De(e)}:null})).filter((e=>null!==e))}}class Mv extends gd{clone(){return new Mv(null)}constructor(e){super(e)}dependentFields(){return new Set}producedFields(){return new Set([sc])}hash(){return"Identifier"}assemble(){return{type:"identifier",as:sc}}}class Fv extends gd{clone(){return new Fv(null,this.params)}constructor(e,t){super(e),this.params=t}dependentFields(){return new Set}producedFields(){}hash(){return"Graticule ".concat(K(this.params))}assemble(){return s({type:"graticule"},!0===this.params?{}:this.params)}}class Sv extends gd{clone(){return new Sv(null,this.params)}constructor(e,t){super(e),this.params=t}dependentFields(){return new Set}producedFields(){var e;return new Set([null!==(e=this.params.as)&&void 0!==e?e:"data"])}hash(){return"Hash ".concat(K(this.params))}assemble(){return s({type:"sequence"},this.params)}}class Tv extends gd{constructor(e){var t;let n;if(super(null),Tn(this,"_data",void 0),Tn(this,"_name",void 0),Tn(this,"_generator",void 0),Pl(e=null!==(t=e)&&void 0!==t?t:{name:"source"})||(n=e.format?s({},Q(e.format,["parse"])):{}),Ol(e))this._data={values:e.values};else if(Tl(e)){if(this._data={url:e.url},!n.type){let t=/(?:\.([^.]+))?$/.exec(e.url)[1];te(["json","csv","tsv","dsv","topojson"],t)||(t="json"),n.type=t}}else Bl(e)?this._data={values:[{type:"Sphere"}]}:(Nl(e)||Pl(e))&&(this._data={});this._generator=Pl(e),e.name&&(this._name=e.name),n&&!de(n)&&(this._data.format=n)}dependentFields(){return new Set}producedFields(){}get data(){return this._data}hasName(){return!!this._name}get isGenerator(){return this._generator}get dataName(){return this._name}set dataName(e){this._name=e}set parent(e){throw new Error("Source nodes have to be roots.")}remove(){throw new Error("Source nodes are roots and cannot be removed.")}hash(){throw new Error("Cannot hash sources")}assemble(){return s(s({name:this._name},this._data),{},{transform:[]})}}function Ov(e){return e instanceof Tv||e instanceof Fv||e instanceof Sv}var Nv=new WeakMap;class Pv{constructor(){Nv.set(this,{writable:!0,value:void 0}),Nn(this,Nv,!1)}setModified(){Nn(this,Nv,!0)}get modifiedFlag(){return On(this,Nv)}}class Rv extends Pv{getNodeDepths(e,t,n){n.set(e,t);var r,i=u(e.children);try{for(i.s();!(r=i.n()).done;){const e=r.value;this.getNodeDepths(e,t+1,n)}}catch(o){i.e(o)}finally{i.f()}return n}optimize(e){const t=[...this.getNodeDepths(e,0,new Map).entries()].sort(((e,t)=>t[1]-e[1]));var n,r=u(t);try{for(r.s();!(n=r.n()).done;){const e=n.value;this.run(e[0])}}catch(i){r.e(i)}finally{r.f()}return this.modifiedFlag}}class Bv extends Pv{optimize(e){this.run(e);var t,n=u(e.children);try{for(n.s();!(t=n.n()).done;){const e=t.value;this.optimize(e)}}catch(r){n.e(r)}finally{n.f()}return this.modifiedFlag}}class zv extends Bv{mergeNodes(e,t){const n=t.shift();var r,i=u(t);try{for(i.s();!(r=i.n()).done;){const t=r.value;e.removeChild(t),t.parent=n,t.remove()}}catch(o){i.e(o)}finally{i.f()}}run(e){const t=e.children.map((e=>e.hash())),n={};for(let a=0;a<t.length;a++)void 0===n[t[a]]?n[t[a]]=[e.children[a]]:n[t[a]].push(e.children[a]);var r,i=u(he(n));try{for(i.s();!(r=i.n()).done;){const t=r.value;n[t].length>1&&(this.setModified(),this.mergeNodes(e,n[t]))}}catch(o){i.e(o)}finally{i.f()}}}class jv extends Bv{constructor(e){super(),Tn(this,"requiresSelectionId",void 0),this.requiresSelectionId=e&&lh(e)}run(e){e instanceof Mv&&(this.requiresSelectionId&&(Ov(e.parent)||e.parent instanceof xv||e.parent instanceof Cv)||(this.setModified(),e.remove()))}}class Lv extends Pv{optimize(e){return this.run(e,new Set),this.modifiedFlag}run(e,t){let n=new Set;e instanceof vd&&(n=e.producedFields(),ce(n,t)&&(this.setModified(),e.removeFormulas(t),0===e.producedFields.length&&e.remove()));var r,i=u(e.children);try{for(i.s();!(r=i.n()).done;){const e=r.value;this.run(e,new Set([...t,...n]))}}catch(o){i.e(o)}finally{i.f()}}}class Iv extends Bv{constructor(){super()}run(e){e instanceof md&&!e.isRequired()&&(this.setModified(),e.remove())}}class Uv extends Rv{run(e){if(!Ov(e)&&!(e.numChildren()>1)){var t,n=u(e.children);try{for(n.s();!(t=n.n()).done;){const n=t.value;if(n instanceof Cv)if(e instanceof Cv)this.setModified(),e.merge(n);else{if(fe(e.producedFields(),n.dependentFields()))continue;this.setModified(),n.swapWithParent()}}}catch(r){n.e(r)}finally{n.f()}}}}class qv extends Rv{run(e){const t=[...e.children],n=e.children.filter((e=>e instanceof Cv));if(e.numChildren()>1&&n.length>=1){const g={},m=new Set;var r,i=u(n);try{for(i.s();!(r=i.n()).done;){const e=r.value.parse;var o,a=u(he(e));try{for(a.s();!(o=a.n()).done;){const t=o.value;t in g?g[t]!==e[t]&&m.add(t):g[t]=e[t]}}catch(p){a.e(p)}finally{a.f()}}}catch(p){i.e(p)}finally{i.f()}var s,c=u(m);try{for(c.s();!(s=c.n()).done;)delete g[s.value]}catch(p){c.e(p)}finally{c.f()}if(!de(g)){this.setModified();const n=new Cv(e,g);var l,f=u(t);try{for(f.s();!(l=f.n()).done;){const t=l.value;if(t instanceof Cv){var d,h=u(he(g));try{for(h.s();!(d=h.n()).done;){const e=d.value;delete t.parse[e]}}catch(p){h.e(p)}finally{h.f()}}e.removeChild(t),t.parent=n,t instanceof Cv&&0===he(t.parse).length&&t.remove()}}catch(p){f.e(p)}finally{f.f()}}}}}class Wv extends Rv{run(e){e instanceof md||e.numChildren()>0||e instanceof wv||e instanceof Tv||(this.setModified(),e.remove())}}class Hv extends Rv{run(e){const t=e.children.filter((e=>e instanceof vd)),n=t.pop();var r,i=u(t);try{for(i.s();!(r=i.n()).done;){const e=r.value;this.setModified(),n.merge(e)}}catch(o){i.e(o)}finally{i.f()}}}class Yv extends Rv{run(e){const t=e.children.filter((e=>e instanceof xv)),n={};var r,i=u(t);try{for(i.s();!(r=i.n()).done;){const e=r.value,t=K(e.groupBy);t in n||(n[t]=[]),n[t].push(e)}}catch(l){i.e(l)}finally{i.f()}var o,a=u(he(n));try{for(a.s();!(o=a.n()).done;){const t=n[o.value];if(t.length>1){const n=t.pop();var s,c=u(t);try{for(c.s();!(s=c.n()).done;){const t=s.value;n.merge(t)&&(e.removeChild(t),t.parent=n,t.remove(),this.setModified())}}catch(l){c.e(l)}finally{c.f()}}}}catch(l){a.e(l)}finally{a.f()}}}class Vv extends Rv{constructor(e){super(),this.model=e}run(e){const t=!(Ov(e)||e instanceof wg||e instanceof Cv||e instanceof Mv),n=[],r=[];var i,o=u(e.children);try{for(o.s();!(i=o.n()).done;){const o=i.value;o instanceof vv&&(t&&!fe(e.producedFields(),o.dependentFields())?n.push(o):r.push(o))}}catch(f){o.e(f)}finally{o.f()}if(n.length>0){const t=n.pop();var a,s=u(n);try{for(s.s();!(a=s.n()).done;){const e=a.value;t.merge(e,this.model.renameSignal.bind(this.model))}}catch(f){s.e(f)}finally{s.f()}this.setModified(),e instanceof vv?e.merge(t,this.model.renameSignal.bind(this.model)):t.swapWithParent()}if(r.length>1){const e=r.pop();var c,l=u(r);try{for(l.s();!(c=l.n()).done;){const t=c.value;e.merge(t,this.model.renameSignal.bind(this.model))}}catch(f){l.e(f)}finally{l.f()}this.setModified()}}}class Gv extends Rv{run(e){const t=[...e.children];if(!ne(t,(e=>e instanceof md))||e.numChildren()<=1)return;const n=[];let r;for(var i=0,o=t;i<o.length;i++){const t=o[i];if(t instanceof md){let i=t;for(;1===i.numChildren();){const e=a(i.children,1)[0];if(!(e instanceof md))break;i=e}n.push(...i.children),r?(e.removeChild(t),t.parent=r.parent,r.parent.removeChild(r),r.parent=i,this.setModified()):r=i}else n.push(t)}if(n.length){this.setModified();var s,c=u(n);try{for(c.s();!(s=c.n()).done;){const e=s.value;e.parent.removeChild(e),e.parent=r}}catch(l){c.e(l)}finally{c.f()}}}}class $v extends gd{clone(){return new $v(null,X(this.transform))}constructor(e,t){super(e),this.transform=t}addDimensions(e){this.transform.groupby=ae(this.transform.groupby.concat(e),(e=>e))}dependentFields(){const e=new Set;return this.transform.groupby&&this.transform.groupby.forEach(e.add,e),this.transform.joinaggregate.map((e=>e.field)).filter((e=>void 0!==e)).forEach(e.add,e),e}producedFields(){return new Set(this.transform.joinaggregate.map(this.getDefaultName))}getDefaultName(e){var t;return null!==(t=e.as)&&void 0!==t?t:hs(e)}hash(){return"JoinAggregateTransform ".concat(K(this.transform))}assemble(){const e=[],t=[],n=[];var r,i=u(this.transform.joinaggregate);try{for(i.s();!(r=i.n()).done;){const i=r.value;t.push(i.op),n.push(this.getDefaultName(i)),e.push(void 0===i.field?null:i.field)}}catch(a){i.e(a)}finally{i.f()}const o=this.transform.groupby;return s({type:"joinaggregate",as:n,ops:t,fields:e},void 0!==o?{groupby:o}:{})}}function Xv(e){return e.stack.stackBy.reduce(((e,t)=>{const n=hs(t.fieldDef);return n&&e.push(n),e}),[])}function Jv(e){return k(e)&&e.every((e=>B(e)))&&e.length>1}class Qv extends gd{clone(){return new Qv(null,X(this._stack))}constructor(e,t){super(e),Tn(this,"_stack",void 0),this._stack=t}static makeFromTransform(e,t){const n=t.stack,r=t.groupby,i=t.as,o=t.offset,a=void 0===o?"zero":o,s=[],c=[];if(void 0!==t.sort){var l,f=u(t.sort);try{for(f.s();!(l=f.n()).done;){const e=l.value;s.push(e.field),c.push(Me(e.order,"ascending"))}}catch(p){f.e(p)}finally{f.f()}}const d={field:s,order:c};let h;return h=Jv(i)?i:B(i)?[i,i+"_end"]:[t.stack+"_start",t.stack+"_end"],new Qv(e,{stackField:n,groupby:r,offset:a,sort:d,facetby:[],as:h})}static makeFromEncoding(e,t){const n=t.stack,r=t.encoding;if(!n)return null;const i=n.groupbyChannel,o=n.fieldChannel,a=n.offset,s=n.impute;let u;i&&(u=Ms(r[i]));const c=Xv(t),l=t.encoding.order;let f;return f=k(l)||Ka(l)?nu(l):c.reduce(((e,t)=>(e.field.push(t),e.order.push("y"===o?"descending":"ascending"),e)),{field:[],order:[]}),new Qv(e,{dimensionFieldDef:u,stackField:t.vgField(o),facetby:[],stackby:c,sort:f,offset:a,impute:s,as:[t.vgField(o,{suffix:"start",forAs:!0}),t.vgField(o,{suffix:"end",forAs:!0})]})}get stack(){return this._stack}addDimensions(e){this._stack.facetby.push(...e)}dependentFields(){const e=new Set;return e.add(this._stack.stackField),this.getGroupbyFields().forEach(e.add,e),this._stack.facetby.forEach(e.add,e),this._stack.sort.field.forEach(e.add,e),e}producedFields(){return new Set(this._stack.as)}hash(){return"Stack ".concat(K(this._stack))}getGroupbyFields(){const e=this._stack,t=e.dimensionFieldDef,n=e.impute,r=e.groupby;return t?t.bin?n?[hs(t,{binSuffix:"mid"})]:[hs(t,{}),hs(t,{binSuffix:"end"})]:[hs(t)]:null!==r&&void 0!==r?r:[]}assemble(){const e=[],t=this._stack,n=t.facetby,r=t.dimensionFieldDef,i=t.stackField,o=t.stackby,a=t.sort,s=t.offset,u=t.impute,c=t.as;if(u&&r){const t=r.band,a=void 0===t?.5:t;r.bin&&e.push({type:"formula",expr:"".concat(a,"*")+hs(r,{expr:"datum"})+"+".concat(1-a,"*")+hs(r,{expr:"datum",binSuffix:"end"}),as:hs(r,{binSuffix:"mid",forAs:!0})}),e.push({type:"impute",field:i,groupby:[...o,...n],key:hs(r,{binSuffix:"mid"}),method:"value",value:0})}return e.push({type:"stack",groupby:[...this.getGroupbyFields(),...n],field:i,sort:a,as:c,offset:s}),e}}class Zv extends gd{clone(){return new Zv(null,X(this.transform))}constructor(e,t){super(e),this.transform=t}addDimensions(e){this.transform.groupby=ae(this.transform.groupby.concat(e),(e=>e))}dependentFields(){var e,t;const n=new Set;return(null!==(e=this.transform.groupby)&&void 0!==e?e:[]).forEach(n.add,n),(null!==(t=this.transform.sort)&&void 0!==t?t:[]).forEach((e=>n.add(e.field))),this.transform.window.map((e=>e.field)).filter((e=>void 0!==e)).forEach(n.add,n),n}producedFields(){return new Set(this.transform.window.map(this.getDefaultName))}getDefaultName(e){var t;return null!==(t=e.as)&&void 0!==t?t:hs(e)}hash(){return"WindowTransform ".concat(K(this.transform))}assemble(){const e=[],t=[],n=[],r=[];var i,o=u(this.transform.window);try{for(o.s();!(i=o.n()).done;){const o=i.value;t.push(o.op),n.push(this.getDefaultName(o)),r.push(void 0===o.param?null:o.param),e.push(void 0===o.field?null:o.field)}}catch(v){o.e(v)}finally{o.f()}const a=this.transform.frame,c=this.transform.groupby;if(a&&null===a[0]&&null===a[1]&&t.every((e=>$e(e))))return s({type:"joinaggregate",as:n,ops:t,fields:e},void 0!==c?{groupby:c}:{});const l=[],f=[];if(void 0!==this.transform.sort){var d,h=u(this.transform.sort);try{for(h.s();!(d=h.n()).done;){const e=d.value;var p;l.push(e.field),f.push(null!==(p=e.order)&&void 0!==p?p:"ascending")}}catch(v){h.e(v)}finally{h.f()}}const g={field:l,order:f},m=this.transform.ignorePeers;return s(s(s({type:"window",params:r,as:n,ops:t,fields:e,sort:g},void 0!==m?{ignorePeers:m}:{}),void 0!==c?{groupby:c}:{}),void 0!==a?{frame:a}:{})}}function Kv(e){function t(n){if(!(n instanceof wv)){const a=n.clone();if(a instanceof md){const t=ny+a.getSource();a.setSource(t),e.model.component.data.outputNodes[t]=a}else(a instanceof xv||a instanceof Qv||a instanceof Zv||a instanceof $v)&&a.addDimensions(e.fields);var r,i=u(n.children.flatMap(t));try{for(i.s();!(r=i.n()).done;)r.value.parent=a}catch(o){i.e(o)}finally{i.f()}return[a]}return n.children.flatMap(t)}return t}function ey(e){if(e instanceof wv)if(1!==e.numChildren()||e.children[0]instanceof md){const i=e.model.component.data.main;ty(i);const o=Kv(e),a=e.children.map(o).flat();var t,n=u(a);try{for(n.s();!(t=n.n()).done;)t.value.parent=i}catch(r){n.e(r)}finally{n.f()}}else{const t=e.children[0];(t instanceof xv||t instanceof Qv||t instanceof Zv||t instanceof $v)&&t.addDimensions(e.fields),t.swapWithParent(),ey(e)}else e.children.map(ey)}function ty(e){if(e instanceof md&&e.type===jl.Main&&1===e.numChildren()){const t=e.children[0];t instanceof wv||(t.swapWithParent(),ty(e))}}const ny="scale_",ry=5;function iy(e){var t,n=u(e);try{for(n.s();!(t=n.n()).done;){const e=t.value;var r,i=u(e.children);try{for(i.s();!(r=i.n()).done;)if(r.value.parent!==e)return!1}catch(o){i.e(o)}finally{i.f()}if(!iy(e.children))return!1}}catch(o){n.e(o)}finally{n.f()}return!0}function oy(e,t){let n=!1;var r,i=u(t);try{for(i.s();!(r=i.n()).done;){const t=r.value;n=e.optimize(t)||n}}catch(o){i.e(o)}finally{i.f()}return n}function ay(e,t,n){let r=e.sources,i=!1;return i=oy(new Iv,r)||i,i=oy(new jv(t),r)||i,r=r.filter((e=>e.numChildren()>0)),i=oy(new Wv,r)||i,r=r.filter((e=>e.numChildren()>0)),n||(i=oy(new Uv,r)||i,i=oy(new Vv(t),r)||i,i=oy(new Lv,r)||i,i=oy(new qv,r)||i,i=oy(new Yv,r)||i,i=oy(new Hv,r)||i,i=oy(new zv,r)||i,i=oy(new Gv,r)||i),e.sources=r,i}function sy(e,t){iy(e.sources);let n=0,r=0;for(let i=0;i<ry&&ay(e,t,!0);i++)n++;e.sources.map(ey);for(let i=0;i<ry&&ay(e,t,!1);i++)r++;iy(e.sources),Math.max(n,r)===ry&&ni("Maximum optimization runs(".concat(ry,") reached."))}class uy{constructor(e){Tn(this,"signal",void 0),Object.defineProperty(this,"signal",{enumerable:!0,get:e})}static fromName(e,t){return new uy((()=>e(t)))}}function cy(e){cb(e)?ly(e):fy(e)}function ly(e){const t=e.component.scales;var n,r=u(he(t));try{for(r.s();!(n=r.n()).done;){const r=n.value,s=hy(e,r);if(t[r].setWithExplicit("domains",s),yy(e,r),e.component.data.isFaceted){let t=e;for(;!lb(t)&&t.parent;)t=t.parent;if("shared"===t.component.resolve.scale[r]){var i,o=u(s.value);try{for(o.s();!(i=o.n()).done;){const e=i.value;Ni(e)&&(e.data=ny+e.data.replace(ny,""))}}catch(a){o.e(a)}finally{o.f()}}}}}catch(a){r.e(a)}finally{r.f()}}function fy(e){var t,n=u(e.children);try{for(n.s();!(t=n.n()).done;)cy(t.value)}catch(c){n.e(c)}finally{n.f()}const r=e.component.scales;var i,o=u(he(r));try{for(o.s();!(i=o.n()).done;){const t=i.value;let n,o=null;var a,s=u(e.children);try{for(s.s();!(a=s.n()).done;){const e=a.value.component.scales[t];if(e){n=void 0===n?e.getWithExplicit("domains"):Fl(n,e.getWithExplicit("domains"),"domains","scale",wy);const t=e.get("selectionExtent");o&&t&&o.selection!==t.selection&&ni($n),o=t}}}catch(c){s.e(c)}finally{s.f()}r[t].setWithExplicit("domains",n),o&&r[t].set("selectionExtent",o,!0)}}catch(c){o.e(c)}finally{o.f()}}function dy(e,t,n,r){if("unaggregated"===e){const e=xy(t,n),r=e.valid,i=e.reason;if(!r)return void ni(i)}else if(void 0===e&&r.useUnaggregatedDomain&&xy(t,n).valid)return"unaggregated";return e}function hy(e,t){const n=e.getScaleComponent(t).get("type"),r=e.encoding,i=dy(e.scaleDomain(t),e.typedFieldDef(t),n,e.config.scale);return i!==e.scaleDomain(t)&&(e.specifiedScales[t]=s(s({},e.specifiedScales[t]),{},{domain:i})),"x"===t&&Fs(r.x2)?Fs(r.x)?Fl(my(n,i,e,"x"),my(n,i,e,"x2"),"domain","scale",wy):my(n,i,e,"x2"):"y"===t&&Fs(r.y2)?Fs(r.y)?Fl(my(n,i,e,"y"),my(n,i,e,"y2"),"domain","scale",wy):my(n,i,e,"y2"):my(n,i,e,t)}function py(e,t,n){return e.map((e=>{const r=Ls(e,{timeUnit:n,type:t});return{signal:"{data: ".concat(r,"}")}}))}function gy(e,t,n){var r;const i=null===(r=Ci(n))||void 0===r?void 0:r.unit;return"temporal"===t||i?py(e,t,i):[e]}function my(e,t,n,r){const i=Fs(n.encoding[r]),o=i.type,a=i.timeUnit;if(Eo(t)){const i=my(e,void 0,n,r),s=gy(t.unionWith,o,a);return El([...i.value,...s])}if(Fi(t))return El([t]);if(t&&"unaggregated"!==t&&!ko(t))return El(gy(t,o,a));const s=n.stack;if(s&&r===s.fieldChannel){if("normalize"===s.offset)return Dl([[0,1]]);const e=n.requestDataName(jl.Main);return Dl([{data:e,field:n.vgField(r,{suffix:"start"})},{data:e,field:n.vgField(r,{suffix:"end"})}])}const u=bn(r)&&Ka(i)?by(n,r,e):void 0;if(ts(i))return Dl(gy([i.datum],o,a));const c=i;if("unaggregated"===t){const e=n.requestDataName(jl.Main),t=i.field;return Dl([{data:e,field:hs({field:t,aggregate:"min"})},{data:e,field:hs({field:t,aggregate:"max"})}])}if(Dn(c.bin)){if(yo(e))return Dl("bin-ordinal"===e?[]:[{data:me(u)?n.requestDataName(jl.Main):n.requestDataName(jl.Raw),field:n.vgField(r,Us(c,r)?{binSuffix:"range"}:{}),sort:!0!==u&&E(u)?u:{field:n.vgField(r,{}),op:"min"}}]);{const e=c.bin;if(Dn(e)){const t=pv(n,c.field,e);return Dl([new uy((()=>{const e=n.getSignalName(t);return"[".concat(e,".start, ").concat(e,".stop]")}))])}return Dl([{data:n.requestDataName(jl.Main),field:n.vgField(r,{})}])}}if(c.timeUnit&&te(["time","utc"],e)&&$a(r,c,cb(n)?n.encoding[tn(r)]:void 0,n.stack,n.markDef,n.config)){const e=n.requestDataName(jl.Main);return Dl([{data:e,field:n.vgField(r)},{data:e,field:n.vgField(r,{suffix:"end"})}])}return Dl(u?[{data:me(u)?n.requestDataName(jl.Main):n.requestDataName(jl.Raw),field:n.vgField(r),sort:u}]:[{data:n.requestDataName(jl.Main),field:n.vgField(r)}])}function vy(e,t){const n=e.op,r=e.field,i=e.order;return s(s({op:null!==n&&void 0!==n?n:t?"sum":Pa},r?{field:ke(r)}:{}),i?{order:i}:{})}function yy(e,t){var n;const r=e.component.scales[t],i=e.specifiedScales[t].domain,o=null===(n=e.fieldDef(t))||void 0===n?void 0:n.bin,a=ko(i)&&i,s=Mn(o)&&Fn(o.extent)&&o.extent;(a||s)&&r.set("selectionExtent",null!==a&&void 0!==a?a:s,!0)}function by(e,t,n){if(!yo(n))return;const r=e.fieldDef(t),i=r.sort;if(La(i))return{op:"min",field:Qg(r,t),order:"ascending"};const o=e.stack,a=o?[...o.groupbyField?[o.groupbyField]:[],...o.stackBy.map((e=>e.fieldDef.field))]:void 0;if(ja(i))return vy(i,o&&!te(a,i.field));if(za(i)){const t=i.encoding,n=i.order,r=e.fieldDef(t),s=r.aggregate,u=r.field,c=o&&!te(a,u);if(Ve(s)||Ge(s))return vy({field:hs(r),order:n},c);if($e(s)||!s)return vy({op:s,field:u,order:n},c)}else{if("descending"===i)return{op:"min",field:e.vgField(t),order:"descending"};if(te(["ascending",void 0],i))return!0}}function xy(e,t){const n=e.aggregate,r=e.type;return n?B(n)&&!Ke[n]?{valid:!1,reason:Er(n)}:"quantitative"===r&&"log"===t?{valid:!1,reason:Dr(e)}:{valid:!0}:{valid:!1,reason:kr(e)}}function wy(e,t,n,r){return e.explicit&&t.explicit&&ni(Nr(n,r,e.value,t.value)),{explicit:e.explicit,value:[...e.value,...t.value]}}function _y(e){const t=ae(e.map((e=>Ni(e)?(e.sort,o(e,["sort"])):e)),K),n=ae(e.map((e=>{if(Ni(e)){const t=e.sort;return void 0===t||me(t)||("op"in t&&"count"===t.op&&delete t.field,"ascending"===t.order&&delete t.order),t}})).filter((e=>void 0!==e)),K);if(0===t.length)return;if(1===t.length){const t=e[0];if(Ni(t)&&n.length>0){let e=n[0];if(n.length>1)ni(Br),e=!0;else if(E(e)&&"field"in e){const n=e.field;t.field===n&&(e=!e.order||{order:e.order})}return s(s({},t),{},{sort:e})}return t}const r=ae(n.map((e=>me(e)||!("op"in e)||B(e.op)&&e.op in Ye?e:(ni(Rr(e)),!0))),K);let i;1===r.length?i=r[0]:r.length>1&&(ni(Br),i=!0);const a=ae(e.map((e=>Ni(e)?e.data:null)),(e=>e));return 1===a.length&&null!==a[0]?s({data:a[0],fields:t.map((e=>e.field))},i?{sort:i}:{}):s({fields:t},i?{sort:i}:{})}function Ay(e){if(Ni(e)&&B(e.field))return e.field;if(Ti(e)){let i;var t,n=u(e.fields);try{for(n.s();!(t=n.n()).done;){const e=t.value;if(Ni(e)&&B(e.field))if(i){if(i!==e.field)return ni(zr),i}else i=e.field}}catch(r){n.e(r)}finally{n.f()}return ni(jr),i}if(Oi(e)){ni(Lr);const t=e.fields[0];return B(t)?t:void 0}}function ky(e,t){return _y(e.component.scales[t].get("domains").map((t=>(Ni(t)&&(t.data=e.lookupDataSource(t.data)),t))))}function Ey(e){return db(e)||fb(e)?e.children.reduce(((e,t)=>e.concat(Ey(t))),Dy(e)):Dy(e)}function Dy(e){return he(e.component.scales).reduce(((t,n)=>{const r=e.component.scales[n];if(r.merged)return t;const i=r.combine(),a=i.name,u=i.type,c=i.selectionExtent,l=(i.domains,i.range,i.reverse),f=o(i,["name","type","selectionExtent","domains","range","reverse"]),d=Cy(i.range,a,n,e);let h;c&&(h=Vd(e,c));const p=ky(e,n);return t.push(s(s(s(s({name:a,type:u},p?{domain:p}:{}),h?{domainRaw:h}:{}),{},{range:d},void 0!==l?{reverse:l}:{}),f)),t}),[])}function Cy(e,t,n,r){if(cn(n)){if(Si(e))return{step:{signal:t+"_step"}}}else if(E(e)&&Ni(e))return s(s({},e),{},{data:r.lookupDataSource(e.data)});return e}class My extends kl{constructor(e,t){super({},{name:e}),Tn(this,"merged",!1),this.setWithExplicit("type",t)}domainDefinitelyIncludesZero(){return!1!==this.get("zero")||ne(this.get("domains"),(e=>k(e)&&2===e.length&&e[0]<=0&&e[1]>=0))}}const Fy=["range","scheme"];function Sy(e){return"x"===e?"width":"y"===e?"height":void 0}function Ty(e){const t=e.component.scales;var n,r=u(yn);try{for(r.s();!(n=r.n()).done;){const r=n.value,i=t[r];if(!i)continue;const o=Ny(r,e);i.setWithExplicit("range",o)}}catch(i){r.e(i)}finally{r.f()}}function Oy(e,t){const n=e.fieldDef(t);if(n&&n.bin&&Dn(n.bin)){const r=pv(e,n.field,n.bin),i=Sy(t),o=e.getName(i);return new uy((()=>{const t=e.getSignalName(r),n="(".concat(t,".stop - ").concat(t,".start) / ").concat(t,".step");return"".concat(e.getSignalName(o)," / (").concat(n,")")}))}}function Ny(e,t){const n=t.specifiedScales[e],r=t.size,i=t.getScaleComponent(e).get("type");var o,a=u(Fy);try{for(a.s();!(o=a.n()).done;){const r=o.value;if(void 0!==n[r]){const o=Fo(i,r),a=So(e,r);if(o)if(a)ni(a);else switch(r){case"range":{const r=n.range;if(k(r)){if(cn(e))return El(r.map((e=>{if("width"===e||"height"===e){const n=t.getName(e),r=t.getSignalName.bind(t);return uy.fromName(r,n)}return e})))}else if(E(r))return El({data:t.requestDataName(jl.Main),field:r.field,sort:{op:"min",field:t.vgField(e)}});return El(r)}case"scheme":return El(Py(n[r]))}else ni(Sr(i,r,e))}}}catch(f){a.e(f)}finally{a.f()}if(e===rt||e===it){const t=e===rt?"width":"height",n=r[t];if(bc(n)){if(yo(i))return El({step:n.step});ni(Tr(t))}}const s=n.rangeMin,c=n.rangeMax,l=Ry(e,t);return(void 0!==s||void 0!==c)&&Fo(i,"rangeMin")&&k(l)&&2===l.length?El([null!==s&&void 0!==s?s:l[0],null!==c&&void 0!==c?c:l[1]]):Dl(l)}function Py(e){return Ao(e)?s({scheme:e.name},Q(e,["name"])):{scheme:e}}function Ry(e,t){const n=t.size,r=t.config,i=t.mark,o=t.encoding,a=t.getSignalName.bind(t),s=Fs(o[e]).type,u=t.getScaleComponent(e).get("type"),c=t.specifiedScales[e],l=c.domain,f=c.domainMid;switch(e){case rt:case it:{if(te(["point","band"],u))if(e!==rt||n.width){if(e===it&&!n.height){const e=Dc(r.view,"height");if(bc(e))return e}}else{const e=Dc(r.view,"width");if(bc(e))return e}const i=Sy(e),o=t.getName(i);return e===it&&bo(u)?[uy.fromName(a,o),0]:[0,uy.fromName(a,o)]}case bt:{const o=jy(i,t.component.scales[e].get("zero"),r),a=Iy(i,n,t,r);return wo(u)?zy(o,a,By(u,r,l,e)):[o,a]}case ct:return[0,2*Math.PI];case xt:return[0,360];case st:return[0,new uy((()=>{const e=t.getSignalName("width"),n=t.getSignalName("height");return"min(".concat(e,",").concat(n,")/2")}))];case kt:return[r.scale.minStrokeWidth,r.scale.maxStrokeWidth];case Et:return[[1,0],[4,2],[2,1],[1,1],[1,2,4,2]];case yt:return"symbol";case gt:case mt:case vt:return"ordinal"===u?"nominal"===s?"category":"ordinal":void 0!==f?"diverging":"rect"===i||"geoshape"===i?"heatmap":"ramp";case wt:case _t:case At:return[r.scale.minOpacity,r.scale.maxOpacity]}throw new Error("Scale range undefined for channel ".concat(e))}function By(e,t,n,r){switch(e){case"quantile":return t.scale.quantileCount;case"quantize":return t.scale.quantizeCount;case"threshold":return void 0!==n&&k(n)?n.length+1:(ni(Qr(r)),3)}}function zy(e,t,n){const r=()=>{const r=Xs(t),i=Xs(e),o="(".concat(r," - ").concat(i,") / (").concat(n," - 1)");return"sequence(".concat(i,", ").concat(r," + ").concat(o,", ").concat(o,")")};return Fi(t)?new uy(r):{signal:r()}}function jy(e,t,n){if(t)return Fi(t)?{signal:"".concat(t.signal," ? 0 : ").concat(jy(e,!1,n))}:0;switch(e){case"bar":case"tick":return n.scale.minBandSize;case"line":case"trail":case"rule":return n.scale.minStrokeWidth;case"text":return n.scale.minFontSize;case"point":case"square":case"circle":return n.scale.minSize}throw new Error(pr("size",e))}const Ly=.95;function Iy(e,t,n,r){const i={x:Oy(n,"x"),y:Oy(n,"y")};switch(e){case"bar":case"tick":{if(void 0!==r.scale.maxBandSize)return r.scale.maxBandSize;const e=Uy(t,i,r.view);return R(e)?e-1:new uy((()=>"".concat(e.signal," - 1")))}case"line":case"trail":case"rule":return r.scale.maxStrokeWidth;case"text":return r.scale.maxFontSize;case"point":case"square":case"circle":{if(r.scale.maxSize)return r.scale.maxSize;const e=Uy(t,i,r.view);return R(e)?Math.pow(Ly*e,2):new uy((()=>"pow(".concat(Ly," * ").concat(e.signal,", 2)")))}}throw new Error(pr("size",e))}function Uy(e,t,n){const r=bc(e.width)?e.width.step:Ec(n,"width"),i=bc(e.height)?e.height.step:Ec(n,"height");return t.x||t.y?new uy((()=>{const e=[t.x?t.x.signal:r,t.y?t.y.signal:i];return"min(".concat(e.join(", "),")")})):Math.min(r,i)}function qy(e,t){cb(e)?Wy(e,t):Vy(e,t)}function Wy(e,t){const n=e.component.scales,r=e.config,i=e.encoding,o=e.markDef,a=e.specifiedScales;var s,c=u(he(n));try{for(c.s();!(s=c.n()).done;){const u=s.value,c=a[u],l=n[u],f=e.getScaleComponent(u),d=Fs(i[u]),h=c[t],p=f.get("type"),g=f.get("padding"),m=f.get("paddingInner"),v=Fo(p,t),y=So(u,t);if(void 0!==h&&(v?y&&ni(y):ni(Sr(p,t,u))),v&&void 0===y)if(void 0!==h){const e=d.timeUnit,n=d.type;switch(t){case"domainMax":case"domainMin":ii(c[t])||"temporal"===n||e?l.set(t,{signal:Ls(c[t],{type:n,timeUnit:e})},!0):l.set(t,c[t],!0);break;default:l.copyKeyFromObject(t,c)}}else{const n=t in Hy?Hy[t]({model:e,channel:u,fieldOrDatumDef:d,scaleType:p,scalePadding:g,scalePaddingInner:m,domain:c.domain,markDef:o,config:r}):r.scale[t];void 0!==n&&l.set(t,n,!1)}}}catch(l){c.e(l)}finally{c.f()}}const Hy={bins:({model:e,fieldOrDatumDef:t})=>Ka(t)?Gy(e,t):void 0,interpolate:({channel:e,fieldOrDatumDef:t})=>$y(e,t.type),nice:({scaleType:e,channel:t,fieldOrDatumDef:n})=>Xy(e,t,n),padding:({channel:e,scaleType:t,fieldOrDatumDef:n,markDef:r,config:i})=>Jy(e,t,i.scale,n,r,i.bar),paddingInner:({scalePadding:e,channel:t,markDef:n,config:r})=>Qy(e,t,n.type,r.scale),paddingOuter:({scalePadding:e,channel:t,scaleType:n,markDef:r,scalePaddingInner:i,config:o})=>Zy(e,t,n,r.type,i,o.scale),reverse:({fieldOrDatumDef:e,scaleType:t,channel:n,config:r})=>Ky(t,Ka(e)?e.sort:void 0,n,r.scale),zero:({channel:e,fieldOrDatumDef:t,domain:n,markDef:r,scaleType:i})=>eb(e,t,n,r,i)};function Yy(e){cb(e)?Ty(e):Vy(e,"range")}function Vy(e,t){const n=e.component.scales;var r,i=u(e.children);try{for(i.s();!(r=i.n()).done;){const e=r.value;"range"===t?Yy(e):qy(e,t)}}catch(l){i.e(l)}finally{i.f()}var o,a=u(he(n));try{for(a.s();!(o=a.n()).done;){const r=o.value;let i;var s,c=u(e.children);try{for(c.s();!(s=c.n()).done;){const e=s.value.component.scales[r];e&&(i=Fl(i,e.getWithExplicit(t),t,"scale",Cl(((e,n)=>{switch(t){case"range":return e.step&&n.step?e.step-n.step:0}return 0}))))}}catch(l){c.e(l)}finally{c.f()}n[r].setWithExplicit(t,i)}}catch(l){a.e(l)}finally{a.f()}}function Gy(e,t){const n=t.bin;if(Dn(n)){const r=pv(e,t.field,n);return new uy((()=>e.getSignalName(r)))}if(Cn(n)&&Mn(n)&&void 0!==n.step)return{step:n.step}}function $y(e,t){if(te([gt,mt,vt],e)&&"nominal"!==t)return"hcl"}function Xy(e,t,n){var r;if(!(null===(r=Ms(n))||void 0===r?void 0:r.bin)&&!te([oo.TIME,oo.UTC],e))return t in sn||void 0}function Jy(e,t,n,r,i,o){if(e in sn){if(xo(t)){if(void 0!==n.continuousPadding)return n.continuousPadding;const t=i.type,a=i.orient;if("bar"===t&&(!Ka(r)||!r.bin&&!r.timeUnit)&&("vertical"===a&&"x"===e||"horizontal"===a&&"y"===e))return o.continuousBandSize}if(t===oo.POINT)return n.pointPadding}}function Qy(e,t,n,r){if(void 0===e&&t in sn){const e=r.bandPaddingInner,t=r.barBandPaddingInner,i=r.rectBandPaddingInner;return Me(e,"bar"===n?t:i)}}function Zy(e,t,n,r,i,o){if(void 0===e&&t in sn&&n===oo.BAND)return Me(o.bandPaddingOuter,Fi(i)?{signal:"".concat(i.signal,"/2")}:i/2)}function Ky(e,t,n,r){return"x"===n&&void 0!==r.xReverse?bo(e)&&"descending"===t?Fi(r.xReverse)?{signal:"!".concat(r.xReverse.signal)}:!r.xReverse:r.xReverse:!(!bo(e)||"descending"!==t)||void 0}function eb(e,t,n,r,i){if(n&&"unaggregated"!==n&&bo(i)){if(k(n)){const e=n[0],t=n[n.length-1];if(e<=0&&t>=0)return!0}return!1}if("size"===e&&"quantitative"===t.type&&!wo(i))return!0;if((!Ka(t)||!t.bin)&&te([...un,...fn],e)){const t=r.orient;return!te(["bar","area","line","trail"],r.type)||!("horizontal"===t&&"y"===e||"vertical"===t&&"x"===e)}return!1}function tb(e,t,n,r){const i=nb(t,n,r),o=e.type;return bn(t)?void 0!==o?Oo(t,o)?Ka(n)&&!To(o,n.type)?(ni(Fr(o,i)),i):o:(ni(Mr(t,o,i)),i):i:null}function nb(e,t,n){var r;switch(t.type){case"nominal":case"ordinal":if(qt(e)||"discrete"===kn(e))return"shape"===e&&"ordinal"===t.type&&ni(yr(e,"ordinal")),"ordinal";if(e in sn){if(te(["rect","bar","image","rule"],n))return"band"}else if("arc"===n&&e in ln)return"band";return void 0!==t.band||us(t)&&(null===(r=t.axis)||void 0===r?void 0:r.tickBand)?"band":"point";case"temporal":return qt(e)?"time":"discrete"===kn(e)?(ni(yr(e,"temporal")),"ordinal"):Ka(t)&&t.timeUnit&&Ci(t.timeUnit).utc?"utc":"time";case"quantitative":return qt(e)?Ka(t)&&Dn(t.bin)?"bin-ordinal":"linear":"discrete"===kn(e)?(ni(yr(e,"quantitative")),"ordinal"):"linear";case"geojson":return}throw new Error(ur(t.type))}function rb(e,{ignoreRange:t}={}){ib(e),cy(e);var n,r=u(Mo);try{for(r.s();!(n=r.n()).done;)qy(e,n.value)}catch(i){r.e(i)}finally{r.f()}t||Yy(e)}function ib(e){cb(e)?e.component.scales=ob(e):e.component.scales=sb(e)}function ob(e){const t=e.encoding,n=e.mark;return yn.reduce(((r,i)=>{const o=Fs(t[i]);if(o&&n===Xo&&i===yt&&o.type===ro)return r;let a=o&&o.scale;if(o&&null!==a&&!1!==a){var s;a=null!==(s=a)&&void 0!==s?s:{};const t=tb(a,i,o,n);r[i]=new My(e.scaleName(i+"",!0),{value:t,explicit:a.type===t})}return r}),{})}const ab=Cl(((e,t)=>co(e)-co(t)));function sb(e){const t=e.component.scales={},n={},r=e.component.resolve;var i,o=u(e.children);try{for(o.s();!(i=o.n()).done;){const t=i.value;ib(t);var a,s=u(he(t.component.scales));try{for(s.s();!(a=s.n()).done;){const i=a.value;var c;if(r.scale[i]=null!==(c=r.scale[i])&&void 0!==c?c:xm(i,e),"shared"===r.scale[i]){const e=n[i],o=t.component.scales[i].getWithExplicit("type");e?so(e.value,o.value)?n[i]=Fl(e,o,"type","scale",ab):(r.scale[i]="independent",delete n[i]):n[i]=o}}}catch(p){s.e(p)}finally{s.f()}}}catch(p){o.e(p)}finally{o.f()}var l,f=u(he(n));try{for(f.s();!(l=f.n()).done;){const r=l.value,i=e.scaleName(r,!0),o=n[r];t[r]=new My(i,o);var d,h=u(e.children);try{for(h.s();!(d=h.n()).done;){const e=d.value,t=e.component.scales[r];t&&(e.renameScale(t.get("name"),i),t.merged=!0)}}catch(p){h.e(p)}finally{h.f()}}}catch(p){f.e(p)}finally{f.f()}return t}class ub{constructor(){Tn(this,"nameMap",void 0),this.nameMap={}}rename(e,t){this.nameMap[e]=t}has(e){return void 0!==this.nameMap[e]}get(e){for(;this.nameMap[e]&&e!==this.nameMap[e];)e=this.nameMap[e];return e}}function cb(e){return"unit"===(null===e||void 0===e?void 0:e.type)}function lb(e){return"facet"===(null===e||void 0===e?void 0:e.type)}function fb(e){return"concat"===(null===e||void 0===e?void 0:e.type)}function db(e){return"layer"===(null===e||void 0===e?void 0:e.type)}class hb{constructor(e,t,n,r,i,o,a){var u,c;this.type=t,this.parent=n,this.config=i,Tn(this,"name",void 0),Tn(this,"size",void 0),Tn(this,"title",void 0),Tn(this,"description",void 0),Tn(this,"data",void 0),Tn(this,"transforms",void 0),Tn(this,"layout",void 0),Tn(this,"scaleNameMap",void 0),Tn(this,"projectionNameMap",void 0),Tn(this,"signalNameMap",void 0),Tn(this,"component",void 0),Tn(this,"view",void 0),Tn(this,"children",[]),Tn(this,"correctDataNames",(e=>(e.from&&e.from.data&&(e.from.data=this.lookupDataSource(e.from.data)),e.from&&e.from.facet&&e.from.facet.data&&(e.from.facet.data=this.lookupDataSource(e.from.facet.data)),e))),this.parent=n,this.config=i,this.view=Po(a),this.name=null!==(u=e.name)&&void 0!==u?u:r,this.title=Ws(e.title)?{text:e.title}:e.title?this.initTitle(e.title):void 0,this.scaleNameMap=n?n.scaleNameMap:new ub,this.projectionNameMap=n?n.projectionNameMap:new ub,this.signalNameMap=n?n.signalNameMap:new ub,this.data=e.data,this.description=e.description,this.transforms=sf(null!==(c=e.transform)&&void 0!==c?c:[]),this.layout="layer"===t||"unit"===t?{}:Ac(e,t,i),this.component={data:{sources:n?n.component.data.sources:[],outputNodes:n?n.component.data.outputNodes:{},outputNodeRefCounts:n?n.component.data.outputNodeRefCounts:{},isFaceted:qa(e)||n&&n.component.data.isFaceted&&void 0===e.data},layoutSize:new kl,layoutHeaders:{row:{},column:{},facet:{}},mark:null,resolve:s({scale:{},axis:{},legend:{}},o?X(o):{}),selection:null,scales:null,projection:null,axes:{},legends:{}}}initTitle(e){const t=he(e),n={text:Ys(e.text)};var r,i=u(t);try{for(i.s();!(r=i.n()).done;){const t=r.value;n[t]=Ys(e[t])}}catch(o){i.e(o)}finally{i.f()}return n}get width(){return this.getSizeSignalRef("width")}get height(){return this.getSizeSignalRef("height")}parse(){this.parseScale(),this.parseLayoutSize(),this.renameTopLevelLayoutSizeSignal(),this.parseSelections(),this.parseProjection(),this.parseData(),this.parseAxesAndHeaders(),this.parseLegends(),this.parseMarkGroup()}parseScale(){rb(this)}parseProjection(){av(this)}renameTopLevelLayoutSizeSignal(){"width"!==this.getName("width")&&this.renameSignal(this.getName("width"),"width"),"height"!==this.getName("height")&&this.renameSignal(this.getName("height"),"height")}parseLegends(){Hm(this)}assembleGroupStyle(){var e,t;if("unit"===this.type||"layer"===this.type)return null!==(e=null===(t=this.view)||void 0===t?void 0:t.style)&&void 0!==e?e:"cell"}assembleEncodeFromView(e){e.style;const t=o(e,["style"]),n={};var r,i=u(he(t));try{for(i.s();!(r=i.n()).done;){const e=r.value,i=t[e];void 0!==i&&(n[e]=Gs(i))}}catch(a){i.e(a)}finally{i.f()}return n}assembleGroupEncodeEntry(e){let t={};var n;return this.view&&(t=this.assembleEncodeFromView(this.view)),e||(this.description&&(t.description=Gs(this.description)),"unit"!==this.type&&"layer"!==this.type)?de(t)?void 0:t:s({width:this.getSizeSignalRef("width"),height:this.getSizeSignalRef("height")},null!==(n=t)&&void 0!==n?n:{})}assembleLayout(){if(!this.layout)return;const e=this.layout,t=e.spacing,n=o(e,["spacing"]),r=this.component,i=this.config,a=dm(r.layoutHeaders,i);return s(s(s({padding:t},this.assembleDefaultLayout()),n),a?{titleBand:a}:{})}assembleDefaultLayout(){return{}}assembleHeaderMarks(){const e=this.component.layoutHeaders;let t=[];var n,r=u(Ht);try{for(r.s();!(n=r.n()).done;){const r=n.value;e[r].title&&t.push(rm(this,r))}}catch(a){r.e(a)}finally{r.f()}var i,o=u(tm);try{for(o.s();!(i=o.n()).done;){const e=i.value;t=t.concat(am(this,e))}}catch(a){o.e(a)}finally{o.f()}return t}assembleAxes(){return Tg(this.component.axes,this.config)}assembleLegends(){return Km(this)}assembleProjections(){return tv(this)}assembleTitle(){var e;const t=null!==(e=this.title)&&void 0!==e?e:{},n=t.encoding,r=o(t,["encoding"]),i=s(s(s({},qs(this.config.title).nonMark),r),n?{encode:{update:n}}:{});var a,u;if(i.text)return te(["unit","layer"],this.type)?te(["middle",void 0],i.anchor)&&(i.frame=null!==(a=i.frame)&&void 0!==a?a:"group"):i.anchor=null!==(u=i.anchor)&&void 0!==u?u:"start",de(i)?void 0:i}assembleGroup(e=[]){const t={};(e=e.concat(this.assembleSignals())).length>0&&(t.signals=e);const n=this.assembleLayout();n&&(t.layout=n),t.marks=[].concat(this.assembleHeaderMarks(),this.assembleMarks());const r=!this.parent||lb(this.parent)?Ey(this):[];r.length>0&&(t.scales=r);const i=this.assembleAxes();i.length>0&&(t.axes=i);const o=this.assembleLegends();return o.length>0&&(t.legends=o),t}getName(e){return ve((this.name?this.name+"_":"")+e)}getDataName(e){return this.getName(jl[e].toLowerCase())}requestDataName(e){const t=this.getDataName(e),n=this.component.data.outputNodeRefCounts;return n[t]=(n[t]||0)+1,t}getSizeSignalRef(e){if(lb(this.parent)){const t=dn(ym(e)),n=this.component.scales[t];if(n&&!n.merged){const e=n.get("type"),r=n.get("range");if(yo(e)&&Si(r)){const e=n.get("name"),r=Ay(ky(this,t));return r?{signal:vm(e,n,hs({aggregate:"distinct",field:r},{expr:"datum"}))}:(ni(Ln(t)),null)}}}return{signal:this.signalNameMap.get(this.getName(e))}}lookupDataSource(e){const t=this.component.data.outputNodes[e];return t?t.getSource():e}getSignalName(e){return this.signalNameMap.get(e)}renameSignal(e,t){this.signalNameMap.rename(e,t)}renameScale(e,t){this.scaleNameMap.rename(e,t)}renameProjection(e,t){this.projectionNameMap.rename(e,t)}scaleName(e,t){return t?this.getName(e):Jt(e)&&bn(e)&&this.component.scales[e]||this.scaleNameMap.has(this.getName(e))?this.scaleNameMap.get(this.getName(e)):void 0}projectionName(e){return e?this.getName("projection"):this.component.projection&&!this.component.projection.merged||this.projectionNameMap.has(this.getName("projection"))?this.projectionNameMap.get(this.getName("projection")):void 0}getScaleComponent(e){if(!this.component.scales)throw new Error("getScaleComponent cannot be called before parseScale(). Make sure you have called parseScale or use parseUnitModelWithScale().");const t=this.component.scales[e];return t&&!t.merged?t:this.parent?this.parent.getScaleComponent(e):void 0}getSelectionComponent(e,t){let n=this.component.selection[e];if(!n&&this.parent&&(n=this.parent.getSelectionComponent(e,t)),!n)throw new Error(Hn(t));return n}hasAxisOrientSignalRef(){var e,t;return(null===(e=this.component.axes.x)||void 0===e?void 0:e.some((e=>e.hasOrientSignalRef())))||(null===(t=this.component.axes.y)||void 0===t?void 0:t.some((e=>e.hasOrientSignalRef())))}}class pb extends hb{vgField(e,t={}){const n=this.fieldDef(e);if(n)return hs(n,t)}reduceFieldDef(e,t){return mu(this.getMapping(),((t,n,r)=>{const i=Ms(n);return i?e(t,i,r):t}),t)}forEachFieldDef(e,t){gu(this.getMapping(),((t,n)=>{const r=Ms(t);r&&e(r,n)}),t)}}class gb extends gd{clone(){return new gb(null,X(this.transform))}constructor(e,t){var n,r,i;super(e),this.transform=t,this.transform=X(t);const o=null!==(n=this.transform.as)&&void 0!==n?n:[void 0,void 0];this.transform.as=[null!==(r=o[0])&&void 0!==r?r:"value",null!==(i=o[1])&&void 0!==i?i:"density"]}dependentFields(){var e;return new Set([this.transform.density,...null!==(e=this.transform.groupby)&&void 0!==e?e:[]])}producedFields(){return new Set(this.transform.as)}hash(){return"DensityTransform ".concat(K(this.transform))}assemble(){const e=this.transform,t=e.density,n=o(e,["density"]);return s({type:"kde",field:t},n)}}class mb extends gd{clone(){return new mb(null,s({},this.filter))}constructor(e,t){super(e),this.filter=t}static make(e,t){const n=t.config,r=t.mark;if("filter"!==Zs("invalid",t.markDef,n))return null;const i=t.reduceFieldDef(((e,n,i)=>{const o=bn(i)&&t.getScaleComponent(i);return o&&bo(o.get("type"))&&"count"!==n.aggregate&&!Jo(r)&&(e[n.field]=n),e}),{});return he(i).length?new mb(e,i):null}dependentFields(){return new Set(he(this.filter))}producedFields(){return new Set}hash(){return"FilterInvalid ".concat(K(this.filter))}assemble(){const e=he(this.filter).reduce(((e,t)=>{const n=this.filter[t],r=hs(n,{expr:"datum"});return null!==n&&("temporal"===n.type?e.push("(isDate(".concat(r,") || (isValid(").concat(r,") && isFinite(+").concat(r,")))")):"quantitative"===n.type&&(e.push("isValid(".concat(r,")")),e.push("isFinite(+".concat(r,")")))),e}),[]);return e.length>0?{type:"filter",expr:e.join(" && ")}:null}}class vb extends gd{clone(){return new vb(this.parent,X(this.transform))}constructor(e,t){super(e),this.transform=t,this.transform=X(t);const n=this.transform,r=n.flatten,i=n.as,o=void 0===i?[]:i;this.transform.as=r.map(((e,t)=>{var n;return null!==(n=o[t])&&void 0!==n?n:e}))}dependentFields(){return new Set(this.transform.flatten)}producedFields(){return new Set(this.transform.as)}hash(){return"FlattenTransform ".concat(K(this.transform))}assemble(){const e=this.transform;return{type:"flatten",fields:e.flatten,as:e.as}}}class yb extends gd{clone(){return new yb(null,X(this.transform))}constructor(e,t){var n,r,i;super(e),this.transform=t,this.transform=X(t);const o=null!==(n=this.transform.as)&&void 0!==n?n:[void 0,void 0];this.transform.as=[null!==(r=o[0])&&void 0!==r?r:"key",null!==(i=o[1])&&void 0!==i?i:"value"]}dependentFields(){return new Set(this.transform.fold)}producedFields(){return new Set(this.transform.as)}hash(){return"FoldTransform ".concat(K(this.transform))}assemble(){const e=this.transform;return{type:"fold",fields:e.fold,as:e.as}}}class bb extends gd{clone(){return new bb(null,X(this.fields),this.geojson,this.signal)}static parseAll(e,t){if(t.component.projection&&!t.component.projection.isFit)return e;let n=0;for(var r=0,i=[[dt,ft],[pt,ht]];r<i.length;r++){const o=i[r].map((e=>{const n=Fs(t.encoding[e]);return Ka(n)?n.field:ts(n)?{expr:"".concat(n.datum)}:as(n)?{expr:"".concat(n.value)}:void 0}));(o[0]||o[1])&&(e=new bb(e,o,null,t.getName("geojson_".concat(n++))))}if(t.channelHasField(yt)){const r=t.typedFieldDef(yt);r.type===ro&&(e=new bb(e,null,r.field,t.getName("geojson_".concat(n++))))}return e}constructor(e,t,n,r){super(e),this.fields=t,this.geojson=n,this.signal=r}dependentFields(){var e;const t=(null!==(e=this.fields)&&void 0!==e?e:[]).filter(B);return new Set([...this.geojson?[this.geojson]:[],...t])}producedFields(){return new Set}hash(){return"GeoJSON ".concat(this.geojson," ").concat(this.signal," ").concat(K(this.fields))}assemble(){return s(s(s({type:"geojson"},this.fields?{fields:this.fields}:{}),this.geojson?{geojson:this.geojson}:{}),{},{signal:this.signal})}}class xb extends gd{clone(){return new xb(null,this.projection,X(this.fields),X(this.as))}constructor(e,t,n,r){super(e),this.projection=t,this.fields=n,this.as=r}static parseAll(e,t){if(!t.projectionName())return e;for(var n=0,r=[[dt,ft],[pt,ht]];n<r.length;n++){const i=r[n],o=i.map((e=>{const n=Fs(t.encoding[e]);return Ka(n)?n.field:ts(n)?{expr:"".concat(n.datum)}:as(n)?{expr:"".concat(n.value)}:void 0})),a=i[0]===pt?"2":"";(o[0]||o[1])&&(e=new xb(e,t.projectionName(),o,[t.getName("x"+a),t.getName("y"+a)]))}return e}dependentFields(){return new Set(this.fields.filter(B))}producedFields(){return new Set(this.as)}hash(){return"Geopoint ".concat(this.projection," ").concat(K(this.fields)," ").concat(K(this.as))}assemble(){return{type:"geopoint",projection:this.projection,fields:this.fields,as:this.as}}}class wb extends gd{clone(){return new wb(null,X(this.transform))}constructor(e,t){super(e),this.transform=t}dependentFields(){var e;return new Set([this.transform.impute,this.transform.key,...null!==(e=this.transform.groupby)&&void 0!==e?e:[]])}producedFields(){return new Set([this.transform.impute])}processSequence(e){const t=e.start,n=void 0===t?0:t,r=e.stop,i=e.step,o=[n,r,...i?[i]:[]].join(",");return{signal:"sequence(".concat(o,")")}}static makeFromTransform(e,t){return new wb(e,t)}static makeFromEncoding(e,t){const n=t.encoding,r=n.x,i=n.y;if(Ka(r)&&Ka(i)){const o=r.impute?r:i.impute?i:void 0;if(void 0===o)return;const a=r.impute?i:i.impute?r:void 0,u=o.impute,c=u.method,l=u.value,f=u.frame,d=u.keyvals,h=vu(t.mark,n);return new wb(e,s(s(s(s(s({impute:o.field,key:a.field},c?{method:c}:{}),void 0!==l?{value:l}:{}),f?{frame:f}:{}),void 0!==d?{keyvals:d}:{}),h.length?{groupby:h}:{}))}return null}hash(){return"Impute ".concat(K(this.transform))}assemble(){const e=this.transform,t=e.impute,n=e.key,r=e.keyvals,i=e.method,o=e.groupby,a=e.value,u=e.frame,c=void 0===u?[null,null]:u,l=s(s(s({type:"impute",field:t,key:n},r?{keyvals:Il(r)?this.processSequence(r):r}:{}),{},{method:"value"},o?{groupby:o}:{}),{},{value:i&&"value"!==i?null:a});return i&&"value"!==i?[l,s({type:"window",as:["imputed_".concat(t,"_value")],ops:[i],fields:[t],frame:c,ignorePeers:!1},o?{groupby:o}:{}),{type:"formula",expr:"datum.".concat(t," === null ? datum.imputed_").concat(t,"_value : datum.").concat(t),as:t}]:[l]}}class _b extends gd{clone(){return new _b(null,X(this.transform))}constructor(e,t){var n,r,i;super(e),this.transform=t,this.transform=X(t);const o=null!==(n=this.transform.as)&&void 0!==n?n:[void 0,void 0];this.transform.as=[null!==(r=o[0])&&void 0!==r?r:t.on,null!==(i=o[1])&&void 0!==i?i:t.loess]}dependentFields(){var e;return new Set([this.transform.loess,this.transform.on,...null!==(e=this.transform.groupby)&&void 0!==e?e:[]])}producedFields(){return new Set(this.transform.as)}hash(){return"LoessTransform ".concat(K(this.transform))}assemble(){const e=this.transform,t=e.loess,n=e.on,r=o(e,["loess","on"]);return s({type:"loess",x:n,y:t},r)}}class Ab extends gd{clone(){return new Ab(null,X(this.transform),this.secondary)}constructor(e,t,n){super(e),this.transform=t,this.secondary=n}static make(e,t,n,r){const i=t.component.data.sources,o=n.from;let a=null;if(ql(o)){let e=Yb(o.data,i);e||(e=new Tv(o.data),i.push(e));const n=t.getName("lookup_".concat(r));a=new md(e,n,jl.Lookup,t.component.data.outputNodeRefCounts),t.component.data.outputNodes[n]=a}else if(Wl(o)){const e=o.selection;if(n=s({as:e},n),a=t.getSelectionComponent(ve(e),e).materialized,!a)throw new Error(Gn(e))}return new Ab(e,n,a.getSource())}dependentFields(){return new Set([this.transform.lookup])}producedFields(){return new Set(this.transform.as?S(this.transform.as):this.transform.from.fields)}hash(){return"Lookup ".concat(K({transform:this.transform,secondary:this.secondary}))}assemble(){let e;if(this.transform.from.fields)e=s({values:this.transform.from.fields},this.transform.as?{as:S(this.transform.as)}:{});else{let t=this.transform.as;B(t)||(ni(rr),t="_lookup"),e={as:[t]}}return s(s({type:"lookup",from:this.secondary,key:this.transform.from.key,fields:[this.transform.lookup]},e),this.transform.default?{default:this.transform.default}:{})}}class kb extends gd{clone(){return new kb(null,X(this.transform))}constructor(e,t){var n,r,i;super(e),this.transform=t,this.transform=X(t);const o=null!==(n=this.transform.as)&&void 0!==n?n:[void 0,void 0];this.transform.as=[null!==(r=o[0])&&void 0!==r?r:"prob",null!==(i=o[1])&&void 0!==i?i:"value"]}dependentFields(){var e;return new Set([this.transform.quantile,...null!==(e=this.transform.groupby)&&void 0!==e?e:[]])}producedFields(){return new Set(this.transform.as)}hash(){return"QuantileTransform ".concat(K(this.transform))}assemble(){const e=this.transform,t=e.quantile,n=o(e,["quantile"]);return s({type:"quantile",field:t},n)}}class Eb extends gd{clone(){return new Eb(null,X(this.transform))}constructor(e,t){var n,r,i;super(e),this.transform=t,this.transform=X(t);const o=null!==(n=this.transform.as)&&void 0!==n?n:[void 0,void 0];this.transform.as=[null!==(r=o[0])&&void 0!==r?r:t.on,null!==(i=o[1])&&void 0!==i?i:t.regression]}dependentFields(){var e;return new Set([this.transform.regression,this.transform.on,...null!==(e=this.transform.groupby)&&void 0!==e?e:[]])}producedFields(){return new Set(this.transform.as)}hash(){return"RegressionTransform ".concat(K(this.transform))}assemble(){const e=this.transform,t=e.regression,n=e.on,r=o(e,["regression","on"]);return s({type:"regression",x:n,y:t},r)}}class Db extends gd{clone(){return new Db(null,X(this.transform))}constructor(e,t){super(e),this.transform=t}addDimensions(e){var t;this.transform.groupby=ae((null!==(t=this.transform.groupby)&&void 0!==t?t:[]).concat(e),(e=>e))}producedFields(){}dependentFields(){var e;return new Set([this.transform.pivot,this.transform.value,...null!==(e=this.transform.groupby)&&void 0!==e?e:[]])}hash(){return"PivotTransform ".concat(K(this.transform))}assemble(){const e=this.transform,t=e.pivot,n=e.value,r=e.groupby,i=e.limit,o=e.op;return s(s(s({type:"pivot",field:t,value:n},void 0!==i?{limit:i}:{}),void 0!==o?{op:o}:{}),void 0!==r?{groupby:r}:{})}}class Cb extends gd{clone(){return new Cb(null,X(this.transform))}constructor(e,t){super(e),this.transform=t}dependentFields(){return new Set}producedFields(){return new Set}hash(){return"SampleTransform ".concat(K(this.transform))}assemble(){return{type:"sample",size:this.transform.sample}}}function Mb(e){let t=0;function n(r,i){var o;if(r instanceof Tv&&!r.isGenerator&&!Tl(r.data)&&(e.push(i),i={name:null,source:i.name,transform:[]}),r instanceof Cv&&(r.parent instanceof Tv&&!i.source?(i.format=s(s({},null!==(o=i.format)&&void 0!==o?o:{}),{},{parse:r.assembleFormatParse()}),i.transform.push(...r.assembleTransforms(!0))):i.transform.push(...r.assembleTransforms())),r instanceof wv){i.name||(i.name="data_".concat(t++)),!i.source||i.transform.length>0?(e.push(i),r.data=i.name):r.data=i.source;var a,c=u(r.assemble());try{for(c.s();!(a=c.n()).done;){const t=a.value;e.push(t)}}catch(d){c.e(d)}finally{c.f()}}else switch((r instanceof Fv||r instanceof Sv||r instanceof mb||r instanceof wg||r instanceof Jg||r instanceof xb||r instanceof bb||r instanceof xv||r instanceof Ab||r instanceof Zv||r instanceof $v||r instanceof yb||r instanceof vb||r instanceof gb||r instanceof _b||r instanceof kb||r instanceof Eb||r instanceof Mv||r instanceof Cb||r instanceof Db)&&i.transform.push(r.assemble()),(r instanceof vv||r instanceof vd||r instanceof wb||r instanceof Qv)&&i.transform.push(...r.assemble()),r instanceof md&&(i.source&&0===i.transform.length?r.setSource(i.source):r.parent instanceof md?r.setSource(i.name):(i.name||(i.name="data_".concat(t++)),r.setSource(i.name),1===r.numChildren()&&(e.push(i),i={name:null,source:i.name,transform:[]}))),r.numChildren()){case 0:r instanceof md&&(!i.source||i.transform.length>0)&&e.push(i);break;case 1:n(r.children[0],i);break;default:{i.name||(i.name="data_".concat(t++));let o=i.name;!i.source||i.transform.length>0?e.push(i):o=i.source;var l,f=u(r.children);try{for(f.s();!(l=f.n()).done;){const e=l.value;n(e,{name:null,source:o,transform:[]})}}catch(d){f.e(d)}finally{f.f()}break}}}return n}function Fb(e){const t=[],n=Mb(t);var r,i=u(e.children);try{for(i.s();!(r=i.n()).done;)n(r.value,{source:e.name,name:null,transform:[]})}catch(o){i.e(o)}finally{i.f()}return t}function Sb(e,t){const n=[],r=Mb(n);let i=0;var o,s=u(e.sources);try{for(s.s();!(o=s.n()).done;){const e=o.value;e.hasName()||(e.dataName="source_".concat(i++));const t=e.assemble();r(e,t)}}catch(_){s.e(_)}finally{s.f()}for(var c=0,l=n;c<l.length;c++){const e=l[c];0===e.transform.length&&delete e.transform}let f=0;var d,h=u(n.entries());try{for(h.s();!(d=h.n()).done;){const e=a(d.value,2),t=e[0],r=e[1];var p;0!==(null!==(p=r.transform)&&void 0!==p?p:[]).length||r.source||n.splice(f++,0,n.splice(t,1)[0])}}catch(_){h.e(_)}finally{h.f()}for(var g=0,m=n;g<m.length;g++){const t=m[g];var v,y=u(null!==(b=t.transform)&&void 0!==b?b:[]);try{for(y.s();!(v=y.n()).done;){const t=v.value;var b;"lookup"===t.type&&(t.from=e.outputNodes[t.from].getSource())}}catch(_){y.e(_)}finally{y.f()}}for(var x=0,w=n;x<w.length;x++){const e=w[x];e.name in t&&(e.values=t[e.name])}return n}function Tb(e){return"top"===e||"left"===e||Fi(e)?"header":"footer"}function Ob(e){var t,n=u(Ht);try{for(n.s();!(t=n.n()).done;)Nb(e,t.value)}catch(r){n.e(r)}finally{n.f()}Rb(e,"x"),Rb(e,"y")}function Nb(e,t){const n=e.facet,r=e.config,i=e.child,o=e.component;if(e.channelHasField(t)){var a;const s=n[t],u=Kg("title",null,r,t);let c=As(s,r,{allowDisabling:!0,includeDefault:void 0===u||!!u});i.component.layoutHeaders[t].title&&(c=k(c)?c.join(", "):c,c+=" / "+i.component.layoutHeaders[t].title,i.component.layoutHeaders[t].title=null);const l=Kg("labelOrient",s,r,t),f=Me((null!==(a=s.header)&&void 0!==a?a:{}).labels,r.header.labels,!0),d=te(["bottom","right"],l)?"footer":"header";o.layoutHeaders[t]={title:c,facetFieldDef:s,[d]:"facet"===t?[]:[Pb(e,t,f)]}}}function Pb(e,t,n){const r="row"===t?"height":"width";return{labels:n,sizeSignal:e.child.component.layoutSize.get(r)?e.child.getSizeSignalRef(r):void 0,axes:[]}}function Rb(e,t){const n=e.child;if(n.component.axes[t]){const s=e.component,c=s.layoutHeaders,l=s.resolve;if(l.axis[t]=wm(l,t),"shared"===l.axis[t]){const s="x"===t?"column":"row",l=c[s];var r,i=u(n.component.axes[t]);try{for(i.s();!(r=i.n()).done;){const t=r.value;var o;const n=Tb(t.get("orient"));l[n]=null!==(o=l[n])&&void 0!==o?o:[Pb(e,s,!1)];const i=Fg(t,"main",e.config,{header:!0});i&&l[n][0].axes.push(i),t.mainExtracted=!0}}catch(a){i.e(a)}finally{i.f()}}}}function Bb(e){jb(e),Lb(e,"width"),Lb(e,"height")}function zb(e){jb(e);const t=1===e.layout.columns?"width":"childWidth",n=void 0===e.layout.columns?"height":"childHeight";Lb(e,t),Lb(e,n)}function jb(e){var t,n=u(e.children);try{for(n.s();!(t=n.n()).done;)t.value.parseLayoutSize()}catch(r){n.e(r)}finally{n.f()}}function Lb(e,t){const n=ym(t),r=dn(n),i=e.component.resolve,o=e.component.layoutSize;let a;var s,c=u(e.children);try{for(c.s();!(s=c.n()).done;){const e=s.value.component.layoutSize.getWithExplicit(n),t=i.scale[r];if("independent"===t&&"step"===e.value){a=void 0;break}if(a){if("independent"===t&&a.value!==e.value){a=void 0;break}a=Fl(a,e,n,"")}else a=e}}catch(d){c.e(d)}finally{c.f()}if(a){var l,f=u(e.children);try{for(f.s();!(l=f.n()).done;){const r=l.value;e.renameSignal(r.getName(n),e.getName(t)),r.component.layoutSize.set(n,"merged",!1)}}catch(d){f.e(d)}finally{f.f()}o.setWithExplicit(t,a)}else o.setWithExplicit(t,{explicit:!1,value:void 0})}function Ib(e){const t=e.size,n=e.component;var r,i=u(un);try{for(i.s();!(r=i.n()).done;){const i=nn(r.value);if(t[i]){const e=t[i];n.layoutSize.set(i,bc(e)?"step":e,!0)}else{const t=Ub(e,i);n.layoutSize.set(i,t,!1)}}}catch(o){i.e(o)}finally{i.f()}}function Ub(e,t){const n="width"===t?"x":"y",r=e.config,i=e.getScaleComponent(n);if(i){const e=i.get("type"),n=i.get("range");if(yo(e)){const e=Dc(r.view,t);return Si(n)||bc(e)?"step":e}return kc(r.view,t)}if(e.hasProjection||"arc"===e.mark)return kc(r.view,t);{const e=Dc(r.view,t);return bc(e)?e.step:e}}function qb(e,t,n){return hs(t,s({suffix:"by_".concat(hs(e))},null!==n&&void 0!==n?n:{}))}class Wb extends pb{constructor(e,t,n,r){super(e,"facet",t,n,r,e.resolve),Tn(this,"facet",void 0),Tn(this,"child",void 0),Tn(this,"children",void 0),this.child=Nx(e.spec,this,this.getName("child"),void 0,r),this.children=[this.child],this.facet=this.initFacet(e.facet)}initFacet(e){if(!Ia(e))return{facet:this.initFacetFieldDef(e,"facet")};const t=he(e),n={};var r,i=u(t);try{for(i.s();!(r=i.n()).done;){const t=r.value;if(!te([et,tt],t)){ni(pr(t,"facet"));break}const i=e[t];if(void 0===i.field){ni(dr(i,t));break}n[t]=this.initFacetFieldDef(i,t)}}catch(o){i.e(o)}finally{i.f()}return n}initFacetFieldDef(e,t){const n=e.header,r=Ns(o(e,["header"]),t);return n&&(r.header=Po(n)),r}channelHasField(e){return!!this.facet[e]}fieldDef(e){return this.facet[e]}parseData(){this.component.data=$b(this),this.child.parseData()}parseLayoutSize(){jb(this)}parseSelections(){this.child.parseSelections(),this.component.selection=this.child.component.selection}parseMarkGroup(){this.child.parseMarkGroup()}parseAxesAndHeaders(){this.child.parseAxesAndHeaders(),Ob(this)}assembleSelectionTopLevelSignals(e){return this.child.assembleSelectionTopLevelSignals(e)}assembleSignals(){return this.child.assembleSignals(),[]}assembleSelectionData(e){return this.child.assembleSelectionData(e)}getHeaderLayoutMixins(){const e={};var t,n=u(Ht);try{for(n.s();!(t=n.n()).done;){const n=t.value;var r,i=u(nm);try{for(i.s();!(r=i.n()).done;){const t=r.value,i=this.component.layoutHeaders[n],u=i[t],c=i.facetFieldDef;if(c){const t=Kg("titleOrient",c.header,this.config,n);if(te(["right","bottom"],t)){var o;const r=Zg(n,t);e.titleAnchor=null!==(o=e.titleAnchor)&&void 0!==o?o:{},e.titleAnchor[r]="end"}}if(null===u||void 0===u?void 0:u[0]){const r="row"===n?"height":"width",o="header"===t?"headerBand":"footerBand";var a,s;"facet"===n||this.child.component.layoutSize.get(r)||(e[o]=null!==(a=e[o])&&void 0!==a?a:{},e[o][n]=.5),i.title&&(e.offset=null!==(s=e.offset)&&void 0!==s?s:{},e.offset["row"===n?"rowTitle":"columnTitle"]=10)}}}catch(c){i.e(c)}finally{i.f()}}}catch(c){n.e(c)}finally{n.f()}return e}assembleDefaultLayout(){const e=this.facet,t=e.column,n=e.row,r=t?this.columnDistinctSignal():n?1:void 0;let i="all";return(n||"independent"!==this.component.resolve.scale.x)&&(t||"independent"!==this.component.resolve.scale.y)||(i="none"),s(s(s({},this.getHeaderLayoutMixins()),r?{columns:r}:{}),{},{bounds:"full",align:i})}assembleLayoutSignals(){return this.child.assembleLayoutSignals()}columnDistinctSignal(){if(!(this.parent&&this.parent instanceof Wb)){const e=this.getName("column_domain");return{signal:"length(data('".concat(e,"'))")}}}assembleGroup(e){return this.parent&&this.parent instanceof Wb?s(s({},this.channelHasField("column")?{encode:{update:{columns:{field:hs(this.facet.column,{prefix:"distinct"})}}}}:{}),super.assembleGroup(e)):super.assembleGroup(e)}getCardinalityAggregateForChild(){const e=[],t=[],n=[];if(this.child instanceof Wb){if(this.child.channelHasField("column")){const r=hs(this.child.facet.column);e.push(r),t.push("distinct"),n.push("distinct_".concat(r))}}else{var r,i=u(un);try{for(i.s();!(r=i.n()).done;){const i=r.value,o=this.child.component.scales[i];if(o&&!o.merged){const r=o.get("type"),a=o.get("range");if(yo(r)&&Si(a)){const r=Ay(ky(this.child,i));r?(e.push(r),t.push("distinct"),n.push("distinct_".concat(r))):ni(Ln(i))}}}}catch(o){i.e(o)}finally{i.f()}}return{fields:e,ops:t,as:n}}assembleFacet(){const e=this.component.data.facetRoot,t=e.name,n=e.data,r=this.facet,i=r.row,o=r.column,a=this.getCardinalityAggregateForChild(),c=a.fields,l=a.ops,f=a.as,d=[];var h,p=u(Ht);try{for(p.s();!(h=p.n()).done;){const e=h.value,t=this.facet[e];if(t){d.push(hs(t));const n=t.bin,r=t.sort;if(Dn(n)&&d.push(hs(t,{binSuffix:"end"})),ja(r)){const e=r.field,n=r.op,a=void 0===n?Pa:n,s=qb(t,r);i&&o?(c.push(s),l.push("max"),f.push(s)):(c.push(e),l.push(a),f.push(s))}else if(k(r)){const n=Qg(t,e);c.push(n),l.push("max"),f.push(n)}}}}catch(m){p.e(m)}finally{p.f()}const g=!!i&&!!o;return s({name:t,data:n,groupby:d},g||c.length>0?{aggregate:s(s({},g?{cross:g}:{}),c.length?{fields:c,ops:l,as:f}:{})}:{})}facetSortFields(e){const t=this.facet[e];return t?ja(t.sort)?[qb(t,t.sort,{expr:"datum"})]:k(t.sort)?[Qg(t,e,{expr:"datum"})]:[hs(t,{expr:"datum"})]:[]}facetSortOrder(e){const t=this.facet[e];if(t){const e=t.sort;return[(ja(e)?e.order:!k(e)&&e)||"ascending"]}return[]}assembleLabelTitle(){const e=this.facet,t=this.config;if(e.facet)return um(e.facet,"facet",t);const n={row:["top","bottom"],column:["left","right"]};var r,i=u(tm);try{for(i.s();!(r=i.n()).done;){const i=r.value;if(e[i]){var o;const r=Kg("labelOrient",null===(o=e[i])||void 0===o?void 0:o.header,t,i);if(te(n[i],r))return um(e[i],i,t)}}}catch(a){i.e(a)}finally{i.f()}}assembleMarks(){const e=this.child,t=Fb(this.component.data.facetRoot),n=e.assembleGroupEncodeEntry(!1),r=this.assembleLabelTitle()||e.assembleTitle(),i=e.assembleGroupStyle();return[s(s(s(s(s({name:this.getName("cell"),type:"group"},r?{title:r}:{}),i?{style:i}:{}),{},{from:{facet:this.assembleFacet()},sort:{field:Ht.map((e=>this.facetSortFields(e))).flat(),order:Ht.map((e=>this.facetSortOrder(e))).flat()}},t.length>0?{data:t}:{}),n?{encode:{update:n}}:{}),e.assembleGroup(Ud(this,[])))]}getMapping(){return this.facet}}function Hb(e,t){const n=t.row,r=t.column;if(n&&r){let t=null;for(var i=0,o=[n,r];i<o.length;i++){const n=o[i];if(ja(n.sort)){const r=n.sort,i=r.field,o=r.op;e=t=new $v(e,{joinaggregate:[{op:void 0===o?Pa:o,field:i,as:qb(n,n.sort,{forAs:!0})}],groupby:[hs(n)]})}}return t}return null}function Yb(e,t){var n,r=u(t);try{for(r.s();!(n=r.n()).done;){const t=n.value;var i,o,a,s;const r=t.data;if(e.name&&t.hasName()&&e.name!==t.dataName)continue;const u=null===(i=e.format)||void 0===i?void 0:i.mesh,c=null===(o=r.format)||void 0===o?void 0:o.feature;if(u&&c)continue;const l=null===(a=e.format)||void 0===a?void 0:a.feature;if((l||c)&&l!==c)continue;const f=null===(s=r.format)||void 0===s?void 0:s.mesh;if(!u&&!f||u===f)if(Ol(e)&&Ol(r)){if($(e.values,r.values))return t}else if(Tl(e)&&Tl(r)){if(e.url===r.url)return t}else if(Nl(e)&&e.name===t.dataName)return t}}catch(c){r.e(c)}finally{r.f()}return null}function Vb(e,t){if(e.data||!e.parent){if(null===e.data){const e=new Tv({values:[]});return t.push(e),e}const n=Yb(e.data,t);if(n)return Pl(e.data)||(n.data.format=ie({},e.data.format,n.data.format)),!n.hasName()&&e.data.name&&(n.dataName=e.data.name),n;{const n=new Tv(e.data);return t.push(n),n}}return e.parent.component.data.facetRoot?e.parent.component.data.facetRoot:e.parent.component.data.main}function Gb(e,t,n){let r=0;var i,o=u(t.transforms);try{for(o.s();!(i=o.n()).done;){const o=i.value;let d,h;if(Kl(o))h=e=new Jg(e,o),d="derived";else if(Ll(o)){var a;const r=kv(o);h=e=null!==(a=Cv.makeWithAncestors(e,{},r,n))&&void 0!==a?a:e,e=new wg(e,t,o.filter)}else if(ef(o))h=e=vv.makeFromTransform(e,o,t),d="number";else if(nf(o))d="date",void 0===n.getWithExplicit(o.field).value&&(e=new Cv(e,{[o.field]:d}),n.set(o.field,d,!1)),h=e=vd.makeFromTransform(e,o);else if(rf(o))h=e=xv.makeFromTransform(e,o),d="number",lh(t)&&(e=new Mv(e));else if(Ul(o))h=e=Ab.make(e,t,o,r++),d="derived";else if(Jl(o))h=e=new Zv(e,o),d="number";else if(Ql(o))h=e=new $v(e,o),d="number";else if(of(o))h=e=Qv.makeFromTransform(e,o),d="derived";else if(af(o))h=e=new yb(e,o),d="derived";else if(Zl(o))h=e=new vb(e,o),d="derived";else if(Hl(o))h=e=new Db(e,o),d="derived";else if(Xl(o))e=new Cb(e,o);else if(tf(o))h=e=wb.makeFromTransform(e,o),d="derived";else if(Yl(o))h=e=new gb(e,o),d="derived";else if(Vl(o))h=e=new kb(e,o),d="derived";else if(Gl(o))h=e=new Eb(e,o),d="derived";else{if(!$l(o)){ni(nr(o));continue}h=e=new _b(e,o),d="derived"}if(h&&void 0!==d){var s,c=u(null!==(l=h.producedFields())&&void 0!==l?l:[]);try{for(c.s();!(s=c.n()).done;){const e=s.value;var l;n.set(e,d,!1)}}catch(f){c.e(f)}finally{c.f()}}}}catch(f){o.e(f)}finally{o.f()}return e}function $b(e){var t,n,r;let i=Vb(e,e.component.data.sources);const o=e.component.data,a=o.outputNodes,u=o.outputNodeRefCounts,c=e.parent?e.parent.component.data.ancestorParse.clone():new Sl,l=e.data;Pl(l)?(Rl(l)?i=new Sv(i,l.sequence):zl(l)&&(i=new Fv(i,l.graticule)),c.parseNothing=!0):null===(null===l||void 0===l||null===(t=l.format)||void 0===t?void 0:t.parse)&&(c.parseNothing=!0),i=null!==(n=Cv.makeExplicit(i,e,c))&&void 0!==n?n:i,i=new Mv(i);const f=e.parent&&db(e.parent);var d;(cb(e)||lb(e))&&f&&(i=null!==(d=vv.makeFromEncoding(i,e))&&void 0!==d?d:i),e.transforms.length>0&&(i=Gb(i,e,c));const h=Dv(e),p=Ev(e);var g,m;(i=null!==(r=Cv.makeWithAncestors(i,{},s(s({},h),p),c))&&void 0!==r?r:i,cb(e)&&(i=bb.parseAll(i,e),i=xb.parseAll(i,e)),cb(e)||lb(e))&&(f||(i=null!==(m=vv.makeFromEncoding(i,e))&&void 0!==m?m:i),i=null!==(g=vd.makeFromEncoding(i,e))&&void 0!==g?g:i,i=Jg.parseAllForSortIndex(i,e));const v=e.getDataName(jl.Raw),y=new md(i,v,jl.Raw,u);if(a[v]=y,i=y,cb(e)){var b,x;const t=xv.makeFromEncoding(i,e);t&&(i=t,lh(e)&&(i=new Mv(i))),i=null!==(b=wb.makeFromEncoding(i,e))&&void 0!==b?b:i,i=null!==(x=Qv.makeFromEncoding(i,e))&&void 0!==x?x:i}var w;cb(e)&&(i=null!==(w=mb.make(i,e))&&void 0!==w?w:i);const _=e.getDataName(jl.Main),A=new md(i,_,jl.Main,u);a[_]=A,i=A,cb(e)&&Eg(e,A);let k=null;if(lb(e)){var E;const t=e.getName("facet");i=null!==(E=Hb(i,e.facet))&&void 0!==E?E:i,k=new wv(i,e,t,A.getSource()),a[t]=k}return s(s({},e.component.data),{},{outputNodes:a,outputNodeRefCounts:u,raw:y,main:A,facetRoot:k,ancestorParse:c})}class Xb extends hb{constructor(e,t,n,r){var i,o,a,s;super(e,"concat",t,n,r,e.resolve),Tn(this,"children",void 0),"shared"!==(null===(i=e.resolve)||void 0===i||null===(o=i.axis)||void 0===o?void 0:o.x)&&"shared"!==(null===(a=e.resolve)||void 0===a||null===(s=a.axis)||void 0===s?void 0:s.y)||ni(Zn),this.children=this.getChildren(e).map(((e,t)=>Nx(e,this,this.getName("concat_"+t),void 0,r)))}parseData(){this.component.data=$b(this);var e,t=u(this.children);try{for(t.s();!(e=t.n()).done;)e.value.parseData()}catch(n){t.e(n)}finally{t.f()}}parseSelections(){this.component.selection={};var e,t=u(this.children);try{for(t.s();!(e=t.n()).done;){const t=e.value;t.parseSelections();var n,r=u(he(t.component.selection));try{for(r.s();!(n=r.n()).done;){const e=n.value;this.component.selection[e]=t.component.selection[e]}}catch(i){r.e(i)}finally{r.f()}}}catch(i){t.e(i)}finally{t.f()}}parseMarkGroup(){var e,t=u(this.children);try{for(t.s();!(e=t.n()).done;)e.value.parseMarkGroup()}catch(n){t.e(n)}finally{t.f()}}parseAxesAndHeaders(){var e,t=u(this.children);try{for(t.s();!(e=t.n()).done;)e.value.parseAxesAndHeaders()}catch(n){t.e(n)}finally{t.f()}}getChildren(e){return hc(e)?e.vconcat:pc(e)?e.hconcat:e.concat}parseLayoutSize(){zb(this)}parseAxisGroup(){return null}assembleSelectionTopLevelSignals(e){return this.children.reduce(((e,t)=>t.assembleSelectionTopLevelSignals(e)),e)}assembleSignals(){return this.children.forEach((e=>e.assembleSignals())),[]}assembleLayoutSignals(){const e=pm(this);var t,n=u(this.children);try{for(n.s();!(t=n.n()).done;){const n=t.value;e.push(...n.assembleLayoutSignals())}}catch(r){n.e(r)}finally{n.f()}return e}assembleSelectionData(e){return this.children.reduce(((e,t)=>t.assembleSelectionData(e)),e)}assembleMarks(){return this.children.map((e=>{const t=e.assembleTitle(),n=e.assembleGroupStyle(),r=e.assembleGroupEncodeEntry(!1);return s(s(s(s({type:"group",name:e.getName("group")},t?{title:t}:{}),n?{style:n}:{}),r?{encode:{update:r}}:{}),e.assembleGroup())}))}assembleDefaultLayout(){const e=this.layout.columns;return s(s({},null!=e?{columns:e}:{}),{},{bounds:"full",align:"each"})}}function Jb(e){return!1===e||null===e}const Qb=s(s({disable:1,gridScale:1,scale:1},Ie),{},{labelExpr:1,encode:1}),Zb=he(Qb);class Kb extends kl{constructor(e={},t={},n=!1){super(),this.explicit=e,this.implicit=t,this.mainExtracted=n}clone(){return new Kb(X(this.explicit),X(this.implicit),this.mainExtracted)}hasAxisPart(e){return"axis"===e||("grid"===e||"title"===e?!!this.get(e):!Jb(this.get(e)))}hasOrientSignalRef(){return Fi(this.explicit.orient)}}function ex(e,t,n){var r;const i=e.encoding,o=e.config,a=null!==(r=Fs(i[t]))&&void 0!==r?r:Fs(i[tn(t)]),u=e.axis(t)||{},c=u.format,l=u.formatType;return xa(l)?s({text:Ea({fieldOrDatumDef:a,field:"datum.value",format:c,formatType:l,config:o})},n):n}function tx(e){return un.reduce(((t,n)=>(e.component.scales[n]&&(t[n]=[ux(n,e)]),t)),{})}const nx={bottom:"top",top:"bottom",left:"right",right:"left"};function rx(e){const t=e.component,n=t.axes,r=t.resolve,i={top:0,bottom:0,right:0,left:0};var o,a=u(e.children);try{for(a.s();!(o=a.n()).done;){const t=o.value;t.parseAxesAndHeaders();var s,c=u(he(t.component.axes));try{for(c.s();!(s=c.n()).done;){const i=s.value;r.axis[i]=wm(e.component.resolve,i),"shared"===r.axis[i]&&(n[i]=ix(n[i],t.component.axes[i]),n[i]||(r.axis[i]="independent",delete n[i]))}}catch(b){c.e(b)}finally{c.f()}}}catch(b){a.e(b)}finally{a.f()}var l,f=u(un);try{for(f.s();!(l=f.n()).done;){const t=l.value;var d,h=u(e.children);try{for(h.s();!(d=h.n()).done;){const e=d.value;if(e.component.axes[t]){if("independent"===r.axis[t]){var p;n[t]=(null!==(p=n[t])&&void 0!==p?p:[]).concat(e.component.axes[t]);var g,m=u(e.component.axes[t]);try{for(m.s();!(g=m.n()).done;){const e=g.value,t=e.getWithExplicit("orient"),n=t.value,r=t.explicit;if(!Fi(n)){if(i[n]>0&&!r){const t=nx[n];i[n]>i[t]&&e.set("orient",t,!1)}i[n]++}}}catch(b){m.e(b)}finally{m.f()}}delete e.component.axes[t]}}}catch(b){h.e(b)}finally{h.f()}if("independent"===r.axis[t]&&n[t]&&n[t].length>1){var v,y=u(n[t]);try{for(y.s();!(v=y.n()).done;){const e=v.value;e.get("grid")&&!e.explicit.grid&&(e.implicit.grid=!1)}}catch(b){y.e(b)}finally{y.f()}}}}catch(b){f.e(b)}finally{f.f()}}function ix(e,t){if(!e)return t.map((e=>e.clone()));{if(e.length!==t.length)return;const n=e.length;for(let r=0;r<n;r++){const n=e[r],i=t[r];if(!!n!==!!i)return;if(n&&i){const t=n.getWithExplicit("orient"),o=i.getWithExplicit("orient");if(t.explicit&&o.explicit&&t.value!==o.value)return;e[r]=ox(n,i)}}}return e}function ox(e,t){var n,r=u(Zb);try{for(r.s();!(n=r.n()).done;){const r=n.value,i=Fl(e.getWithExplicit(r),t.getWithExplicit(r),r,"axis",((e,t)=>{switch(r){case"title":return ou(e,t);case"gridScale":return{explicit:e.explicit,value:Me(e.value,t.value)}}return Ml(e,t,r,"axis")}));e.setWithExplicit(r,i)}}catch(i){r.e(i)}finally{r.f()}return e}function ax(e,t,n,r,i){if("disable"===t)return void 0!==n;switch(n=n||{},t){case"titleAngle":case"labelAngle":return e===(Fi(n.labelAngle)?n.labelAngle:Pe(n.labelAngle));case"values":return!!n.values;case"encode":return!!n.encoding||!!n.labelAngle;case"title":if(e===Gg(r,i))return!0}return e===n[t]}const sx=new Set(["grid","translate","format","formatType","orient","labelExpr","tickCount","position","tickMinStep"]);function ux(e,t){var n,r,i,o,a;let s=t.axis(e);const c=new Kb,l=Fs(t.encoding[e]),f=t.mark,d=t.config,h=(null===(n=s)||void 0===n?void 0:n.orient)||(null===(r=d["x"===e?"axisX":"axisY"])||void 0===r?void 0:r.orient)||(null===(i=d.axis)||void 0===i?void 0:i.orient)||Yg(e),p=t.getScaleComponent(e).get("type"),g=Ng(e,p,h,t.config),m=void 0!==s?!s:Rg("disable",d.style,null===(o=s)||void 0===o?void 0:o.style,g).configValue;if(c.set("disable",m,void 0!==s),m)return c;s=s||{};const v=Lg(l,s,e,d.style,g),y={fieldOrDatumDef:l,axis:s,channel:e,model:t,scaleType:p,orient:h,labelAngle:v,mark:f,config:d};var b,x=u(Zb);try{for(x.s();!(b=x.n()).done;){const n=b.value,r=n in Bg?Bg[n](y):qe(n)?s[n]:void 0,i=void 0!==r,o=ax(r,n,s,t,e);if(i&&o)c.set(n,r,o);else{const e=qe(n)&&"values"!==n?Rg(n,d.style,s.style,g):{},t=e.configValue,a=void 0===t?void 0:t,u=e.configFrom,l=void 0===u?void 0:u,f=void 0!==a;i&&!f?c.set(n,r,o):("vgAxisConfig"!==l||sx.has(n)&&f||ze(a)||Fi(a))&&c.set(n,a,!1)}}}catch(A){x.e(A)}finally{x.f()}const w=null!==(a=s.encoding)&&void 0!==a?a:{},_=je.reduce(((n,r)=>{var i;if(!c.hasAxisPart(r))return n;const o=bm(null!==(i=w[r])&&void 0!==i?i:{},t),a="labels"===r?ex(t,e,o):o;return void 0===a||de(a)||(n[r]={update:a}),n}),{});return de(_)||c.set("encode",_,!!s.encoding||void 0!==s.labelAngle),c}function cx({encoding:e,size:t}){var n,r=u(un);try{for(r.s();!(n=r.n()).done;){const r=n.value,i=nn(r);bc(t[i])&&ns(e[r])&&(delete t[i],ni(Tr(i)))}}catch(i){r.e(i)}finally{r.f()}return t}function lx(e,t,n){const r=Po(e),i=Zs("orient",r,n);if(r.orient=px(r.type,t,i),void 0!==i&&i!==r.orient&&ni(wr(r.orient,i)),"bar"===r.type&&r.orient){const e=Zs("cornerRadiusEnd",r,n);if(void 0!==e){const n="horizontal"===r.orient&&t.x2||"vertical"===r.orient&&t.y2?["cornerRadius"]:oa[r.orient];var o,a=u(n);try{for(a.s();!(o=a.n()).done;)r[o.value]=e}catch(s){a.e(s)}finally{a.f()}void 0!==r.cornerRadiusEnd&&delete r.cornerRadiusEnd}}return void 0===Zs("opacity",r,n)&&(r.opacity=dx(r.type,t)),void 0===Zs("cursor",r,n)&&(r.cursor=fx(r,t,n)),r}function fx(e,t,n){return t.href||e.href||Zs("href",e,n)?"pointer":e.cursor}function dx(e,t){if(te([Uo,Yo,Go,$o],e)&&!cu(t))return.7}function hx(e,t,{graticule:n}){if(n)return!1;const r=Ks("filled",e,t),i=e.type;return Me(r,i!==Uo&&i!==Io&&i!==Wo)}function px(e,t,n){switch(e){case Uo:case Go:case $o:case Ho:case qo:case Lo:return}const r=t.x,i=t.y,o=t.x2,a=t.y2;switch(e){case jo:if(Ka(r)&&(Cn(r.bin)||Ka(i)&&i.aggregate&&!r.aggregate))return"vertical";if(Ka(i)&&(Cn(i.bin)||Ka(r)&&r.aggregate&&!i.aggregate))return"horizontal";if(a||o){if(n)return n;if(!o&&(Ka(r)&&r.type===Ki&&!Dn(r.bin)||rs(r)))return"horizontal";if(!a&&(Ka(i)&&i.type===Ki&&!Dn(i.bin)||rs(i)))return"vertical"}case Wo:if(o&&(!Ka(r)||!Cn(r.bin))&&a&&(!Ka(i)||!Cn(i.bin)))return;case zo:if(a)return Ka(i)&&Cn(i.bin)?"horizontal":"vertical";if(o)return Ka(r)&&Cn(r.bin)?"vertical":"horizontal";if(e===Wo){if(r&&!i)return"vertical";if(i&&!r)return"horizontal"}case Io:case Yo:{const t=ns(r),o=ns(i);if(t&&!o)return"tick"!==e?"horizontal":"vertical";if(!t&&o)return"tick"!==e?"vertical":"horizontal";if(t&&o){const t=r,o=i,a=t.type===to,s=o.type===to;return a&&!s?"tick"!==e?"vertical":"horizontal":!a&&s?"tick"!==e?"horizontal":"vertical":!t.aggregate&&o.aggregate?"tick"!==e?"vertical":"horizontal":t.aggregate&&!o.aggregate?"tick"!==e?"horizontal":"vertical":n||"vertical"}return n||void 0}}return"vertical"}function gx(e,t){const n=e.config;return s(s(s(s(s(s({},ad(e,{align:"ignore",baseline:"ignore",color:"include",size:"include",orient:"ignore",theta:"ignore"})),qf("x",e,{defaultPos:"mid"})),qf("y",e,{defaultPos:"mid"})),jf("size",e)),jf("angle",e)),mx(e,n,t))}function mx(e,t,n){return n?{shape:{value:n}}:jf("shape",e)}function vx(e,t,n){if(void 0===Zs("align",e,n))return"center"}function yx(e,t,n){if(void 0===Zs("baseline",e,n))return"middle"}function bx(e){var t;const n=e.config,r=e.markDef,i=r.orient,o="horizontal"===i?"width":"height",a=e.getScaleComponent("horizontal"===i?"x":"y"),s=null!==(t=Zs("size",r,n,{vgChannel:o}))&&void 0!==t?t:n.tick.bandSize;if(void 0!==s)return s;{const e=a?a.get("range"):void 0;return e&&Si(e)&&R(e.step)?3*e.step/4:3*Ec(n.view,o)/4}}const xx={arc:{vgMark:"arc",encodeEntry:e=>s(s(s(s(s({},ad(e,{align:"ignore",baseline:"ignore",color:"include",size:"ignore",orient:"ignore",theta:"ignore"})),qf("x",e,{defaultPos:"mid"})),qf("y",e,{defaultPos:"mid"})),Kf(e,"radius","arc")),Kf(e,"theta","arc"))},area:{vgMark:"area",encodeEntry:e=>s(s(s(s({},ad(e,{align:"ignore",baseline:"ignore",color:"include",orient:"include",size:"ignore",theta:"ignore"})),$f("x",e,{defaultPos:"zeroOrMin",defaultPos2:"zeroOrMin",range:"horizontal"===e.markDef.orient})),$f("y",e,{defaultPos:"zeroOrMin",defaultPos2:"zeroOrMin",range:"vertical"===e.markDef.orient})),ld(e))},bar:{vgMark:"rect",encodeEntry:e=>s(s(s({},ad(e,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"})),Kf(e,"x","bar")),Kf(e,"y","bar"))},circle:{vgMark:"symbol",encodeEntry:e=>gx(e,"circle")},geoshape:{vgMark:"shape",encodeEntry:e=>s({},ad(e,{align:"ignore",baseline:"ignore",color:"include",size:"ignore",orient:"ignore",theta:"ignore"})),postEncodingTransform:e=>{const t=e.encoding.shape;return[s({type:"geoshape",projection:e.projectionName()},t&&Ka(t)&&t.type===ro?{field:hs(t,{expr:"datum"})}:{})]}},image:{vgMark:"image",encodeEntry:e=>s(s(s(s({},ad(e,{align:"ignore",baseline:"ignore",color:"ignore",orient:"ignore",size:"ignore",theta:"ignore"})),Kf(e,"x","image")),Kf(e,"y","image")),Sf(e,"url"))},line:{vgMark:"line",encodeEntry:e=>s(s(s(s(s({},ad(e,{align:"ignore",baseline:"ignore",color:"include",size:"ignore",orient:"ignore",theta:"ignore"})),qf("x",e,{defaultPos:"mid"})),qf("y",e,{defaultPos:"mid"})),jf("size",e,{vgChannel:"strokeWidth"})),ld(e))},point:{vgMark:"symbol",encodeEntry:e=>gx(e)},rect:{vgMark:"rect",encodeEntry:e=>s(s(s({},ad(e,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"})),Kf(e,"x","rect")),Kf(e,"y","rect"))},rule:{vgMark:"rule",encodeEntry:e=>{const t=e.markDef.orient;return e.encoding.x||e.encoding.y||e.encoding.latitude||e.encoding.longitude?s(s(s(s({},ad(e,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"})),$f("x",e,{defaultPos:"horizontal"===t?"zeroOrMax":"mid",defaultPos2:"zeroOrMin",range:"vertical"!==t})),$f("y",e,{defaultPos:"vertical"===t?"zeroOrMax":"mid",defaultPos2:"zeroOrMin",range:"horizontal"!==t})),jf("size",e,{vgChannel:"strokeWidth"})):{}}},square:{vgMark:"symbol",encodeEntry:e=>gx(e,"square")},text:{vgMark:"text",encodeEntry:e=>{const t=e.config,n=e.encoding;return s(s(s(s(s(s(s(s(s(s({},ad(e,{align:"include",baseline:"include",color:"include",size:"ignore",orient:"ignore",theta:"include"})),qf("x",e,{defaultPos:"mid"})),qf("y",e,{defaultPos:"mid"})),Sf(e)),jf("size",e,{vgChannel:"fontSize"})),jf("angle",e)),dd("align",vx(e.markDef,n,t))),dd("baseline",yx(e.markDef,n,t))),qf("radius",e,{defaultPos:null,isMidPoint:!0})),qf("theta",e,{defaultPos:null,isMidPoint:!0}))}},tick:{vgMark:"rect",encodeEntry:e=>{const t=e.config,n=e.markDef,r=n.orient,i="horizontal"===r?"width":"height",o="horizontal"===r?"height":"width";return s(s(s(s(s({},ad(e,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"})),qf("x",e,{defaultPos:"mid",vgChannel:"xc"})),qf("y",e,{defaultPos:"mid",vgChannel:"yc"})),jf("size",e,{defaultValue:bx(e),vgChannel:i})),{},{[o]:Gs(Zs("thickness",n,t))})}},trail:{vgMark:"trail",encodeEntry:e=>s(s(s(s(s({},ad(e,{align:"ignore",baseline:"ignore",color:"include",size:"include",orient:"ignore",theta:"ignore"})),qf("x",e,{defaultPos:"mid"})),qf("y",e,{defaultPos:"mid"})),jf("size",e)),ld(e))}};function wx(e){if(te([Io,zo,Vo],e.mark)){const t=vu(e.mark,e.encoding);if(t.length>0)return Ax(e,t)}else if(te([jo],e.mark)){const t=Bi.some((t=>Zs(t,e.markDef,e.config)));if(e.stack&&!e.fieldDef("size")&&t)return Ex(e)}return Cx(e)}const _x="faceted_path_";function Ax(e,t){return[{name:e.getName("pathgroup"),type:"group",from:{facet:{name:_x+e.requestDataName(jl.Main),data:e.requestDataName(jl.Main),groupby:t}},encode:{update:{width:{field:{group:"width"}},height:{field:{group:"height"}}}},marks:Cx(e,{fromPrefix:_x})}]}const kx="stack_group_";function Ex(e){const t=Cx(e,{fromPrefix:kx}),n=a(t,1)[0],r=e.scaleName(e.stack.fieldChannel),i=(t={})=>e.vgField(e.stack.fieldChannel,t),o=(e,t)=>{const n=[i({prefix:"min",suffix:"start",expr:t}),i({prefix:"max",suffix:"start",expr:t}),i({prefix:"min",suffix:"end",expr:t}),i({prefix:"max",suffix:"end",expr:t})];return"".concat(e,"(").concat(n.map((e=>"scale('".concat(r,"',").concat(e,")"))).join(","),")")};let c,l;"x"===e.stack.fieldChannel?(c=s(s({},J(n.encode.update,["y","yc","y2","height",...Bi])),{},{x:{signal:o("min","datum")},x2:{signal:o("max","datum")},clip:{value:!0}}),l={x:{field:{group:"x"},mult:-1},height:{field:{group:"height"}}},n.encode.update=s(s({},Q(n.encode.update,["y","yc","y2"])),{},{height:{field:{group:"height"}}})):(c=s(s({},J(n.encode.update,["x","xc","x2","width"])),{},{y:{signal:o("min","datum")},y2:{signal:o("max","datum")},clip:{value:!0}}),l={y:{field:{group:"y"},mult:-1},width:{field:{group:"width"}}},n.encode.update=s(s({},Q(n.encode.update,["x","xc","x2"])),{},{width:{field:{group:"width"}}}));var f,d=u(Bi);try{for(d.s();!(f=d.n()).done;){const t=f.value,r=Ks(t,e.markDef,e.config);n.encode.update[t]?(c[t]=n.encode.update[t],delete n.encode.update[t]):r&&(c[t]=Gs(r)),r&&(n.encode.update[t]={value:0})}}catch(g){d.e(g)}finally{d.f()}const h=e.fieldDef(e.stack.groupbyChannel),p=hs(h)?[hs(h)]:[];return((null===h||void 0===h?void 0:h.bin)||(null===h||void 0===h?void 0:h.timeUnit))&&p.push(hs(h,{binSuffix:"end"})),c=["stroke","strokeWidth","strokeJoin","strokeCap","strokeDash","strokeDashOffset","strokeMiterLimit","strokeOpacity"].reduce(((t,r)=>{if(n.encode.update[r])return s(s({},t),{},{[r]:n.encode.update[r]});{const n=Ks(r,e.markDef,e.config);return void 0!==n?s(s({},t),{},{[r]:Gs(n)}):t}}),c),c.stroke&&(c.strokeForeground={value:!0},c.strokeOffset={value:0}),[{type:"group",from:{facet:{data:e.requestDataName(jl.Main),name:kx+e.requestDataName(jl.Main),groupby:p,aggregate:{fields:[i({suffix:"start"}),i({suffix:"start"}),i({suffix:"end"}),i({suffix:"end"})],ops:["min","max","min","max"]}}},encode:{update:c},marks:[{type:"group",encode:{update:l},marks:[n]}]}]}function Dx(e){const t=e.encoding,n=e.stack,r=e.mark,i=e.markDef,o=e.config,a=t.order;if(!(!k(a)&&as(a)&&ee(a.value)||!a&&ee(Zs("order",i,o)))){if((k(a)||Ka(a))&&!n)return nu(a,{expr:"datum"});if(Jo(r)){const n="horizontal"===i.orient?"y":"x",r=t[n];if(Ka(r)){const t=r.sort;return k(t)?{field:hs(r,{prefix:n,suffix:"sort_index",expr:"datum"})}:ja(t)?{field:hs({aggregate:cu(e.encoding)?t.op:void 0,field:t.field},{expr:"datum"})}:za(t)?{field:hs(e.fieldDef(t.encoding),{expr:"datum"}),order:t.order}:null===t?void 0:{field:hs(r,{binSuffix:e.stack&&e.stack.impute?"mid":void 0,expr:"datum"})}}}}}function Cx(e,t={fromPrefix:""}){const n=e.mark,r=e.markDef,i=e.encoding,o=e.config,a=Me(r.clip,Mx(e),Fx(e)),u=Qs(r),c=i.key,l=Dx(e),f=Sx(e),d=Zs("aria",r,o),h=xx[n].postEncodingTransform?xx[n].postEncodingTransform(e):null;return[s(s(s(s(s(s(s({name:e.getName("marks"),type:xx[n].vgMark},a?{clip:!0}:{}),u?{style:u}:{}),c?{key:c.field}:{}),l?{sort:l}:{}),f||{}),!1===d?{aria:d}:{}),{},{from:{data:t.fromPrefix+e.requestDataName(jl.Main)},encode:{update:xx[n].encodeEntry(e)}},h?{transform:h}:{})]}function Mx(e){const t=e.getScaleComponent("x"),n=e.getScaleComponent("y");return!!(t&&t.get("selectionExtent")||n&&n.get("selectionExtent"))||void 0}function Fx(e){const t=e.component.projection;return!(!t||t.isFit)||void 0}function Sx(e){if(!e.component.selection)return null;const t=he(e.component.selection).length;let n=t,r=e.parent;for(;r&&0===n;)n=he(r.component.selection).length,r=r.parent;return n?{interactive:t>0||!!e.encoding.tooltip}:null}class Tx extends pb{constructor(e,t,n,r={},i){super(e,"unit",t,n,i,void 0,xc(e)?e.view:void 0),Tn(this,"markDef",void 0),Tn(this,"encoding",void 0),Tn(this,"specifiedScales",{}),Tn(this,"stack",void 0),Tn(this,"specifiedAxes",{}),Tn(this,"specifiedLegends",{}),Tn(this,"specifiedProjection",{}),Tn(this,"selection",{}),Tn(this,"children",[]);const o=Ko(e.mark)?s({},e.mark):{type:e.mark},a=o.type;void 0===o.filled&&(o.filled=hx(o,i,{graticule:e.data&&zl(e.data)}));const u=this.encoding=du(e.encoding||{},a,o.filled,i);this.markDef=lx(o,u,i),this.size=cx({encoding:u,size:xc(e)?s(s(s({},r),e.width?{width:e.width}:{}),e.height?{height:e.height}:{}):r}),this.stack=tl(a,u),this.specifiedScales=this.initScales(a,u),this.specifiedAxes=this.initAxes(u),this.specifiedLegends=this.initLegends(u),this.specifiedProjection=e.projection,this.selection=e.selection}get hasProjection(){const e=this.encoding,t=this.mark===Xo,n=e&&It.some((t=>is(e[t])));return t||n}scaleDomain(e){const t=this.specifiedScales[e];return t?t.domain:void 0}axis(e){return this.specifiedAxes[e]}legend(e){return this.specifiedLegends[e]}initScales(e,t){return yn.reduce(((e,n)=>{const r=Fs(t[n]);var i;return r&&(e[n]=this.initScale(null!==(i=r.scale)&&void 0!==i?i:{})),e}),{})}initScale(e){const t=e.domain,n=e.range,r=Po(e);return k(t)&&(r.domain=t.map(Ys)),k(n)&&(r.range=n.map(Ys)),r}initAxes(e){return un.reduce(((t,n)=>{const r=e[n];if(is(r)||n===rt&&is(e.x2)||n===it&&is(e.y2)){const e=is(r)?r.axis:void 0;t[n]=e?this.initAxis(s({},e)):e}return t}),{})}initAxis(e){const t=he(e),n={};var r,i=u(t);try{for(i.s();!(r=i.n()).done;){const t=r.value,i=e[t];n[t]=ze(i)?Hs(i):Ys(i)}}catch(o){i.e(o)}finally{i.f()}return n}initLegends(e){return pn.reduce(((t,n)=>{const r=Fs(e[n]);if(r&&mn(n)){const e=r.legend;t[n]=e?Po(e):e}return t}),{})}parseData(){this.component.data=$b(this)}parseLayoutSize(){Ib(this)}parseSelections(){this.component.selection=_g(this,this.selection)}parseMarkGroup(){this.component.mark=wx(this)}parseAxesAndHeaders(){this.component.axes=tx(this)}assembleSelectionTopLevelSignals(e){return qd(this,e)}assembleSignals(){return[...Sg(this),...Id(this,[])]}assembleSelectionData(e){return Wd(this,e)}assembleLayout(){return null}assembleLayoutSignals(){return pm(this)}assembleMarks(){var e;let t=null!==(e=this.component.mark)&&void 0!==e?e:[];return this.parent&&db(this.parent)||(t=Hd(this,t)),t.map(this.correctDataNames)}getMapping(){return this.encoding}get mark(){return this.markDef.type}channelHasField(e){return uu(this.encoding,e)}fieldDef(e){return Ms(this.encoding[e])}typedFieldDef(e){const t=this.fieldDef(e);return os(t)?t:null}}class Ox extends hb{constructor(e,t,n,r,i){super(e,"layer",t,n,i,e.resolve,e.view),Tn(this,"children",void 0);const o=s(s(s({},r),e.width?{width:e.width}:{}),e.height?{height:e.height}:{});this.children=e.layer.map(((e,t)=>{if(Yc(e))return new Ox(e,this,this.getName("layer_"+t),o,i);if(au(e))return new Tx(e,this,this.getName("layer_"+t),o,i);throw new Error(Pn(e))}))}parseData(){this.component.data=$b(this);var e,t=u(this.children);try{for(t.s();!(e=t.n()).done;)e.value.parseData()}catch(n){t.e(n)}finally{t.f()}}parseLayoutSize(){Bb(this)}parseSelections(){this.component.selection={};var e,t=u(this.children);try{for(t.s();!(e=t.n()).done;){const t=e.value;t.parseSelections();var n,r=u(he(t.component.selection));try{for(r.s();!(n=r.n()).done;){const e=n.value;this.component.selection[e]=t.component.selection[e]}}catch(i){r.e(i)}finally{r.f()}}}catch(i){t.e(i)}finally{t.f()}}parseMarkGroup(){var e,t=u(this.children);try{for(t.s();!(e=t.n()).done;)e.value.parseMarkGroup()}catch(n){t.e(n)}finally{t.f()}}parseAxesAndHeaders(){rx(this)}assembleSelectionTopLevelSignals(e){return this.children.reduce(((e,t)=>t.assembleSelectionTopLevelSignals(e)),e)}assembleSignals(){return this.children.reduce(((e,t)=>e.concat(t.assembleSignals())),Sg(this))}assembleLayoutSignals(){return this.children.reduce(((e,t)=>e.concat(t.assembleLayoutSignals())),pm(this))}assembleSelectionData(e){return this.children.reduce(((e,t)=>t.assembleSelectionData(e)),e)}assembleTitle(){let e=super.assembleTitle();if(e)return e;var t,n=u(this.children);try{for(n.s();!(t=n.n()).done;)if(e=t.value.assembleTitle(),e)return e}catch(r){n.e(r)}finally{n.f()}}assembleLayout(){return null}assembleMarks(){return Yd(this,this.children.flatMap((e=>e.assembleMarks())))}assembleLegends(){return this.children.reduce(((e,t)=>e.concat(t.assembleLegends())),Km(this))}}function Nx(e,t,n,r,i){if(qa(e))return new Wb(e,t,n,i);if(Yc(e))return new Ox(e,t,n,r,i);if(au(e))return new Tx(e,t,n,r,i);if(fc(e))return new Xb(e,t,n,i);throw new Error(Pn(e))}function Px(e,t={}){t.logger&&ei(t.logger),t.fieldTitle&&ws(t.fieldTitle);try{const n=jc(C(t.config,e.config)),r=bl(e,n),i=Nx(r,null,"",void 0,n);return i.parse(),sy(i.component.data,i),{spec:Bx(i,Rx(e,r.autosize,n,i),e.datasets,e.usermeta),normalized:r}}finally{t.logger&&ti(),t.fieldTitle&&_s()}}function Rx(e,t,n,r){const i=r.component.layoutSize.get("width"),o=r.component.layoutSize.get("height");if(void 0===t?(t={type:"pad"},r.hasAxisOrientSignalRef()&&(t.resize=!0)):B(t)&&(t={type:t}),i&&o&&gc(t.type))if("step"===i&&"step"===o)ni(jn()),t.type="pad";else if("step"===i||"step"===o){const e="step"===i?"width":"height";ni(jn(dn(e)));const n="width"===e?"height":"width";t.type=mc(n)}return s(s(s({},1===he(t).length&&t.type?"pad"===t.type?{}:{autosize:t.type}:{autosize:t}),yc(n,!1)),yc(e,!0))}function Bx(e,t,n={},r){const i=e.config?qc(e.config):void 0,a=[].concat(e.assembleSelectionData([]),Sb(e.component.data,n)),u=e.assembleProjections(),c=e.assembleTitle(),l=e.assembleGroupStyle(),f=e.assembleGroupEncodeEntry(!0);let d=e.assembleLayoutSignals();d=d.filter((e=>"width"!==e.name&&"height"!==e.name||void 0===e.value||(t[e.name]=+e.value,!1)));const h=t.params,p=o(t,["params"]);return s(s(s(s(s(s(s(s(s({$schema:"https://vega.github.io/schema/vega/v5.json"},e.description?{description:e.description}:{}),p),c?{title:c}:{}),l?{style:l}:{}),f?{encode:{update:f}}:{}),{},{data:a},u.length>0?{projections:u}:{}),e.assembleGroup([...d,...e.assembleSelectionTopLevelSignals([]),...ac(h)])),i?{config:i}:{}),r?{usermeta:r}:{})}t.accessPathDepth=Ce,t.accessPathWithDatum=we,t.compile=Px,t.contains=te,t.deepEqual=$,t.deleteNestedProperty=be,t.duplicate=X,t.entries=ge,t.every=re,t.fieldIntersection=fe,t.flatAccessWithDatum=_e,t.getFirstDefined=Me,t.hasIntersection=ce,t.hash=K,t.internalField=Oe,t.isBoolean=me,t.isEmpty=de,t.isEqual=se,t.isInternalField=Ne,t.isNullOrFalse=ee,t.isNumeric=Re,t.keys=he,t.logicalExpr=ye,t.mergeDeep=ie,t.normalize=bl,t.normalizeAngle=Pe,t.omit=Q,t.pick=J,t.prefixGenerator=le,t.removePathFromField=De,t.replaceAll=Ee,t.replacePathInField=ke,t.resetIdCounter=Te,t.setEqual=ue,t.some=ne,t.stringify=Z,t.titleCase=xe,t.unique=ae,t.uniqueId=Se,t.vals=pe,t.varName=ve,t.version=n,Object.defineProperty(t,"__esModule",{value:!0})}(t)}).call(this,n(60).Buffer)},2366:function(e,t,n){var r=n(413),i=n(2367),o=n(220),a=n(414);e.exports=function(e){return r(e)||i(e)||o(e)||a()}},2367:function(e,t){e.exports=function(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}},2368:function(e,t,n){var r=n(1718),i=n(2369);e.exports=function(e){var t=i(e,"string");return"symbol"===r(t)?t:String(t)}},2369:function(e,t,n){var r=n(1718);e.exports=function(e,t){if("object"!==r(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!==r(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}},2370:function(e,t,n){var r=n(2371);e.exports=function(e,t){if(null==e)return{};var n,i,o=r(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(i=0;i<a.length;i++)n=a[i],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}},2371:function(e,t){e.exports=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}}}]);
//# sourceMappingURL=12.c8986959.chunk.js.map